MGM Részletterv
# UC_01_51 Menetvonalak grafikus megjelenítése RÉSZLETTERV (Core)
## 2021. január 07.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 1

**törölt:** 03


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 2/526|

#### **Dokumentum történet **

Kidolgozó változtatások követése





|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2021.01.01|Létrehozás|Ormándi Zoltán|Ellenőrizendő|
|1.01|2021.12.13|Eltérés 52821: MÁV felhasználónak a szolgálati hely információs területben a vonalirányító telefonszáma is jelenjen meg|Radics Krisztián|Ellenőrizendő|
|1.01|2022.05.17|Eltérés 61618: FOR késési adatok (IF1017) bedolgozásakor keletkező "98"- as késési főkód kezelése a PASS2-ben|Feigl Ildikó|Ellenőrizendő|
|1.02|2022.07.13|Eltérés 61423: MGM - A_0151_02 ablakon törli a kiválasztott vonalat|Ormándi Zoltán|Ellenőrizendő|
|1.03|2023.05.17|Eltérés 74514: MGM - szerver oldali feldolgozási hiba felhasználói inaktivitás után|Ormándi Zoltán|Ellenőrizendő|
|1.04|2023.06.12|Eltérés 75993: MGM - A_0151_02 - Időhenger üzemmódban alapértelmezett betöltési időszak beállítása 24 órára|Ormándi Zoltán|Ellenőrizendő|
|1.05|2023.06.21|Eltérés 76548: "FOR név" helyett "Betűkód"|Ormándi Zoltán|Ellenőrizendő|
|1.06|2023.06.22|Eltérés 61509: MGM - RDE azonosító duplán jelenik meg|Feigl Ildikó|Ellenőrizendő|
|1.07|2023.10.04|Eltérés 74827: MGM - Ki/belépő menetvonalak lekapcsolása esetén csak egy szolgálati helyet érintő menetvonalak levétele|Feigl Ildikó|Ellenőrizendő|
|2.0|2024.04.29|Eltérés 72236: PASS2-MGM - Irányítói fázis megvalósítása|Ormándi Zoltán|Ellenőrizendő|
|2.1|2024.10.01|Eltérés 94147: MGM - A_0151_03 ablak alapértelmezett beállítások|Feigl Ildikó|Ellenőrizendő|
|2.2|2024.10.21|Eltérés 95023: MGM - Vonatszámok keretezése az MGM-ben kezelt korlátozások esetén|Feigl Ildikó|Ellenőrizendő|
|3.3|2025.02.28.|Eltérés 100246: MEFI/MERÁFI - Menetengedély létrehozásakor vezérlőpálca alkalmazása (Felfüggesztve!)|Baranyi Éva||
|3.39|2025.05.06.|Eltérés 101375: MGM - MEFI/MERÁFI finomítások|Baranyi Éva||
|3.40|2025.06.11|Eltérés 99774: IF20 - HUBA IF feldolgozás kialakítása|Ormándi Zoltán||
|3.41|2025.07.03|Eltérés 93534: MGM út tengelyen a szolgálati helyhez tartozó kattintási terület beállítása|Ormándi Zoltán||
|3.42|2025.07.03|Eltérés 102741: MGM irányítói mód alapértelmezett idő lépték módosítása|Ormándi Zoltán||
|3.84|2025.07.08|Eltérés 94548: MGM - Vágányzár tényadat megegyezhet a tervadattal|Feigl Ildikó||
|3.85|2025.07.17|Eltérés 106597: MGM - Menetvonal információs területben a Menetrendi adatok fülön a Késési ok kód mezőben jelenjen meg a HUBA azonosító is|Ormándi Zoltán||
|3.86|2025.07.21|Eltérés 105188: MGM - Előrejelzés küldése TIS és VV felé előrejelzés vonal|Ormándi Zoltán||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|Col1|Col2|mentéskor|Col4|Col5|
|---|---|---|---|---|
||2025.07.21|Bug 107055: MGM - Sebességkorlátozás rögzítésekor Megjegyzés mező kötelező|Feigl Ildikó||
||2025.07.25|Eltérés 105970: MGM - Teljesítmény csökkenést ne csak Készre jelentett állapotú vonat-összeállítás esetén lehessen rögzíteni.|Feigl Ildikó||
||2025.08.06|Eltérés 105779: MGM - Szöveges megjegyzés levétele idővonalról|Feigl Ildikó||
||2025.08.06|Eltérés 105780: MGM - Szöveges megjegyzés Információs terület bővítése|Feigl Ildikó||
||2025.08.11|Eltérés 105782: MGM - Új, Vonatszám kereső mező a fejlécben|Feigl Ildikó||
|3.88|2025.08.12|Eltérés 108050: MGM - Menetvonal információs terület - Menetrendi adatok fül - Számított események megjelenítése|Ormándi Zoltán||
|3.89|2025.08.19|Eltérés 108189: MGM - Menetvonal információs területben a Menetrendi adatok és Egyéb korlátozás legyen megcserélve|Ormándi Zoltán||
|3.90|2025.08.21|Eltérés 107679: MGM - Kijelölt menetvonal vonatszáma legyen más színű, mint a nem kijelölteké|Feigl Ildikó||
|3.91|2025.08.26|Eltérés 93679: MGM - Menetvonal információs területben jelenjenek meg új adatok|Feigl Ildikó||
|3.92|2025.08.29|Eltérés 105445: MGM - HUBA Leírás mező megjelenítése|Ormándi Zoltán||


|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 3/526|


MÁV SZK Ellenőrzések követése



|Verzió|Dátum|Változtatás leírása / megjegyzések|Kidolgozta, módosította|Col5|
|---|---|---|---|---|
||||Név|Állapot|
|1.0|2021.01.01|Átadható|Ormándi Zoltán||
|2.0|2024.03.01|Átadható|Ormándi Zoltán||


MÁV Engedélyeztetés követése/ eredmény átvétele

|Verzió|Dátum|Változtatás leírása / megjegyzések|Név|Aláírás|
|---|---|---|---|---|
||||||



MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 4/526|

#### **1 Általános ismertetés **
##### **1.1 Használati eset modulkapcsolatai **

#88994, #89002, #89003



MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 5/526|

##### **1.2 Használati eset célja, feladatai **



A használati eset célja, hogy a jogosult felhasználók egy grafikus felületen keresztül
követhessék a menetvonalak terv és tény közlekedési adatait, továbbá a kiválasztott
vonal/menetirányítói szakaszra eső vágányzárok és RDE események adatait. A használati eset
ezen kívül lehetőséget biztosít a kívánt vasútvonal vagy menetirányítói szakasz kiválasztására,
a diagram megjelenítési beállításainak módosítására, a stílus adatok megjelenítésére és
módosítására, valamint különböző szűrési beállítások megadására.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

##### MGM Részletterv
#### **2 A használati eset ablakai **
##### A használati eset 3. ablaka az A_0151_03 - Megjelenítési beállítások popup ablak, amely az A_0151_01 Grafikon ablakról a „beállítások” ikon kezelésével hívható és oda lehet visszatérni.
#### **2.1 Ablakok közötti kapcsolat, navigálás **

#88994

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

MGM Részletterv
##### **2.2 A_0151_01 – Út-idő diagram **

**Ablak/lap feladatai**

Ez a felület szolgál az út-idő diagram grafikus megjelenítésére, bizonyos megjelenítési
beállítások megadására, valamint innen kezdeményezhető a további beállításokra szolgáló
felületek megnyitása.

**Ablak/lap megjelenése**

VK105782

**Ablak/lap működése**

**2.2.3.1** **Ablak elérése, betöltése**

Az ablak elérése a következő helyekről és módon lehetséges:

**1.** **IÜR főmenüből**

Az ablak megnyitásához legalább „OP_0151_MGMMegjelenit”jogosultság szükséges.

**2.** **A_0151_01 ablakon a Be/kilépő menetvonal információs területről**

A be/kilépő vonatokhoz tartozó információs területen a csatlakozó vonal vagy
menetirányítói szakasz azonosítójához tartozó link használatával. Ebben az esetben az
alábbi paramétereket adja át a hívó ablak:

   - Idő üzemmód (Időhenger/fix időszak)

   - Menetirányítói szakasz kód – csak menetirányítói szakasz esetén kitöltött

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 8/526|



   - V asútvonal belső azonosítója – csak vasútvonal esetén kitöltött

   - Nyelvi beállítás

   - Nappali/éjjeli megjelenítési üzemmód jelző

A be/kilépő menetvonal információs területről nyitott új A_0151_01 ablak is
automatikusan megnyitja az A_0151_02 – Út-idő diagram kiválasztása ablakot, mely a
kapott adatok alapján állítja be a vezérlőelemek értékeit.

**3.** **Irányítói üzemmódú A_0151_02 ablakból** [#88952]

Ebben az esetben nincs automatikus A _ 0151 _ 02 ablak megnyitás, a diagram mindig
időhenger üzemmódban nyílik meg, a kirajzolásához szükséges többi adatot a hívó ablak
adja át. Ezek az alábbiak:

    - Ábra belső azonosító (AbraId)

    - Múlt időintervallum órában

    - Jövő időintervallum órában

Az ablak minden esetben új windows ablakban nyílik meg üres diagrammal.

  - Rendszerparaméterek kódtábla betöltését végző szolgáltatást
(RendszerparameterekQuery) bemenő paraméterek nélkül hívja meg.

  - **S_0151_17** **-** **Stílusok és vonalkészletek összerendelésének lekérdezés** **e** szolgáltatást

(StilusVonalkeszletQuery) bemenő paraméterek nélkül hívja meg.

  - **S_0151_01** **–** **Megjelenítési** **beállítások** **lekérdezése** szolgáltatást
(MegjelenitesiBeallitasokQuery) a következő paraméterekkel hívja meg:

`o` Felhasználó azonosító: A felhasználó PASS2 azonosítója
`o` Ablak id: ”A_0151_01”
`o` Listadoboz id:NULL

`o` Profil név:NULL

  - **K_007_lang**  - Általános nyelvesített kódtábla betöltő (usp_K007_lang_selKodtabla)

közös szolgáltatás

**Bemenő adatok:**

’
`o` **’KodTablaNev’** = ’K_VEF .
`o` **’Nyelv** = a beállított nyelv kódja (’HU’).
`o` **’Ervenyesseg’** = rendszerdátum.

Az **S_0151_01** szolgáltatástól kapott megjelenítési beállításoknak megfelelően, az üres
diagram felett az ablak felső részében megjelennek a funkciók gyorsabb elérését szolgáló
ikonok.

Az ikonok megjelenése után automatikusan megnyílik az A_0151_02 – Út – idő diagram
kiválasztó ablak, ahol a felhasználó kiválaszthatja, hogy a diagram út tengelyén mely
szolgálati helyek jelenjenek meg és hogy milyen idő üzemmódban (fix időszak vagy
időhenger üzemódban) kívánja megnyitni a diagramot.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



**Lejjebb helyezve [23]:** Az ablakon található súgó ikon a
többi funkcionális modultól eltérően egy appsettings szinten rögzített
SP linket nyit meg egy új böngésző ablakban (Az oldal csak a
jogosult felhasználók számára érhető el). A jelenleg használt érték:¶
[https://intranet.mav.hu/rendszer/pass2/mgm/_layouts/15/start.aspx#/F](https://intranet.mav.hu/rendszer/pass2/mgm/_layouts/15/start.aspx#/Felhasznli%20kziknyv/%C3%81ltal%C3%A1nos%20r%C3%A9sz.aspx)
[elhasznli%20kziknyv/%C3%81ltal%C3%A1nos%20r%C3%A9sz.as](https://intranet.mav.hu/rendszer/pass2/mgm/_layouts/15/start.aspx#/Felhasznli%20kziknyv/%C3%81ltal%C3%A1nos%20r%C3%A9sz.aspx)
[px¶](https://intranet.mav.hu/rendszer/pass2/mgm/_layouts/15/start.aspx#/Felhasznli%20kziknyv/%C3%81ltal%C3%A1nos%20r%C3%A9sz.aspx)


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 9/526|


Ha a felhasználó nem **<Megjelenít>** vagy irányítói üzemmódban nem <Megnyitás> vagy nem
<Megnyitás új ablakban> n yomógombbal lép ki az A_0151_02 ablakból, akkor az
A_0151_01 ablakon üres marad a diagram és a diagram feletti ikonok közül csak az
A_0151_02 ablak megnyitására szolgáló ikon elérhető.

Amennyiben a felhasználó az A_0151_02 ablakot <Megjelenít - vagy irányítói üzemmódban
<Megnyitás> vagy <Megnyitás új ablakban> nyomógombbal zárja be, akkor a kliens program
meghívja a következő szolgáltatásokat:

  - Az **S_0151_02** **–** **Út** **tengely** **adatok** **lekérdezése** szolgáltatást
(UttengelySzolgalatiHelyAdatokQuery), az út-idő diagram, út tengelyének
kirajzolásához és az út tengelyen megjelenő információkhoz szükséges adatok
lekérdezéséhez a következő paraméterekkel hívja meg:

`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL
`o` Szolgálati helytől id: Az A_0151_02 ablakon kiválasztott menetirányítói

szakaszon vagy vonalon belül az első megjelenítendő szolgálati hely
belső azonosítója
`o` Szolgálati helyig id: Az A_0151_02 ablakon kiválasztott menetirányítói

szakaszon vagy vonalon belül az utolsó megjelenítendő szolgálati hely
belső azonosítója
`o` Lekérdezési időszak kezdete: Az A_0151_02 ablaktól kapott lekérdezési

időszak kezdete

  - Az **S_0151_03** **–** **Út** **tengely** **vágány** **adatok** **lekérdezése** szolgáltatást
(UttengelyVaganyAdatokQuery), a diagram út tengelyén a szolgálati helyekhez
megjelenítendő vágányok lekérdezéséhez a következő paraméterekkel hívja meg a
kliens program:

`o` Lekérdezési időszak kezdete: Az A_0151_02 ablaktól kapott lekérdezési

időszak kezdete
`o` Szolgálati helyek listája (Az A_0151_02 ablakon kiválasztott szolgálati

helyek)

        - Szolgálati hely id: Az A_0151_02 ablakon kiválasztott szolgálati hely

belső azonosítója

  - Amennyiben szükséges a menetrendi adatok megjelenítése a grafikonon a

**–**
megjelenítési beállítások szerint (az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatás kimenő adataiban a
Menetrend mező értéke: ”1” – „Összes” vagy „2” – [vk54879] „Kijelölt és terv”), akkor
meghívja az **S_0151_04** **–** **Menetrendi** **adatok** **lekérdezése** szolgáltatást
(MenetrendiAdatokQuery) a következő paraméterekkel:

`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 10/526|


`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL
`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Lekérdezési időszak vége : Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
`o` Szolgálati helyek listája ( **S_0151_02** **–** **Út tengely adatok lekérdezése**

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

       - Szolgálati hely id: Az **S_0151_02** szolgáltatás által visszaadott

szolgálati hely belső azonosítója

`o` Forgalmi vonatkategóriák listája : üres
`o` Forgalmi vonatnemek listája: üres
`o` Menetvonal tulajdonosok listája: üres
`o` Vonatszám tartományok listája: üres
`o` Eltéréstől (perc): üres
`o` Eltérésig (perc): üres
`o` Késési főkódok listája: üres
`o` Késési segédkódok listája: üres
`o` Időhenger jelző: Ha az A_0151_02 ablakon Időhenger üzemmódot

választott ki a felhasználó, akkor true egyébként false
`o` Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója

- Az **S_0151_05** **–** **Tényadatok lekérdezése** **(TenyadatokQuery)** szolgáltatást a

következő paraméterekkel hívja meg:

`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL
72236
`o` Ábra belső azonosító (AbraId)
`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Lekérdezési időszak vége: Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 11/526|


`o` Szolgálati helyek listája ( **S_0151_02** **–** **Út tengely adatok lekérdezése**

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

       - Szolgálati hely id: Az **S_0151_02** szolgáltatás által visszaadott

szolgálati hely belső azonosítója

`o` Forgalmi vonatkategóriák listája: üres
`o` Forgalmi vonatnemek listája: üres
`o` Menetvonal tulajdonosok listája: üres
`o` Vonatszám tartományok listája: üres
`o` Eltéréstől (perc): üres
`o` Eltérésig (perc): üres
`o` Késési főkódok listája: üres
`o` Késési segédkódok listája: üres
`o` Időhenger jelző: Ha az A_0151_02 ablakon Időhenger üzemmódot

választott ki a felhasználó, akkor true egyébként false
`o` Előrejelzés jelző: Ha a megjelenítési beállítások szerint szükséges az

előrejelzés adatok megjelenítése akkor true egyébként false
`o` F elhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója
`o` 89949 ’ KeseFeladat ’ output változó = NULL
`o` 89949 ’ VgAdatFeladat ’ output változó = NULL

- #88995 Irányítói üzemmódban az **S_0151_57** **–** **Értesítésben** **éri** **ntett (pu** **l** **zá** **l** **ó** **)**
**menetvonalak lekérdezése (PulzaloMenetvonalakQuery)** szolgáltatá st a k öv etk ező
paraméterrel hívja meg a kliens:

`o` Ábra belső azonosító (AbraId)

- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenge r esetén ped ig

am ennyiben a megjelenítési beállítások szerint (az S_0151_01 – Megjelenítési
beállítások lekérdezése (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott adatok
alapján) szükséges az RDE adatok megjelenítése akkor a kliens az **S_0151_19** **–** **RDE**
**adatok lekérdezése (RdeAdatokQuery)** szolgáltatást a következő paraméterekkel
hívja meg:

`o` Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki,

akkor annak a belső azonosítója, egyébként NULL
`o` Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon

menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja,
egyébként NULL
`o` Szolgálati hely lista (SzhIdArray): Az **S_0151_02** **–** **Út tengely adatok**

**lekérdezése** szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által
visszaadott szolgálati helyek listája). A szolgálati hely belső azonosítók
pontos vesszővel elválasztva.
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 12/526|


`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén ped ig

am ennyiben a megjelenítési beállítások szerint (az S_0151_01 – Megjelenítési
beállítások lekérdezése (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott adatok
alapján) szükséges a vágányzárak megjelenítése akkor a kliens a következő
paraméterekkel meghívja az **S_0151_06** **–** **Vágányzárak** **lekérdezése**
**(VaganyzarakQuery)** szolgáltatást:

`o` Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki,

akkor annak a belső azonosítója, egyébként NULL
`o` Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon

menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja,
egyébként NULL
`o` Szolgálati hely lista (SzhIdArray): Az **S_0151_02** **–** **Út tengely adatok**

**lekérdezése** szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által
visszaadott szolgálati helyek listája). A szolgálati hely belső azonosítók
pontos vesszővel elválasztva.
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` I dőszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

- #89002 PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül,
Időhenger esetén pedig amennyiben a megjelenítési beállítások szerint (az S_0151_01
– Megjelenítési beállítások lekérdezése (MegjelenitesiBeal l i t asok Qu e ry )
szolgáltatástól kapott adatok alapján) szükséges a menetengedélyek m e g j elen ítés e,
akkor a kliens a következő paraméterekkel meghívja az **S** **_** **01** **5** **1** **_** **3** **4** **–**
**Menetengedélyek lekérdezése (MenetengedelyekQuery)** szolgáltatás t :

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

- #89003 PV felhasználónál, fix időszak esetén megjelenítési beáll í t ást ó l f üg g etl en ü l,
Időhenger esetén pedig amennyiben a megjelenítési beállítások szerint (az S_0 1 5 1 _ 0 1

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 13/526|


– Megjelenítési beállítások lekérdezése (MegjelenitesiBeal l i t asok Qu e ry )
szolgáltatástól kapott adatok alapján) szükséges a *Kulcsfüggés feloldás* m eg j elen ítés e,
akkor a kliens a következő paraméterekkel meghívja az **S_0151_46** **–** **Ku** **l** **csfü** **g** **gés**
**feloldás lekérdezése (KulcsfuggesQuery)** szolgáltatást:

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

  - 89001 PV felhasználónál, ha rendelkezik megfelelő j o g o su l t s á g g al
(OP_0151_MGMIranyitoiSzovegMegtekint), akkor Fix időszak eseté n m eg j elen ít ési
beállítástól függetlenül, Időhenger esetén pedig amennyiben a megj elen ítési
beállítások szerint szükséges a szöveges megjegyzések megjelenítése, ak k or a k l i en s a
következő paraméterekkel meghívja az **S_0151_32** **–** **Szöveges** **meg** **jeg** **y** **zése** **k**
**lekérdezése (SzovMegjegyzesekQuery)** szolgáltatást:

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az Aablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő. [ 89001vége]

A meghívott szolgáltatásoktól és az A_0151_02 ablakról kapott adatok alapján a kliens
program kiegészíti az ablak fejlécében a címfeliratot, megrajzolja az út-idő diagram tengelyeit
a szükséges tengelyfeliratokkal, jelölésekkel együtt, időhenger üzemmód esetén megrajzolja
az idővonalat, majd ábrázolja a kapott menetvonalak tény és előrejelzés adatait, valamint, ha
szükséges, akkor a menetrendi adatokat, az RDE adatokat és vágányzárakat.

**2.2.3.2** **A** **blak fejléce, címfelirata**

Az ablak fejléce teljes és nem teljes képernyős üzemmódban is látszik. Az ablak fejlécében
baloldalról jobbra, illetve felülről lefelé haladva a következő felíratok, ikonok, m ező k

1. A fejléc felső sorában

  - Az üzemmódnak megfelelő címfelirat:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** kezdve a következő felirat jelenik meg:


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 14/526|


„IÜR    - A_0151_01    - ÚT    - IDŐ D IA G RAM    - MEGJELENÍT ÜZEMMÓD ”
megjelenítő üzemmód esetén,

„IÜR    - A_0151_01    - ÚT    - IDŐ D IA G RAM - IRÁNYÍTÓI ÜZEMMÓD ” irányítói
üzemmód esetén.

appsettings szinten rögzített SP linket nyit meg egy új böngésző abla k ban (A z o l d al
csak a jogosult felhasználók számára érhető el). A jelenleg használt érté k :

https://intranet.mav.hu/rendszer/pass2/ [m](https://intranet.mav.hu/rendszer/pass2/mgm/_layouts/15/start.aspx#/Felhasznli%20kziknyv/%C3%81ltal%C3%A1nos%20r%C3%A9sz.aspx) gm /_lay outs/15/start.aspx#/Felhasznli%20kzi
[knyv/%C3%81ltal%C3%A1nos%20](https://intranet.mav.hu/rendszer/pass2/mgm/_layouts/15/start.aspx#/Felhasznli%20kziknyv/%C3%81ltal%C3%A1nos%20r%C3%A9sz.aspx) r %C 3%A 9s z .aspx

2. Fejléc 2. sorában

  -  - Alapfunkciók menü ikon – lásd az **Ikonok** fejezetben

  -  - Szerkesztés menü ikon – csak irányítói üzemmódban látha tó, l eírását l ásd az
**Ikonok** fejezetben.

  -  - Idővonalra ugrás ikon – leírását lásd az **Ikonok** fejezetben

  -,,,,,  - Kicsinyítést, nagyítást vezérlő iko n ok – l eírásuk a z
**Ikonok** fejezetben

  -  - Alapértelmezett kamera nézet ikon – leírását lásd az **Ikonok** f eje zet b en

  - A kiválasztott vonal/menetirányítói szakasz/ábra

”

A kiválasztott menetirányítói szakasz vagy vonal kódja vagy ábra azonosítója +” ”+ a kiválasztott menetirányítói szakasz vagy vonal vagy ábra e lnevezése

”+ a kiválasztott menetirányítói szakasz vagy vonal vagy ábra elnevezése + „ - ”+
fix időszak kezdete (éé.hh.nn.óó:pp formátumban)+ „ - ”+ fix időszak vége
(éé.hh.nn.óó:pp formátumban)

`o` Irányítói üzemmód esetén

A kiválasztott ábra azonosítója + ”      - ”+ a kiválasztott menetirányítói ábra
elnevezése

  - VK105782 Vonatszám beviteli mező

A grafikonon megjelenő menetvonalak szűrésére szolgáló mező, am ely b en
maximum 5 szám karakter adható meg. Minden üzemmódban használh ató .

*A mező elhagyásakor vagy a mezőnél Enter használatakor, ha n* *em ü* *res* *a*
*Vonatszám mező, a következőket hajtja végre a program:*

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Áthelyezve (beillesztéssel) [23]**

**törölt:** A

**törölt:** I

**törölt:** „IÜR - A_0151_01 - ÚT- IDŐ DIAGRAM MEGJELENÍTŐ ÜZEMMÓD

**törölt:** „A_0151_01 - Út- idő diagram - ”+ a

**törölt:** F

**törölt:** „IÜR - A_0151_01 - ÚT- IDŐ DIAGRAM MEGJELENÍTŐ ÜZEMMÓD”¶
„A_0151_01 - Út- idő diagram - ”+ a


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 15/526|


`o` Az A_0151_05 – Adatok szűrése PopUp ablakon beállíth ató szű r ő

paramétereknél törli a vonatszám tartományok tartalmát és az első vonatszám

–
tartomány tól mezőjébe helyezi a megadott vonatszámot. (A többi szűrési
paramétert változatlanul hagyja).

`o` A beállított szűrési paraméterekkel meghívja a grafikon frissítéséhe z szü k ség es

szolgáltatásokat.

`o` A szolgáltatásoktól kapott adatokkal frissíti a grafikon tartalmát.

`o` Ha az **S_0151_05** **–** **Tényadatok lekérdezése (Tenyada** **to** **k** **Q** **u** **ery** **)**

szolgáltatás adott vissza adatokat, akkor a szolgáltatás által visszaadott
menetvonal első eseményét a grafikon közepére helyezi mindkét tengelyen és a
menetvonalat (a menetrendi vonalat is, ha van) kiválasztottá teszi. (Ha több
menetvonalat is visszaadott a szolgáltatás, akkor az első menetvonalat választja
ki.)

`o` Ha az **S_0151_05** **–** **Tényadatok lekérdezése (Tenyad** **a** **to** **k** **Q** **u** **ery** **)**

szolgáltatás nem adott vissza adatokat, de a megjelenítési beállítások szerint
meg kellett hívni az **S_0151_04** **–** **Menetrendi adatok lekérdezése**
**(MenetrendiAdatokQuery)** szolgáltatást és az adott vissza adatokat, akkor az
S_0151_04 szolgáltatás által visszaadott menetvonal első eseményét helyezi
grafikon közepére és kiválasztottá teszi a menetvonalat. (Ha több menetvonalat
is visszaadott a szolgáltatás, akkor az első menetvonalat választja ki.)

`o` Ha az S _ 0151 _ 05 és/vagy az S _ 0151_04 szolgáltatás adott vissza m eg f ele l ő

menetvonalat, akkor a vonatszám beviteli mező tartalmát törli a program, de az

–
A_0151_05 Adatok szűrése PopUp ablakon beállítható szűrő paramétereknél
a vonatszám tartományban ott hagyja a vonatszámot. (Így automatikus
frissítéseknél továbbra is marad a szűrés a vonatszámra.)

`o` Ha sem az S _ 0151 _ 05, sem az S _ 0151 _ 04 szolgáltatás nem ad o tt v i s s za

adatokat, akkor „Nincs a keresési feltételeknek megfelelő adat! ” figyelmeztető
jelzést ad és nem törli a vonatszám mező tartalmát.

*A mező elhagyásakor vagy a mezőnél Enter használatakor, ha üres a* *Von* *a* *t* *s* *z* *á* *m*
*mező vagy a mezőben lévő X használatakor, a következőket hajt* *j* *a* *vég* *r* *e* *a*

*program:*

`o` Az A_0151_05 – Adatok szűrése PopUp ablakon beállíth ató szű r ő

paramétereknél törli a vonatszám tartományok tartalmát.

`o` A beállított szűrési paraméterekkel meghívja a grafikon frissítéséhe z szü k ség es

szolgáltatásokat.

`o` A szolgáltatásoktól kapott adatokkal frissíti a grafikon tartalmát. [ VK105782vége]

  -  - Adatfrissítés folyamatjelző (progress bar).

A progress bar teljes terjedelmé be n 30 m ás odpercet jelöl, a folyamatjelző sáv
másodpercenként frissül. Tová bbi r észletek az **Ismétlődő** **(ütemezett)**
**szolgáltatáshívások vezérlése** fejez e tben.

3. Fejléc 3. sorában

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 16/526|


Megjelenítő üzemmódban az Alapfunkciók menü ikonhoz tartozó i k o n o k ( i k o nso r ),
irányítói üzemmódban pedig a kiválasztott menü ikonhoz tartozó i k o n o k ( i k o nso r)
jelenhetnek meg,

A menü ikonokhoz tartozó ikonsor megjelenítése kétféleképpen történh et :

    - Amennyiben a képernyő szélessége nagyobb, mint egy előre me g h atá r o zt t pi x el

méret (jelenleg 1014 px), akkor az ikonsor horizontálisan a fejléc 3 . so r áb an
helyezkedik el.

    - Amennyiben a képernyő szélessége kisebb, mint egy előre meg h atár oztt pi x el

méret (jelenleg 1014 px), akkor az ikonsor vertikálisan a diagram t er ü l et j o b b
oldalára kerül.

A két nézet közötti váltás automatikus.

Az ikonok működésének leírását lásd az **Ikonok** fejezetben.

**2.2.3.3** **Fél** **-** **offline üzemmód** **[#88946]**

Az MGM modul bizonyos szinten alkalmas a hálózati kapcsolat megszűnésének érzékelésére,
mely esetben speciális üzemmódba kerül. Jelen pont az ehhez kapcsolódó működés leírását
tartalmazza.

**Offline üzemmódba váltás:**

Az A **Reachable** _ 0151 technikai szolgáltatás hívásával: _ 01 ablak az alábbi esetekben ellenőrzi a hálózati kapcsolat működését a

  - Szolgáltatás hívások előtt (minden ajax kérés során)

**Offline üzemmód jellemzői:**

Amennyiben a kliens hálózati szakadást érzékel, akkor a progress bar piros színűre vált,
valamint egy villódzó jelenik meg a progress bar előtt. Ezzel együtt a kliens letiltja az
alábbi ikonokat/funkciókat:

  - Irányítói üzemmódban szerkesztés menü ikon ( ) – szerkesztő ikoncsoport ezáltal
nem érhető el. Amennyiben ez az eszköztár volt látható, akkor a kliens visszavált az
alapfunkciók ikonsorra.

  - Megjelenít és irányítói üzemmódban egyaránt tiltottak az alábbi vezérlők:

`o`    - A_0151_02 – Út    - idő diagram kiválasztás ablak megnyitása ikon
`o`     - A_0151_03 – Megjelenítési beállítások ablak megnyitása ikon
`o`     - A_0151_04 – Stílusok és vonalak beállítása ablak megnyitása ik o n
`o`     - A_0151_05 – Adatok szűrése ablak megnyitása ikon
`o`     - A_0151_06 – Ábra szintű információk ablak megnyitása ikon
`o`     - Szolgálat befejezése ikon (csak irányítói üzemmódban)

Amennyiben megnyitott szerkesztő panel kezelése során érzékeli a rendszer az offline
állapotot, akkor:

  - Amennyiben a szerkesztő panelen alkalmazott művelet szolgáltatás hívással jár, akkor

a panel nyitva marad.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 17/526|



  - Amennyiben a szerkesztő panelen alkalmazott mégsem gomb kezelése nem jár

szolgáltatás hívással jár, akkor a panel bezáródik és a kliens a fentebb jelzett offline
üzemmódra vált.

Offline állapot esetén a grafikus felület mozgatható és rajta az utolsó frissítés szerinti állapot
jelenik meg. Az adatok és az idővonal sem frissül, valamint a kliens 8 másodpercenként

                                   ellenőrzi (Reachable függvény hívással), hogy helyreállt e a hálózati kapcsolat. Amennyiben
igen, akkor automatikusan visszaáll online üzemmódra, a korábban tiltott vezérlőelemek újra
kezelhetővé válnak. [ #88946 VÉGE]

**2.2.3.4** **Ikonok**

Az ablak felső részében a fejléc felső sora a latt, ill. a diagram jobb oldalán találhatók a
funkciók gyorsabb elérését szolgáló ikonok. Az ikonok elhelyezkedésének leírását lásd az
**Ablak fejléce, címfelirata** fejezetben

Az ikonok alapszíne:

- A menü ikonok alapszíne szürke és a kiválasztott menü ikon világosszürke.

ikonnál, ha használható az ikon



**törölt:** S

**törölt:** V

**törölt:** S



|Ikonok #94895|Col2|Col3|Col4|Col5|Col6|
|---|---|---|---|---|---|
|Kép|Megnevezés|Gyorselérés|Bekapcsolt / Aktív tooltip|Kikapcsolt / Inaktív tooltipA k||
|Funkcióválasztó ikonok||||||
||Alapfunkciók menü|-|Alapfunkciók|Alapfunkciók||
||Szerkesztés menü|-|Szerkesztés|Szerkesztés||
|Méretezés ikonok (állandóan láthatók)||||||
||Idővonalra ugrás|Alt + i|Idővonalra ugrás [Alt + i]|-||
||X és Y tengely kicsinyítése|-|Kicsinyítés|-||
||X és Y tengely nagyítása|-|Nagyítás|-||
||X tengely kicsinyítése|-|X tengely kicsinyítése|-||
||X tengely nagyítása|-|X tengely nagyítása|-||
||Y tengely kicsinyítése|-|Y tengely kicsinyítése|-||
||Y tengely nagyítása|-|Y tengely nagyítása|-||
||Y tengely nagyítása|-|Y tengely nagyítása|-||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 18/526|











|Kép|Megnevezés|Gyorselérés|Bekapcsolt / Aktív tooltip|Kikapcsolt / Inaktív tooltip|Col6|
|---|---|---|---|---|---|
||Alapértelmezett kamera nézet|-|Alapértelmezett kamera nézet|-||
|Alapfunkciók menü ikonok||||||
||Eltérések megjelenítése|Alt + Shift + e|Eltérések megjelenítése [Alt + Shift + e] - bekapcsolt|Eltérések megjelenítése [Alt + Shift + e] - kikapcsolt||
||Késések megjelenítése|Alt + Shift + k|Késések megjelenítése Alt + Shift + k] - bekapcsolt|Késések megjelenítése [Alt + Shift + k] - kikapcsolt||
||Kör jelölők megjelenítése|Alt + k|Kör jelölők megjelenítése [Alt + k] - bekapcsolt|Kör jelölők megjelenítése [Alt + k] - kikapcsolt||
||Tervezett vágányzárak megjelenítése|Alt + v|Tervezett vágányzárak megjelenítése [Alt + v] - bekapcsolt|Tervezett vágányzárak megjelenítése [Alt + v] - kikapcsolt||
||Tény vágányzárak megjelenítése|Alt + t|Tény vágányzárak megjelenítése [Alt + t] - bekapcsolt|Tény vágányzárak megjelenítése [Alt + t] - kikapcsolt||
||RDE események megjelenítése|Alt + r|RDE események megjelenítése [Alt + r] - bekapcsolt|RDE események megjelenítése [Alt + r] - kikapcsolt||
||Páros viszonylat megjelenítése|Alt + p|Páros viszonylat megjelenítése [Alt + p] - bekapcsolt|Páros viszonylat megjelenítése [Alt + p] - kikapcsolt||
||Páratlan viszonylat megjelenítése|Alt + l|Páratlan viszonylat megjelenítése [Alt + l] - bekapcsolt|Páratlan viszonylat megjelenítése [Alt + l] - kikapcsolt||
||Közlekedő vonatok megjelenítése|-|Közlekedő vonatok megjelenítése - bekapcsolt|Közlekedő vonatok megjelenítése - kikapcsolt||
||Nem közlekedő vonatok megjelenítése|-|Nem közlekedő vonatok megjelenítése - bekapcsolt|Nem közlekedő vonatok megjelenítése - kikapcsolt||
||Feloszlatott vonatok megjelenítése|-|Feloszlatott vonatok megjelenítése - bekapcsolt|Feloszlatott vonatok megjelenítése - kikapcsolt||
||Be és kilépő vonatok jelölése|-|Be és kilépő vonatok jelölése - bekapcsolt|Be és kilépő vonatok jelölése - kikapcsolt||
||Foglalt vágányra bejárat jelölése|-|Foglalt vágányra bejárat jelölése - bekapcsolt|Foglalt vágányra bejárat jelölése - kikapcsolt||
||MGM vágányok megjelenítése|-|MGM vágányok megjelenítése - bekapcsolt|MGM vágányok megjelenítése - kikapcsolt||
||Megállóhelyek megjelenítése|-|Megállóhelyek megjelenítése - bekapcsolt|Megállóhelyek megjelenítése - kikapcsolt||
|||||Lej|jebb helyezve [14]:|
|||||||
||Szöveges megjegyzések megjelenítése  Szöveges megjegyzések nem jelennek meg  Szöveges megjegyzések megjelenítése csak ikonnal  Szöveges megjegyzések megjelenítése ikonnal és szövegrészlettel|-| Szöveges megjegyzések megjelenítése - Nincs  Szöveges megjegyzések megjelenítése - Csak ikon  Szöveges megjegyzések megjelenítése - Ikon és szöveg|tör Szöveges megjegyzések megjelenítése - inaktív|ölt:|
|||||||
||Csatlakozásra várás megjelenítése|-|Csatlakozásra várás megjelenítése - bekapcsolt|Csatlakozásra várás megjelenítése - kikapcsolt||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|Col1|Azonosító: UC_01_51|
|---|---|
|Változat: 1.03|Oldal: 19/526|























|Kép|Megnevezés|Gyorselérés|Bekapcsolt / Aktív tooltip|Kikapcsolt / Inaktív tooltip|Col6|Col7|Col8|
|---|---|---|---|---|---|---|---|
||Kulcsfüggés feloldás megjelenítése|-|Kulcsfüggés feloldás megjelenítése - bekapcsolt|Kulcsfüggés feloldás Át megjelenítése - kikapcsolt||helyezve (beillesztéssel) [15]||
||Menetengedély a szolgálati hely kijárati jelzőjéig megjelenítése|-|Menetengedély kijárati jelzőig megjelenítése - bekapcsolt|Menetengedély kijárati jelzőig megjelenítése - kikapcsolt||||
||Menetengedély a szolgálati hely bejárati jelzőjéig megjelenítése|-|Menetengedély bejárati jelzőig megjelenítése - bekapcsolt|Menetengedély bejárati jelzőig megjelenítése - kikapcsolt||||
|||||Fel||jebb helyezve [15]:||
|||||||||
||Nyomtatási kép megnyitása|-|Nyomtatási kép megnyitása|-|tör|ölt:||
||Út-idő diagram kiválasztás ablak megnyitása|Alt + 1|Út-idő diagram kiválasztás [Alt + 1]|Át -||helyezve (beillesztéssel) [14]||
|||||||||
||Megjelenítési beállítások ablak megnyitása|Alt + 2|Megjelenítési beállítások [Alt + 2]|-||||
||Adatok szűrése ablak megnyitása|Alt + 3|Adatok szűrése [Alt + 3]|-||||
||Stílusok és vonalak beállítása ablak megnyitása|Alt + 4|Stílusok és vonalak beállítása [Alt + 4]|-||||
||Ábra szintű információk ablak megnyitása|Alt + 5|Ábra szintű információk [Alt + 5]|-||||
||Szolgálat befejezése|-|Szolgálat befejezése|- tör||ölt: ...||
||||||||...|
|Szerkesztés menü ikonok||||||||
||Vágányzár szerkesztése|Alt + g|Vágányzár szerkesztése [Alt + g] - aktív|Vágányzár szerkesztése [Alt + g] - inaktív||||
||Új szöveges megjegyzés rögzítése|Alt + m|Új megjegyzés [Alt + m] - aktív|Új megjegyzés [Alt + m] - Át inaktív||helyezve (beillesztéssel) [1]||
||Szöveges megjegyzés szerkesztése|Alt + Shift + m|Megjegyzés szerkesztése [Alt + Shift + m] - aktív|Megjegyzés szerkesztése [Alt + Shift + m] - inaktív||||
||Adminisztratív feladatok megnyitása|Alt + a|Munkahely adminisztratív feladatai [Alt + a] - aktív|Munkahely adminisztratív Át feladatai [Alt + a] - inaktív||helyezve (beillesztéssel) [2]||
||Értesítések előrejelzés változásról|-|Értesítések előrejelzés változásról - aktív|Me Értesítések előrejelzés változásról - inaktív Át||gváltozott a mezőkód||
||||||Át|helyezve (beillesztéssel) [3]||
||Új előrejelzés rögzítése|-|Új előrejelzés rögzítése - aktív|Új előrejelzés rögzítése - inaktív||||
||Előrejelzés módosítása|-|Előrejelzés módosítása - aktív|Előrejelzés módosítása - inaktív||||
|||||Lej||jebb helyezve [4]:||
|||||||||
||Rendkívüli megállás|-|Rendkívüli megállás - aktív|Rendkívüli megállás - inaktív tör||ölt:||
||Rendkívüli áthaladás|-|Rendkívüli áthaladás - aktív|Rendkívüli áthaladás - inaktív||||
||Tartózkodási idő módosítása|-|Tartózkodási idő módosítása - aktív|Tartózkodási idő módosítása Át - inaktív||helyezve (beillesztéssel) [4]||
|#88981|Irányítói feltartóztatás|-|Irányítói feltartóztatás - aktív|Irányítói feltartóztatás - inaktív||||
||Előztetés|-|Előztetés - aktív|Előztetés - inaktív||||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|Col1|Azonosító: UC_01_51|
|---|---|
|Változat: 1.03|Oldal: 20/526|










|Kép|Megnevezés|Gyorselérés|Bekapcsolt / Aktív tooltip|Kikapcsolt / Inaktív tooltip|Col6|Col7|Col8|
|---|---|---|---|---|---|---|---|
||Vonattalálkozás|-|Vonattalálkozás tervezése - aktív|Vonattalálkozás tervezése - inaktív||||
|||||tör||ölt: ...||
|||||||||
|||||Fel|Fel|jebb helyezve [1]:||
|||||||||
||Csatlakozásra várás szerkesztése|-|Csatlakozásra várás szerkesztése - aktív|Csatlakozásra várás szerkesztése - inaktív||||
|88976|Másik pályán közlekedés||Másik pályán közlekedés - aktív|Másik pályán közlekedés - tör inaktív||||
||||||tör|ölt: ikon||
|||||||gváltozott a mezőkód||
||MRN vonat létrehozása|-|MRN vonat létrehozása - aktív|Me MRN vonat létrehozása - inaktív Át||||
||||||Át|helyezve (beillesztéssel) [5]||
||Egyéb sebességkorlátozás|-|Egyéb sebességkorlátozás - aktív|Egyéb sebességkorlátozás - Át inaktív||helyezve (beillesztéssel) [6]||
||Teljesítménycsökkenés|-|Teljesítménycsökkenés - aktív|Teljesítménycsökkenés - inaktív||||
|||||Fel||jebb helyezve [6]:||
|||||||||
|||||tör||ölt:||
|||||||||
||Kulcsfüggés feloldás rögzítése|-|Kulcsfüggés feloldás rögzítése - aktív|Kulcsfüggés feloldás Fel rögzítése - inaktív||jebb helyezve [2]:||
||Kulcsfüggés feloldás lezárása|-|Kulcsfüggés feloldás lezárása - aktív|Kulcsfüggés feloldás tör lezárása - inaktív||ölt:||
||Menetengedély a szolgálati hely kijárati jelzőjéig szerkesztése|-|Menetengedély kijárati jelzőig szerkesztése - aktív|Át Menetengedély kijárati jelzőig szerkesztése - inaktív||helyezve (beillesztéssel) [7]||
||Menetengedély a szolgálati hely bejárati jelzőjéig szerkesztése|-|Menetengedély bejárati jelzőig szerkesztése - aktív|Menetengedély bejárati jelzőig szerkesztése - inaktív||||
|||||Fel||jebb helyezve [7]:||
|||||||||
|||||tör|tör|ölt:||
|||||||||
||Törlés|<Delete / Del>|Töröl [Del] - aktív|Töröl [Del] - inaktív||||
|||||Fel||jebb helyezve [3]:||
|||||||||
||Út-idő diagram kiválasztás ablak megnyitása|Alt + 1|Út-idő diagram kiválasztás [Alt + 1]|-||||
||Megjelenítési beállítások ablak megnyitása|Alt + 2|Megjelenítési beállítások [Alt + 2]|-||||
||Adatok szűrése ablak megnyitása|Alt + 3|Adatok szűrése [Alt + 3]|-||||
||Stílusok és vonalak beállítása ablak megnyitása|Alt + 4|Stílusok és vonalak beállítása [Alt + 4]|-||||
||Ábra szintű információk ablak megnyitása|Alt + 5|Ábra szintű információk [Alt + 5]|-||||
|||||Fel||jebb helyezve [5]:||
|||||||||
||Szolgálat befejezése|-|Szolgálat befejezése|-||||
|törölt: Méretezés ikon (állandóan látható) ...||||||||
||||||||...|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 21/526|


**-**
**Alapfunkciók menü ikon**

**2.2.3.4.1.1** **- Eltérések megjelenítése ikon**



Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolásakor a Késések megjelenítése ikon kikapcsolttá válik, ha bekapcsolt volt,
valamint a grafikonon a tény vonalaknál megjelennek az S_0151_05 szolgáltatástól (az
Elteres mezőben) kapott eltérések
Kikapcsolásakor a grafikonról lekerülnek az eltérések.
Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, az eltérések
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás) (Elteresek) szerinti állapotra állítja az ikon állapotát (ami természetesen átállítható).

**2.2.3.4.1.2** **- Késések megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolásakor, az Eltérések megjelenítése ikon kikapcsolttá válik, ha bekapcsolt volt
(Ezzel az eltérések lekerülnek a grafikonról.), majd a grafikonon a tény vonalaknál
megjelennek a késések, az S_0151_05 szolgáltatástól (az Elteres mezőben) kapott eltérések
közül, a 0-nál nagyobbak.
Kikapcsolásakor a grafikonról lekerülnek a késések.
Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, a késések megjelenítésére
vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett beállítás) (Kesesek)
szerinti állapotra állítja az ikon állapotát (ami természetesen átállítható).

**2.2.3.4.1.3** **- Kör jelölők megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolásakor, a menetvonalak és szolgálati helyek/vágányok metszéspontjainál
megjelennek a körjelölők. (A körjelölők megjelenítésének részletes leírása a **2.2.3.6**
**Menetvonalak megjelenítése a diagramon** fejezeten belül található.).
Kikapcsolásakor a grafikonról lekerülnek a körjelölők.
Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, a körjelölők
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás) (Korjelolok) szerinti állapotra állítja az ikon állapotát (ami természetesen
átállítható).

PV-i felhasználók számára szabadon ki és bekapcsolható.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt: V**

**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 22/526|


**–**
Bekapcsolásakor az **S_0151_06** **Vágányzárak lekérdezése (VaganyzarakQuery)**
szolgáltatástól kapott adatok alapján megjelennek a szolgáltatástól kapott adatokban a Teny jelző értéke False) [88953] tervezett (amelyeknél az S [ 88953vége] v ágányzára k a grafikonon. _ 0151 _ 06
Kikapcsolásakor a [88953] tervezett [88953vége] vágányzárak lekerülnek a grafikonról.
PV-i felhasználóknál az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor

**–**
(ha az ablak bezárása <Ment> nyomógombbal történik) a program az **S_0151_01**
**Megjelenítési beállítások lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól
kapott, a [88953] tervezett [88953vége] v ágányzárak megjelenítésére vonatkozó beállítás (ami a
felhasználóhoz elmentett vagy alapértelmezett beállítás)(Vaganyzarak) szerinti állapotra
állítja az ikon állapotát (ami természetesen átállítható a PV-i felhasználók részéről).

**2.2.3.4.1.5** **[88953]** **-** **Tény vágányzárak megjelenítése ikon**

               Kétállású ikon, ami VV i felhasználóknál mindig bekapcsolt állapotú és nem kapcsolható ki.
PV - i felhasználók számára szabadon ki és bekapcsolható.

**–**
Bekapcsolásakor az **S_0151_06** **Vágányzárak lekérdezése (VaganyzarakQuery)**
szolgáltatástól kapott adatok alapján megjelennek a tény (amelyeknél az Sszolgáltatástól kapott adatokban a Teny jelző értéke True) vágányzárak a grafikonon. _ 0151 _ 06
Kikapcsolásakor a tény vágányzárak lekerülnek a grafikonról.
PV - i felhasználóknál az A _ 0151 _ 01 ablak betöltésekor és az A _ 0151 _ 03 ablak bezárásakor
(ha az ablak bezárása <Ment> nyomógombbal történik) a program az **S_0151_01** **–**
**Megjelenítési beállítások lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól
kapott, a tény vágányzárak megjelenítésére vonatkozó beállítás (ami a felhasználóhoz
elmentett vagy alapértelmezett beállítás)(Teny_Vaganyzarak) szerinti állapotra állítja az ikon

                           állapotát (ami természetesen átállítható a PV i felhasználók részéről). [ 88953vége]

**2.2.3.4.1.6** **- RDE események megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolásakor, a grafikonon megjelennek az RDE események (forrását az S_0151_19
szolgáltatás biztosítja, melyet a kliens még szűr az A_0151_05 ablak adatai alapján).
Kikapcsolásakor a grafikonon nem lesznek láthatók az RDE események.
Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, az RDE események
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás) (RDE_Esemenyek) szerinti állapotra állítja az ikon állapotát (ami természetesen
átállítható).

**2.2.3.4.1.7** **- Páros viszonylat megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolt állapotában, csak azok a menetvonalak láthatók a grafikonon, amelyek a
lekérdezett szakaszon páros irányban közlekednek (Viszonylat értéke 2-páros), valamint a
mindkét irányban közlekedő (Amelyeknél a Viszonylat értéke 0-mindkettő) menetvonalaknak
is látható az a része, ahol páros irányú a közlekedés. Ha mellette a - **Páratlan viszonylat**
**megjelenítése ikon** is bekapcsolt, akkor nincs szűrő hatása a menetvonalakra.
Kikapcsolt állapotában nincs szűrő hatása a grafikonon megjelenő menetvonalakra.
Az A_0151_01 ablak betöltésekor kikapcsolt az állapota.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 23/526|


Az A_0151_05 ablak <Alkalmaz> nyomógombbal történő bezárásakor a program az
A_0151_05 ablakon lévő „Páros” kapcsoló értéke szerinti állapotra állítja az ikon állapotát
(ami természetesen átállítható).

**2.2.3.4.1.8** **- Páratlan viszonylat megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolt állapotában, csak azok a menetvonalak láthatók a grafikonon, amelyek a
lekérdezett szakaszon páratlan irányban közlekednek (Viszonylat értéke 1-páratlan), valamint
a mindkét irányban közlekedő (Amelyeknél a Viszonylat értéke 0-mindkettő)
menetvonalaknak is látható az a része, ahol páratlan irányú a közlekedés. Ha mellette a **Páros viszonylat megjelenítése ikon** is bekapcsolt, akkor nincs szűrő hatása a
menetvonalakra.
Kikapcsolt állapotában nincs szűrő hatása a grafikonon megjelenő menetvonalakra.
Az A_0151_01 ablak betöltésekor kikapcsolt az állapota.
Az A_0151_05 ablak < Alkalmaz > nyomógombbal történő bezárásakor a program az
A_0151_05 ablakon lévő „Páratlan” kapcsoló értéke szerinti állapotra állítja az ikon állapotát
(ami természetesen átállítható).

**2.2.3.4.1.9** **- Közlekedő vonatok megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolt állapotában, csak a közlekedő menetvonalak láthatók a grafikonon. (Amelyeknél a
Kozlekedo jelző értéke true.) (Közlekedő egy menetvonal, ha van készre jelentett állapotú
vonat-összeállítása / azaz nincs feloszlatva semmilyen módon / és ahol a kész állapotú vonatösszeállítását készre jelentették, ott már van legalább egy tény indulási eseménye.) Ha
mellette a - **Nem közlekedő vonatok megjelenítése ikon** is bekapcsolt, akkor nincs szűrő
hatása a menetvonalakra.
Kikapcsolt állapotában nincs szűrő hatása a grafikonon megjelenő menetvonalakra.
Az A_0151_01 ablak betöltésekor kikapcsolt az állapota.
Az A_0151_05 ablak <Alkalmaz> nyomógombbal történő bezárásakor a program az
A_0151_05 ablakon lévő „Közlekedő” kapcsoló értéke szerinti állapotra állítja az ikon
állapotát (ami természetesen átállítható).

**2.2.3.4.1.10** **- Nem közlekedő vonatok megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolt állapotában, csak a nem közlekedő menetvonalak láthatók a grafikonon.
(Amelyeknél a Kozlekedo jelző értéke false.) Ha mellette a - **Közlekedő vonatok**
**megjelenítése ikon** is bekapcsolt, akkor nincs szűrő hatása a menetvonalakra.
Kikapcsolt állapotában nincs szűrő hatása a grafikonon megjelenő menetvonalakra.
Az A_0151_01 ablak betöltésekor kikapcsolt az állapota.
Az A_0151_05 ablak <Alkalmaz> nyomógombbal történő bezárásakor a program az
A_0151_05 ablakon lévő „Nem közlekedő” kapcsoló értéke szerinti állapotra állítja az ikon
állapotát (ami természetesen átállítható).

**2.2.3.4.1.11** **- Feloszlatott vonatok megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 24/526|


Bekapcsolt állapotában, csak a feloszlatott menetvonalak láthatók a grafikonon. (Amelyeknél
a Feloszlatott jelző értéke true.)
Kikapcsolt állapotában nincs szűrő hatása a grafikonon megjelenő menetvonalakra.
Az A_0151_01 ablak betöltésekor kikapcsolt az állapota.

**2.2.3.4.1.12** **- Be és kilépő vonatok jelölése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolásakor megjelennek a grafikonon a (kiválasztott vonalra/menetirányítói szakaszra)
be és kilépések jelölésére használt nyilacskák. (A be és kilépések jelölésének részletes leírása
a **2.2.3.6 Menetvon** **a** **lak megjelenítése a diagramon** fejezeten belül található.)
Kikapcsolásakor a grafikonról lekerülnek a be és kilépések (kivéve a Buszos indulás)
jelölésére használt nyilacskák.
Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, a be/ kilépés jelölés
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás) (Grafikonra_Be_Kilepes) szerinti állapotra állítja az ikon állapotát (ami
természetesen átállítható).

**2.2.3.4.1.13** **- Foglalt vágányra bejárat jelölése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolásakor megjelennek a grafikonon a foglalt vágányra bejárást jelölő F betűk. (A
foglalt vágányra bejárat jelölésének részletes leírása a **2.2.3.6 Menetvonalak megjelenítése a**
**diagramon** fejezeten belül található.)
Kikapcsolásakor a grafikonról lekerülnek a foglalt vágányra bejárást jelölő F betűk.
Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, a foglalt vágányra bejárás
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás) (Foglaltra_Jar) szerinti állapotra állítja az ikon állapotát (ami természetesen
átállítható).

**2.2.3.4.1.14** **- MGM vágányok megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolásakor, az úttengelyen látható szolgálati helyeknél, a program megjeleníti a
szolgálati helyekhez tartozó állomási vágányokat (MGM vágányokat és gyűjtő /fiktív/
vágányokat), a menetvonalak (menetrendi és tény vonalak) eseményeit vágányokra helyezi, és
ennek megfelelően újra rajzolja a menetvonalakat. (A menetvonalak megjelenítésének
részletes leírása a dokumentum **2.2.3.6** pontjában található.)
Kikapcsolásakor, a program leveszi a grafikonról a szolgálati helyek állomási vágányait
(MGM vágányokat, gyűjtő vágányokat), a menetvonalak (menetrendi és tény vonalak)
eseményeit szolgálati hely szinten ábrázolja, és ennek megfelelően újra rajzolja a
menetvonalakat. (A menetvonalak megjelenítésének részletes leírása a dokumentum **2.2.3.6**
pontjában található.) A vonali vágányok továbbra is láthatók maradnak a grafikonon.
Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 25/526|


**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, az MGM vágányok
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás) (MGM_Vaganyok) szerinti állapotra állítja az ikon állapotát (ami természetesen
átállítható).

**2.2.3.4.1.15** **- Megállóhelyek megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.
Bekapcsolásakor, a grafikonon a program láthatóvá teszi a megállóhely típusú szolgálati
helyeket és ennek megfelelően újra rajzolja a menetvonalakat. (A menetvonalak
megjelenítésének részletes leírása a dokumentum **2.2.3.6** pontjában található.).
Kikapcsolásakor a program a grafikonon nem láthatóvá teszi a megállóhely típusú szolgálati
helyeket és ennek megfelelően újra rajzolja a menetvonalakat. (A menetvonalak
megjelenítésének részletes leírása a dokumentum **2.2.3.6** pontjában található.).
Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, a megállóhelyek
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás) (Megallohelyek) szerinti állapotra állítja az ikon állapotát (ami természetesen
átállítható).

**lenyíló ikon**

A lenyíló ikon csak megfelelő jogosultsággal (OP_0151_MGMIranyitoiSzovegMegtekint)
rendelkező PV felhasználónál látható és csak ábra megjelenítése esetén használható.
A lenyíló ikonon mindig az aktuálisan kiválasztott érték ikonképe látható.
Egérrel az ikon fölé pozicionálva, lenyílik az ikon és láthatóvá válnak a kiválasztható értékek
ikonjai:

- - Szöveges megjegyzések nem jelennek meg.
Kiválasztása esetén lekerülnek a szö v eges m eg je gyzések a grafikonról.

- - Szöveges megjegyzések megjelenítése csak ikonnal.
Kiválasztásakor, az **S_0151_32** **–** **Sz** **öveges** **m** **egj** **egyzések lekérdezése**
**(SzovMegjegyzesekQuery)** szolgál tatá stól k apott adatok alapján, az adott ábrához
rögzített szöveges megjegyzések meg jel enne k a grafikonon, de úgy, hogy csak a
szöveges megjegyzések típusának megf el elő ik onok láthatók.

- - Szöveges megjegyzések megjelenítése ikonnal és szövegrészlettel
Kiválasztásakor, az **S_0151_32** **–** **Sz** **öveges** **m** **egj** **egyzések lekérdezése**
**(SzovMegjegyzesekQuery)** szolgál tatá stól k apott adatok alapján, az adott ábrához
rögzített szöveges megjegyzések a t ípus uk nak m egfelelő ikonnal és szövegrészlettel
jelennek meg a grafikonon.
Az A _ 0151 _ 01 ablak betöltésekor és az A _ 0151 _ 03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, a szöveges megjegyzések
megjelenítésére vonatkozó beállítások szerinti állapotra (ami a felhasználóhoz elmentett vagy
alapértelmezett beállítás) állítja a lenyíló ikon állapotát. (A beállítást a

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Lejjebb helyezve [19]: <#>** **- Nyomtatási kép**
**megnyitása ikon¶**
**Nyomógombként működő ikon, ami mindig elérhető.**
**Használatakor az aktuális grafikus nézetről (a képernyőn**
**látható diagram részről) egy kép fájlt készít a program, ami**
**nyomtatható. A nyomtatási képhez/funkcióhoz kapcsolódó**
**információkat a** **Nyomtatási kép** **pont tartalmazza.**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 26/526|


Szov_Megjegyzes_Nincs, Szov_Megjegyzes_CsakIkon és a Szov_Megjegyzes_Ikonszoveg
mezők értéke alapján végzi. Az igaz értéket tartalmazó mezőhöz tartozó ikon lesz
kiválasztott.) Ez természetesen átállítható a megfelelő jogosultsággal rendelkező felhasználó
számára. [ 89001vége ]

**2.2.3.4.1.17** **#88980** **-** **Csatlakozásra várás megjelenítése ikon**

Ez egy mindig elérhető, kétállású ikon. Bekapcsolt és kikapcsolt állapota lehet.

–
Bekapcsolásakor az S_0151_05 Tényadatok lekérdezése (TenyadatokQuery) szolgáltatástól
kapott adatok alapján, ha vannak megjelenítendő csatlakozások, akkor az érintett
eseményeknél (amely eseményeknél a CsatlakozasIkonJel értéke True) megjelennek a

csatlakozásra várást jelképező ikonok a grafikonon.
Kikapcsolásakor a csatlakozásra várást jelképező ikonok lekerülnek a grafikonról.
Az A _ 0151 _ 01 ablak betöltésekor és az A _ 0151 _ 03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az **S_0151_01** **Megjelenítési beállítások**
**lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott, a csatlakozásra várás
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás)( CsatlakozasraVar) szerinti állapotra állítja a Csatlakozásra várás megjelenítése ikon
állapotát (ami természetesen átállítható). [ #88980vége]

Kétállású ikon, amely **csak ábra** megjelenítése esetén az „Alapfunkció ikonok ” közt
található. **PV** felhasználók számára érhető el. **VV** - i felhasználók számára **nem jelenik meg** .

**PV felhasználók esetén alapértelmezetten bekapcsolt**, de kikapcsolt állapotban jelenik
meg, ha az A_0151_03 ablakon kikapcsolt állapottal lett a felhasználóhoz elmentve.

**Bekapcsolás** kor, amennyiben a grafikonon **ábra** megjelenítése van folyamatban, az

**–** ”
„ **S_0151_46** **Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery)** szolgáltatástól kapott
adatok alapján megjelennek az adott ábrához kapcsolódó „Kulcsfüggés feloldás ” típusú
objektumok a grafikonon.

**Kikapcsolás** kor a „Kulcsfüggés feloldás ” típusú **objektumok** **lekerülnek** a grafikonról.

Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az „ **S_0151_01** **Megjelenítési beállítások**
**lekérdezése (MegjelenitesiBeallitasokQuery)** ” szolgáltatástól kapott, a kulcsfüggés feloldás
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás) (KulcsfuggesFeloldas) szerinti állapotra állítja az ikon állapotát (ami természetesen
átállítható a megfelelő jogosultsággal rendelkező felhasználók részéről).

**2.2.3.4.1.19** **#89002** **-** **Menetengedély a szolgálati hely kijárati jelzőjéig megjelenítése**
**ikon** **–** **(BÉ)**

Kétállású ikon, amely **csak ábra** megjelenítése esetén az „Alapfunkció ikonok ” közt
található. PV felhasználók számára **érhető el** . **VV** - i felhasználók számára **nem jelenik meg** .

**PV felhasználók esetén alapértelmezetten bekapcsolt**, de kikapcsolt állapotban jelenik
meg, ha az A_0151_03 ablakon kikapcsolt állapottal lett a felhasználóhoz elmentve.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Áthelyezve (beillesztéssel) [20]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 27/526|


**Bekapcsolás** kor, amennyiben a grafikonon **ábra** megjelenítése van folyamatban, az

**–** ”
„ **S_0151_34** **Menetengedélyek lekérdezése (MenetengedelyekQuery)** szolgáltatástól
kapott adatok alapján megjelennek az adott **ábrához** kapcsolódó „Menetengedély a szolgálati
hely kijárati jelzőjéig ” típusú objektumok a grafikonon.

**Kikapcsolás** kor a „Menetengedély a szolgálati hely kijárati jelzőjéig ” típusú **objektumok**
**lekerülnek** a grafikonról.

Az A _ 0151 _ 01 ablak betöltésekor és az A _ 0151 _ 03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az „ **S_0151_01** **Megjelenítési beállítások**
**lekérdezése (MegjelenitesiBeallitasokQuery)** ” szolgáltatástól kapott, a menetengedélyek
megjelenítésére vonatkozó beállítás (ami a felhasználóhoz elmentett vagy alapértelmezett
beállítás) (MenetEngKijelzoig) szerinti állapotra állítja az ikon állapotát (ami természetesen
átállítható a megfelelő jogosultsággal rendelkező felhasználók részéről).

**2.2.3.4.1.20** **#89002** **-** **Menetengedély a szolgálati hely bejárati jelzőjéig** **megjelenítése**
**ikon** **–** **(BÉ)**

Kétállású ikon, amely **csak ábra** megjelenítése esetén az „Alapfunkció ikonok ” közt
található. **PV** felhasználók számára érhető el. **VV** - i felhasználók számára **nem jelenik meg** .

**PV felhasználók esetén alapértelmezetten bekapcsolt**, de kikapcsolt állapotban jelenik
meg, ha az A_0151_03 ablakon kikapcsolt állapottal lett a felhasználóhoz elmentve.

**Bekapcsolás** kor, amennyiben a grafikonon **ábra** megjelenítése van folyamatban, az

**–** ”
„ **S_0151_34** **Menetengedélyek lekérdezése (MenetengedelyekQuery)** szolgáltatástól
kapott adatok alapján megjelennek az adott ábrához kapcsolódó „Menetengedély a szolgálati
hely bejárati jelzőjéig ” típusú objektumok a grafikonon.

**Kikapcsolás** kor a „Menetengedély a szolgálati hely bejárati jelzőjéig ” típusú objektumok
lekerülnek a grafikonról.

Az A _ 0151 _ 01 ablak betöltésekor és az A _ 0151 _ 03 ablak bezárásakor (ha az ablak bezárása

**–**
<Ment> nyomógombbal történik) a program az „ **S_0151_01** **Megjelenítési beállítások**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Feljebb helyezve [20]: <#>** **[#89003]** **- Kulcsfüggés**
**feloldás megjelenítése ikon – (BÉ)¶**
Kétállású ikon, amely **csak ábra** megjelenítése esetén az
„Alapfunkció ikonok” közt található. **PV** felhasználók számára érhető
el. **VV** -i felhasználók számára **nem jelenik meg** .¶
**PV felhasználók esetén alapértelmezetten bekapcsolt**, de
kikapcsolt állapotban jelenik meg, ha az A_0151_03 ablakon
kikapcsolt állapottal lett a felhasználóhoz elmentve.¶
**Bekapcsolás** kor, amennyiben a grafikonon **ábra** megjelenítése van
folyamatban, az „ **S_0151_46** **–** **Kulcsfüggés feloldás lekérdezése**
**(KulcsfuggesQuery)** ” szolgáltatástól kapott adatok alapján
megjelennek az adott ábrához kapcsolódó „Kulcsfüggés feloldás”
típusú objektumok a grafikonon.¶
**Kikapcsolás** kor a „Kulcsfüggés feloldás” típusú **objektumok**
**lekerülnek** a grafikonról.¶
Az A_0151_01 ablak betöltésekor és az A_0151_03 ablak
bezárásakor (ha az ablak bezárása <Ment> nyomógombbal történik) a
program az „ **S_0151_01** **–** **Megjelenítési beállítások lekérdezése**
**(MegjelenitesiBeallitasokQuery)** ” szolgáltatástól kapott, a
kulcsfüggés feloldás megjelenítésére vonatkozó beállítás (ami a
felhasználóhoz elmentett vagy alapértelmezett beállítás)
(KulcsfuggesFeloldas) szerinti állapotra állítja az ikon állapotát (ami
természetesen átállítható a megfelelő jogosultsággal rendelkező
felhasználók részéről).¶

**Áthelyezve (beillesztéssel) [19]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 28/526|


`o` Idő üzemmód (Időhenger/fix időszak)(Fix időszak esetén az időszak

felkínálásával)

`o` Vasútvonal/menetirányítói szakasz

`o` Kiválasztott vonal vagy menetirányító szakasz legördülő értéke

`o` Szolgálati hely lista a korábban kiválasztott értékek megjelölésével

Ha a felhasználó nem <Megjelenít> nyomógombbal zárja be az A_0151_02 ablakot, akkor az
A_0151_01 ablakon nincs szükség frissítésre.

Amennyiben a felhasználó <Megjelenít> nyomógombbal zárja be az A_0151_02 ablakot,
akkor az A_0151_01 ablak frissítéséhez a kliens program meghívja a következő
szolgáltatásokat:

  - Az **S_0151_02** **–** **Út** **tengely** **adatok** **lekérdezése** szolgáltatást
(UttengelySzolgalatiHelyAdatokQuery), az út-idő diagram, út tengelyén megjelenő
információk frissítéséhez a következő paraméterekkel hívja meg:

`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL
`o` Szolgálati helytől id: Az A_0151_02 ablakon kiválasztott menetirányítói

szakaszon vagy vonalon belül az első megjelenítendő szolgálati hely
belső azonosítója
`o` Szolgálati helyig id: Az A_0151_02 ablakon kiválasztott menetirányítói

szakaszon vagy vonalon belül az utolsó megjelenítendő szolgálati hely
belső azonosítója
`o` Lekérdezési időszak kezdete: Az A_0151_02 ablaktól kapott lekérdezési

időszak kezdete

  - Az **S_0151_03** **–** **Út** **tengely** **vágány** **adatok** **lekérdezése** szolgáltatást
(UttengelyVaganyAdatokQuery), a diagram út tengelyén a szolgálati helyekhez
megjelenítendő vágányok frissítéséhez a következő paraméterekkel hívja meg a kliens

program:

`o` Lekérdezési időszak kezdete: Az A_0151_02 ablaktól kapott lekérdezési

időszak kezdete
`o` Szolgálati helyek listája (Az A_0151_02 ablakon kiválasztott szolgálati

helyek)

        - Szolgálati hely id: Az A_0151_02 ablakon kiválasztott szolgálati hely

belső azonosítója

  - Amennyiben szükséges a menetrendi adatok megjelenítése a grafikonon a

megjelenítési beállítások szerint (a Menetrend mező értéke: ”1” – „Összes” vagy „2” –
vk54879 „Kijelölt és terv”), akkor a menetrendi adatok frissítéséhez meghívja az
**S_0151_04** **–** **Menetrendi** **adatok** **lekérdezése** szolgáltatást
(MenetrendiAdatokQuery) a következő paraméterekkel:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 29/526|


`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL
`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Lekérdezési időszak vége: Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
`o` Szolgálati helyek listája ( **S_0151_02** **–** **Út tengely adatok lekérdezése**

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

     - Szolgálati hely id: Az S_0151_02 szolgáltatás által visszaadott

szolgálati hely belső azonosítója

`o` Forgalmi vonatkategóriák listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Forgalmi vonatkategóriákat.)

     - Forgalmi vonatkategória id: Az A_0151_05 ablaktól kapott Forgalmi

vonatkategória azonosító

`o` Forgalmi vonatnemek listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Forgalmi vonatnemeket.)

     - Forgalmi vonatnem kód: Az A_0151_05 ablaktól kapott Forgalmi

vonatnem kód

`o` Menetvonal tulajdonosok listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Menetvonal tulajdonos azonosítókat.)

     - Menetvonal tulajdonos id: Az A_0151_05 ablaktól kapott Menetvonal

tulajdonos belső azonosítója

`o` Vonatszám tartományok listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Vonatszám tartományokat.)

     - Vonatszámtól: Az A_0151_05 ablaktól kapott Vonatszámtól értéke

     - Vonatszámig: Az A_0151_05 ablaktól kapott Vonatszámig értéke

`o` Eltéréstől (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása

óta az A_0151_05 – Adatok szűrése ablakot használták és az ablak adott
át Eltérés a menetrendtől –tól adatot)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 30/526|


`o` Eltérésig (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása óta

az A_0151_05 – Adatok szűrése ablakot használták és az ablak adott át
Eltérés a menetrendtől –ig adatot)
`o` Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Késési főkódokat)

       - Késési főkód id: Az A_0151_05 ablaktól kapott Késési főkód id

`o` Késési segédkódok listája (Csak akkor kitöltött, ha az A_0151_01 ablak

nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és az
ablak adott át Késési segédkódokat)

       - Késési segédkód id: Az A_0151_05 ablaktól kapott Késési segédkód id

`o` Időhenger jelző: Időhenger üzemmód esetén true egyébként false
`o` Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója

- A tény adatok frissítéséhez meghívja az **S_0151_05 – Tényadatok lekérdezése**

**(TenyadatokQuery)** szolgáltatást a következő paraméterekkel:

`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL
`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Lekérdezési időszak vége: Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
`o` Szolgálati helyek listája (Az S_0151_02 – Út tengely adatok lekérdezése

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

       - Szolgálati hely id: Az S_0151_02 szolgáltatás által visszaadott

szolgálati hely belső azonosítója

`o` Forgalmi vonatkategóriák listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Forgalmi vonatkategóriákat.)

       - Forgalmi vonatkategória id: Az A_0151_05 ablaktól kapott Forgalmi

vonatkategória azonosító

`o` Forgalmi vonatnemek listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Forgalmi vonatnemeket.)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 31/526|



       - Forgalmi vonatnem kód: Az A_0151_05 ablaktól kapott Forgalmi

vonatnem kód

`o` Menetvonal tulajdonosok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Menetvonal tulajdonos azonosítókat.)

       - Menetvonal tulajdonos id: Az A_0151_05 ablaktól kapott Menetvonal

tulajdonos belső azonosítója

`o` Vonatszám tartományok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Vonatszám tartományokat.)

       - Vonatszámtól: Az A_0151_05 ablaktól kapott Vonatszámtól értéke

       - Vonatszámig: Az A_0151_05 ablaktól kapott Vonatszámig értéke

`o` Eltéréstől (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása

óta az A_0151_05 – Adatok szűrése ablakot használták és adott át Eltérés
a menetrendtől –tól adatot)
`o` Eltérésig (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása óta

az A_0151_05 – Adatok szűrése ablakot használták és adott át Eltérés a
menetrendtől –ig adatot)
`o` Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Késési főkódokat)

       - Késési főkód id: Az A_0151_05 ablaktól kapott Késési főkód id

`o` Késési segédkódok listája (Csak akkor kitöltött, ha az A_0151_01 ablak

nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és adott
át Késési segédkódokat)

       - Késési segédkód id: Az A_0151_05 ablaktól kapott Késési segédkód id

`o` Időhenger jelző: Időhenger üzemmód esetén true egyébként false
`o` Előrejelzés jelző: Ha a megjelenítési beállítások szerint szükséges az

előrejelzés adatok megjelenítése akkor true egyébként false
`o` Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója

- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén ped ig

beállításo k (a megjelenítést vezérlő ikon) szerint, akkor a kliens az RDE adatok
frissítéséhez meghívja az **S_0151_19** **–** **RDE adatok lekérdezése** szolgáltatást
(RdeAdatokQuery) a következő paraméterekkel:

`o` Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki,

akkor annak a belső azonosítója, egyébként NULL
`o` Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon

menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja,
egyébként NULL

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** A


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 32/526|


`o` Szolgálati hely lista (SzhIdArray): Az **S_0151_02** **–** **Út tengely adatok**

**lekérdezése szolgáltatás** (UttengelySzolgalatiHelyAdatokQuery) által
visszaadott szolgálati helyek listája). A szolgálati hely belső azonosítók
pontos vesszővel elválasztva.
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
Amennyiben az A_0151_05 ablakon van megadva RDE okozó vagy RDE azonosító
szerint szűrés, akkor a kliens a kapott listát ennek megfelelően szűri:

`o` RDE azonosító szerint szűrés: S_0151_19 kimenő paraméter:
Kiterjesztett RDE azonosító (KiterjRdeAzon)
`o` RDE okozó szerinti szűrés: S_0151_19 kimenő paraméter: RDE okozó

belső azonosító (RdeOkozoId)

- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén ped ig

beállításo k (a megjelenítést vezérlő ikonok) szerint, akkor Az S_0151_06 szolgáltatást
a következő paraméterekkel hívja meg:

`o` Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki,

akkor annak a belső azonosítója, egyébként NULL
`o` Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon

menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja,
egyébként NULL
`o` Szolgálati hely lista (SzhIdArray): Az S_0151_02 – Út tengely adatok

lekérdezése szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által
visszaadott szolgálati helyek listája). A szolgálati hely belső azonosítók
pontos vesszővel elválasztva.
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

- #89002 PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül,
Időhenger esetén pedig, amennyiben szükséges, a menetengedélyek megjelenítése a
grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint, akkor az
**S_0151_34** **–** **Menetengedélyek lekérdezése (MenetengedelyekQuery** **)** szo lg ált atást
a következő paraméterekkel hívja meg:

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** A


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 33/526|


`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

  - #89003 PV felhasználónál, fix időszak esetén megjelenítési beállí t ást ó l f üg g etl en ü l,
Időhenger esetén pedig, amennyiben szükséges, a *Kulcsfüggés feloldá* *s* m eg j elen ít és e
a grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) s ze r i n t, ak k o r
az **S_0151_46** **–** **Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery** **)** s zo l g ált atá st
a következő paraméterekkel hívja meg:

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

  - 89001 PV felhasználónál, ha rendelkezik megfelelő j o g o su l t s á g g al
(OP_0151_MGMIranyitoiSzovegMegtekint), akkor Fix időszak eseté n m eg j elen ít ési
beállítástól függetlenül, Időhenger esetén pedig amennyiben a megj elen ítési
beállítások (a megjelenítést vezérlő ikon) szerint szükséges a szövege s megj eg y zés e k
megjelenítése, akkor a kliens a következő paraméterekkel meghívja a z **S** **_** **0** **1** **5** **1** **_** **3** **2 –**
**Szöveges megjegyzések lekérdezése (SzovMegjegyzesekQuery)** szol g ált at ást :

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az Aablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő. [ 89001vége]

A meghívott szolgáltatásoktól és az A_0151_02 ablakról kapott adatok alapján a kliens
program a következőket hajtja végre:

  - Frissíti az ablak fejlécében a címfeliratot

  - Újra rajzolja az út-idő diagram út tengelyét a szükséges tengelyfeliratokkal,

jelölésekkel együtt

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 34/526|



  - Időhenger üzemmód esetén megrajzolja az idővonalat, melyet [#102741] a látható idősíkot

1/3 és 2/3 arányban felosztva pozícionál a kliens, tehát a jövőből na g y o bb i d ő szelet
látható. [ #102741 VÉGE]

  - Az aktuális megjelenítési beállításoknak, szűrési feltételeknek, stílusnak és

vonalkészletnek megfelelően ábrázolja a menetvonalak tény és előrejelzés adatait az
**S_0151_05** szolgáltatástól kapott adatok alapján

  - Ha a megjelenítési beállítások szerint szükséges a menetrendi adatok megjelenítése (az

**S_0151_01** szolgáltatástól kapott adatokban a Menetrend mező értéke: ”1” –
„Összes”), akkor az aktuális megjelenítési beállításoknak, szűrési feltételeknek,
stílusnak és vonalkészletnek megfelelően ábrázolja az S_0151_04 szolgáltatástól
kapott menetrendi adatokat.

  - Ábrázolja az RDE eseményeket a szűrési feltételeknek megfelelően, ha a.

megjelenítési beállítások szerint szükséges (ha az RDE események megjelenítése ikon
bekapcsolt).

  - Ábrázolja a vágányzárakat, ha a megjelenítési beállítások szerint szükséges (ha

Vágányzárak megjelenítése ikon bekapcsolt).

**2.2.3.4.1.23** **- A_0151_03 – Megjelenítési beállítások ablak megnyitása ikon**

Nyomógombként működő ikon, ami mindig elérhető.
Használatakor megnyílik az A_0151_03 – Megjelenítési beállítások modális popup ablak.

Ha a felhasználó nem <Ment> nyomógombbal zárja be az A_0151_03 ablakot, akkor az
A_0151_01 ablakon nincs szükség frissítésre.

Amennyiben a felhasználó <Ment> nyomógombbal zárja be az A_0151_03 ablakot, akkor az
A_0151_01 ablak frissítéséhez a kliens program meghívja a következő szolgáltatásokat:

  - Az **S_0151_01** **–** **Megjelenítési** **beállítások** **lekérdezése** szolgáltatást
(MegjelenitesiBeallitasokQuery) a következő paraméterekkel hívja meg:

`o` Felhasználó azonosító: A felhasználó PASS2 azonosítója
`o` Ablak id: ”A_0151_01”
`o` Listadoboz id: NULL

`o` Profil név: NULL

  - Amennyiben szükséges a menetrendi adatok megjelenítése a grafikonon a

megjelenítési beállítások szerint (az **S_0151_01** szolgáltatástól kapott adatokban a
Menetrend mező értéke: ”1” – „Összes” vagy „2” – [vk54879] „Kijelölt és terv”), akkor a
menetrendi adatok frissítéséhez meghívja az **S_0151_04** **–** **Menetrendi adatok**
**lekérdezése** szolgáltatást (MenetrendiAdatokQuery) a következő paraméterekkel:

`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 35/526|


`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Lekérdezési időszak vége: Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
`o` Szolgálati helyek listája ( **S_0151_02** **–** **Út tengely adatok lekérdezése**

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

     - Szolgálati hely id: Az S_0151_02 szolgáltatás által visszaadott

szolgálati hely belső azonosítója

`o` Forgalmi vonatkategóriák listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Forgalmi vonatkategóriákat.)

     - Forgalmi vonatkategória id: Az A_0151_05 ablaktól kapott Forgalmi

vonatkategória azonosító

`o` Forgalmi vonatnemek listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Forgalmi vonatnemeket.)

     - Forgalmi vonatnem kód: Az A_0151_05 ablaktól kapott Forgalmi

vonatnem kód

`o` Menetvonal tulajdonosok listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Menetvonal tulajdonos azonosítókat.)

     - Menetvonal tulajdonos id: Az A_0151_05 ablaktól kapott Menetvonal

tulajdonos belső azonosítója

`o` Vonatszám tartományok listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Vonatszám tartományokat.)

     - Vonatszámtól: Az A_0151_05 ablaktól kapott Vonatszámtól értéke

     - Vonatszámig: Az A_0151_05 ablaktól kapott Vonatszámig értéke

`o` Eltéréstől (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása

óta az A_0151_05 – Adatok szűrése ablakot használták és az ablak adott
át Eltérés a menetrendtől –tól adatot)
`o` Eltérésig (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása óta

az A_0151_05 – Adatok szűrése ablakot használták és az ablak adott át
Eltérés a menetrendtől –ig adatot)
`o` Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Késési főkódokat)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 36/526|



       - Késési főkód id: Az A_0151_05 ablaktól kapott Késési főkód id

`o` Késési segédkódok listája (Csak akkor kitöltött, ha az A_0151_01 ablak

nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és az
ablak adott át Késési segédkódokat)

       - Késési segédkód id: Az A_0151_05 ablaktól kapott Késési segédkód id

`o` Időhenger jelző: Időhenger üzemmód esetén true egyébként false
`o` Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója

- A tény adatok frissítéséhez meghívja az **S_0151_05 – Tényadatok lekérdezése**

**(TenyadatokQuery)** szolgáltatást a következő paraméterekkel:

`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL
`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Lekérdezési időszak vége: Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
`o` Szolgálati helyek listája (Az S_0151_02 – Út tengely adatok lekérdezése

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

       - Szolgálati hely id: Az S_0151_02 szolgáltatás által visszaadott

szolgálati hely belső azonosítója

`o` Forgalmi vonatkategóriák listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Forgalmi vonatkategóriákat.)

       - Forgalmi vonatkategória id: Az A_0151_05 ablaktól kapott Forgalmi

vonatkategória azonosító

`o` Forgalmi vonatnemek listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Forgalmi vonatnemeket.)

       - Forgalmi vonatnem kód: Az A_0151_05 ablaktól kapott Forgalmi

vonatnem kód

`o` Menetvonal tulajdonosok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Menetvonal tulajdonos azonosítókat.)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 37/526|



       - Menetvonal tulajdonos id: Az A_0151_05 ablaktól kapott Menetvonal

tulajdonos belső azonosítója

`o` Vonatszám tartományok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Vonatszám tartományokat.)

       - Vonatszámtól: Az A_0151_05 ablaktól kapott Vonatszámtól értéke

       - Vonatszámig: Az A_0151_05 ablaktól kapott Vonatszámig értéke

`o` Eltéréstől (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása

óta az A_0151_05 – Adatok szűrése ablakot használták és adott át Eltérés
a menetrendtől –tól adatot)
`o` Eltérésig (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása óta

az A_0151_05 – Adatok szűrése ablakot használták és adott át Eltérés a
menetrendtől –ig adatot)
`o` Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Késési főkódokat)

       - Késési főkód id: Az A_0151_05 ablaktól kapott Késési főkód id

`o` Késési segédkódok listája (Csak akkor kitöltött, ha az A_0151_01 ablak

nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és adott
át Késési segédkódokat)

       - Késési segédkód id: Az A_0151_05 ablaktól kapott Késési segédkód id

`o` Időhenger jelző: Időhenger üzemmód esetén true egyébként false
`o` Előrejelzés jelző: Ha a megjelenítési beállítások szerint szükséges az

előrejelzés adatok megjelenítése akkor true egyébként false
`o` Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója

- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén ped ig

(MegjelenitesiBeallitasokQuery) szolgáltatástól kapott adatok alapján) szerint, akkor a
kliens az RDE adatok frissítéséhez meghívja az **S_0151_19** **–** **RDE adatok**
**lekérdezése** szolgáltatást (RdeAdatokQuery) a következő paraméterekkel:

`o` Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki,

akkor annak a belső azonosítója, egyébként NULL
`o` Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon

menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja,
egyébként NULL
`o` Szolgálati hely lista (SzhIdArray): Az **S_0151_02** **–** **Út tengely adatok**

**lekérdezése szolgáltatás** (UttengelySzolgalatiHelyAdatokQuery) által
visszaadott szolgálati helyek listája). A szolgálati hely belső azonosítók
pontos vesszővel elválasztva.
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** A

**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 38/526|


üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
Amennyiben az A_0151_05 ablakon van megadva RDE okozó vagy RDE azonosító
szerint szűrés, akkor a kliens a kapott listát ennek megfelelően szűri:

`o` RDE azonosító szerint szűrés: S_0151_19 kimenő paraméter:
Kiterjesztett RDE azonosító (KiterjRdeAzon)
`o` RDE okozó szerinti szűrés: S_0151_19 kimenő paraméter: RDE okozó

belső azonosító (RdeOkozoId)

- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén ped ig

beállítások (az S_0151_01 – Megjelenítési beállítások lekérdezése
(MegjelenitesiBeallitasokQuery) szolgáltatástól kapott adatok alapján) szerint, akkor
Az S_0151_06 szolgáltatást a következő paraméterekkel hívja meg:

`o` Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki,

akkor annak a belső azonosítója, egyébként NULL
`o` Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon

menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja,
egyébként NULL
`o` Szolgálati hely lista (SzhIdArray): Az S_0151_02 – Út tengely adatok

lekérdezése szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által
visszaadott szolgálati helyek listája). A szolgálati hely belső azonosítók
pontos vesszővel elválasztva.
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

- #89002 PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül,
Időhenger esetén pedig, amennyiben szükséges, a menetengedélyek megjelenítése a

–
grafikonon a megjelenítési beállítások (az S_0151_01 Megjelenítési beállítások
lekérdezése (MegjelenitesiBeallitasokQuery) szolgáltatástól kapott ad at o k alapj án )
szerint, akkor az **S_0151_34** **–** **Menetengedélyek** **l** **ek** **érdezés** **e**
**(MenetengedelyekQuery)** szolgáltatást a következő paraméterekkel hí v j a m eg :

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** A


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 39/526|


üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

  - #89003 PV felhasználónál, fix időszak esetén megjelenítési beáll í t ást ó l f üg g etl en ü l,
Időhenger esetén pedig, amennyiben szükséges, a *Kulcsfüggés feloldá* *s* m eg j elen ít és e
a grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) s ze r i n t, ak k o r
az **S_0151_46** **–** **Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery** **)** s zo l g ált atá st
a következő paraméterekkel hívja meg:

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

  - 89001 PV felhasználónál, ha rendelkezik megfelelő j o g o su l t s á g g al
(OP_0151_MGMIranyitoiSzovegMegtekint), akkor Fix időszak eseté n m eg j elen ít ési
beállítástól függetlenül, Időhenger esetén pedig amennyiben a megj elen ítési
beállítások szerint (az S _ 0151 _ 01 – Megjelenítési beállításo k l ek ér de zés e
(MegjelenitesiBeallitasokQuery) szolgáltatástól kapott adatok alapjá n ) szü k s é g es a
szöveges megjegyzések megjelenítése, akkor a kliens a következő par am éter ek k el
meghívja az **S_0151_32** **–** **Szöveges** **megjegyzések** **l** **ek** **érdezés** **e**
**(SzovMegjegyzesekQuery)** szolgáltatást:

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az Aablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő. [ 89001vége]

A meghívott szolgáltatásoktól kapott adatok alapján a kliens program a következőket hajtja
végre:

  - Az **S_0151_01** szolgáltatástól kapott megjelenítési beállításoknak megfelelően

beállítja a következő ikonok állapotát:

`o`      - Eltérések megjelenítése ikon állapotát az eltérések megjelenítésére
vonatkozó beállítás (Elteresek) szerinti állapotra állítja

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 40/526|


`o`     - Késések megjelenítése ikon állapotát a késések megjelenítésére
vonatkozó beállítás (Kesesek) szerinti állapotra állítja

`o`     - Kör jelölők megjelenítése ikon állapotát a körjelölők
megjelenítésére vonatkozó beállítás (Korjelolok) szerinti állapotra állítja

`o`     - Vágányzárak megjelenítése ikon állapotát a vágányzárak
megjelenítésére vonatkozó beállítás (Vaganyzarak) szerinti állapotra
állítja

`o`     - RDE események megjelenítése ikon állapotát az RDE események
megjelenítésére vonatkozó beállítás (RDE_Esemenyek) szerinti állapotra
állítja

`o`     - Be és kilépő vonatok jelölése ikon állapotát a be/ kilépés jelölés
megjelenítésére vonatkozó beállítás (Grafikonra_Be_Kilepes) szerinti
állapotra állítja

`o`     - Foglalt vágányra bejárat jelölése ikon állapotát a foglalt vágányra
bejárás megjelenítésére vonatkozó beállítás (Foglaltra_Jar) szerinti
állapotra állítja

`o`     - MGM vágányok megjelenítése ikon állapotát az MGM vágányok
megjelenítésére vonatkozó beállítás (MGM_Vaganyok) szerinti állapotra
állítja

`o`     - Megállóhelyek megjelenítése ikon állapotát a megállóhelyek
megjelenítésére vonatkozó beállítás (Megallohelyek) szerinti állapotra
állítja

- Az **S_0151_01** szolgáltatástól kapott megjelenítési beállítások szerint az aktuális

stílusnak megfelelően újra rajzolja a diagram tengelyeit a szükséges
tengelyfeliratokkal, jelölésekkel együtt

- A megjelenítési beállításoknak, szűrési feltételeknek, stílusnak és vonalkészletnek

megfelelően ábrázolja a menetvonalak tény és előrejelzés adatait az **S_0151_05**
szolgáltatástól kapott adatok alapján

- Ha a megjelenítési beállítások szerint szükséges a menetrendi adatok megjelenítése (az

**S_0151_01** szolgáltatástól kapott adatokban a Menetrend mező értéke: ”1” –
„Összes”), akkor a megjelenítési beállításoknak, szűrési feltételeknek, stílusnak és
vonalkészletnek megfelelően ábrázolja az **S_0151_04** szolgáltatástól kapott
menetrendi adatokat.

- Ábrázolja az RDE eseményeket a szűrési feltételeknek megfelelően, ha a.

megjelenítési beállítások szerint szükséges (ha az RDE események megjelenítése ikon
bekapcsolt).

- Ábrázolja a vágányzárakat, ha a megjelenítési beállítások szerint szükséges (ha

Vágányzárak megjelenítése ikon bekapcsolt).

- A kamera nézetet és a nagyítási szintet az A_0151_03 ablak megnyitása előtti

állapotra állítja.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 41/526|


**2.2.3.4.1.24** **-** **A_0151_05** **–** **Adatok szűrése ablak megnyitása ikon**

Nyomógombként működő ikon, ami mindig elérhető. Használatakor megnyílik az A _ 0151 _ 05

–
Adatok szűrése modális popup ablak. Amennyiben a felhasználó nem az <Alkalmaz>
nyomógombbal zárja be az A _ 0151 _ 05 ablakot, akkor az A _ 0151 _ 01 ablakot nem frissíti a

program.

Amennyiben a felhasználó <Alkalmaz> nyomógombbal zárja be az Aakkor a kliens program az Aadatokat felhasználva, meghívja a következő szolgáltatásokat: _ 0151 _ 01 ablak frissítéséhez, az A _ 0151 __ 05 ablaktól kapott 0151 _ 05 ablakot,

  - Amennyiben szükséges a menetrendi adatok megjelenítése a g raf i k o n o n a

megjelenítési beállítások szerint (a Menetrend mező értéke: ” 1 ” – „Öss zes” v ag y „2” –
vk54879 „Kijelölt és terv ” ), akkor a menetrendi adatok frissítéséhez megh í v j a az
**S_0151_04** **–** **Menetrendi** **adatok** **lekérdezése** szo lg ált atást
(MenetrendiAdatokQuery) a következő paraméterekkel:

`o` Menetirányítói szakasz kód: Ha az A _ 0151 _ 02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az Abelső azonosítója, egyébként NULL _ 0151 _ 02 ablakon vonalat választott ki, akkor annak a

`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Lekérdezési időszak vége: Fix időszak üzemmód esetén az Aablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
`o` Szolgálati helyek listája ( **S_0151_02** **–** **Út tengely adatok lekérdezése**

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

        - Szolgálati hely id: Az S _ 01 5 1 _ 02 szolgáltatás által visszaadott

szolgálati hely belső azonosítója

`o` Forgalmi vonatkategóriák listája: (Csak akkor kitöltött, ha az A_0151_05

–
Adatok szűrése ablak adott át Forgalmi vonatkategóriákat.)

        - Forgalmi vonatkategória id: Az A _ 0151 _ 05 ablaktól kapott Forgalmi

vonatkategória azonosító

`o` Forgalmi vonatnemek listája: (Csak akkor kitöltött, ha az AAdatok szűrése ablak adott át Forgalmi vonatnemeket.) _ 0151 _ 05 –

        - Forgalmi vonatnem kód: Az A_ 0151 _ 05 ablaktól kapott Forgalmi

vonatnem kód

`o` Menetvonal tulajdonosok listája: (Csak akkor kitöltött, ha az A _ 0151 _ 05

–
Adatok szűrése ablak adott át Menetvonal tulajdonos azonosítókat.)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 42/526|



       - Menetvonal tulajdonos id: Az Atulajdonos belső azonosítója _ 0151 _ 05 ablaktól kapott Menetvonal

`o` Vonatszám tartományok listája: (Csak akkor kitöltött, ha az A _ 0151 _ 05

–
Adatok szűrése ablak adott át Vonatszám tartományokat.)

       - Vonatszámtól: Az A _ 0151 _ 05 a bl aktól kapott Vonatszámtól értéke

       - Vonatszámig: Az A _ 0151 _ 05 ab la któl kapott Vonatszámig értéke

`o` Eltéréstől (perc) (Csak akkor kitöltött, ha az A _ 0151 _ 05 – Adatok

szűrése ablak adott át Eltérés a menetrendtől – tól adatot)
`o` Eltérésig (perc) (Csak akkor kitöltött, ha az A _ 0151_05 – Adatok szűrése

ablak adott át Eltérés a menetrendtől – ig adatot)
`o` Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az AAdatok szűrése ablak adott át Késési főkódokat) _ 0151 _ 05 –

       - Késési főkód id: Az A _ 0151 _ 05 ablaktól kapott Késési főkód id

`o` Késési segédkódok listája (Csak akkor kitöltött, ha az AAdatok szűrése ablak adott át Késési segédkódokat) _ 0151 _ 05 –

       - Késési segédkód id: Az A _ 0151 _ 05 ablaktól kapott Késési segédkód id

`o` Időhenger jelző: Időhenger üzemmód esetén true egyébként false
`o` Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója

- A tény adatok frissítéséhez meghívja az **S_0151_05** **–** **Ténya** **da** **to** **k** **l** **ek** **érdezés** **e**

**(TenyadatokQuery)** szolgáltatást a következő paraméterekkel:

`o` Menetirányítói szakasz kód: Ha az A _ 0151 _ 02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az Abelső azonosítója, egyébként NULL _ 0151 _ 02 ablakon vonalat választott ki, akkor annak a

`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Lekérdezési időszak vége: Fix időszak üzemmód esetén az Aablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
`o` Szolgálati helyek listája (Az S_0151_02 – Út tengely adatok lekérdezése

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

       - Szolgálati hely id: Az S _ 0151 _ 02 szolgáltatás által visszaadott

szolgálati hely belső azonosítója

`o` Forgalmi vonatkategóriák listája (Csak akkor kitöltött, ha az A _ 0151 _ 05

–
Adatok szűrése ablak adott át Forgalmi vonatkategóriákat.)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 43/526|



       - Forgalmi vonatkategória id: Az A _ 0151 _ 05 ablaktól kapott Forgalmi

vonatkategória azonosító

`o` Forgalmi vonatnemek listája (Csak akkor kitöltött, ha az AAdatok szűrése ablak adott át Forgalmi vonatnemeket.) _ 0151 _ 05 –

       - Forgalmi vonatnem kód: Az A_ 0151 _ 05 ablaktól kapott Forgalmi

vonatnem kód

`o` Menetvonal tulajdonosok listája (Csak akkor kitöltött, ha az A _ 0151 _ 05

–
Adatok szűrése ablak adott át Menetvonal tulajdonos azonosítókat.)

       - Menetvonal tulajdonos id: Az Atulajdonos belső azonosítója _ 0151 _ 05 ablaktól kapott Menetvonal

`o` Vonatszám tartományok listája (Csak akkor kitöltött, ha az AAdatok szűrése ablak adott át Vonatszám tartományokat.) _ 0151 _ 05 –

       - Vonatszámtól: Az A _ 0151 _ 05 a bl aktól kapott Vonatszámtól értéke

       - Vonatszámig: Az A _ 0151 _ 05 ab la któl kapott Vonatszámig értéke

`o` Eltéréstől (perc) (Csak akkor kitöltött, ha az A _ 0151 _ 05 – Adatok

szűrése ablak adott át Eltérés a menetrendtől – tól adatot)
`o` Eltérésig (perc) (Csak akkor kitöltött, ha az A _ 0151 _ 05 – Adatok szűrése

ablak adott át Eltérés a menetrendtől – ig adatot)
`o` Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az AAdatok szűrése ablak adott át Késési főkódokat) _ 0151 _ 05 –

       - Késési főkód id: Az A _ 0151 _ 05 ablaktól kapott Késési főkód id

`o` Késési segédkódok listája (Csak akkor kitöltött, ha az AAdatok szűrése ablak adott át Késési segédkódokat) _ 0151 _ 05 –

       - Késési segédkód id: Az A _ 0151 _ 05 ablaktól kapott Késési segédkód id

`o` Időhenger jelző: Időhenger üzemmód esetén true egyébként false
`o` Előrejelzés jelző: Ha a megjelenítési beállítások szerint szükséges az

előrejelzés adatok megjelenítése akkor true egyébként false
`o` Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója

- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhen g er esetén ped ig

amennyiben szükséges az RDE események megjelenítése a grafikonon a m egj elen ítési
beállítások (a megjelenítést vezérlő ikon) szerint, akkor a kliens az aláb b i l o g i k a
szerint szűri az S _ 0151 _ 19 szolgáltatás által visszaadott RDE esemény l i st át:

`o` RDE Kiterjesztett RDE azonosító (KiterjRdeAzon) azonosító szerint szűrés: S _ 0151 _ 19 kimenő paraméter:
`o` RDE okozó szerinti szűrés: Sbelső azonosító (RdeOkozoId) _ 0151 _ 19 kimenő paraméter: RDE okozó

- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhen g er esetén ped ig

amennyiben szükséges a vágányzárak megjelenítése a grafikonon a m eg j elen ít ési

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 44/526|


beállítások (a megjelenítést vezérlő ikonok) szerint, akkor Az S_0151_ 0 6 szo lg ált atást
a következő paraméterekkel hívja meg:

`o` Vonal id (VonalId): Ha az Aakkor annak a belső azonosítója, egyébként NULL _ 0151 _ 02 ablakon vonalat választott ki,

`o` Menetirányítói szakasz kódja (MisKod): Ha az Amenetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja, _ 0151 _ 02 ablakon

egyébként NULL
`o` Szolgálati hely lista (SzhIdArray): Az S_0151_02 – Út tengely adatok

lekérdezése szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által
visszaadott szolgálati helyek listája). A szolgálati hely belső azonosítók
pontos vesszővel elválasztva.
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az Aablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

- #89002 PV felhasználónál, fix időszak esetén megjelenítési beállí t ást ó l f üg g etl en ü l,
Időhenger esetén pedig, amennyiben szükséges, a menetengedélyek m eg j elen ítés e a
grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) szeri n t, ak ko r az
**S_0151_34** **–** **Menetengedélyek lekérdezése (MenetengedelyekQuery** **)** szo lg ált atást
a következő paraméterekkel hívja meg:

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

- #89003 PV felhasználónál, fix időszak esetén megjelenítési beállí t ást ó l f üg g etl en ü l,
Időhenger esetén pedig, amennyiben szükséges, a *Kulcsfüggés feloldá* *s* m eg j elen ít és e
a grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) s ze r i n t, ak k o r
az **S_0151_46** **–** **Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery** **)** s zo l g ált atá st
a következő paraméterekkel hívja meg:

`o` Szolgálati hely belső azonosítója ( **SzhId** )) = a kiválasztott szolgálati hely

belső azonosítója
`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 45/526|


`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

  - 89001 PV felhasználónál, ha rendelkezik megfelelő j o g o su l ts á g g al
(OP_0151_MGMIranyitoiSzovegMegtekint), akkor Fix időszak eseté n m eg j elen ít ési
beállítástól függetlenül, Időhenger esetén pedig amennyiben a megj elen ítési
beállítások (a megjelenítést vezérlő ikon) szerint szükséges a szöveges megj eg y zés e k
megjelenítése, akkor a kliens a következő paraméterekkel meghívja a z **S** **_** **0** **1** **5** **1** **_** **3** **2 –**
**Szöveges megjegyzések lekérdezése (SzovMegjegyzesekQuery)** szol g ált at ást :

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az Aablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő. [ 89001vége]

A meghívott szolgáltatásoktól és az A _ 0151 _ 05 ablaktól kapott adatok alapján a kliens
program a következőket hajtja végre:

  - Az A _ 0151 _ 05 ablakon beállított szűrési feltételeknek megf elelő en b eál l í t j a a

következő ikonok állapotát:

`o` ablakon lévő „Páros      - Páros viszonylat megjelenítése ikon állapotát az A ” kapcsoló értéke szerinti állapotra állítja. _ 0151 _ 05

`o` ablakon lévő „Páratlan      - Páratlan viszonylat megjelenítése ikon állapotát az A ” kapcsoló értéke szerinti állapotra állítja. _ 0151 _ 05

`o` ablakon lévő „Közlekedő      - Közlekedő vonatok megjelenítése ikon állapotát az A ” kapcsoló értéke szerinti állapotra állítja. _ 0151 _ 05

`o` ablakon lévő „Nem közlekedő      - Nem közlekedő vonatok megjelenítése ikon állapotát az A ” kapcsoló értéke szerinti állapotra állítja. _ 0151 _ 05

  - VK105782 Ha az A _ 0151 _ 01 ablak fejlécében a Vonatszám kitöltött, ak kor ell en ő rzi az
A_0151_05 ablakon beállított szűrési feltételeknél a vonatszám tartomán y o k ért ék eit.
Ha a következő feltételek közül valamelyik teljesül, akkor törli a f ejl écb en a
Vonatszám mező tartalmát:

`o` A kapott első vonatszám tartomány – tól mezőjének tartalma nem eg y ezik
meg a Vonatszám mezőben lévő ért ék kel.

`o` A kapott vonatszám tartományoknál nem csak az első vonatszám t art om án y
első mezője kitöltött. [ VK105782vége]

  - Az aktuális szűrési feltételeknek, megjelenítési beállításoknak meg f elelő en az akt u ális

stílus és vonalkészlet szerint ábrázolja a menetvonalak tény és előrejelzés ad at ait az
**S_0151_05** szolgáltatástól kapott adatok alapján.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 46/526|



  - Ha a megjelenítési beállítások szerint szükséges a menetrendi adatok m eg j elen ítés e ( a

Menetrend mező értéke: ” 1 ” – „Összes ” ), akkor az aktuális szűrés i f elt étele k n ek,
megjelenítési beállításoknak megfelelően az aktuális stílus és vonalk és zl et szeri n t
ábrázolja az **S_0151_04** szolgáltatástól kapott menetrendi adatokat.

  - Ábrázolja az RDE eseményeket a szűrési feltételeknek m eg f elelő en, h a a.

megjelenítési beállítások szerint szükséges (ha az RDE események meg j elen ít és e i k o n
bekapcsolt).

  - Ábrázolja a vágányzárakat, ha a megjelenítési beállítások szeri n t szü k ség es ( h a

Vágányzárak megjelenítése ikon bekapcsolt).

  - A kamera nézetet és a nagyítási szintet az A _ 0151 _ 05 ablak m eg ny i t ása elő t t i

állapotra állítja.

**2.2.3.4.1.25** **- A_0151_04 – Stílusok és vonalak beállítása ablak megnyitása ikon**

Nyomógombként működő ikon, ami mindig elérhető.
Használatakor megnyílik az A_0151_04 – Stílusok és vonalak beállítása modális popup ablak
Stílus választása üzemmódban.

A_0151_04 ablakot, akkor az A_0151_01 ablakon nincs szükség változtatásra.

A_0151_04 ablakot, akkor az A_0151_01 ablak frissítéséhez a kliens program meghívja a
következő szolgáltatásokat:

  - Amennyiben szükséges a menetrendi adatok megjelenítése a grafikonon a

megjelenítési beállítások szerint (Menetrend mező értéke: ”1” – „Összes” vagy „2” –
vk54879 „Kijelölt és terv”), akkor a menetrendi adatok frissítéséhez meghívja az
**S_0151_04** **–** **Menetrendi** **adatok** **lekérdezése** szolgáltatást
(MenetrendiAdatokQuery) a következő paraméterekkel:

`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL
`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Lekérdezési időszak vége: Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
`o` Szolgálati helyek listája ( **S_0151_02** **–** **Út tengely adatok lekérdezése**

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

        - Szolgálati hely id: Az S_0151_02 szolgáltatás által visszaadott

szolgálati hely belső azonosítója

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** Alkalmaz

**törölt:** Alkalmaz


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 47/526|


`o` Forgalmi vonatkategóriák listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Forgalmi vonatkategóriákat.)

       - Forgalmi vonatkategória id: Az A_0151_05 ablaktól kapott Forgalmi

vonatkategória azonosító

`o` Forgalmi vonatnemek listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Forgalmi vonatnemeket.)

       - Forgalmi vonatnem kód: Az A_0151_05 ablaktól kapott Forgalmi

vonatnem kód

`o` Menetvonal tulajdonosok listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Menetvonal tulajdonos azonosítókat.)

       - Menetvonal tulajdonos id: Az A_0151_05 ablaktól kapott Menetvonal

tulajdonos belső azonosítója

`o` Vonatszám tartományok listája: (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Vonatszám tartományokat.)

       - Vonatszámtól: Az A_0151_05 ablaktól kapott Vonatszámtól értéke

       - Vonatszámig: Az A_0151_05 ablaktól kapott Vonatszámig értéke

`o` Eltéréstől (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása

óta az A_0151_05 – Adatok szűrése ablakot használták és az ablak adott
át Eltérés a menetrendtől –tól adatot)
`o` Eltérésig (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása óta

az A_0151_05 – Adatok szűrése ablakot használták és az ablak adott át
Eltérés a menetrendtől –ig adatot)
`o` Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
az ablak adott át Késési főkódokat)

       - Késési főkód id: Az A_0151_05 ablaktól kapott Késési főkód id

`o` Késési segédkódok listája (Csak akkor kitöltött, ha az A_0151_01 ablak

nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és az
ablak adott át Késési segédkódokat)

       - Késési segédkód id: Az A_0151_05 ablaktól kapott Késési segédkód id

`o` Időhenger jelző: Időhenger üzemmód esetén true egyébként false
`o` Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója

- A tény adatok frissítéséhez meghívja az **S_0151_05 – Tényadatok lekérdezése**

**(TenyadatokQuery)** szolgáltatást a következő paraméterekkel:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 48/526|


`o` Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL
`o` Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL
`o` Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Lekérdezési időszak vége: Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
`o` Szolgálati helyek listája (Az S_0151_02 – Út tengely adatok lekérdezése

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott
szolgálati helyek listája)

     - Szolgálati hely id: Az S_0151_02 szolgáltatás által visszaadott

szolgálati hely belső azonosítója

`o` Forgalmi vonatkategóriák listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Forgalmi vonatkategóriákat.)

     - Forgalmi vonatkategória id: Az A_0151_05 ablaktól kapott Forgalmi

vonatkategória azonosító

`o` Forgalmi vonatnemek listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Forgalmi vonatnemeket.)

     - Forgalmi vonatnem kód: Az A_0151_05 ablaktól kapott Forgalmi

vonatnem kód

`o` Menetvonal tulajdonosok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Menetvonal tulajdonos azonosítókat.)

     - Menetvonal tulajdonos id: Az A_0151_05 ablaktól kapott Menetvonal

tulajdonos belső azonosítója

`o` Vonatszám tartományok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Vonatszám tartományokat.)

     - Vonatszámtól: Az A_0151_05 ablaktól kapott Vonatszámtól értéke

     - Vonatszámig: Az A_0151_05 ablaktól kapott Vonatszámig értéke

`o` Eltéréstől (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása

óta az A_0151_05 – Adatok szűrése ablakot használták és adott át Eltérés
a menetrendtől –tól adatot)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 49/526|


`o` Eltérésig (perc) (Csak akkor kitöltött, ha az A_0151_01 ablak nyitása óta

az A_0151_05 – Adatok szűrése ablakot használták és adott át Eltérés a
menetrendtől –ig adatot)
`o` Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az A_0151_01

ablak nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és
adott át Késési főkódokat)

       - Késési főkód id: Az A_0151_05 ablaktól kapott Késési főkód id

`o` Késési segédkódok listája (Csak akkor kitöltött, ha az A_0151_01 ablak

nyitása óta az A_0151_05 – Adatok szűrése ablakot használták és adott
át Késési segédkódokat)

       - Késési segédkód id: Az A_0151_05 ablaktól kapott Késési segédkód id

`o` Időhenger jelző: Időhenger üzemmód esetén true egyébként false
`o` Előrejelzés jelző: Ha a megjelenítési beállítások szerint szükséges az

előrejelzés adatok megjelenítése akkor true egyébként false
`o` Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső

azonosítója

- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén ped ig

beállítások (a megjelenítést vezérlő ikon) s zerint, akkor a kliens az RDE adatok
frissítéséhez meghívja az **S_0151_19** **–** **RDE adatok lekérdezése** szolgáltatást
(RdeAdatokQuery) a következő paraméterekkel:

`o` Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki,

akkor annak a belső azonosítója, egyébként NULL
`o` Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon

menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja,
egyébként NULL
`o` Szolgálati hely lista (SzhIdArray): Az **S_0151_02** **–** **Út tengely adatok**

**lekérdezése szolgáltatás** (UttengelySzolgalatiHelyAdatokQuery) által
visszaadott szolgálati helyek listája). A szolgálati hely belső azonosítók
pontos vesszővel elválasztva.
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.
Amennyiben az A_0151_05 ablakon van megadva RDE okozó vagy RDE azonosító
szerint szűrés, akkor a kliens a kapott listát ennek megfelelően szűri:

`o` RDE azonosító szerint szűrés: S_0151_19 kimenő paraméter:
Kiterjesztett RDE azonosító (KiterjRdeAzon)
`o` RDE okozó szerinti szűrés: S_0151_19 kimenő paraméter: RDE okozó

belső azonosító (RdeOkozoId)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** A


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 50/526|



- Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén ped ig

beállítások (a megjelenítést vezérlő ikonok) s zerint, akkor Az S_0151_06 szolgáltatást
a következő paraméterekkel hívja meg:

`o` Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki,

akkor annak a belső azonosítója, egyébként NULL
`o` Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon

menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja,
egyébként NULL
`o` Szolgálati hely lista (SzhIdArray): Az S_0151_02 – Út tengely adatok

lekérdezése szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által
visszaadott szolgálati helyek listája). A szolgálati hely belső azonosítók
pontos vesszővel elválasztva.
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól
kapott múlt időintervallum paraméter által meghatározott idő.
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02

ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az
aktuális időpont plusz az mgm_A_0151_02 ablaktól kapott jövő
időintervallum paraméter által meghatározott idő.

- #89002 PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül,
Időhenger esetén pedig, amennyiben szükséges, a menetengedélyek megjelenítése a
grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint, akkor az
**S_0151_34** **–** **Menetengedélyek lekérdezése (MenetengedelyekQuery** **)** szo lg ált atást
a következő paraméterekkel hívja meg:

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

- #89003 PV felhasználónál, fix időszak esetén megjelenítési beáll í t ást ó l f üg g etl en ü l,
Időhenger esetén pedig, amennyiben szükséges, a *Kulcsfüggés feloldás* m eg j elen ít és e
a grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) s ze r i n t, ak k o r
az **S_0151_46** **–** **Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery** **)** s zo l g ált atá st
a következő paraméterekkel hívja meg:

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet ( **IdoszakKezd** ): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** A


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 51/526|


üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az **IdoszakVeg** ): Fix időszak üzemmód esetén az A _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő.

  - 89001 PV felhasználónál, ha rendelkezik megfelelő j o g o su l t s á g g al
(OP_0151_MGMIranyitoiSzovegMegtekint), akkor Fix időszak eseté n m eg j elen ít ési
beállítástól függetlenül, Időhenger esetén pedig amennyiben a megj elen ítési
beállítások (a megjelenítést vezérlő ikon) szerint szükséges a szöveges megj eg y zés e k
megjelenítése, akkor a kliens a következő paraméterekkel meghívja a z **S** **_** **0** **1** **5** **1** **_** **3** **2 –**
**Szöveges megjegyzések lekérdezése (SzovMegjegyzesekQuery)** szol g ált at ást :

`o` Ábra belső azonosítója ( **AbraId** ) = a kiválasztott ábra belső azonosítója
`o` Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az

A _ 0151 _ 02 ablaktól kapott lekérdezési időszak kezdete. Időhenger
üzemmód esetén az aktuális időpont mínusz az Akapott múlt időintervallum paraméter által meghatározott idő. _ 0151 _ 02 ablaktól
`o` Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az Aablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az _ 0151 _ 02

aktuális időpont plusz az A _ 0151 _ 02 ablaktól kapott jövő időintervallum
paraméter által meghatározott idő. [ 89001vége]

A meghívott szolgáltatások adatai és az A_0151_04 ablakról kapott stílus és vonalkészlet
alapján (az A_0151_04 ablaktól stílus és vonalkészlet id-t kap, amihez az
A0151MenetvGrafMegj.Style.js fájlból olvassa ki a részletes adatokat) a kliens program a
következőket hajtja végre:

  - A grafikon háttér színét az A_0151_04 ablakon beállított stílusnak megfelelőre

változtatja

  - Az A_0151_04 ablaktól kapott stílusban újra rajzolja a diagram tengelyeit a szükséges

tengelyfeliratokkal, jelölésekkel együtt

  - Időhenger idő üzemmód esetén az idővonal színét az A_0151_04 ablakon beállított

stílusnak megfelelőre változtatja

  - Az A_0151_04 ablaktól kapott stílusnak és vonalkészletnek, továbbá a megjelenítési

beállításoknak és szűrési feltételeknek megfelelően ábrázolja a menetvonalak tény és
előrejelzés adatait az **S_0151_05** szolgáltatástól kapott adatok alapján. (Azokat a
menetvonalakat, amelyeknél a forgalmi vonatnem NULL az „Idegen menetvonalak”hoz megadott színnel ábrázolja.)

  - Ha a megjelenítési beállítások szerint szükséges a menetrendi adatok megjelenítése

(Menetrend mező értéke: ”1” – „Összes”), akkor az A_0151_04 ablaktól kapott
stílusnak és vonalkészletnek, továbbá a megjelenítési beállításoknak és szűrési
feltételeknek megfelelően ábrázolja az **S_0151_04** szolgáltatástól kapott menetrendi
adatokat(Azokat a menetvonalakat, amelyeknél a forgalmi vonatnem NULL az
„Idegen menetvonalak”-hoz megadott színnel ábrázolja.)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 52/526|


| Ábrázolja az RDE eseményeket a szűrési feltételeknek megfelelően, ha a. megjelenítési beállítások szerint szükséges (ha az RDE események megjelenítése ikon bekapcsolt).  Ábrázolja a vágányzárakat, ha a megjelenítési beállítások szerint szükséges (ha Vágányzárak megjelenítése ikon bekapcsolt).  A kamera nézetet és a nagyítási szintet az A_0151_04 ablak megnyitása előtti állapotra állítja. 2.2.3.4.1.26 #88994 - A_0151_06 – Ábra szintű információk ablak megnyitása ikon - (BÉ) Nyomógombként működő ikon, ami csak ábra alapon megnyitott diagram megjelenítés esetén érhető el PV felhasználók számára, minden üzemmódban. Megtekint és szerkeszt (irányítói) üzemmód, illetve azon belül Időhenger és Fix időszak idő üzemmód esetén egyaránt kezelhető. Használatakor megnyílik az „A_0151_06 – Ábra szintű információk” modális popup ablak, amely csak adatok megtekintésére szolgál. Ha a felhasználó bezárja az „A_0151_06 – Ábra szintű információk” ablakot, akkor az A_0151_01 ablakon nincs szükség változtatásra. 2.2.3.4.1.27 #88952 - Szolgálat befejezése ikon Az ikon működése megegyezik a szerkesztő ikonsornál a Szolgálat befejezése ikon pontban leírtakkal - Szerkesztés menü ikon Irányítói üzemmódban, ha egy ábrát a felhasználó szerkesztésre lefoglalt, akkor válik kezelhetővé a Szerkesztés menü ikon. Az ikonra kattintva jelennek meg az alsó ikon sorban a szerkesztés során használható ikonok (szerkesztő ikonsor). 102317 Az ikonsoron azokra az ikonokra kattintva, amelyek szerkesztőpanelt nyitnak meg, a grafikon automatikus frissítésének idején „Adatok letöltése” üzenet jelenik meg, amely a frissítés befejezésekor automatikusan eltűnik. Az automatikus frissítés után kerülnek meghívásra az esetleges szolgáltatások, illetve nyílik meg az aktuális szerkesztőpanel. 102317 vége 2.2.3.4.2.1 #88953 - Vágányzár szerkesztése ikon Irányítói üzemmódban, egy ábrán megjelenő vágányzárnál, ha az ábrát a felhasználó szerkesztésre lefoglalta (ami csak időhenger üzemmódban lehetséges) és a vágányzárat kiválasztotta, akkor válik kezelhetővé a Szerkesztés menüponthoz tartozó Vágányzár szerkesztése ikon. Az ikonra kattintva a kliens program meghívja az S_0151_22 – Vágányzár szerkesztéshez adatok lekérdezése (VaganyzarSzerkeszteshezQuery) szolgáltatást a kiválasztott vágányzár belső azonosítójával (VgzId), ami visszaadja a szerkesztéshez szükséges adatokat.|törölt: <#> - A_0151_05 – Adatok szűrése ablak megnyitása ikon¶ Nyomógombként működő ikon, ami mindig elérhető. Használatakor megnyílik az A_0151_05 – Adatok szűrése modális popup ablak. Amennyiben a felhasználó nem az <Alkalmaz> nyomógombbal zárja be az A_0151_05 ablakot, akkor az A_0151_01 ablakot nem frissíti a program.¶ Amennyiben a felhasználó <Alkalmaz> nyomógombbal zárja be az A_0151_05 ablakot, akkor a kliens program az A_0151_01 ablak frissítéséhez, az A_0151_05 ablaktól kapott adatokat felhasználva, meghívja a következő szolgáltatásokat:¶ <#>Amennyiben szükséges a menetrendi adatok megjelenítése a grafikonon a megjelenítési beállítások szerint (a Menetrend mező értéke: ”1” – „Összes” vagy „2” – vk54879 „Kijelölt és terv”), akkor a menetrendi adatok frissítéséhez meghívja az S_0151_04 – Menetrendi adatok lekérdezése szolgáltatást (MenetrendiAdatokQuery) a következő paraméterekkel:¶ <#>Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként NULL ¶ <#>Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a belső azonosítója, egyébként NULL¶ <#>Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az A_0151_02 ablaktól kapott lekérdezési időszak kezdete. Időhenger üzemmód esetén az aktuális időpont mínusz az A_0151_02 ablaktól kapott múlt időintervallum paraméter által meghatározott idő.¶ <#>Lekérdezési időszak vége: Fix időszak üzemmód esetén az A_0151_02 ablaktól kapott lekérdezési időszak vége. Időhenger üzemmód esetén az aktuális időpont plusz az A_0151_02 ablaktól kapott jövő időintervallum paraméter által meghatározott idő.¶ <#>Szolgálati helyek listája (S_0151_02 – Út tengely adatok lekérdezése szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott szolgálati helyek listája)¶ <#>Szolgálati hely id: Az S_0151_02 szolgáltatás által visszaadott szolgálati hely belső azonosítója¶ <#>Forgalmi vonatkategóriák listája: (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott át Forgalmi vonatkategóriákat.)¶ <#>Forgalmi vonatkategória id: Az A_0151_05 ablaktól kapott Forgalmi vonatkategória azonosító¶ <#>Forgalmi vonatnemek listája: (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott át Forgalmi vonatnemeket.)¶ <#>Forgalmi vonatnem kód: Az A_0151_05 ablaktól kapott Forgalmi vonatnem kód¶ <#>Menetvonal tulajdonosok listája: (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott át Menetvonal tulajdonos azonosítókat.)¶ <#>Menetvonal tulajdonos id: Az A_0151_05 ablaktól kapott Menetvonal tulajdonos belső azonosítója¶ <#>Vonatszám tartományok listája: (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott át Vonatszám tartományokat.)¶ <#>Vonatszámtól: Az A_0151_05 ablaktól kapott Vonatszámtól értéke¶ <#>Vonatszámig: Az A_0151_05 ablaktól kapott Vonatszámig értéke¶ <#>Eltéréstől (perc) (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott át Eltérés a menetrendtől –tól adatot)¶ <#>Eltérésig (perc) (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott át Eltérés a menetrendtől –ig adatot)¶ <#>Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott át Késési főkódokat)¶ <#>Késési főkód id: Az A_0151_05 ablaktól kapott Késési főkód id¶ ...|Col3|
|---|---|---|
|||...|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 53/526|


Ezután az ablak átvált Vágány szerkesztése üzemmódra, megjelenik az ehhez tartozó fejléc és
a kiválasztott vágányzári objektum szerkeszthetővé, a grafikonon megjelenő többi objektum
pedig nem kiválaszthatóvá válik. A kiválasztott vágányzári objektum szerkesztése egyszerre
történhet a grafikonon és a szerkesztő fejlécre pozicionálva beúszó szerkesztő panelen. A

–
beúszó szerkesztő panelen lévő mezőket, az S_0151_22 Vágányzár szerkesztéshez adatok
lekérdezése (VaganyzarSzerkeszteshezQuery) szolgáltatástól kapott adatokkal tölti fel a
kliens program.

A vágányzárak szerkesztésének leírása a „Vágányzárak megjelenítése, tény vágányzárak
szerkesztése a diagramon ” című fejezeten belül, a „Vágányzárak szerkesztése ” alcím alatt
található.

Egy vágányzár szerkesztésének befejezésekor a vágányzár kijelölése megszűnik, a többi
objektum elérhetővé válik és a Vágányzár szerkesztése ikon nem kezelhetővé válik. [ 88953vége ]

**2.2.3.4.2.2** **[#89001]** **-** **Új szöveges megjegyzés rögzítése ikon**

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta (ami csak időhenger
üzemmódban lehetséges), az Alapfunkcióknál a Szöveges megjegyzések megjelenítése ikon
bekapcsolt állapotú (láthatók a szöveges megjegyzések a grafikonon), akkor kezelhetővé válik
a Szerkesztés menüponthoz tartozó Új szöveges megjegyzés rögzítése ikon.

Az ikonra kattintva a kliens program a grafikonon látható terület középső részére felhelyez
egy új, információ típusú szöveges megjegyzéshez tartozó ikont, amit automatikusan ki is
választ. Az ablak átvált Szöveges megjegyzés szerkesztése üzemmódra, megjelenik az ehhez
tartozó fejléc és az újonnan létrehozott szöveges megjegyzés szerkeszthetővé, a grafikonon
megjelenő többi objektum nem kiválaszthatóvá válik. A szöveges megjegyzés szerkesztése
egyszerre történhet a grafikonon és a szerkesztő fejlécre pozicionálva beúszó szerkesztő
panelen.

A szöveges megjegyzések szerkesztésének leírása a „Szöveges megjegyzések szerkesztése ”
című fejezeten belül található.

A szöveges megjegyzés szerkesztésének befejezésekor, az új szöveges megjegyzés kijelölése
megszűnik, a többi objektum elérhetővé válik és az Új szöveges megjegyzés rögzítése ikon
kezelhetővé válik.

**2.2.3.4.2.3** **-** **Szöveges megjegyzés szerkesztése ikon**

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta (ami csak időhenger
üzemmódban lehetséges) és az ábrán bal egér gombbal [VK105779] ~~egy~~ ~~olyan~~ ~~szöveges~~
~~megjegyzést~~ ~~választott~~ ~~ki~~, ~~amit~~ ~~ő~~ ~~rögzített~~ kiválasztott egy szöveges megjegyzést [ VK105779vége],
akkor kezelhetővé válik a Szerkesztés menüponthoz tartozó Szöveges megjegyzés
szerkesztése ikon.

Az ikonra kattintva az ablak átvált Szöveges megjegyzés szerkesztése üzemmódra,
megjelenik az ehhez tartozó fejléc és a kiválasztott szöveges megjegyzés szerkeszthetővé, a
grafikonon megjelenő többi objektum nem kiválaszthatóvá válik. [VK10577] ~~[9]~~ ~~A~~ ~~szöveges~~
~~megjegyzés~~ ~~szerkesztése~~ ~~egyszerre~~ ~~történhet~~ ~~a~~ ~~grafikonon~~ ~~és~~ ~~a~~ ~~szerkesztő~~ ~~fejlécre~~

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 54/526|


~~pozicionálva~~ ~~beúszó~~ ~~szerkesztő~~ ~~panelen~~ . [VK105779vége] A beúszó szerkesztő panelen lévő

**–**
mezőket, **S_0151_32** **Szöveges megjegyzések lekérdezése (SzovMegjegyzesekQuery)**
szolgáltatástól kapott adatokkal tölti fel a kliens program.

A szöveges megjegyzések szerkesztésének leírása a „Szöveges megjegyzések szerkesztése ”
című fejezeten belül található.

A szöveges megjegyzés szerkesztésének befejezésekor, a szöveges megjegyzés kijelölése
megszűnik, a többi objektum elérhetővé válik és a Szöveges megjegyzés szerkesztése ikon
nem kezelhetővé válik. [89001vége ]

Az ikon a „ **Szerkesztés** ” menüponthoz (ikon) tartozó menüsorban jelenik meg.

Akkor **kezelhető**, ha:

- a grafikon „ **ábra** ” alapján lett megnyitva **ÉS**

- az „ **üzemmód** ” szerkesztés **ÉS**

- a felhasználó „munkahelyén ” van a felhasználó által végrehajtandó adminisztratív
feladat:
`o` Ha a ’ MegjelenitesiBeallitasokQuery.KesesIg ’ = True **ÉS** a
’ TenyadatokQuery.KesesFeladat ’ output változó = True.
`o` Ha a MegjelenitesiBeallitasokQuery.VgAdat = True **ÉS** a
’ TenyadatokQuery.VgAdatFeladat ’ output változó = True.

Kezelésére egy új ablakban megnyílik az A_0151_07 ablak.

Az ablaknak **átadásra** kerülnek (a ’ MunkahelyAdminFeladatokQuery ’ szolgáltatás
hívásához):

- **’** **MunkahelyId** **’** - munkahely belső azonosítója (az A _ 0151 _ 01 grafikon kapja a

’ *’*
munkahely foglalásakor: *TeruletMunkahely.ter_munkahely_id* *)* .

- **'** **KesesIg** **’** - Késésigazolási feladat kell jelző. Az A_0151_01 ablaktól kapott adat.

- **'** **VgAdat** **'** - Vágányadat pótlás feladat kell jelző. Az A_0151_01 ablaktól kapott adat.

Az ikon csak irányítói üzemmódban érhető el, nincs operandushoz kötve. Működése

**–**
nyomógombszerű, kezelésekor a kliens megnyitja az **A_0151_11** **Értesítések előrejelzés**
**változásról** ablakot modális ablakként. Az ikon alapértelmezetten nem kezelhető, csak akkor,
ha az ütemezetten futó **S_0151_57** **–** **Értesítésben érintett (pulzáló) menetvonalak**
**lekérdezése (PulzaloMenetvonalakQuery)** szolgáltatás ad vissza legalább egy rekordot,
ilyen esetben az ikon pulzáló módon jelenik meg. Az A_0151_11 ablak bezárása után a kliens
a szükséges szolgáltatások meghívása után frissíti a grafikon tartalmát. [ #88996 VÉGE]

**2.2.3.4.2.6** **[#88961]** **- Új előrejelzés rögzítése ikon**

- **Irányítói** üzemmódban egy olyan **menetrendi** vonal kiválasztásakor (bárhol a
menetrendi vonalra kattintva), amelyhez az ábrán **nem** tartozik sem **előrejelzés**, sem **tény**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Áthelyezve (beillesztéssel) [8]**

**Áthelyezve (beillesztéssel) [13]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 55/526|


vonal *(’MenetvId’ nem szerepel az ’usp_0151_selTenyadatok’ által visszaadott adatok között)* a
„Szerkesztés” ikonsoron **csak** az „ **Új előrejelzés rögzítése** ” ikon kezelhető.

amelyhez az ábrán olyan tény **érkezési** esemény tartozik, amelynek **nincs indulási**
esemény párja **ÉS** az **nem célállomási érkezési** esemény *(az ’usp_0151_selTenyadatok’*
*’Esemenyek’ tömbben az utolsó rekordnál az "EsemJelleg" = "T" ÉS az "EsemTipId" <> 2*
*(indulás) ÉS <> 6 (áthaladás) ÉS "MenetvIndCelJel" <> "c" szerepel)*, akkor a „Szerkesztés”
ikonsoron **csak** az „ **Új előrejelzés rögzítése** ” ikon kezelhető.
88995 Ha az ábrán van pulzáltatandó menetvonal, a pulzálás leállításra ke rü l .

**Az ikon kezelésekor:**

kerül az új előrejelzés készítés ellenőrzése *(S_0151_48 -* ***UjEloreJelzesEllenorzesQuery*** *-*
*core.usp_0151_checkUjEloreJelzes)* szolgáltatás, amely ellenőrzi, hogy az új előrejelzés
készítéséhez kijelölt menetrendi vonal mentvonalának első MÁV eseménye az ábrára
esik-e.

`o` **Bemenő** adatok:

      - **’MenetvonalId’**       - a menetvonal ’MGMMenetvId’ adata.

      **’TerMunkahelyId’**
      - **’AbraId’**

      **’epaiParamXmlDoc’**
`o` Ha a szolgáltatás UC_01_51_ERR_UJ_ELOREJELZES_HIBA „151014: Új
előrejelzés nem hozható létre, a menetvonal kiindulási állomása nem az ábrán van!”
**üzenetet** ad vissza, a feldolgozás **leáll**, a menetrendi vonal **kijelölése** megmarad.

vonat még nem lépett ki a GySEV-re, új előrejelzés nem hozható létre!” **üzenetet** ad
vissza, a feldolgozás **leáll**, a menetrendi vonal **kijelölése** megmarad.
(A szolgáltatás akkor is ezt az üzenetet adja, ha vonat GySEV-ről tér vissza, ÉS oda
már kilépett, ÉS az első MÁV esemény szolgálati helye nincs az ábrán ÉS a
szolgálati helyen vonat-összeállítás közlés kötelező.)
`o` Ha nem ad vissza hibaüzenetet, akkor folytatódik a működés:
      - Az első MÁV-os **eseménynél** megjelenik egy **vezérlőpálca**,
      - a mentő szolgáltatásnak átadandó **módosítási ok** a szolgáltatástól visszakapott
érték *(’ModOk’ = 1 vagy 2)* lesz.

*(UjEloreJelzesEllenorzesQuery)* szolgáltatás hívás.
`o` Ha az utolsó esemény **típusa** **érkezés** **VAGY** **tartózkodás** *("EsemTipId" = 1 vagy 0* ),
akkor a szolgálati hely és az **idővonal** metszéspontjába egy **új** előrejelzett **indulási**
**esemény** és **vezérlőpálca** kerül beszúrásra ÉS a szolgálati helyre vonatkozó
menetrend szerinti indulási/áthaladási *("EsemTipId" = 2 vagy 6* ) idejének és a
rendszeridő különbségével **új előrejelzés vonal** kerül felrajzolásra az ábra további
részére, azaz a menetrendszerinti időket el kell tolni a fent leírt idővel. (Az
előrejelzés vonal felrajzoláskor nincs figyelembe véve a vonat-összeállítás közlési
kötelezettség, az a menetvonalnak az ábrára eső részére történik.)
`o` A mentő szolgáltatásnak átadandó **módosítási ok** új előrejelzés készítés közbenső
állomásról *(’ModOk’ = 2)* lesz.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [94036]

**törölt:** [94036 vége]

**törölt:** [94036]

**törölt:** [95878]

**törölt:** [96243]

**törölt:** [96243 vége]

**törölt:** [94036]

**törölt:** [94036 vége]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 56/526|


előrejelzés készítés feltételeinek és a hozzátartozó **menetrendi** vonal nincs a kamera
nézeten, akkor az ikon kezelésekor meghívja az ’UjEloreJelzesMenetrendQuery’
szolgáltatást.
`o` **Bemenő** adatok:

      **’MgmMvId’**     - a menetvonal (’MgmTervEsem.mgm_mv_id’ adata) belső MGM
azonosítója.
      - **’Vonatszam’**       - a vezérlőpálcához tartozó vonatszám. Ha -1 vagy -2 értéket
tartalmaz, azt le kell vágni.
      - **’AbraId’**       - az érintett ábra azonosítója.
`o` **Visszakapott** adatok:

      ’VForgNemKod’
      - ’MenetvAzon’

      - ’VNTTId’

      - ’MenetvTulId’

      - ’UzemeltVvId’

      - ’Kozlekedo’

      ’Viszonylat’
      - ’MenetvId’

      - ’Feloszlatott’

      - ’VonatszamKeret’

      ’Esemenyek’ lista, [{ }] jelek között, vesszővel elválasztva:

      - ‘VonatszamIrszam’

      - ‘SzhId’

      - ‘SzhIndex’

      - ‘EsemIdo’

      - ‘ElozoEsemIdokoz’

      - ‘KovEsemIdokoz’

      - ‘EsemSorszam’

      - ‘EsemTipId’

      - ‘SzakaszBeKiJel’

      - ‘BeKiKapcsEsemJel’

      - ‘MenetvIndCelJel’

      - ‘TervVaganyId’

      - ‘HelytVaganyraInd’

      - 93048 ’ MgmHelytVaganyraInd ’

      - ‘FoglVagany’

      - ‘Korjelolo’

      - ‘EsemAllVegpont’

      - ‘MisrolKod’

      - ‘VonalrolId’

      - ‘AbrarolId’

      - ‘MisraKod’

      - ‘VonalraId’

      - ‘AbraraID’

      - ‘Irany’

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [96901]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 57/526|


`o` A visszakapott adatokban levő ’ **Esemenyek’** lista alapján **rajzolja** fel az új
elörejelzés vonalat.

- Az ablak átvált „ **Új előrejelzés”** **üzemmódra**, megjelenik az ehhez tartozó **fejléc** és a
szerkesztő **panel** .
*(S_0151_38 -* ***MenetvForgSzabFoglalasCommand*** *(menetvonalak forgalomszabályozásra*
*lefoglalása) szolgálztatás hívás* ***nincs*** *, még nincs „előrejelzés” vonal.)*

- A grafikonon a menetvonal korábban megállapított esemény idejénél megjelenik a
**vezérlőpálca** és egy **előrejelzés vonal** a korrigált menetrendi adatokkal, ami
szerkeszthető, a többi mentvonal (menetrendi, tény és előrejelzés) nem kiválaszthatóvá
válik.

attól, hogy az ábrán van-e kötelező vonat-összeállítás közlési pont.

- Az új előrejelzés vonal **szerkesztése** egyszerre történhet a **grafikonon** és a szerkesztő
panel fejlécére pozícionálva beúszó szerkesztő **panelen** . Részletek az „Új előrejelzés”
funkció fejezetben.

**Irányítói** üzemmódú ábrán pontosan **egy előrejelzés** vonal kiválasztásakor (bárhol a vonalra
kattintva) a „ **Szerkesztés** ” menüsoron az „ **Előrejelzés** **módosítása** ” **ikon** kezelhetővé válik,
ha a menetvonal **nem MRN** *(menetrend nélküli, ’VNTTId’ <> 1’)* vonat.

- Az ikon kezelésekor **meghívásra** kerül a kiválasztott menetvonal szerkesztésre
lefoglalását végző **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás.
`o` **Bemenő** adatok

      - **’MenetvonalIdLista’**       - a lefoglalni kívánt menetvonal ’MGMMenetvId’ adata.
Egy elemű lista.

      **’TerMunkahelyId’**
      - **’AbraId’**

      **’FoglalasJelzo’** = „F” - foglalás.
      - **’ModositasOk’** = NULL

      **’epaiParamXmlDoc’**
`o` A szolgáltatás **leellenőrzi**, hogy a menetvonal **nincs** egy másik munkahely által
szerkesztésre **lefoglalva** .
Ha a szolgáltatás UC_01_51_CONF_MENETV_FOGLALT **üzenetet** ad vissza,
akkor **megerősítő** üzenetet ad (az üzenet ERRTEXT részében az egyes paraméterek
vesszővel vannak elválasztva):
„151004: A {0} vonatot {1} munkahelyen {2} óta szerkesztik! Felülírja a
menetvonal foglalását?”, ahol:

{0} = ERRTEXT első paramétere (a lefoglalt menetvonal első
vonatazonosítója).
{1} = ERRTEXT második paramétere (a foglaló munkahely megnevezése).
{2} = ERRTEXT harmadik paramétere (a foglalás kezdő ideje).
      - < **Nem**       - esetén a feldolgozás leáll, nem történik menetvonal foglalás, a grafikon
marad **alapfunkcióban**, a „funkciók” ikonsor marad a „ **Szerkesztés** ” ikonon.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [96901 vége]

**törölt:** [94036]

**törölt:** [94036 vége]

**törölt:** **[88961]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 58/526|


      - < **Igen**       - esetén **újra** meghívásra kerül az S_0151_38       **MenetvForgSzabFoglalasCommand** (Menetvonalak forgalomszabályozásra
lefoglalása) szolgáltatás. A **bemenő** adatokban a **’FoglalasJelzo’** = „ **A** ” (átvétel)
lesz.
A szolgáltatás **megszűnteti** az előző lefoglalást és **új lefoglalást** rögzít az
ábrához tartozó munkahely adatával.

- **Sikeres** lefoglalás után az ablak átvált „ **Előrejelzés módosítás” üzemmódra**, megjelenik
az ehhez tartozó **fejléc** és a **szerkesztőpanel**, a grafikon automatikus **frissítése** **leáll** .
Ha az ábrán van pulzáltatandó menetvonal, a **pulzálás** **leállításra** kerül.

- A **grafikonon** az előrejelzés vonalon a szolgálati **helyek** és **események** ***(’EsemJelleg’ =***
***"E")*** **metszéspontjában** megjelennek a **vezérlőpálcák**, az **előrejelzés vonal** **kijelölt** lesz,
a **többi** mentvonal (menetrendi, tény és előrejelzés) **nem kiválaszthatóvá** válik.

**2.2.3.4.2.8** **[#][106724]** ~~**-**~~ ~~**Rendkívüli**~~ ~~**megállás**~~ ~~**iko**~~ ~~**n**~~ **A fejezet törölve lett összevonás miatt**

**2.2.3.4.2.9** **[#][106724]** ~~**-**~~ ~~**Rendkívüli**~~ ~~**áthaladás**~~ ~~**ikon**~~ **A fejezet törölve lett összevonás miatt**

**2.2.3.4.2.10** **#106724** ~~**-**~~ ~~**Tartózkodási**~~ ~~**idő**~~ ~~**módosítása**~~ ~~**ikon**~~ **A fejezet törölve lett**

**összevonás miatt**

**2.2.3.4.2.11** **#88981** **-** **Irányítói feltartóztatás ikon**

Irányítói üzemmódban, az ábrán egy nem MRN *(menetrend nélküli,* *’* *VNTTId* *’* *<> 1)*
vonathoz tartozó előrejelzés vonal kiválasztásakor (bárhol a vonalra kattintva) a Szerkesztés
menüsoron kezelhetővé válik az Irányítói feltartóztatás ikon.

Az ikon kezelésekor:

  - A kliens program meghívja a kiválasztott menetvonal szerkesztésre l ef og l alás át v ég ző

S_0151_38    - **MenetvForgSzabFoglalasCommand** ( Men e t v o nala k
forgalomszabályozásra lefoglalása) szolgáltatást a következő adatokkal :

`o` MenetvonalIdLista: A kiválasztott menetvonal belső MGM azonosítója

(Egy elemű listaként)
`o` TerMunkahelyId: A kiválasztott munkahely belső azonosítója
`o` AbraId: A felhasználó által szerkesztésre lefoglalt ábra belső azonosítója
`o` FoglalasJelzo = „F ”      - foglalás.
`o` ModositasOk = NULL

`o` epaiParamXmlDoc

Ha a szolgáltatás UCa kliens program megerősítő üzenetet ad. _ 01 _ 51 _ CONF _ MEN E TV _ FOGLALT üzenetet ad vissza, akkor

Megerősítő üzenet: 151004    - UC_01_51_C O NF_MENETV_FOGLALT – „A {0}
vonatot {1} munkahelyen {2} óta sze r k eszti k! Felülírja a menetvonal foglalását? ”,
ahol:

      - {0} = ERRTEXT első paramétere (a lefoglalt menetvonal első
vonatazonosítója).

      - =
{1} ERRTEXT második paramétere (a foglaló munkahely megnevezése).

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 59/526|


      - =
{2} ERRTEXT harmadik paramétere (a foglalás kezdő ideje).

A megerősítő üzenetre adott <Nem> vála sz ese tén, nem történik meg a menetvonal
foglalása, a menetvonal kijelölése megs zűni k, a többi objektum elérhetővé válik, és az
ikonsor marad a „Szerkesztés ” ikon on .

<Igen> esetén újra meghívja az S _0151_38    - MenetvForgSzabFoglalasCommand
(Menetvonalak forgalomszabályozá sr a lefog lal ás a) szolgáltatást, de a Foglalás jelzőbe
(FoglalasJelzo) :„A ” (átvétel) értéket hely ez.

  - Sikeres lefoglalás után az ablak átvált Irányítói feltartóztatás üzemm ó dr a, meg j elen i k

az ehhez tartozó fejléc és szerkesztőpanel.

A grafikonon a kiválasztott előrejelzés v onal on minden olyan eseménynél, ahol
előrejelzett ( EsemJelleg = ’ E ’ ) érk ezé s ( E s em TipId =’ 1 ’ ), áthaladás (EsemTipId =’ 6 ’ )
szerepel, továbbá olyan indulás (Esem T ipI d=’ 2 ’ ) eseményeknél ahol nincs előrejelzett
érkezés az adott szolgálati helyen, meg j elenik egy vezérlőpálca.

A grafikonon az automatikus frissí tés leá ll és a többi mentvonal (menetrendi, tény és
előrejelzés) nem kiválaszthatóvá válik .

Ha az ábrán van pulzáltatandó mene t v onal, a p ul zálás leáll.

A szerkesztés befejezése után meghívásra kerülnek a grafikon frissítéséhez szükséges
szolgáltatások. A fókuszban és kiválasztva marad az adott előrejelzés vonal.

**2.2.3.4.2.12** **#88977** **- Előztetés ikon**

**Irányítói** üzemmódban két olyan **előrejelzés** vonal kiválasztásakor (bárhol a menetrendi
vonalra kattintva), amelyek az ábrán **azonos** irányban „közlekednek” ( [99817] a tényadataikban
legalább három közös szolgálati helyük van és azok „B ” típusú eseménnyel rendelkeznek és a
közbenső szolgálati helyükön **megegyezik** az indulási/áthaladási eseményük iránya) **ÉS** egyik
menetvonal **sem MRN** *(menetrend nélküli, ’VNTTId’ <> 1’)* vonat, a „Szerkesztés”
ikonsoron az „ **Előztetés** ” ikon kezelhetővé válik.
A **kijelölés sorrendjének** megfelelően az **elsőnek** kijelölt előrejelzés vonal **„előre**
**küldendő”**, a **másik** „ **előzendő** ” megjelölést kap. Későbbiekben a **kijelölések** sorrendje
**fontos**, az **ellenőrzések** ez alapján történnek.

- Az ikon **kezelésekor** ellenőrzésre kerül, hogy az **„előre küldendő”** vonatnak van-e olyan
előrejelzett **indulási/áthaladási** (’EsemTipId’ = 2 vagy 6) eseménye az ábrán, amely
ideje egy adott szolgálati helyen **későbbi,** mint az „ **előzendő** ” vonat előrejelzett
**indulási/áthaladási** (’EsemTipId’ = 2 vagy 6) ideje.
Ha **nincs**, akkor „Az előre küldendő vonat minden előrejelzett indulási ideje korábbi,
mint a megelőzendő vonaté, előztetés nem lehetséges.” pop-up **üzenetet** ad, nincs
üzemmód váltás, az előrejelzési vonalak kijelölése megmarad, új kijelölések végezhetők.

- **Meghívásra** kerül a kiválasztott menetvonalak szerkesztésre lefoglalását ellenőrző és a
lefoglalását végző S_0151_38 - **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás.
`o` **Bemenő** adatok:

      - **’MenetvonalIdLista’**       - a lefoglalni kívánt menetvonalak ’MGMMenetvId’ adata
pontosvesszővel elválasztva.
Kételemű lista.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 60/526|


      **’TerMunkahelyId’**
      - **’AbraId’**

      **’FoglalasJelzo’** = „F” - foglalás.
      - **’ModositasOk’** = NULL

      **’epaiParamXmlDoc’**

szerkesztésre **lefoglalva** .
      - Ha **egyik sincs** lefoglalva, akkor a szolgáltatás **lefoglalja** mind két
menetvonalat.

      - Ha az **egyik** **foglalt**, akkor a szolgáltatás
**UC_01_51_CONF_MENETV_FOGLALT** **üzenetet** ad vissza. Ekkor a kliens
**megerősítő** üzenetet ad (az üzenet ERRTEXT részében az egyes paraméterek
vesszővel vannak elválasztva):
„151004: A {0} vonatot {1} munkahelyen {2} óta szerkesztik! Felülírja a
menetvonal foglalását?”, ahol:
{0} = ERRTEXT első paramétere (a lefoglalt menetvonal első
vonatazonosítója).
{1} = ERRTEXT második paramétere (a foglaló munkahely megnevezése).
{2} = ERRTEXT harmadik paramétere (a foglalás kezdő ideje).

      - < **Nem**       - esetén a feldolgozás leáll, nem történik menetvonal foglalás, a
grafikon marad **alapfunkcióban**, a „funkciók” ikonsor marad a
„ **Szerkesztés** ” ikonon.

      - < **Igen**       - esetén **újra** meghívásra kerül az S_0151_38       **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás. A **bemenő** adatokban a
**’FoglalasJelzo’** = „ **A** ” (átvétel) lesz.
A szolgáltatás **megszűnteti** az előző lefoglalást és **új lefoglalást** rögzít az
ábrához tartozó munkahely adatával.
      - Ha **mindkét** menetvonal **foglalt**, akkor a szolgáltatás
**UC_01_51_ERR_TOBB_MENETVONAL_FOGLALT** **hibaüzenetet** ad
vissza, a kliens „151025: Több menetvonalat is más felhasználó szerkeszt,
menetvonal lefoglalás nem lehetséges.”, a feldolgozás leáll, nem történik
menetvonal foglalás, a grafikon marad **alapfunkcióban**, a „funkciók” ikonsor
marad a „ **Szerkesztés** ” ikonon.

- **S** **ikeres** lefoglalás után az ablak átvált **„Vonat előztetés” üzemmódra**, megjelenik az
ehhez tartozó **fejléc** és a **szerkesztőpanel**, a grafikon automatikus frissítése leáll.
88995 Ha az ábrán van pulzáltatandó menetvonal, a pulzálás leállításra ke rü l .

- A **grafikonon** a kiválasztott előrejelzés vonalak közül a **másodiknak** kiválasztott
(„ **előzendő** ”) előrejelzés vonalon azokban a szolgálati **hely** és **esemény (’EsemJelleg’ =**
**"E")** **metszéspontokban**, ahol az „ **előre** **küldendő** ” vonat előrejelzett
**indulási/áthaladási** ideje **későbbi**, mint az „ **előzendő** ” vonat előrejelzett
**indulási/áthaladási** ideje, megjelennek a **vezérlőpálcák.** A vonatszám zöld színű lesz.
Az **elsőnek** kiválasztott („előre küldendő”) menetvonalon **nem** jelennek meg a
vezérlőpálcák, de rá lehet kattintani.

**2.2.3.4.2.13** **#88979** **- Vonattalálkozás ikon**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [96733]

**törölt:** [96733 vége]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 61/526|


**Irányítói** üzemmódban két olyan **előrejelzés** vonal kiválasztásakor (bárhol a menetrendi
vonalra kattintva), amely közlekedési **iránya ellentétes** ( [99817] a tényadataikban legalább
három közös szolgálati helyük van és azok „B” típusú eseménnyel rendelkeznek és a
közbenső szolgálati helyükön **eltér** az indulási/áthaladási eseményük iránya) ÉS egyik
menetvonal **sem MRN** *(menetrend nélküli, ’VNTTId’ <> 1’)* vonat, a „Szerkesztés” ikonsoron a
„ **Vonattalálkozás tervezése** ” ikon kezelhető.

A **kijelölés sorrendjének** megfelelően az **elsőnek** kijelölt előrejelzés vonal **„bevárandó”**, a
**második** „ **várakozó** ” megjelölést kap. Későbbiekben a **kijelölések** sorrendje **fontos**, az
**ellenőrzések** ez alapján történnek.

- Az ikon **kezelésekor** ellenőrzésre kerül, hogy a **„várakozó”** vonatnak van-e olyan
**előrejelzett** **indulási vagy áthaladási** *(’EsemTipId’ = 2 vagy 6)* eseménye az ábrán, amely
ideje egy adott szolgálati helyen **korábbi,** mint a „ **bevárandó** ” vonat **előrejelzett**
**érkezési vagy áthaladási** *(’EsemTipId’ = 1 vagy 6)* esemény ideje.
Ha **nincs**, akkor „A várakozó vonat minden előrejelzett indulási ideje későbbi, mint a
bevárandó vonat bármelyik érkezési, áthaladási ideje, vonattalálkozás tervezése nem
lehetséges.” pop-up **hibaüzenetet** ad, nincs üzemmód váltás, az előrejelzési vonalak
kijelölése megmarad, új kijelölések végezhetők.

- **Meghívásra** kerül a kiválasztott menetvonalak szerkesztésre lefoglalását ellenőrző és a
lefoglalását végző S_0151_38 - **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás.
`o` **Bemenő** adatok

      - **’MenetvonalIdLista’**       - a lefoglalni kívánt menetvonalak ’MGMMenetvId’ adata
pontosvesszővel elválasztva.
Két elemű lista.

      **’TerMunkahelyId’**
      - **’AbraId’**

      **’FoglalasJelzo’** = „F” - foglalás.
      - **’ModositasOk’** = NULL

      **’epaiParamXmlDoc’**
`o` A szolgáltatás **leellenőrzi**, hogy egyik menetvonal **sincs** egy másik munkahely által
szerkesztésre **lefoglalva** .
      - Ha **egyik sincs** lefoglalva, akkor a szolgáltatás **lefoglalja** mind két
menetvonalat.

      - Ha az **egyik** **foglalt**, akkor a szolgáltatás
**UC_01_51_CONF_MENETV_FOGLALT** **üzenetet** ad vissza. Ekkor a kliens
**megerősítő** üzenetet ad (az üzenet ERRTEXT részében az egyes paraméterek
vesszővel vannak elválasztva):
„151004: A {0} vonatot {1} munkahelyen {2} óta szerkesztik! Felülírja a
menetvonal foglalását?”, ahol:
{0} = ERRTEXT első paramétere (a lefoglalt menetvonal első
vonatazonosítója).
{1} = ERRTEXT második paramétere (a foglaló munkahely megnevezése).
{2} = ERRTEXT harmadik paramétere (a foglalás kezdő ideje).

      - < **Nem**       - esetén a feldolgozás leáll, nem történik menetvonal foglalás, a
grafikon marad **alapfunkcióban**, a „funkciók” ikonsor marad az
„ **Szerkesztés** ” ikonon.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 62/526|



      - < **Igen**       - esetén **újra** meghívásra kerül az S_0151_38       **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás. A **bemenő** adatokban a
**’FoglalasJelzo’** = „ **A** ” (átvétel) lesz.
A szolgáltatás **megszűnteti** az előző lefoglalást és **új lefoglalást** rögzít az
ábrához tartozó munkahely adatával.
      - Ha **mindkét** menetvonal **foglalt**, akkor a szolgáltatás
**UC_01_51_ERR_TOBB_MENETVONAL_FOGLALT** **hibaüzenetet** ad
vissza, a kliens „151025: Több menetvonalat is más felhasználó szerkeszt,
menetvonal lefoglalás nem lehetséges.” üzenetet ad, a feldolgozás leáll, nem
történik menetvonal foglalás, a grafikon marad **alapfunkcióban**, a „funkciók”
ikonsor marad a „ **Szerkesztés** ” ikonon

- **Sikeres** lefoglalás után az ablak átvált „ **Vonattalálkozás tervezése” üzemmódra**,
megjelenik az ehhez tartozó **fejléc** és a **szerkesztőpanel**, a grafikon automatikus frissítése
leáll.
88995 Ha az ábrán van pulzáltatandó menetvonal, a pulzálás leállításra ke rü l .

- A **grafikonon** a kiválasztott előrejelzés vonalak közül a **másodiknak** kiválasztott
(„ **várakozó** ”) előrejelzés vonalon azokban a szolgálati **hely** és **esemény (’EsemJelleg’ =**
**"E")** **metszéspontokban** megjelennek a **vezérlőpálcák**, ahol a **„várakozó”** vonat
**indulási** /áthaladási ideje (’EsemTipId’ = 2 vagy 6) **korábbi**, mint a **„bevárandó”**
(elsőnek kijelölt) vonat előrejelzett **érkezési** /áthaladási (’EsemTipId’ = 1 vagy 6) ideje **.** A
vonatszám zöldszínű lesz **.**
A **másodiknak** kiválasztott („bevárandó”) menetvonalon **nem** jelennek meg a
vezérlőpálcák, de rá lehet kattintani.

**2.2.3.4.2.14** **#88980** **-** **Csatlakozásra várás szerkesztése ikon**

A Szerkesztés menüponthoz tartozó Csatlakozásra várás szerkesztése ikon, irányítói
üzemmódban, ha a Csatlakozásra várás megjelenítése ikon bekapcsolt állapotú, akkor a
következő esetekben válik kezelhetővé:

  - Az út tengelyen található szolgálati hely nevére bal egér gombbal katt i n t v a

  - A diagramon bal vagy jobb egér gombbal egy csatlakozás (c satl ak ozás r a v ár ást

jelképező ikon) kiválasztásakor (aminek hatására a csatlakozásra vár ást j elk ép ező
ikon színe is pirosra változik. )

Az Csatlakozásra várás szerkesztése ikonra kattintva megnyílik az Avárás ablak. _ 0151 _ 10 Csatlakozásra

A kliens a következő adatokat adja át az A_0151_10 ablaknak:

  - Ábra belső azonosítója (AbraId)

  - A kiválasztott szolgálati hely vagy a már meglévő csatlakoz ás h ely én ek b els ő

azonosítója ( **S_0151_02** **–** **Út tengely adatok lekérdezése** szo l g ált atá s t ó l
(UttengelySzolgalatiHelyAdatokQuery) kapott SzhId)

  - A kiválasztott szolgálati hely vagy a már meglévő csatlakozás hely én ek ho s s zú neve

            (S_0151_02 től kapott SzhHosszuNev)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 63/526|



  - A kiválasztott csatlakozás belső azonosítója (S_0151_04  - től kap o t t C s at l akozasI d)

(Már meglévő csatlakozás kiválasztásakor kitöltött, egyébként NULL)

Az A _ 0151 _ 10 ablak bezárása után a kliens program a kiválasztott csatlakozás kijelöltségét
megszünteti és a frissítéshez szükséges szolgáltatások meghívása után frissíti a grafikon
tartalmát.

#88980vége

**Irányítói** üzemmódú ábrán pontosan **egy előrejelzés** vonal kiválasztásakor (bárhol a vonalra
kattintva) a „ **Szerkesztés** ” menüsoron a „ **Másik pályán közlekedés** ” **ikon** kezelhetővé válik,
ha a menetvonal **nem MRN** *(menetrend nélküli,* *’* *VNTTId* *’* *<> 1* *’* *)* vonat.

- Az ikon kezelésekor **meghívásra** kerül a kiválasztott menetvonal szerkesztésre

                       lefoglalását végző S_0151_38 **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás.
`o` **Bemenő** adatok

      - **’** **MenetvonalIdLista** **’**       - a lefoglalni kívánt menetvonal ’ MGMMenetvId ’ adata.
Egy elemű lista.

      - **’** **’**
**TerMunkahelyId**
      - **’** **AbraId** **’**

      - **’** **’** = ”       **FoglalasJelzo** „F foglalás.
      - **’** **ModositasOk** **’** = NULL

      - **’** **’**
**epaiParamXmlDoc**
`o` A szolgáltatás **leellenőrzi**, hogy a menetvonal **nincs** egy másik munkahely által
szerkesztésre **lefoglalva** .
Ha a szolgáltatás UC_01_51_CONF_MENETV_FOGLALT **üzenetet** ad vissza,
akkor **megerősítő** üzenetet ad (az üzenet ERRTEXT részében az egyes paraméterek
vesszővel vannak elválasztva):
„151004: A {0} vonatot {1} munkahelyen {2} óta szerkesztik! Felülírja a
menetvonal foglalását? ”, ahol:

{0} = ERRTEXT első paramétere (a lefoglalt menetvonal első
vonatazonosítója).
{1} = ERRTEXT második paramétere (a foglaló munkahely megnevezése).
{2} = ERRTEXT harmadik paramétere (a foglalás kezdő ideje).
      - < **Nem**       - esetén a feldolgozás leáll, nem történik menetvonal foglalás, a grafikon
marad **alapfunkcióban**, a „funkciók ” ikonsor marad a „ **Szerkesztés** ” ikonon.
      - < **Igen**       - esetén **újra** meghívásra kerül az S_0151_38       **MenetvForgSzabFoglalasCommand** (Menetvonalak forgalomszabályozásra
lefoglalása) szolgáltatás. A **bemenő** adatokban a **’** **FoglalasJelzo** **’** = „ **A** ” (átvétel)
lesz.
A szolgáltatás **megszűnteti** az előző lefoglalást és **új lefoglalást** rögzít az
ábrához tartozó munkahely adatával.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Áthelyezve (beillesztéssel) [9]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 64/526|



- **Sikeres** lefoglalás után az ablak átvált „ **Másik pályán közlekedés** **”** **üzemmódra**,
megjelenik az ehhez tartozó **fejléc** a <Mégsem> nyomógombbal és a grafikon
automatikus frissítése leáll.
Ha az ábrán van pulzáltatandó menetvonal, a pulzálás leállításra kerül.

A grafikonon az **előrejelzés** vonalon a szolgálati **helyek** és **indulási/áthaladási** események
*(* *’* *EsemJelleg* *’* *=* *"* *E* *"* *és* *’* *EsemTip* *’* *=* *2 vagy 6)* metszéspontjában megjelennek a **vezérlőpálcák**,
az előrejelzés vonal **kijelölt** lesz, a többi mentvonal (menetrendi, tény és előrejelzés) nem
kiválaszthatóvá válik.

Az ikon csak irányítói üzemmódban érhető el, ha a felhasználó rendelkezik
**OP_0202_MRNTervezesNaplozas** operandussal és van kijelölt szolgálati hely az út
tengelyen. Az ikon nyomógombszerűen működik, kezelésekor a kliens ellenőrzi, hogy a

                       kijelölt szolgálati hely állomás típusú e (UttengelySzolgalatiHelyAdatokQuery SzhTipusKod
= 1 az állomás):

  - Amennyiben nem, akkor az alábbi hibaüzenetet adja: „Nem állomás t í pu s ú szo lg álati

”
helyről MRN nem hozható létre! .

  - Amennyiben igen, akkor a kliens meghívja a **K043UmsFor00FormOpen** **Co** **m** **m** **a** **n** **d**  
ot az alábbi bemenő paraméterekkel:

`o` **modal** = True

`o` **formName** = ” A_0202_03 ”

`o` **extraJsonData** = A kijelölt szolgálati hely belső azonosítója json f orm áb an

{ " SzhId " : " 1038 " }

A hívott szerviz a K_043 közös szolgáltatás hívásán keresztül (UMS üzenet küldés
alkalmazásával) kezdeményezi a FOR00 A_0202_03 ablak megnyitását. Az ablak megnyitás
csak, akkor működik, ha a felhasználó számítógépén van megnyitott FOR00 alkalmazás az
adott környezetre vonatkozóan.

**2.2.3.4.2.17** **#88998** **-** **Egyéb sebességkorlátozás ikon**

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta (ami csak időhenger
üzemmódban lehetséges) és az ábrán egy olyan, nem MRN *(menetrend nélküli,* *’* *VNTTId* *’* *<>*
*1* *’* *)* vonathoz tartozó, menetvonalat választott, amihez tartozik tény/előrejelzés vonal, akkor
kezelhetővé válik az Egyéb sebességkorlátozás ikon.

Az ikon kezelésekor:

  - A kliens program meghívja a kiválasztott menetvonal szerkesztésre l ef og l alás át v ég ző

S_0151_38    - **MenetvForgSzabFoglalasCommand** ( Men e t v o nala k
forgalomszabályozásra lefoglalása) szolgáltatást a következő adatokkal:

`o` MenetvonalIdLista: A kiválasztott menetvonal belső MGM azonosítója

(Egy elemű listaként)
`o` TerMunkahelyId: A kiválasztott munkahely belső azonosítója
`o` AbraId: A felhasználó által szerkesztésre lefoglalt ábra belső azonosítója
`o` FoglalasJelzo = „F ”      - foglalás.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Áthelyezve (beillesztéssel) [10]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 65/526|


`o` ModositasOk = NULL

`o` epaiParamXmlDoc



Ha a szolgáltatás UCa kliens program megerősítő üzenetet ad. _ 01 _ 51 _ CONF _ MEN E TV _ FOGLALT üzenetet ad vissza, akkor

Megerősítő üzenet: 151004    - UC_01_51_C O NF_MENETV_FOGLALT – „A {0}
vonatot {1} munkahelyen {2} óta sze r k eszti k! Felülírja a menetvonal foglalását? ”,
ahol:

      - {0} = ERRTEXT első paramétere (a lefoglalt menetvonal első
vonatazonosítója).

      - =
{1} ERRTEXT második paramétere (a foglaló munkahely megnevezése).
      - {2} = ERRTEXT harmadik paramétere (a foglalás kezdő ideje).

A megerősítő üzenetre adott <Nem> vála sz ese tén, nem történik meg a menetvonal
foglalása, a menetvonal kijelölése megs zűni k, a többi objektum elérhetővé válik, és az
ikonsor marad a „Szerkesztés ” ikon on .

<Igen> esetén újra meghívja az S _0151_38    - MenetvForgSzabFoglalasCommand
(Menetvonalak forgalomszabályozá sr a lefog lal ás a) szolgáltatást, de a Foglalás jelzőbe
(FoglalasJelzo) :„A ” (átvétel) értéket hely ez.

  - Sikeres lefoglalás után (az S _ 0151 _ 38 szolgáltatás sikeres futása eseté n ) a k l i en s

program a kiválasztott menetvonal belső azonosítójával meghívja a k öv etk ező
szolgáltatásokat:

`o` **S_0151_41** **–** **Egyéb** **sebességkorlátozások** **lekérdezése**
**(EgyebSebKorlQuery)** szolgáltat á st, ami visszaadja a szerkesztéshez
szükséges adatokat.

`o` **S_0151_44** **–** **Menetvonal** **szolgálati** **helyeinek** **lekérdezése**
**(MenetvonalSzolgHelyekQuery** ) s zol g á ltatást, ami a panelen lévő szolgálati
hely beviteli mezők lenyíló listájának ér t ékkészletét biztosítja.

  - A szolgáltatások sikeres futása után az ablak átvált Egyéb seb es ség kor l áto zás

szerkesztése üzemmódra, megjelenik az ehhez tartozó fejléc és a g r afi k o n o n az
objektumok nem kiválaszthatóvá válnak.

A szerkesztő fejlécre pozicionálva beús zi k egy szerkesztő panel, ahol a kiválasztott
menetvonalnál egyéb sebességkorlá toz ást lehe t r ögzíteni, módosítani, törölni.

Az egyéb sebességkorlátozás ok s zer ke sztésének leírása az „Egyéb
sebességkorlátozások szerkesztése ” c í m ű f ejezet en belül található.

  - A szerkesztés befejezése után a menetvonal kijelölése megszűnik, a t ö b bi o b j ekt um

elérhetővé válik, az Egyéb sebességkorlátozás ikon nem kezelhetővé v áli k és a k l i ens
program meghívja a grafikon frissítéséhez szükséges szolgáltatásokat.

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta (ami csak időhenger
üzemmódban lehetséges) és az ábrán egy olyan, nem MRN *(menetrend nélküli,* *’* *VNTTId* *’* *<>*

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** **[#]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 66/526|


*1* *’* *)* vonathoz tartozó, menetvonalat választott, amihez tartozik tény/előrejelzés vonal, akkor
kezelhetővé válik a Teljesítménycsökkenés ikon.

Az ikonra kattintva a kliens program a kiválasztott menetvonal belső azonosítójával meghívja
a következő szolgáltatásokat:

  - **S_0151_40** **–** **Teljesítménycsökkenés** **szerkesztéséhez** **ada** **tok** **l** **ek** **érdezés** **e**
**(TeljesitmenycsokkQuery)** szolgáltatást, ami visszaadja a szerkeszté shez szü k ség es
adatokat.

  - **S_0151_44** **–** **Menetvonal** **szolgálati** **helyeinek** **l** **ek** **érdezés** **e**
**(MenetvonalSzolgHelyekQuery** ) szolgáltatást, ami a panelen lévő szo lg álati h ely
beviteli mezők lenyíló listájának értékkészletét biztosítja.

Ezután az ablak átvált Teljesítménycsökkenés szerkesztése üzemmódra, megjelenik az ehhez
tartozó fejléc és a grafikonon az objektumok nem kiválaszthatóvá válnak.

A szerkesztő fejlécre pozicionálva beúszik egy szerkesztő panel, ahol teljesítménycsökkenést
lehet rögzíteni, módosítani, törölni a kiválasztott menetvonal aktuális vontatójárműveinél.

A teljesítménycsökkenés szerkesztésének leírása a „Teljesítménycsökkenés szerkesztése ”
című fejezeten belül található.

A szerkesztés befejezése után a menetvonal kijelölése megszűnik, a többi objektum
elérhetővé válik, a Teljesítménycsökkenés ikon nem kezelhetővé válik és a program meghívja

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Feljebb helyezve [8]: <#>** **- A_0151_07 -**
**Adminisztratív feladatok megnyitása ikon¶**
Az ikon a „ **Szerkesztés** ” menüponthoz (ikon) tartozó menüsorban
jelenik meg.¶
Akkor **kezelhető**, ha:¶

<#>a grafikon „ **ábra** ” alapján lett megnyitva **ÉS**  <#>az „ **üzemmód** ” szerkesztés **ÉS** <#>a felhasználó „munkahelyén” van a felhasználó által
végrehajtandó adminisztratív feladat:¶

<#>Ha a ’MegjelenitesiBeallitasokQuery.KesesIg’ = True **ÉS** a
’TenyadatokQuery.KesesFeladat’ output változó = True.¶
<#>Ha a MegjelenitesiBeallitasokQuery.VgAdat = True **ÉS** a
’TenyadatokQuery.VgAdatFeladat’ output változó = True.¶
Kezelésére egy új ablakban megnyílik az A_0151_07 ablak.¶
Az ablaknak **átadásra** kerülnek (a
’MunkahelyAdminFeladatokQuery’ szolgáltatás hívásához):¶

<#> **’MunkahelyId’** - munkahely belső azonosítója (az A_0151_01
grafikon kapja a munkahely foglalásakor:
’ *TeruletMunkahely.ter_munkahely_id’)* .¶
<#> **'KesesIg’** - Késésigazolási feladat kell jelző. Az A_0151_01
ablaktól kapott adat.¶
<#> **'VgAdat'** - Vágányadat pótlás feladat kell jelző. Az A_0151_01
ablaktól kapott adat.¶


**<#>**

**törölt:** <#> {0} = ERRTEXT első paramétere (a lefoglalt
menetvonal első vonatazonosítója).¶
<#>{1} = ERRTEXT második paramétere (a foglaló munkahely
megnevezése).¶
<#>{2} = ERRTEXT harmadik paramétere (a foglalás kezdő
ideje).maradSzerkesztéson¶


**Áthelyezve (beillesztéssel) [11]**

**törölt: <#>** **-¶**

**Áthelyezve (beillesztéssel) [12]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 67/526|


**PV** felhasználók számára, **ha be volt kapcsolva** a „Kulcsfüggés feloldás ” **megjelenítés** ikon
és **kiválasztott egy nyitott kulcsfüggés feloldás objektumot** .

A kulcsfüggés feloldás szerkesztés ikon kezeléséhez a felhasználónak rendelkeznie kell az
**OP_0151_MGMIranyito** illetve **az OP_0151_MGMMefiMerafiRogzit** operandusokkal.

**Megnyomásakor**

  - Az ablak átvált „ **Kulcsfüggés fe** **l** **o** **l** **dás** **szerk** **es** **z** **tése** **”** **üzemmód** ra.

  - Megjelenik az ehhez tartozó **szer** **k** **es** **zt** **őpanel** .

  - A grafikon automatikus **frissítése** **l** **eá** **ll** .

  - A grafikonon látható **egyéb obj** **e** **k** **t** **u** **m** **ok** ( menetvonalak, RDE   - k, vágányzárak,

menetengedélyek, kulcsfüggés feloldás ok, … ) **n** **em kiválaszthatóvá válnak** .

  - Lehetőség van egy **meglévő** **nyi** **t** **o** **t** **t** **kulcsf** **üggés feloldást lezárni** .

**2.2.3.4.2.21** **#89002** **-** **Menetengedély a szolgálati hely kijárati jelzőjéig szerkesztése**
**ikon** **–** **(BÉ)**

Nyomógombként működő ikon, amely a „Szerkesztés ikonok ” közt található. Csak
**irányításra lefoglalt ábra** esetén, **Időhenger** idő üzemmódban érhető el az **ábrát lefoglaló**
**PV** felhasználó számára, **ha be volt kapcsolva a** „Menetengedély a szolgálati hely kijárati
jelzőjéig ” **megjelenítés** ikon.

A menetengedély szerkesztés ikon kezeléséhez a **PV** felhasználónak rendelkeznie kell az
**OP_0151_MGMIranyito** illetve az **OP_0151_MGMMefiMerafiRogzit** operandusokkal és
egy olyan, nem MRN *(menetrend nélküli,* *’* *VNTTId* *’* *<> 1* *’* *)* vonathoz tartozó, **menetvonalat**
**kell kijelölni,** amely szerepel **a tény menetvonalak közt** (szerepel az MGM_TenyEsem
táblában, azaz legalább van előrejelzése).

**Megnyomásakor**

  - Az ablak átvált „ **Menetengedél** **yek** **szerk** **eszt** **ése”** **üzemmód** ra.

  - Megjelenik az ehhez tart ozó **szerk** **eszt** **őpanel** (ami csak egy fejléc
nyomógombokkal).

  - A grafikon automatikus **frissítése** **l** **eá** **ll** .

  - A grafikonon látható **egyéb ob** **j** **ek** **t** **um** **ok** ( m en etvonalak, RDE   - k, vágányzárak, már

létező menetengedélyek, kulcsfüggé s feloldások, …) **nem kiválaszthatóvá válnak** .

  - Lehetőség van **új menetengedély** **t** **rö** **gzíten** **i** .

**2.2.3.4.2.22** **#89002** **-** **Menetengedély a szolgálati hely bejárati jelzőjéig szerkesztése**
**ikon** **–** **(BÉ)**

Nyomógombként működő ikon, amely a „Szerkesztés ikonok ” közt található. Csak
**irányításra lefoglalt ábra** esetén, **Időhenger** idő üzemmódban érhető el az **ábrát lefoglaló**
**PV** felhasználó számára, **ha be volt kapcsolva** a „Menetengedély a szolgálati hely bejárati
jelzőjéig ” **megjelenítés** ikon.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 68/526|


A menetengedély szerkesztés ikon kezeléséhez a PV felhasználónak rendelkeznie kell az
**OP_0151_MGMIranyito** illetve az **OP_0151_MGMMefiMerafiRogzit** operandusokkal és
egy olyan, nem MRN *(menetrend nélküli,* *’* *VNTTId* *’* *<> 1* *’* *)* vonathoz tartozó, **menetvonalat**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Feljebb helyezve [11]: <#>** **[#89003]** **- Kulcsfüggés feloldás**
**rögzítése ikon – (BÉ)¶**
Nyomógombként működő ikon, amely a „Szerkesztés ikonok” közt
található. Csak **irányításra lefoglalt ábra** esetén, **Időhenger** idő
üzemmódban érhető el az **ábrát lefoglaló** **PV** felhasználók számára,
**ha be volt kapcsolva** a „Kulcsfüggés feloldás” **megjelenítés** ikon és
**kiválasztott egy szolgálati helyet** .¶
A kulcsfüggés feloldás szerkesztés ikon kezeléséhez a felhasználónak
rendelkeznie kell az **OP_0151_MGMIranyito** illetve **az**
**OP_0151_MGMMefiMerafiRogzit** operandusokkal.¶
**Megnyomásakor** 
<#>Az ablak átvált „ **Kulcsfüggés feloldás szerkesztése”**
**üzemmód** ra.¶
<#>Megjelenik az ehhez tartozó **szerkesztőpanel** .¶
<#>A grafikon automatikus **frissítése leáll** .¶
<#>A grafikonon látható **egyéb objektumok** (menetvonalak,
RDE-k, vágányzárak, menetengedélyek, kulcsfüggés feloldások,
…) **nem kiválaszthatóvá válnak** .¶
<#>Lehetőség van **új kulcsfüggés feloldást rögzíteni** .¶

**Feljebb helyezve [12]: <#>** **[#89003]** **- Kulcsfüggés feloldás**
**lezárása ikon – (BÉ)¶**
Nyomógombként működő ikon, amely a „Szerkesztés ikonok” közt
található. Csak **irányításra lefoglalt ábra** esetén, **Időhenger** idő
üzemmódban érhető el az **ábrát lefoglaló** **PV** felhasználók számára,
**ha be volt kapcsolva** a „Kulcsfüggés feloldás” **megjelenítés** ikon és
**kiválasztott egy nyitott kulcsfüggés feloldás objektumot** .¶
A kulcsfüggés feloldás szerkesztés ikon kezeléséhez a felhasználónak
rendelkeznie kell az **OP_0151_MGMIranyito** illetve **az**
**OP_0151_MGMMefiMerafiRogzit** operandusokkal.¶
**Megnyomásakor** 
<#>Az ablak átvált „ **Kulcsfüggés feloldás szerkesztése”**
**üzemmód** ra.¶
<#>Megjelenik az ehhez tartozó **szerkesztőpanel** .¶
<#>A grafikon automatikus **frissítése leáll** .¶
<#>A grafikonon látható **egyéb objektumok** (menetvonalak,
RDE-k, vágányzárak, menetengedélyek, kulcsfüggés feloldások,
…) **nem kiválaszthatóvá válnak** .¶
<#>Lehetőség van egy **meglévő** **nyitott** **kulcsfüggés feloldást**
**lezárni** .¶

**Feljebb helyezve [10]: <#>** **[#88988]** **- MRN vonat**
**létrehozása ikon¶**
Az ikon csak irányítói üzemmódban érhető el, ha a felhasználó
rendelkezik **OP_0202_MRNTervezesNaplozas** operandussal és van
kijelölt szolgálati hely az út tengelyen. Az ikon nyomógombszerűen
működik, kezelésekor a kliens ellenőrzi, hogy a kijelölt szolgálati
hely állomás típusú-e (UttengelySzolgalatiHelyAdatokQuery
SzhTipusKod = 1 az állomás): ¶

<#>Amennyiben nem, akkor az alábbi hibaüzenetet adja: „Nem
állomás típusú szolgálati helyről MRN nem hozható létre!”. ¶
<#>Amennyiben igen, akkor a kliens meghívja a
**K043UmsFor00FormOpenCommand** -ot az alábbi bemenő
paraméterekkel:¶

<#> **modal** = True¶
<#> **formName** = ”A_0202_03”¶
**<#>extraJsonData** = A kijelölt szolgálati hely belső
azonosítója json formában {"SzhId":"1038"} **¶**
A hívott szerviz a K_043 közös szolgáltatás hívásán keresztül (UMS
üzenet küldés alkalmazásával) kezdeményezi a FOR00 A_0202_03
ablak megnyitását. Az ablak megnyitás csak, akkor működik, ha a
felhasználó számítógépén van megnyitott FOR00 alkalmazás az adott
környezetre vonatkozóan.¶


**törölt: <#>¶**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 69/526|



 - ***89001*** ***Szöveges megjegyzés esetén***



A leírás a **„Szöveges megjegyzés tö** **rlé** **s** **e”** pontban található

  - ***#89002*** ***Menetengedély esetén***

A leírás a „ **Menetengedély törlése** ” pontban talá lható.

  - ***#89003*** ***Kulcsfüggés feloldás esetén***

A leírás a „ **Kulcsfüggés feloldás tö** **rlé** **se** ” pontban található.

  - ***#88980*** ***Csatlakozásra várás esetén***

A törlés végrehajtása előtt a kliens p r ogr am m eg e rősítést kér a folytatáshoz:
Törli a kiválasztott {0}? <Igen>/<N em    {0} = ’ csatlakozást ’

A megerősítésre adott igenlő válas z esetén, a csatlakozás törléséhez meghívja az
**S_0151_55** **–** **Csatlakozás törlése** **(** **C** **s** **at** **l** **ak** **oz** **asTorlesCommand)** szolgáltatást a
következő adatokkal:

    - Ábra belső azonosítója (AbraId): A felhasználó által szerkesztésre l ef og l alt áb ra

belső azonosítója

    - Bejelentkezett felhasználó azonosítója (Pass2UserId)

    - Csatlakozás belső azonosító (CsatlakozasId): A kiválasztott csatl ak o zás b első

azonosítója

  - ***….***

A megfelelő műveletek elvégzése után a program meghívja a grafikon frissítéséhez szükséges
szolgáltatásokat és a szolgáltatásoktól kapott adatokkal frissíti a grafikon tartalmát.

Az ikon működése megegyezik az **A_0151_02** **–** **Út** **-** **idő diagram kiválasztás ablak**
**megnyitása ikon** pontban leírtakkal.

**2.2.3.4.2.25** **-** **A_0151_03** **–** **Megjelenítési beállítások ablak megnyitása ikon**

**–**
Az ikon működése megegyezik az **A_0151_03** **Megjelenítési beállítások ablak**
**megnyitása ikon** pontban leírtakkal.

**–**
Az ikon működése megegyezik az **A_0151_05** **Adatok szűrése ablak megnyitása ikon**
pontban leírtakkal.

**2.2.3.4.2.27** **-** **A_0151_04** **–** **Stílusok és vonalak beállítása ablak megnyitása ikon**

Az ikon működése megegyezik az **A_0151_04** **–** **Stílusok és vonalak beállítása ablak**
**megnyitása ikon** pontban leírtakkal.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Feljebb helyezve [13]: <#>** **[#88996]** **- Értesítések**
**előrejelzés változásról¶**
Az ikon csak irányítói üzemmódban érhető el, nincs operandushoz
kötve. Működése nyomógombszerű, kezelésekor a kliens megnyitja
az **A_0151_11** **–** **Értesítések előrejelzés változásról** ablakot modális
ablakként. Az ikon alapértelmezetten nem kezelhető, csak akkor, ha
az ütemezetten futó **S_0151_57** **–** **Értesítésben érintett (pulzáló)**
**menetvonalak lekérdezése (PulzaloMenetvonalakQuery)**
szolgáltatás ad vissza legalább egy rekordot, ilyen esetben az ikon
pulzáló módon jelenik meg. Az A_0151_11 ablak bezárása után a
kliens a szükséges szolgáltatások meghívása után frissíti a grafikon
tartalmát. [ #88996 VÉGE] 
**Áthelyezve (beillesztéssel) [21]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 70/526|


Az ikon működése megegyezik az **A_0151_06** **–** **Ábra szintű információk ablak**
**megnyitása ikon** pontban leírtakkal.

**2.2.3.4.2.29** **#88952** **-** **Szolgálat befejezése ikon**

Az ikon csak irányítói üzemmódban érhető el (de szerkesztői üzemmódban nem) és mindig
kezelhető. Az eszköztáron belül jobb oldalon található. Megnyomásakor a kliens meghívja az

–
S_0151_31 Munkahely szintű foglalás megszüntetése (MunkahelyFoglMegszuntCommand)
szolgáltatást az aktuálisan kiválasztott munkahely belső azonosítójával (TerMunkahelyId).
Amennyiben a szolgáltatás hívás ad vissza foglalási üzenetet (FoglUzenet), akkor a kliens
információs popup üzenetben jeleníti meg azt. Amennyiben nincs FoglUzenet, akkor a kliens

Nyomógombként működő ikon, ami csak időhenger idő üzemmódban elérhető. Használatakor
az idő tengelyen az aktuális időhöz pozícionál a program, úgy, hogy az aktuális időhöz tartozó
idővonal [#102741] a látható idősíkot 1/3 és 2/3 arányban osztja meg, tehát a jövőből nagyobb
időszelet látható. [ #102741 VÉGE]

**- X és Y tengely kicsinyítése ikon**

Nyomógombként működő ikon, ami mindig elérhető. Használatakor egyszerre végez a
vízszintes és a függőleges tengely irányában kicsinyítést a program, ha a kicsinyítés még nem
érte el a konfigurációs beállításban megadott minimumot.

**- X és Y tengely nagyítása ikon**

Nyomógombként működő ikon, ami mindig elérhető. Használatakor egyszerre végez a
vízszintes és a függőleges tengely irányában nagyítást a program, ha a nagyítás még nem érte
el a konfigurációs beállításban megadott maximumot.

**- X tengely kicsinyítése ikon**

Nyomógombként működő ikon, ami mindig elérhető. Használatakor vízszintes tengely irányú
kicsinyítést végez a program, ha a kicsinyítés még nem érte el a konfigurációs beállításban
megadott minimumot.

**- X tengely nagyítása ikon**

Nyomógombként működő ikon, ami mindig elérhető. Használatakor vízszintes tengely irányú
nagyítást végez a program, ha a nagyítás még nem érte el a konfigurációs beállításban
megadott maximumot.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Feljebb helyezve [21]: <#>** **- A_0151_05 – Adatok**
**szűrése ablak megnyitása ikon¶**
Az ikon működése megegyezik az **A_0151_05** **–** **Adatok szűrése**
**ablak megnyitása ikon** pontban leírtakkal.¶

**Feljebb helyezve [9]: <#>** **[88976]** **- Másik pályán**
**közlekedés ikon¶**
**Irányítói** üzemmódú ábrán pontosan **egy előrejelzés** vonal
kiválasztásakor (bárhol a vonalra kattintva) a „ **Szerkesztés** ”
menüsoron a „ **Másik pályán közlekedés** ” **ikon** kezelhetővé válik, ha
a menetvonal **nem MRN** *(menetrend nélküli, ’VNTTId’ <> 1’)* vonat.¶

<#>Az ikon kezelésekor **meghívásra** kerül a kiválasztott
menetvonal szerkesztésre lefoglalását végző S_0151_38 **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás.¶

<#> **Bemenő** adatok¶

<#> **’MenetvonalIdLista’**   - a lefoglalni kívánt menetvonal
’MGMMenetvId’ adata.¶
Egy elemű lista.¶
<#> **’TerMunkahelyId’**   <#> **’AbraId’**   <#> **’FoglalasJelzo’** = „F” - foglalás.¶
<#> **’ModositasOk’** = NULL¶
<#> **’epaiParamXmlDoc’**   <#>A szolgáltatás **leellenőrzi**, hogy a menetvonal **nincs** egy
másik munkahely által szerkesztésre **lefoglalva** .¶
Ha a szolgáltatás UC_01_51_CONF_MENETV_FOGLALT
**üzenetet** ad vissza, akkor **megerősítő** üzenetet ad (az üzenet
ERRTEXT részében az egyes paraméterek vesszővel vannak
elválasztva):¶
„151004: A {0} vonatot {1} munkahelyen {2} óta szerkesztik!
Felülírja a menetvonal foglalását?”, ahol:¶

{0} = ERRTEXT első paramétere (a lefoglalt menetvonal első
vonatazonosítója).¶
{1} = ERRTEXT második paramétere (a foglaló munkahely
megnevezése).¶
{2} = ERRTEXT harmadik paramétere (a foglalás kezdő ideje).¶
<#>< **Nem**   - esetén a feldolgozás leáll, nem történik menetvonal
foglalás, a grafikon marad **alapfunkcióban**, a „funkciók”
ikonsor marad a „ **Szerkesztés** ” ikonon.¶
<#>< **Igen**   - esetén **újra** meghívásra kerül az S_0151_38 **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás. A **bemenő**
adatokban a **’FoglalasJelzo’** = „ **A** ” (átvétel) lesz.¶
A szolgáltatás **megszűnteti** az előző lefoglalást és **új lefoglalást**
rögzít az ábrához tartozó munkahely adatával.¶
<#> **Sikeres** lefoglalás után az ablak átvált „ **Másik pályán**
**közlekedés” üzemmódra**, megjelenik az ehhez tartozó **fejléc** a
<Mégsem> nyomógombbal és a grafikon automatikus frissítése
leáll.¶
Ha az ábrán van pulzáltatandó menetvonal, a pulzálás leállításra
kerül.¶
A grafikonon az **előrejelzés** vonalon a szolgálati **helyek** és
**indulási/áthaladási** események *(’EsemJelleg’ = "E" és ’EsemTip’ =*
*2 vagy 6)* metszéspontjában megjelennek a **vezérlőpálcák**, az
előrejelzés vonal **kijelölt** lesz, a többi mentvonal (menetrendi, tény és
előrejelzés) nem kiválaszthatóvá válik.¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 71/526|


**- Y tengely kicsinyítése ikon**



Nyomógombként működő ikon, ami mindig elérhető. Használatakor függőleges tengely
irányú kicsinyítést végez a program, ha a kicsinyítés még nem érte el a konfigurációs
beállításban megadott minimumot.

**- Y tengely nagyítása ikon**

Nyomógombként működő ikon, ami mindig elérhető. Használatakor függőleges tengely
irányú nagyítást végez a program, ha a nagyítás még nem érte el a konfigurációs beállításban
megadott maximumot.

**-**
**Alapértelmezett kameranézet**

Nyomógombként működő ikon, ami mindig elérhető. Használatakor a grafikon az
alapértelmezett értékeknek megfelelő állapotot veszi fel, a nagyítás és a grafikon pozíciója a
megnyitáskori állapotnak megfelelő lesz.

**2.2.3.5** **Út – idő diagram - Alapháló**

Az ikonok alatt található az út-idő diagram megjelenítésére szolgáló koordináta rendszer. A
koordináta rendszerben az egyik tengelyen (út tengelyen) a kiválasztott menetirányítói
szakasz vagy vonal szolgálati helyei, míg a másik tengelyen (idő tengelyen) a kiválasztott
lekérdezési időszak idő adatai jelennek meg.

Az út és időtengely megjelenít üzemmódben f elcserélhet ő, de irányítói üzemmódban nem. Az

–
ablak betöltése során meghívott S_0151_01 Megjelenítési beállítások lekérdezése

hogy az út vagy az idő adatok jelennek meg a vízszintes tengelyen. Irányítói üzemmódben a
kliens az S_0151_01 szolgáltatástól kapott, tengelyekre vonatkozó ' VizszintesTengely_Ut ’ és
' VizszintesTengely_Ido ’ paraméterek értékeit figyelmen kívül hagyja és mindig a vízszintes
tengelyen jeleníti meg az út adatokat. ( A megjelenítési beállítások az A_0151_03 ablakon
módosíthatók.).

A vízszintes tengelyhez tartozó feliratok, jelölések a grafikon felső szélén, a függőleges
tengelyhez tartozó feliratok, jelölések a grafikon bal szélén jelennek meg. A menetvonalak
kirajzolására használt grafikus terület és a tengely felíratok, jelölések között konfigurációs
beállításban meghatározott szélességű szabad terület marad (vonatszámok, belépési ponton
megjelenő információk,... kiírásához).

A diagramon lehetőség van nagyításra és kicsinyítésre. Ez tengelyenként a megfelelő ikonok
használatával, valamint az egeret az adott tengely felé pozicionálva majd a SHIFT + egérgőt
kezelve lehetséges. Mindkét irányban való zoomolás a diagram terület felé pozícionálva az
egeret és a SHIFT billentyű + egérgörgő együttes használatával lehetséges. A nagyítás és
kicsinyítés konfigurációs beállításban megadott maximumig, ill. minimumig lehetséges.
(Külön konfigurációs beállítások tartoznak az idő és az út irányú nagyítás maximumához,
valamint külön konfigurációs beállítások tartoznak az idő és út irányú kicsinyítés
minimumához.). A nagyítási szintek változásával a tengelyek beosztásainak a megjelenése is
dinamikusan változik.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** ()

**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 72/526|


**Alapháló - Út tengely**



A diagram út tengelyén a kiválasztott menetirányítói szakaszhoz vagy vonalhoz tartozó, az
A_0151_02 – Út-idő diagram kiválasztása ablakon kiválasztott szolgálati helyek jelennek
meg. A megjelenítést a program az S_0151_02 – Út tengely adatok lekérdezése s zolgáltatás
(UttengelySzolgalatiHelyAdatokQuery) által visszaadott adatok és az S_0151_01 –
Megjelenítési beállítások lekérdezése s zolgáltatás (MegjelenitesiBeallitasokQuery) által
visszaadott beállítások alapján végzi:

  - Az út adatokat, a tengelyre vonatkozó beállításnak megfelelően, a diagramnak vagy a

vízszintes vagy a függőleges tengelyére helyezi a program.

  - Ha a szolgálati helyek sorrendjére vonatkozó beállítás szerint a kezdő pont felől kell

kiírni a szolgálati helyeket (páros irányban), akkor a program a koordináta rendszer
kezdő pontjától kezdve, az S_0151_02 szolgáltatástól kapott sorrendben helyezi el
őket. Ha a beállítás szerint végpont felöli sorrend szükséges, akkor a koordináta
rendszer kezdőpontjától kezdve, a kapott sorrendhez képest fordítva, helyezi el a
szolgálati helyeket a tengelyen. Az S_0151_02 szolgáltatás által visszaadott szolgálati
helyek között lehetnek olyanok, amelyeket nem kell megjeleníteni az úttengelyen,
mert nincsenek az A_0151_02 ablakon kiválasztott szolgálati helyek között, de a
láthatatlanul a háttérben ezeket a szolgálati helyeket is elhelyezi a program a
tengelyen. (Ezekre a szolgálati helyekre is érkezhetnek majd menetvonal adatok,
amelyeket az ábrán a többi szolgálati helyre érkező adattól eltérően csak a menetvonal
megtörésével kell jelezni.)

  - A szolgálati helyeket az S_0151_02 szolgáltatástól kapott földrajzi távolságot

figyelembe véve, azzal arányosan, helyezi el a program, de két szolgálati hely között a
távolság nem lehet kisebb, mint a Szolgálati helyek minimális távolságára vonatkozó
rendszerparaméter (mgm_szh_min_tav) értéke. Ha a vágányok megjelenítése is
szükséges (Állomási vágány nézet ikon kikapcsolt), akkor a szolgálati helyek közötti
távolságot a szélső vágányoktól számolja. Ha vannak szolgálati helyek, amelyeket
nem kell megjeleníteni, mert nincsenek az A_0151_02 ablakon kiválasztott szolgálati
helyek között, de szerepelnek az S_0151_02 szolgáltatás kimenő adataiban, akkor
azokat is figyelembe veszi (vágányok nélkül) a távolságok meghatározásánál.

  - Ha a megjelenítési beállítások szerint nincs szükség a vágányok megjelenítésére

(Állomási vágány nézet ikon bekapcsolt), akkor az alaphálón a szolgálati helyekhez az
út tengelyre merőleges vonalat rajzol a program. Ha az S_0151_02 szolgáltatástól
visszakapott adatok szerint a szolgálati hely típusa megállóhely (Szolgálati hely
típuskód=2), akkor az aktuális stílusnak megfelelően (szaggatottan) rajzolja a vonalat.

  - Ha a megjelenítési beállítások szerint a vágányokat is meg kell jeleníteni (Állomási

vágány nézet ikon kikapcsolt), akkor az alaphálón a megjelenített szolgálati
helyekhez, az út tengelyre merőleges, vágányokat szimbolizáló vonalakat húz a
program. Mindig egy vonallal többet húz, mint ahány vágányt visszaadott az
S_0151_03 – Út tengely vágány adatok lekérdezése szolgáltatás
(UttengelyVaganyAdatokQuery) a szolgálati helyhez. (A szolgáltatás csak az MGM
vágányok adatait adja vissza.) A plusz vonal egy gyűjtő (fiktív) vágányt jelképez (A

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 73/526|


nem MGM vágányra érkező vonatok lesznek erre a fiktív vágányra helyezve.).
Kezdőpont felöli megjelenítési beállítás esetén, a vágányokat (a kezdőponttól felöl) az
S_0151_03 szolgáltatástól kapott sorszámnak megfelelő sorrendben rajzolja fel a
program és a végére helyezi a gyűjtő (fiktív) vágányt. A gyűjtő vágányt vastagabb
vonallal rajzolja, mint a többi vágányt. Végpont felöli megjelenítés esetén, az előző
sorrendhez képest fordítva rajzolja meg a vágányokat (a gyűjtő vágány lesz az első.).

- A megjelenítési beállításoknak megfelelően a megjelenő szolgálati helyeknek vagy a

Betűkódjót (FOR név) vagy a rövid nevét írja ki a program a grafikon szélén,
vízszintes út tengely esetén felül, függőleges út tengely esetén bal oldalt. A grafikon
szélét a beállított névtípus (Betűkód (FOR név) vagy rövid név) maximális hosszához
igazítja. A szolgálati hely nevére állva ( [#93534] A „kijelölési sáv ” a szolgálati hely és a

`o` tooltip-ben megjeleníti a szolgálati hely teljes nevét
`o` m egváltoztatja az egér kurzort, ezzel jelezve, hogy ez kattintható terület.

A kattinthető terület lefedi a teljes szolgálat.

tengely/szolgálati hely információs terület. Az információs terület leírása

található.
`o` Bal egér gombbal kattintva kijelölésre kerül az érintett szolgálati hely

- V ízszintes út tengely esetén a szolgálati hely megnevezések alatt, függőleges út

tengely esetén tőle jobbra, az út tengellyel párhuzamosan, rajzolja meg a program a
szolgálati helyek közötti, vonali vágányokat szimbolizáló vonalakat. Az S_0151_02
szolgáltatástól kapott adatok alapján, a vonali vágányok darabszámának megfelelő
számú vonalat rajzol az egyes szolgálati helyek között. (Csak a háttérben kezelt, de a
felületen nem látható szolgálati helyeknél is lehetséges változás a vonali vágányok
darabszámában. Ezt a nem látható szolgálati helyeknél is úgy kezeli a program, mint a
megjelenő szolgálati helyeknél.) Csak a szolgálati helyek között húz vonali
vágányokat jelképező vonalakat, a szolgálati helyeken belül (állomási vágányok
megjelenítése esetén) nem.

- #88988 Irányítói üzemmódban az út tengelyen található szolgálati hely b al eg ér gom br a
kattintással kijelölhető. [#93534] A kijelölési sáv a szolgálati hely és a mellett e t alálh at ó
szolgálati hely közötti távolság feléig tart. [ #93534 VÉGE] A Kijelölés h atá s ár a a k l i en s
automatikusan átvált a szerkesztő ikonsorra, amennyiben nem ez az ak t í v . A k i j elö l t
szolgálati hely neve (rövid név vagy betűkód) vastagon szedve jelen i k m eg . A
kijelölés megszüntethető a grafikonon más helyre való kattintással. Egy szo l g álati h ely
kijelölése után kezelhető válik:

`o` a   - MRN vonat létrehozása ikon, amennyiben a felhasználó rendelkezik
**OP_0202_MRNTervezesNaplozas** operandussal. Az ikon működési
leírása az **MRN vonat létrehozása ikon** pontban található.

`o` #88980 a   - Csatlakozásra várás s zerkesztése ikon. Az ikon működési
leírása a **Csatlakozásra várás szerk** **e** **sztése ikon** pontban található.

`o` #89003 a   - Kulcsfüggés feloldás rögzítése ikon. Az ikon működési leírása
a **Kulcsfüggés feloldás rögzítése ikon** pontban található.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** állva

**törölt:** a bal vagy

**törölt:** 2.2.3.10.1


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 74/526|


**Alapháló - Idő tengely**



A diagram idő tengelyén az A_0151_02 ablakon kiválasztott idő üzemmód szerint egy fix
időszak vagy időhenger üzemmód választása esetén egy görgetett időszak jelenik meg. Az
időtengelyt a program a következők szerint rajzolja meg:

  - A z idő tengely beosztását a program a megjelenített idő függvényében egyenletesen

végzi el.

idővonalak és időbeosztások láthatósága függ a nagyítási szinttől:

`o` Egész és fél óránál vastagabb vonalat húz végig az alaphálón.
`o` 10 perceknél vékonyabb vonalat húz végig az alaphálón
`o` 1 és 5 perces beosztásokat csak a tengelyen jelöli, de az 5 perces

beosztásokat megkülönbözteti a perces beosztásoktól.

  - A beosztásokhoz az időt óra:perc formátumban, a dátumot pedig csak az idő tengely

kezdési pontjánál és napváltásnál,hh.nn formátumban, írja ki a grafikon szélén
(vízszintes idő tengely esetén felül, függőleges idő tengely esetén bal oldalt) a
program. A feliratok láthatósága függ a nagyítási szinttől.

  - #92919 Az idő tengely idővonal feletti részén a beosztások és a megjelen ített i d ő ért ék et
az idővonallal megegyező, stílusban meghatározott színnel jelennek meg . [ #92919 VÉGE]

**2.2.3.6** **Idő üzemmódok az Út – idő diagramon**

A diagramon két féle idő üzemmód lehetséges, amelyet az A_0151_02 ablakon kell
kiválasztani:

  - **Fix időszak üzemmód**

Ebben az üzemmódban az A_0151_02 ablakon kiválasztott fix időszak kerül az
időtengelyre és a fix időszakhoz tartozó menetvonal adatok jelennek meg a diagramon.
A megjelenített adatok nem frissülnek automatikusan.

  - **Időhenger üzemmód**

Ebben az üzemmódban a következők szerinti görgetett időszak jelenik meg az
időtengelyen:

`o` Időszak kezdete = aktuális idő - A_0151_02 ablaktól kapott múlt

időintervallum paraméter értéke
`o` Időszak vége = aktuális idő + A_0151_02 ablaktól kapott jövő

időintervallum paraméter értéke
Ebben az üzemmódban az aktuális időnél az idő tengelyre merőleges az egész
alaphálón végig húzott idővonal is megjelenik.

A diagramon a görgetett időszakhoz tartozó menetvonal adatok láthatók.

A görgetett időszak, az idővonal és a megjelenő menetvonal adatok 30mp-ként
automatikusan frissülnek a diagramon.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 

-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 75/526|


72236 Irányítói üzemmódban, ha egy s zer kesztőpanel meg van nyitva, nincs
automatikus frissítés a szerkesztői m ódból v aló k ilépésig.

**2.2.3.7** **Menetvonalak megjelenítése a diagramon**

Az út - idő diagramon a menetvonalaknak a következő adatait ábrázolja grafikusan a program:

  - K2 rendszerben kiutalt PASS2 rendszerbe bedolgozott menetrendi adatokat,

amennyiben a megjelenítési beállítások szerint szükséges a menetrendi adatok
megjelenítése a grafikonon. A menetrendi adatokat az **S_0151_04** **–** **Menetrendi**
**adatok lekérdezése** szolgáltatás (MenetrendiAdatokQuery) gyűjti ki az adatbázisból.

  - PASS2-be bedolgozott és naplózott tény adatokat, az **S_0151_05** **–** **Tényadatok**

**lekérdezése** szolgáltatás (TenyadatokQuery) adja vissza.

  - P ASS2-ben számított előrejelzés adatokat, amennyiben a megjelenítési beállítások

szerint szükséges az előrejelzés adatok megjelenítése a grafikonon, szintén az

**–**
**S_0151_05** **Tényadatok lekérdezése** szolgáltatás (TenyadatokQuery) adja át.

szükséges jelzőkkel.

A szolgáltatásoktól visszakapott menetvonal adatokat, az S_0151_01 szolgáltatástól kapott
megjelenítési beállítások és az aktuális szűrési feltételek szerint, az aktuális stílusnak és
vonalkészletnek megfelelően ábrázolja az út-idő diagramon a program. (Azokat a
menetvonalakat, amelyeknél a forgalmi vonatnem NULL az „Idegen menetvonalak”-hoz
megadott színnel ábrázolja.) Menetvonalanként külön vonalat rajzol a menetrendi és külön
vonalat a tény adatoknak. Ha a megjelenítési beállítások szerint az összes menetrendi vonalat
meg kell jeleníteni (Menetrend mező értéke ”1” – „Összes”), akkor minden látható
menetvonal menetrendi vonalát megrajzolja. Ha csak a kijelölt [vk54879] és a tény/előrejelzés

„2” – „Kijelölt és terv”), akkor csak a kijelölt tény menetvonal menetrendi vonalát rajzolja
meg (ha van kijelölt tény menetvonal) és a tény/előre jelezett nélküli menetrendek továbbra is
látszanak. [vk54879 vége] Az előrejelzés adatokat (amennyiben szükséges az előrejelzés adatok
megjelenítése) a tény adatokhoz rajzolt vonal folytatásaként ábrázolja.

**Pulzálás:**

Irányítói üzemmódban az előrejelzés változásban érintett menetvonalak tény/előrejelzés
vonala pulzáló módon jelenik meg egészen addig, míg a felhasználó tudomásul nem veszi,
vagy irányítói módosítás nem történik az előrejelzésre vonatkozóan. A pulzálás részleteit a
**Menetvonalak pulzálása** pont tartalmazza.

program 30mp-ként újra meghívja a menetvonal adatokat lekérdező szolgáltatásokat és újra
rajzolja a menetvonalakat.

A menetvonalakhoz rajzolt vonalak fölé pozícionálva a program megváltoztatja az egér
kurzort, ezzel jelezve, hogy ez kattintható terület.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** <#>¶

**törölt:** k

**törölt:** 

-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 76/526|


A kattintható területen olyan ponton, ahol több objektum található egymáson, az egér bal vagy
jobb gombját használva, egy választó menü jelenik meg, aminek részletes leírása a az
**Objektum választó menü leírásánál** t alálható.

A választó menüből egy menetvonalhoz tartozó objektum kiválasztásakor vagy olyan
kattintható területen használva az egeret, ahol csak egy (menetvonalhoz tartozó) objektum
található, a következő esetek lehetségesek:

  - Egy menetvonalhoz rajzolt bármelyik vonalon a bal vagy jobb egér gombot használva,

ha csak egy objektum található ott, vagy több objektum esetén a feljövő választó
menüből bal vagy jobb egér gombbal a menetvonalhoz tartozó objektumot választva, a
menetvonal menetrendi és tény vonala is (az előrejelzéssel együtt) kiemelt lesz és a
többi menetvonal elhalványul. Ezen kívül a kiemelés mellett a vonatkozó felirat
félkövéren és nagyobb betűmérettel jelenik me g [ VK107679] a többi menetvonal felirata
pedig elhalványul [ VK107679vége] . Ha a menetvonal menetrendi vonala a megjelenítési
beállítások miatt nem látható, de a megjelenítési beállítások szerint csak a kijelölt
menetvonal [vk54879] és a tény/előrejelzett adattal nem rendelkező menetvonalak
menetrendjét kell megjeleníteni (Menetrend mező értéke „2” – „Kijelölt és terv” [vk54879 ]

vége ) akkor a tény vonalra kattintva (egy objektum esetén), vagy a menüből a
menetvonalat választva, a program kiemelten megrajzolja a menetvonal menetrendi
vonalát. (Természetesen a tény vonal is az előrejelzés részével együtt kiemelt lesz.

VK107679 Továbbá a menetvonalak felirata is igazodik a kijelöléshez. VK107679vége )

  - Egy menetvonalhoz rajzolt bármelyik vonal és egy szolgálati hely találkozása fölé

pozícionálva és ott a jobb egér gombot használva egy objektum esetén, vagy több
objektum esetén az ott feljövő választó menüből jobb egér gombbal menetvonalhoz
tartozó objektumot választva, megnyílik a Menetvonal/szolgálati hely információs
terület, aminek a részletes leírása a dokumentum **Menetvonal/szolgálati hely**
**információs terület** pontjánál található.

  - Egy menetvonalhoz rajzolt bármelyik a vonalnak nem a szolgálati helyekre eső részére

és nem a be/kilépést jelölő nyilacskákra pozicionálva, ott a jobb egér gombot
használva egy objektum esetén, vagy több objektum esetén az ott feljövő választó
menüből jobb egér gombbal menetvonalhoz tartozó objektumot választva, megnyílik a
Menetvonal adatok információs terület. Az információs terület részletes leírása a

  - Egy menetvonalhoz rajzolt bármelyik a vonalnak a be/kilépést jelölő nyilacskájára

pozicionálva, ott a jobb egér gombot használva egy objektum esetén, vagy több
objektum esetén az ott feljövő választó menüből jobb egér gombbal a be/kilépést
jelképező nyilacskához tartozó menetvonal egy objektumát választva, megnyílik a
Be/kilépő menetvonal információs terület. Az információs terület részletes leírása a

**Menetrendi adatok ábrázolása**

A megjelenítési beállítások szerint (ez az adott felhasználóhoz az A_0151_03 ablakon

**–**
elmentett vagy az alapértelmezett megjelenítési beállítás), amit az **S_0151_01** **Megjelenítési**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 2.2.3.9 pontban

**törölt:** 2.2.3.10.2

**törölt:** 2.2.3.10.3

**törölt:** 2.2.3.10.4

**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 77/526|


**beállítások lekérdezése** (MegjelenitesiBeallitasokQuery) szolgáltatás ad vissza (a Menetrend
mezőben), a menetrendi adatok megjelenítésében a következő esetek lehetnek:

  - „Nincs” (Menetrend=0): Nem kell menetrendi adatokat megjeleníteni a diagramon.

Ilyenkor a menetrendi adatoknak a lekérdezése sem történik meg.

  - „Összes” (Menetrend=1): A menetrendi adatokat minden, egyébként megjelenő

menetvonal esetén meg kell jeleníteni.

  - vk54879 „Kijelölt és terv” (Menetrend=2): Menetrendi adatot csak a grafikonon kijelölt
menetvonalhoz kell megjeleníteni.

  - Amennyiben szükséges a menetrendi adatok megjelenítése, „Összes” és [vk54879]

„Kijelölt és terv” esetben is, akkor a menetrendi adatok megjelenítéséhez és Időhenger
üzemmód esetén 30mp-ként ezen adatok frissítéséhez, a kliens program meghívja az
**S_0151_04** **–** **Menetrendi** **adatok** **lekérdezése** (MenetrendiAdatokQuery)
szolgáltatást. „Összes” és [vk54879] „Kijelölt és terv” esetben is ugyanazokkal a
paraméterekkel hívja meg: Menetirányítói szakasz kód: Ha az A_0151_02 ablakon
menetirányítói szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként
NULL

  - Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a belső

azonosítója, egyébként NULL

  - Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az A_0151_02 ablaktól

kapott lekérdezési időszak kezdete. Időhenger üzemmód esetén az aktuális időpont
mínusz az A_0151_02 ablaktól kapott múlt időintervallum paraméter által
meghatározott idő.

  - Lekérdezési időszak vége : Fix időszak üzemmód esetén az A_0151_02 ablaktól

kapott lekérdezési időszak vége. Időhenger üzemmód esetén az aktuális időpont plusz
az A_0151_02 ablaktól kapott jövő időintervallum paraméter által meghatározott idő.

  - Szolgálati helyek listája (Az S_0151_02 – Út tengely adatok lekérdezése szolgáltatás

(UttengelySzolgalatiHelyAdatokQuery) által visszaadott szolgálati helyek listája)

`o` Szolgálati hely id: Az S_0151_02 szolgáltatás által visszaadott szolgálati

hely belső azonosítója

  - Forgalmi vonatkategóriák listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok

szűrése ablak adott át Forgalmi vonatkategóriákat.)

`o` Forgalmi vonatkategória id: Az A_0151_05 ablaktól kapott Forgalmi

vonatkategória azonosító

  - Forgalmi vonatnemek listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése

ablak adott át Forgalmi vonatnemeket.)

`o` Forgalmi vonatnem kód: Az A_0151_05 ablaktól kapott Forgalmi

vonatnem kód

  - Menetvonal tulajdonosok listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok

szűrése ablak adott át Menetvonal tulajdonos azonosítókat.)

`o` Menetvonal tulajdonos id: Az A_0151_05 ablaktól kapott Menetvonal

tulajdonos belső azonosítója

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 78/526|



  - Vonatszám tartományok listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok

szűrése ablak adott át Vonatszám tartományokat.)

`o` Vonatszámtól: Az A_0151_05 ablaktól kapott Vonatszámtól értéke
`o` Vonatszámig: Az A_0151_05 ablaktól kapott Vonatszámig értéke

  - Eltéréstől (perc) (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott

át Eltérés a menetrendtől –tól adatot)

  - Eltérésig (perc) (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott

át Eltérés a menetrendtől –ig adatot)

  - Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok

szűrése ablak adott át Késési főkódokat)

`o` Késési főkód id: Az A_0151_05 ablaktól kapott Késési főkód id

  - Késési segédkódok listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése

ablak adott át Késési segédkódokat)

`o` Késési segédkód id: Az A_0151_05 ablaktól kapott Késési segédkód id

  - Időhenger jelző: Időhenger üzemmód esetén true egyébként false

  - Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső azonosítója

Az **S_0151_04** **–** **Menetrendi adatok lekérdezése** szolgáltatás (MenetrendiAdatokQuery)
által visszaadott menetrendi adatok közül, a kliens program a menetrend megjelenítésre
vonatkozó beállítás szerint, vagy az összes visszakapott menetvonal menetrendjével
foglalkozik, vagy csak a kijelölt és [vk54879] és a tény/előrejelezett adattal nem rendelkező [vk54879 ]

vége menetvonal menetrendjével. Ezek közül is csak azokat jeleníti meg, amelyek megfelelnek
a következő szűrő ikonok beállításainak:

  - Ha a  - Páros viszonylat megjelenítése ikon bekapcsolt és a  - Páratlan
viszonylat megjelenítése ikon kikapcsolt, akkor azokat a menetrendeket jeleníti meg,
amelyek a lekérdezett szakaszon páros irányban közlekednek (Amelyeknél az
**S_0151_04** szolgáltatástól kapott Viszonylat értéke 2-páros), továbbá a mindkét
irányban közlekedő menetrendeknél (Viszonylat=0) csak azt a részt jeleníti meg, ahol
a közlekedés iránya páros (Irany=0).

  - Ha a  - Páratlan viszonylat megjelenítése ikon bekapcsolt és a  - Páros
viszonylat megjelenítése ikon kikapcsolt, akkor azokat a menetrendeket jeleníti meg,
amelyek a lekérdezett szakaszon páratlan irányban közlekednek (Amelyeknél az
**S_0151_04** szolgáltatástól kapott Viszonylat értéke 1-páratlan), továbbá a mindkét
irányban közlekedő menetrendeknél (Viszonylat=0) csak azt a részt jeleníti meg, ahol
a közlekedés iránya páratlan (Irany=1).

  - Ha a  - Páros viszonylat megjelenítése ikon és a  - Páratlan viszonylat
megjelenítése ikon is bekapcsolt, akkor olyan mintha mind a két ikon kikapcsolt lenne,
vagyis nincs szűrő hatása a menetrendekre.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 79/526|



  - Ha a  - Közlekedő vonatok megjelenítése ikon bekapcsolt, akkor csak a közlekedő
vonatok menetrendjét jeleníti meg (Amelyeknél az **S_0151_04** szolgáltatástól kapott
Kozlekedo jelző értéke true).

  - Ha a  - Nem közlekedő vonatok megjelenítése ikon bekapcsolt, akkor csak a nem
közlekedő vonatok menetrendjét jeleníti meg (Amelyeknél az **S_0151_04**
szolgáltatástól kapott Kozlekedo jelző értéke false).

  - Ha az  - Feloszlatott vonatok megjelenítése ikon bekapcsolt, akkor csak a
feloszlatott vonatok menetrendjét jeleníti meg (Amelyeknél az **S_0151_04**
szolgáltatástól kapott Feloszlatott jelző értéke true).

Az egy menetvonalhoz tartozó tervezett eseményeket az események tervezett ideje és
szolgálati helye (ha a megjelenítési beállítások szerint nincs szükség a vágányok
megjelenítésére, Állomási vágány nézet ikon kikapcsolt) szerint helyezi el a koordináta
rendszerben.

VK74827 Azokat a tervezett eseményeket, amelyeknél az **S_0151_04** szolgáltatás kimenő
adataiban a Be és kilépéshez kapcsolódó esemény jelző (BeKiKapcsEsemJel) értéke true,
csak akkor ábrázolja, ha a megjelenítési beállítások szerint szükség van a
vonalra/menetirányítói szakaszokra történő be és kilépések jelölésére (Be és kilépő vonatok
jelölése ikon bekapcsolt). [ VK74827vége ]

Azokat a tervezett eseményeket is elhelyezi, amelyekhez tartozó szolgálati hely a felületen
nem látható, de szerepel az út tengelyen. Az esemény pontokat a menetvonal forgalmi
vonatnemének megfelelő stílusú (amit vagy a felhasználóhoz elmentett vagy egy
alapértelmezett stílus és vonalkészlet tartalmaz) vonallal köti össze a következő módon:

  - Ha a menetvonalhoz egy 0-tartózkodás típusú esemény tartozik, akkor az esemény

szolgálati helyének vonalán húz egy vonalat a teljes lekérdezett időszakon át.

  - Ha a menetvonalhoz kapott első eseménynél teljesülnek a következő feltételek, akkor

a lekérdezett időszak kezdetétől az esemény pontjáig a szolgálati hely vonalán a
program vonalat húz (a szolgálati helyen való tartózkodást jelölve):

`o` Az S_0151_04 szolgáltatás által visszaadott adatokban az Esemény típus id

(EsemTipId) =2 (indulás)
`o` Az S_0151_04 szolgáltatás által visszaadott adatokban a Menetvonal indító/cél

jelző (MenetvIndCelJel)= NULL

`o` Ha a közlekedés irányára szűrni kell (a     - Páros viszonylat megjelenítése és

a         - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.

  - Ha a menetvonalhoz kapott első eseménynél teljesülnek a következő feltételek, akkor

a menetvonal rajzolását az esemény szolgálati helye előtt kezdi a program egy kicsi,
rövid vonalkával, ami a szolgálati hely vonalával 45 fokos szöget zár be (Ez azt
jelképezi, hogy a kiválasztott vonalon/menetirányítói szakaszon a menetvonalnak van
korábbi eseménye is, csak kívül esik a lekérdezett tartományon időben vagy térben.):

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt: A menetrendi adatok ábrázolását a következők szerint**

**hajtja végre:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 80/526|


`o` Az esemény szolgálati helye látható a grafikonon
`o` Esemény típus id (EsemTipId) értéke 1 (érkezés) vagy 6 (áthaladás)
`o` Esemény be/kilépés jelző (SzakaszBeKiJel) értéke NULL (közbenső esemény)

vagy 2 (kilépés)

`o` Ha a közlekedés irányára szűrni kell (a  - Páros viszonylat megjelenítése és

a     - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.
A kis vonalkát a menetvonalhoz, vízszintes úttengely esetén a szolgálati hely bal
oldaláról, függőleges úttengely esetén alulról rajzolja a következő esetekben:
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

     - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

     - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén) (Mivel
áthaladás esetén az EsemAllVegpont jelző az indulásra vonatkozó
értéket tartalmazza és az érkezésre vonatkozó érték ennek az

ellentettje.)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

     - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

     - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
A kis vonalkát a menetvonalhoz vízszintes úttengely esetén a szolgálati hely
jobb oldaláról, függőleges úttengely esetén felülről kell rajzolni a következő
esetekben:
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

     - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

     - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén) (Mivel
áthaladás esetén az EsemAllVegpont jelző az indulásra vonatkozó
értéket tartalmazza és az érkezésre vonatkozó érték ennek az

ellentettje.)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

     - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 81/526|



- Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

`o` és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)
`o` és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont) értéke

„v” (a szolgálati hely végpontja felöli esemény esetén)

- Ha a menetvonal egy eseményénél teljesülnek a következő feltételek, akkor az

eseménypontját összeköti a menetvonal következő eseménypontjával:

`o` Esemény be/kilépés jelző (SzakaszBeKiJel) értéke NULL (közbenső esemény)

vagy 1 (belépés)

`o` Ha a közlekedés irányára szűrni kell (a   - Páros viszonylat megjelenítése és

a       - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.

- Ha a menetvonalhoz kapott utolsó eseménynél teljesülnek a következő feltételek,

akkor az esemény pontjától a szolgálati hely vonalán a program vonalat húz a
lekérdezett időszak végéig:

`o` Az S_0151_04 szolgáltatás által visszaadott adatokban az Esemény típus id

(EsemTipId) =1 (érkezés)
`o` Az S_0151_04 szolgáltatás által visszaadott adatokban az Menetvonal

indító/cél jelző (MenetvIndCelJel)= NULL

`o` Ha a közlekedés irányára szűrni kell (a   - Páros viszonylat megjelenítése és

a       - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.

- Ha a menetvonalhoz kapott utolsó eseménynél teljesülnek a következő feltételek,

akkor a menetvonal rajzolását az esemény szolgálati helye után folytatja a program
egy kicsi, rövid vonalkával, ami a szolgálati hely vonalával 45 fokos szöget zár be (Ez
azt jelképezi, hogy a kiválasztott vonalon/menetirányítói szakaszon a menetvonalnak
van további eseménye is, csak kívül esik a lekérdezett tartományon időben vagy
térben.):

`o` Az esemény szolgálati helye látható a grafikonon
`o` Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6 (áthaladás)
`o` Esemény be/kilépés jelző (SzakaszBeKiJel) értéke NULL (közbenső esemény)

vagy 1 (belépés)

`o` Ha a közlekedés irányára szűrni kell (a   - Páros viszonylat megjelenítése és

a       - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.
A menetvonal rajzolását kis vonalkával, vízszintes úttengely esetén a szolgálati
hely bal oldalán, függőleges úttengely esetén alul folytatja a következő esetekben:
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 82/526|



        - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
A menetvonal rajzolását kis vonalkával, vízszintes úttengely esetén a szolgálati hely
jobb oldalán, függőleges úttengely esetén felül folytatja a következő esetekben:

`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

        - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

        - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)

**2.2.3.7.1.2** **Állomási vágányok megjelenítése**

Ha a megjelenítési beállítások szerint a vágányokat is meg kell jeleníteni (Állomási vágány
nézet ikon bekapcsolt), akkor a tervezett eseményeket az esemény szolgálati helyén belül
vágányra helyezi el a program a következő módon (Az út tengelyen nem látható, de a
háttérben szereplő szolgálati helyeket ilyenkor is vágányok nélkül kezeli.):

  - Ha a tervezett eseménynél a tervezett vágány kitöltött és szerepel a szolgálati hely

MGM vágányai között (szerepel a szolgálati hely út tengelyen megjelenített vágányai
között), akkor az adott vágányra helyezi az eseményt.

  - Ha a tervezett vágány nincs kitöltve, vagy kitöltött, de nem szerepel a szolgálati hely

MGM vágányai között, akkor a szolgálati hely gyűjtő (fiktív) vágányára helyezi az
eseményt.

Vágányok megjelenítése esetén az egy menetvonalhoz tartozó eseménypontokat, a
menetvonal forgalmi vonatnemének megfelelő stílusú (amit vagy a felhasználóhoz elmentett
vagy egy alapértelmezett stílus és vonalkészlet tartalmaz) vonallal, a következő módon köti
össze:

  - Ha a menetvonalhoz egy 0-tartózkodás típusú esemény tartozik, akkor az esemény

vágányán húz egy vonalat a teljes ábrázolt időszakon át.

  - Ha a menetvonalhoz kapott első eseményig vonalat kell húzni a szolgálati hely

vonalán a lekérdezett időszak kezdetétől, akkor azt az esemény vágányán húzza.

  - Ha a menetvonalhoz kapott első eseménynél, az esemény szolgálati helye előtt kicsi,

rövid vonalkát vagy kis nyilacskát kell rajzolni, akkor azt a menetvonal haladási
iránya szerinti első vágányhoz rajzolja az esemény idejénél és onnan vízszintes
vonalat húz az esemény vágányáig.

  - Ha az egy menetvonalhoz tartozó, de különböző szolgálati helyen lévő, egymást

követő esemény pontokat össze kell kötni, akkor a szolgálati helyek szélső vágányai
között húz egyenes vonalat és ott a menetvonalat megtörve az esemény idejénél, az
esemény vágányáig vízszintes vonalat húz.

  - Ha az adott szolgálati helyen két eseménye van a menetvonalnak, akkor az első

esemény pontjától (az első esemény vágányán) függőleges vonalat húz vízszintes

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 83/526|


úttengely esetén (függőleges úttengely esetén vízszintes vonalat) a második esemény
idejéig. Ha a második esemény vágánya eltérő, akkor a második esemény idejénél
vízszintes vonalat húz a két esemény vágánya között vízszintes úttengely esetén
(függőleges úttengely esetén függőleges vonalat).

  - Ha egy menetvonalhoz kapott utolsó eseménytől vonalat kell húzni a szolgálati hely

vonalán a lekérdezett időszak végéig, akkor azt az esemény vágányán húzza.

  - Ha a menetvonalhoz kapott utolsó eseménynél, az esemény szolgálati helye után kicsi,

rövid vonalkát vagy kis nyilacskát kell rajzolni, akkor azt a menetvonal haladási
iránya szerinti utolsó vágányhoz rajzolja az esemény idejénél és addig vízszintes
vonalat húz az esemény vágányától.

**2.2.3.7.1.3** **Be és kilépő vonatok jelölése**

Ha a megjelenítési beállítások szerint szükség van a vonalra/menetirányítói szakaszokra
történő be és kilépések jelölésére (Be és kilépő vonatok jelölése ikon bekapcsolt), akkor az
ábrázolt eseményeknél a vonalra/menetirányítói szakaszokra /ábrára történő be és kilépések
jelölésére kis nyilacskákat alkalmaz a program. A nyilacskákat az S_0151_04 szolgáltatás
Esemény be/kilépés jelző (SzakaszBeKiJel) mezőjében kapott értéknek megfelelően rajzolja,
de csak olyan eseményeknél, amelyeknek a szolgálati helye látható az út tengelyen, valamint
ha a közlekedés irányára szűrni kell és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya megfelel a szűrésnek.

  - Ha az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke 1 (belépés), akkor a

menetvonal rajzolását az esemény szolgálati helye előtt kezdi, a szolgálati hely
irányába mutató kis nyilacskával, ami a szolgálati hely vonalával 45 fokos szöget zár
be.
A kis nyilacskát vízszintes úttengely esetén a szolgálati hely bal oldaláról, függőleges
úttengely esetén alulról rajzolja a következő esetekben:

`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

        - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

        - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén) (Mivel
áthaladás esetén az EsemAllVegpont jelző az indulásra vonatkozó
értéket tartalmazza és az érkezésre vonatkozó érték ennek az

ellentettje.)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

        - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

        - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
A kis nyilacskát vízszintes úttengely esetén a szolgálati hely jobb oldaláról, függőleges
úttengely esetén felülről rajzolja a következő esetekben:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 84/526|


`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén) (Mivel
áthaladás esetén az EsemAllVegpont jelző az indulásra vonatkozó
értéket tartalmazza és az érkezésre vonatkozó érték ennek az

ellentettje.)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)

- Ha az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke 2 (kilépés), akkor a

menetvonal rajzolását az esemény szolgálati helye után folytatja, a menetvonal
haladási irányát figyelembe véve a szolgálati helytől kifelé mutató kis nyilacskával,
ami a szolgálati hely vonalával 45 fokos szöget zár be.
A kis nyilacskát vízszintes úttengely esetén a szolgálati hely bal oldalán, függőleges
úttengely esetén alul rajzolja a következő esetekben:

`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
A kis nyilacskát vízszintes úttengely esetén a szolgálati hely jobb oldalán, függőleges
úttengely esetén felül rajzolja a következő esetekben:

`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 85/526|



  - Ha az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke 3 (be és kilépés), akkor egy

belépést és egy kilépést jelképező nyilacskát is rajzol az előzőek szerint az esemény
szolgálati helyénél az eseménypontjához.
A menetvonalakhoz rajzolt be/kilépés jelölések fölé pozícionálva a program
megváltoztatja az egér kurzort, ezzel jelezve, hogy ez kattintható terület. [#88993] Ez a logika
csak akkor érvényesül, ha van kapcsolódó vonal vagy menetirányítói szak as z v ag y áb ra.
Amennyiben nincs ilyen, akkor nem kattintható a be/kilépést jelző ny i l acs k a. [ #88993 ] A
kattintható területen a jobb egér gombot használva, ha a kattintás helyén nincs más
objektum, vagy több objektum esetén bármelyik egér gomb használatakor feljövő
menüből jobb egér gombbal a be/kilépést jelképező nyilacskához tartozó menetvonal egy
objektumát választva, megnyílik a Be/kilépő menetvonal információs terület, aminek a

található. (Az objektumválasztó menü részletes leírása a dokumentum 2.2.3.9 pontjánál
található.) Ebben az esetben az S_0151_04 szolgáltatástól kapott alábbi adatokat adja át a
kliens (egyszerre csak egy lehet kitöltve):

   - Menetirányítói szakaszról kód (MisrolKod)

   - V onalról id (VonalrolId)

   - Abráról Id (AbrarolId) [#88993]

   - Menetirányítói szakaszra kód (MisraKod)

   - V onalra id (VonalraId)

   - Ábrára Id (AbraraId) [ #88993]

**2.2.3.7.1.4** **A vonatszámok megjelenítése**

A menetvonalakhoz tartozó vonatok számát az irányszámmal együtt vízszintesen írja ki a
program, a menetvonal színével megegyező színnel, a következő helyeken dinamikusan
elhelyezve, hogy ne fedjék egymást:

  - Ha a menetvonal ábrázolása a grafikon széléről indul, akkor a grafikus terület és a

tengely feliratok között lévő szabad területen

  - Ha a menetvonal ábrázolása nem a grafikon széléről indul, akkor a menetvonal első a

szűrési feltételeknek is megfelelő, ábrázolt eseményénél. Állomási vágányok
megjelenítése esetén, ha érkezés vagy áthaladás az első esemény, akkor a menetvonal
érkezése felöli szélső vágány mellett (függőleges úttengely esetén az érkezés irányát
figyelembe véve a szélső vágány alatt vagy felett). Ha indulás az első esemény, akkor
a menetvonal haladási iránya szempontjából utolsó (szélső) vágány mellett
(függőleges úttengely esetén alatt, vagy felett).

  - A menetvonal olyan a szűrési feltételeknek is megfelelő eseményénél, ahol változik a

vonatszám vagy az irányszám. Állomási vágányok megjelenítése esetén az előző
pontban leírtak szerint.

  - Ha a menetvonal kilép, majd visszatér az adott vonalra/menetirányítói szakaszra,

akkor annál az eseménynél, ahol visszatér, ha az esemény megfelel a szűrési
feltételeknek. Állomási vágányok megjelenítése esetén, a menetvonal visszatérése
felöli szélső vágány mellett (függőleges úttengely esetén alatt, vagy felett)

  - Ha a menetvonal ábrázolása megszakad, akkor annál az eseménynél, ahol újraindul.

**2.2.3.7.1.5** **Körjelölők**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** **2.2.3.10.4**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 86/526|


Ha a megjelenítési beállítások szerint szükség van körjelölésekre (Kör jelölők megjelenítése
ikon bekapcsolt), akkor az ábrázolt eseménypontoknál (a menetvonal és a szolgálati hely
metszéspontjánál, vágányok megjelenítése esetén a menetvonal és a vágány metszéspontjánál)
körjelöléseket alkalmaz a program. A körjelöléseket az S_0151_04 szolgáltatás Körjelölő
(Korjelolo) mezőjében kapott értékek szerint rajzolja, de csak olyan eseményeknél,
amelyeknek a szolgálati helye látható az út tengelyen, valamint ha a közlekedés irányára
szűrni kell és a menetvonal két irányú közlekedést tartalmaz (Viszonylat=0), akkor az
esemény iránya megfelel a szűrésnek.

  - Ha NULL szerepel az eseménynél a Körjelölő (Korjelolo) mezőben, akkor nincs

szükség körjelölőre

  - „0” esetén, ami 0 perces tartózkodást jelent, egy sablonban előre meghatározott színű

(fehér) karikával jelöli meg a tervezett eseményt.

  - „T” esetén, ami tervezett készre jelentést jelent, a menetvonal színével megegyező

színű kitöltött karikával jelöli meg a tervezett eseményt.

**2.2.3.7.1.6** **Foglalt vágány**

Ha a következő feltételek teljesülnek, akkor a program az adott menetvonal adott eseményhez
a menetvonal színével megegyező színű „F” betűt ír. Az „F” betűt a menetvonal és a
szolgálati hely vagy állomási vágányok megjelenítése esetén a menetvonal és a vágány
metszéspontjánál a hegyes szögben helyezi el.

  - A megjelenítési beállítások szerint a foglalt vágányra bejáratot meg kell jeleníteni

(Foglalt vágányra bejárat jelölése ikon bekapcsolt).

  - Az eseménynél foglalt vágányra járatást terveztek, vagyis az S_0151_04

szolgáltatástól kapott adatok szerint az eseménynél a Foglalt vágány jelző
(FoglVagany) értéke igaz.

  - Az esemény szolgálati helye látható az út tengelyen.

  - Ha a közlekedés irányára szűrni kell (a  - Páros viszonylat megjelenítése és a  Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az egyik/ bekapcsolt)
és a menetvonal két irányú közlekedést tartalmaz (Viszonylat=0), akkor az esemény
iránya (Irany) megfelel a szűrésnek

**2.2.3.7.1.7** **Helytelen vágány**

Ha egy eseménynél helytelen vágányra indulást terveztek, vagyis az S_0151_04
szolgáltatástól kapott adatok szerint az eseménynél a Helytelen vágányra ind. jelző
(HelytVaganyraInd) értéke igaz, akkor ezt a program azzal jelzi, hogy az adott szolgálati hely
és a menetvonal következő szolgálati helye közötti menetvonal szakaszt vastagabb vonallal
rajzolja. Ez a jelölés a menetvonalon lehet az út tengelyen nem látható szolgálati helyek
között is.

**Tény és előrejelzés adatok ábrázolása**

A tény és előrejelzés adatok (amennyiben a megjelenítési beállítások szerint szükséges az
előrejelzés adatok megjelenítése) megjelenítéséhez és Időhenger üzemmód esetén 30 m p
**–**
ként az adatok frissítéséhez a kliens program meghívja az **S_0151_05** **Tényadatok**
**lekérdezése** (TenyadatokQuery) szolgáltatást a következő paraméterekkel:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 87/526|



- Menetirányítói szakasz kód: Ha az A_0151_02 ablakon menetirányítói szakaszt

választott ki a felhasználó, akkor annak a kódja, egyébként NULL

- Vonal id: Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a belső

azonosítója, egyébként NULL

- Lekérdezési időszak kezdete: Fix időszak üzemmód esetén az A_0151_02 ablaktól

kapott lekérdezési időszak kezdete. Időhenger üzemmód esetén az aktuális időpont
mínusz az A_0151_02 ablaktól kapott múlt időintervallum paraméter által
meghatározott idő.

- Lekérdezési időszak vége: Fix időszak üzemmód esetén az A_0151_02 ablaktól kapott

lekérdezési időszak vége. Időhenger üzemmód esetén az aktuális időpont plusz az
A_0151_02 ablaktól kapott jövő időintervallum paraméter által meghatározott idő.

- Szolgálati helyek listája (Az S_0151_02 – Út tengely adatok lekérdezése szolgáltatás

(UttengelySzolgalatiHelyAdatokQuery) által visszaadott szolgálati helyek listája)

`o` Szolgálati hely id: Az S_0151_02 szolgáltatás által visszaadott szolgálati

hely belső azonosítója

- Forgalmi vonatkategóriák listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok

szűrése ablak adott át Forgalmi vonatkategóriákat.)

`o` Forgalmi vonatkategória id: Az A_0151_05 ablaktól kapott Forgalmi

vonatkategória azonosító

- Forgalmi vonatnemek listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése

ablak adott át Forgalmi vonatnemeket.)

`o` Forgalmi vonatnem kód: Az A_0151_05 ablaktól kapott Forgalmi

vonatnem kód

- Menetvonal tulajdonosok listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok

szűrése ablak adott át Menetvonal tulajdonos azonosítókat.)

`o` Menetvonal tulajdonos id: Az A_0151_05 ablaktól kapott Menetvonal

tulajdonos belső azonosítója

- Vonatszám tartományok listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok

szűrése ablak adott át Vonatszám tartományokat.)

`o` Vonatszámtól: Az A_0151_05 ablaktól kapott Vonatszámtól értéke
`o` Vonatszámig: Az A_0151_05 ablaktól kapott Vonatszámig értéke

- Eltéréstől (perc) (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott

át Eltérés a menetrendtől –tól adatot)

- Eltérésig (perc) (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése ablak adott

át Eltérés a menetrendtől –ig adatot)

- Forgalmi késési főkódok listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok

szűrése ablak adott át Késési főkódokat)

`o` Késési főkód id: Az A_0151_05 ablaktól kapott Késési főkód id

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 88/526|



  - Késési segédkódok listája (Csak akkor kitöltött, ha az A_0151_05 – Adatok szűrése

ablak adott át Késési segédkódokat)

`o` Késési segédkód id: Az A_0151_05 ablaktól kapott Késési segédkód id

  - Időhenger jelző: Időhenger üzemmód esetén true egyébként false

  - Előrejelzés jelző: Ha a megjelenítési beállítások szerint szükséges az előrejelzés

adatok megjelenítése akkor true egyébként false

  - Felhasználó vasútvállalata id: A felhasználó vasútvállalatának belső azonosítója

Az **S_0151_05 – Tényadatok lekérdezése** (TenyadatokQuery) szolgáltatás által visszaadott
menetvonalak közül, a kliens program csak azokat jeleníti meg, amelyek megfelelnek a
következő szűrő ikonok beállításainak:

  - Ha a  - Páros viszonylat megjelenítése ikon bekapcsolt és a  - Páratlan
viszonylat megjelenítése ikon kikapcsolt, akkor azokat a menetvonalakat jeleníti meg,
amelyek a lekérdezett szakaszon páros irányban közlekednek (Amelyeknél az
**S_0151_05** szolgáltatástól kapott Viszonylat értéke 2-páros), továbbá a mindkét
irányban közlekedő menetvonalaknál (Viszonylat=0) csak azt a részt jeleníti meg, ahol
a közlekedés iránya páros (Irany=0).

  - Ha a  - Páratlan viszonylat megjelenítése ikon bekapcsolt és a  - Páros
viszonylat megjelenítése ikon kikapcsolt, akkor azokat a menetvonalakat jeleníti meg,
amelyek a lekérdezett szakaszon páratlan irányban közlekednek (Amelyeknél az
**S_0151_05** szolgáltatástól kapott Viszonylat értéke 1-páratlan), továbbá a mindkét
irányban közlekedő menetvonalaknál (Viszonylat=0) csak azt a részt jeleníti meg, ahol
a közlekedés iránya páratlan (Irany=1).

  - Ha a  - Páros viszonylat megjelenítése ikon és a  - Páratlan viszonylat
megjelenítése ikon is bekapcsolt, akkor olyan mintha mind a két ikon kikapcsolt lenne,
vagyis nincs szűrő hatása a menetvonalakra.

  - Ha a  - Közlekedő vonatok megjelenítése ikon bekapcsolt, akkor csak a közlekedő
vonatok menetvonalát jeleníti meg (Amelyeknél az **S_0151_05** szolgáltatástól kapott
Kozlekedo jelző értéke true).

  - Ha a  - Nem közlekedő vonatok megjelenítése ikon bekapcsolt, akkor csak a nem
közlekedő vonatok menetvonalát jeleníti meg (Amelyeknél az **S_0151_05**
szolgáltatástól kapott Kozlekedo jelző értéke false).

  - Ha az  - Feloszlatott vonatok megjelenítése ikon bekapcsolt, akkor csak a
feloszlatott vonatok menetvonalát jeleníti meg (Amelyeknél az **S_0151_05**
szolgáltatástól kapott Feloszlatott jelző értéke true).

Ha a megjelenítési beállítások szerint nincs szükség az előrejelzés adatok megjelenítésére,
akkor Az **S_0151_05 – Tényadatok lekérdezése** (TenyadatokQuery) szolgáltatás a
menetvonalaknak csak a tény eseményeit adja vissza. Ha a megjelenítési beállítások szerint az
előrejelzés adatokat is meg kell jeleníteni, akkor az **S_0151_05** szolgáltatás visszaadja a

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 89/526|


menetvonalak a tény és előre jelzett eseményeit is. Az **S_0151_05** szolgáltatás kimenő
adataiban az esemény jellege (EsemJelleg) határozza meg, hogy az adott esemény tény („T”)
vagy előrejelzés („E”) esemény.
A kliens program a menetvonalak tény és előrejelzés adatainak az ábrázolását a következők
szerint hajtja végre:

**2.2.3.7.2.1** **Egy menetvonalhoz tartozó tény és előrejelzés adatok**

Az egy menetvonalhoz tartozó tény és előrejelzés eseményeket az események idej e (EsemIdo)
és szolgálati hely e (SzhId) (ha a megjelenítési beállítások szerint nincs szükség a vágányok
megjelenítésére, Állomási vágány nézet ikon kikapcsolt) szerint helyezi el a koordináta
rendszerben.

VK74827 Azokat a tény és előrejelzett eseményeket, amelyeknél az **S_0151_05** szolgáltatás
kimenő adataiban a Be és kilépéshez kapcsolódó esemény jelző (BeKiKapcsEsemJel) értéke
true, csak akkor ábrázolja, ha a megjelenítési beállítások szerint szükség van a
vonalra/menetirányítói szakaszokra történő be és kilépések jelölésére (Be és kilépő vonatok
jelölése ikon bekapcsolt). [ VK74827vége]

#88992 Azokat az eseményeket, amelyeknél az **S_0151_05** szolgáltatás kimenő adataiban a
Szolgálati hely felé belső azonosítója (SzhIdIg) kitöltött, a Szolgálati hely (SzhId) és a
Szolgálati hely felé (SzhIdIg) mezőkben kapott szolgálati helyek között helyezi el, a
Szolgálati helytől (SzhId) az Eltolás (SzhIdEltolas) mezőben kapott távolságra. [ #88992vége]
Azokat az eseményeket is ábrázolja, amelyekhez tartozó szolgálati hely a felületen nem
látható, de szerepel az út tengelyen. Az esemény pontokat, a tény és előrejelzés események
pontokat is, a menetvonal forgalmi vonatnemének megfelelő stílusú (amit vagy a
felhasználóhoz elmentett vagy egy alapértelmezett stílus és vonalkészlet tartalmaz) vonallal
köti össze [92919], ~~de~~ ~~az~~ ~~előrejelzés~~ ~~eseményekhez~~ ~~és~~ ~~az~~ ~~előrejelzés~~ ~~eseményektől~~ ~~vékonyabb~~
~~vonalat~~ ~~húz~~, ~~valamint~~ ~~vékonyabb~~ ~~nyilakat~~ ~~rajzol~~ . A menetvonalak vonalainak megrajzolását a
következő módon végzi:

  - Ha a menetvonalhoz kapott első eseménynél teljesülnek a következő feltételek, akkor

a lekérdezett időszak kezdetétől az esemény pontjáig a szolgálati hely vonalá n, [#88992]
vagy [#88981-el törölve] ~~(Mrn~~ ~~vonatnál)~~ ha a Szolgálati hely felé belső azonosí t ó j a (S zh Id Ig )
kitöltött, akkor a Szolgálati hely (SzhId) és a Szolgálati hely felé (SzhId Ig ) k ö zö tt, a
Szolgálati helytől (SzhId) a kapott távolságban (SzhIdEltolas), a szolgá lati h ely ek
vonalával párhuzamosan [ #88992 vége], a program vonalat húz (a szolgálati helyen [#88992 ]
vagy a [#88981] ~~munkavégzés~~ ~~helyén~~ ~~s~~ zolgálati helyek között [#88981vége#88992 vége] v aló
tartózkodást jelölve):

`o` Az S_0151_05 szolgáltatás által visszaadott adatokban az Esemény típus id

(EsemTipId) értéke 2 (indulás) vagy 0 (tartózkodás)
`o` Az S_0151_05 szolgáltatás által visszaadott adatokban a Menetvonal indító/cél

jelző (MenetvIndCelJel) értéke NULL vagy „c”

`o` Ha a közlekedés irányára szűrni kell (a     - Páros viszonylat megjelenítése és

a         - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.

  - Ha a menetvonalhoz kapott első eseménynél teljesülnek a következő feltételek, akkor

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** szolgálati

**törölt:**,

**törölt:** ami


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 90/526|


~~helyénél~~ szolgálati helyek között húzott [#88981vége], a szolgálati helyekkel pár h u zam o s,
vonallal [#88992 vége] 45 fokos szöget zár be (Ez azt jelképezi, hogy a kiválasztott
vonalon/menetirányítói szakaszon a menetvonalnak van korábbi eseménye is, csak
kívül esik a lekérdezett tartományon időben vagy térben.):

`o` Az esemény szolgálati helye látható a grafikonon, [#88992 ] illetve ha az eseményt

#88981 ~~munkavégzés~~ ~~helyéhez~~ ~~tartozik~~, ~~akkor~~ ~~a~~ ~~munkavégzés~~ ~~helyea~~ szolgálati
helyek közé kell rajzolni, akkor az esemény [#88981vége] előtti és utáni szolgálati
hely is látható a grafikonon [ #88992 vége]
`o` Esemény típus id (EsemTipId) értéke 1 (érkezés) vagy 6 (áthaladás)
`o` Esemény be/kilépés jelző (SzakaszBeKiJel) értéke NULL (közbenső esemény)

vagy 2 (kilépés)

`o` Ha a közlekedés irányára szűrni kell (a  - Páros viszonylat megjelenítése és

a     - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.
A kis vonalkát a menetvonalhoz, vízszintes úttengely esetén a szolgálati hel y [#88992 ]
vagy a [#88981] ~~munkavégzés~~ ~~helyének~~ ~~s~~ zol g ál ati helyek között húzott vonal [#88981vége #88992 ]

vége bal oldaláról, függőleges úttengely esetén alulról rajzolja a következő esetekben:

`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

     - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

     - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)(Mivel
áthaladás esetén az EsemAllVegpont jelző az indulásra vonatkozó
értéket tartalmazza és az érkezésre vonatkozó érték ennek az

ellentettje.)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

     - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

     - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
A kis vonalkát a menetvonalhoz vízszintes úttengely esetén a szolgálati hely [#88992]
vagy a [#88981] ~~munkavégzés~~ ~~helyének~~ szolgálati helyek között húzott vonal [#88981vége ]

#88992 vége jobb oldaláról, függőleges úttengely esetén felülről kell rajzolni a
következő esetekben:
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

     - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

     és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

     - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 91/526|



       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén) (Mivel
áthaladás esetén az EsemAllVegpont jelző az indulásra vonatkozó
értéket tartalmazza és az érkezésre vonatkozó érték ennek az

ellentettje.)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)

- Ha a menetvonal egy eseményénél teljesülnek a következő feltételek, akkor az

esemény pontját összeköti a menetvonal következő eseményének pontjával:

`o` Esemény be/kilépés jelző (SzakaszBeKiJel) értéke NULL (közbenső esemény)

vagy 1 (belépés)
`o` és a Menetvonal indító/cél jelző (MenetvIndCelJel) értéke NULL (közbenső

esemény) vagy „i” (indító vagy újra indító szolgálati hely)

`o` Ha a közlekedés irányára szűrni kell (a   - Páros viszonylat megjelenítése és

a       - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.
Amennyiben az esemény jellege (EsemJelleg) „T”- Tény és az esemény típusa
(EsemTipId) 2 (indulás) vagy 6 (áthaladás), valamint a következő esemény jellege
„E” – Előrejelzés, akkor a két eseménypont összekötését az adott stílusnak
megfelelő normál vastagságú rövid vonalkával kezdi . [92919], ~~majd~~ ~~vékonyabb~~
~~vonallal~~ ~~folytatja~~ ~~és~~ ~~fejezi~~ ~~be~~ . ~~Ezzel~~ ~~jelképezve~~, ~~hogy~~ ~~a~~ ~~vonat~~ ~~már~~ ~~tényleg~~ es ~~en~~
~~elindult~~ ~~a~~ ~~következő~~ ~~szolgálati~~ ~~helyre~~, ~~de~~ ~~még~~ ~~nem~~ ~~érkezett~~ ~~meg~~ .

- Fix időszak üzemmód esetén, ha a menetvonalhoz kapott utolsó eseménynél

teljesülnek a következő feltételek, akkor az esemény pontjától a szolgálati hely
vonalán, [#88992 ] vagy ha a Szolgálati hely felé belső azonosítója (SzhIdIg) kitöltött,
akkor a Szolgálati hely (SzhId) és a Szolgálati hely felé (SzhIdIg) között, a Szo l g álati
helytől (SzhId) a kapott távolságban (SzhIdEltolas), a szolgálati helyek v o nalá v al
párhuzamosan [ #88992 vége], a program vonalat húz a lekérdezett időszak végéig:

`o` Az S_0151_05 szolgáltatás által visszaadott adatokban az Esemény típus id

(EsemTipId) értéke 1 (érkezés) vagy 0 (tartózkodás)
`o` Az S_0151_05 szolgáltatás által visszaadott adatokban a Menetvonal indító/cél

jelző (MenetvIndCelJel) értéke NULL vagy „i”

`o` Ha a közlekedés irányára szűrni kell (a   - Páros viszonylat megjelenítése és

a       - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.

- Időhenger üzemmód esetén, ha a menetvonalhoz kapott utolsó eseménynél teljesülnek

a következő feltételek és az esemény jellege „E” – Előrejelzés akkor a lekérdezett
időszak végéig, ha az esemény jellege „T”- Tény, akkor az idővonalig húz vonalat a

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 92/526|


program az esemény pontjától a szolgálati hely vonalán, [#88992 ] vagy ha a Szolgálati
hely felé belső azonosítója (SzhIdIg) kitöltött, akkor a Szolgálati hely (S zh I d ) és a
Szolgálati hely felé (SzhIdIg) között, a Szolgálati helytől (SzhId) a kap o t t t ávo l ság ban
(SzhIdEltolas), a szolgálati helyek vonalával párhuzamosan [ #88992 vége ] :

`o` Esemény típus id (EsemTipId) értéke 1 (érkezés) vagy 0 (tartózkodás)
`o` Menetvonal indító/cél jelzőt (MenetvIndCelJel) értéke NULL vagy „i”

`o` Ha a közlekedés irányára szűrni kell (a   - Páros viszonylat megjelenítése és

a       - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.

- Ha a menetvonalhoz kapott utolsó eseménynél teljesülnek a következő feltételek,

akkor a menetvonal rajzolását az esemény szolgálati helye után [#88992 ] vagy a
#88981 ~~munkavégzés~~ ~~helye~~ szolgálati helyek között húzott vonal #88981vége u t án #88992 vége
folytatja a program egy kicsi, rövid vonalkával, ami a szolgálati hely vonalával [#88992 ]
vagy a szolgálati helyek között húzott vonallal [#88992 vége] 4 5 fokos szöget zár be. (Ez két
dolgot jelképezhet: 1. A kiválasztott vonalon/menetirányítói szakaszon a
menetvonalnak van további eseménye is, csak kívül esik a lekérdezett tartományon
időben vagy térben. 2. A vonat ténylegesen elindult a következő szolgálati helyre, de
még nem érkezett meg.):

`o` Az esemény szolgálati helye látható a grafikonon, [#88992 ] illetve ha az eseményt

#88981 ~~munkavégzés~~ ~~helyéhez~~ ~~tartozik~~, ~~akkor~~ ~~a~~ ~~munkavégzés~~ ~~helye~~ a szolgálati
helyek között kell ábrázolni, akkor az esemény [#88981vége] előtti és utáni szolgálati
hely is látható a grafikonon [ #88992 vége]
`o` Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6 (áthaladás)
`o` Esemény be/kilépés jelző (SzakaszBeKiJel) értéke NULL (közbenső esemény)

vagy 1 (belépés)

`o` Ha a közlekedés irányára szűrni kell (a   - Páros viszonylat megjelenítése és

a       - Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az
egyik/ bekapcsolt) és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya (Irany) megfelel a szűrésnek.
A menetvonal rajzolását kis vonalkával, vízszintes úttengely esetén a szolgálati hely
#88992 vagy a #88981 ~~munkavégzés~~ ~~hely~~ ~~ének~~ szol gálati helyek között húzott vonal #88981vége

#88992 vége bal oldalán, függőleges úttengely esetén alul folytatja a következő esetekben:

`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
A menetvonal rajzolását kis vonalkával, vízszintes úttengely esetén a szolgálati hely
#88992 vagy a #88981 ~~munkavégzés~~ ~~hely~~ ~~ének~~ szol gálati helyek között húzott vonal #88981vége

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 93/526|


#88992 vége jobb oldalán, függőleges úttengely esetén felül folytatja a következő
esetekben:

`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

        - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

        - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)

**2.2.3.7.2.2** **Menetvonalak pulzálása** **[#88995]**

Csak irányítói üzemmódban a kliens 30 másodpercenként meghívja a tény és előrejelzés

**–**
vonalak pulzáló megjelenítését vezérlő **S_0151_57** **Értesítésben érintett (pulzáló)**
**menetvonalak lekérdezése (PulzaloMenetvonalakQuery)** szolgáltatást. A szolgáltatás hívás
bemenő adata az aktuális ábra belső azonosítója (AbraId). A kliens azokat a menetvonalak
jeleníti meg pulzáló módon, melyek szerepelnek a szolgáltatás által visszaadott listában. A
pulzálás teljeskörű, tehát a menetvonal tény/előrejelzés vonal teljes hosszában pulzál.

**2.2.3.7.2.3** **Állomási vágányok megjelenítése**

Ha a megjelenítési beállítások szerint a vágányokat is meg kell jeleníteni (Állomási vágány
nézet ikon bekapcsolt), akkor az eseményeket, az esemény szolgálati helyén belül vágányra
helyezi el a program a következő módon (Az út tengelyen nem látható, de a háttérben
szereplő szolgálati helyeket, [#88992] valamint a szolgálati helyek közötti eseményeket [#88992vége],
ilyenkor is vágányok nélkül kezeli.):

  - Ha az eseménynél a vágány kitöltött és szerepel a szolgálati hely MGM vágányai

között (szerepel a szolgálati hely út tengelyen megjelenített vágányai között), akkor az
adott vágányra helyezi az eseményt.

  - Ha a vágány nincs kitöltve, vagy kitöltött, de nem szerepel a szolgálati hely MGM

vágányai között, akkor a szolgálati hely gyűjtő (fiktív) vágányára helyezi az eseményt.
Vágányok megjelenítése esetén az egy menetvonalhoz tartozó eseménypontokat, a tény és
előrejelzés események pontokat is, a menetvonal forgalmi vonatnemének megfelelő stílusú
(amit vagy a felhasználóhoz elmentett vagy egy alapértelmezett stílus és vonalkészlet
tartalmaz) vonallal köti össz e. [92919], ~~de~~ ~~az~~ ~~előrejelzés~~ ~~eseményekhez~~ ~~és~~ ~~az~~ ~~előrejelzés~~
~~eseményektől~~ ~~vékonyabb~~ ~~vonalat~~ ~~húz~~, ~~valamint~~ ~~vékonyabb~~ ~~nyilakat~~ ~~rajzol~~ . A menetvonalak
vonalainak megrajzolását a következő módon végzi:

  - Ha a menetvonalhoz kapott első eseményig vonalat kell húzni a szolgálati hely

vonalán a lekérdezett időszak kezdetétől, akkor azt az esemény vágányán húzza.

  - Ha a menetvonalhoz kapott első eseménynél, az esemény szolgálati helye előtt kicsi,

rövid vonalkát vagy kis nyilacskát kell rajzolni, akkor azt a menetvonal haladási
iránya szerinti első vágányhoz rajzolja az esemény idejénél és onnan vízszintes
vonalat húz az esemény vágányáig.

  - Ha az egy menetvonalhoz tartozó, de különböző szolgálati helyen lévő, egymást

követő esemény pontokat össze kell kötni, akkor a szolgálati helyek szélső vágányai

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 94/526|


között húz egyenes vonalat és ott a menetvonalat megtörve az esemény idejénél, az
esemény vágányáig vízszintes vonalat húz.

  - Ha az adott szolgálati helyen két eseménye van a menetvonalnak, akkor az első

esemény pontjától (az első esemény vágányán) függőleges vonalat húz vízszintes
úttengely esetén (függőleges úttengely esetén vízszintes vonalat) a második esemény
idejéig. Ha a második esemény vágánya eltérő, akkor a második esemény idejénél
vízszintes vonalat húz a két esemény vágánya között vízszintes úttengely esetén
(függőleges úttengely esetén függőleges vonalat).

  - Ha egy menetvonalhoz kapott utolsó eseménytől vonalat kell húzni a szolgálati hely

vonalán a lekérdezett időszak végéig vagy az idővonalig, akkor azt az esemény
vágányán húzza.

  - Ha a menetvonalhoz kapott utolsó eseménynél, az esemény szolgálati helye után kicsi,

rövid vonalkát vagy kis nyilacskát kell rajzolni, akkor azt a menetvonal haladási
iránya szerinti utolsó vágányhoz rajzolja az esemény idejénél és addig vízszintes
vonalat húz az esemény vágányától.

**2.2.3.7.2.4** **Be és kilépő vonatok jelölése**

Ha a megjelenítési beállítások szerint szükség van a vonalra/menetirányítói szakaszokra
történő be és kilépések jelölésére (Be és kilépő vonatok jelölése ikon bekapcsolt), akkor az
ábrázolt eseményeknél a vonalra/menetirányítói szakaszokra történő be és kilépések jelölésére
kis nyilacskákat alkalmaz a program. A nyilacskákat az S_0151_05 szolgáltatás Esemény
be/kilépés jelző (SzakaszBeKiJel) mezőjében kapott értékek megfelelően rajzolja, de csak
olyan eseményeknél, amelyeknek a szolgálati helye látható az út tengelyen, valamint ha a
közlekedés irányára szűrni kell és a menetvonal két irányú közlekedést tartalmaz
(Viszonylat=0), akkor az esemény iránya megfelel a szűrésnek.

  - Ha az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke 1 (belépés), akkor a

menetvonal rajzolását az esemény szolgálati helye előtt kezdi, a szolgálati hely
irányába mutató kis nyilacskával, ami a szolgálati hely vonalával 45 fokos szöget zár
be.
A kis nyilacskát vízszintes úttengely esetén a szolgálati hely bal oldaláról, függőleges
úttengely esetén alulról rajzolja a következő esetekben:

`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

        - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

        - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)(Mivel
áthaladás esetén az EsemAllVegpont jelző az indulásra vonatkozó
értéket tartalmazza és az érkezésre vonatkozó érték ennek az

ellentettje.)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

        - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 95/526|



       - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
A kis nyilacskát vízszintes úttengely esetén a szolgálati hely jobb oldaláról,
függőleges úttengely esetén felülről rajzolja a következő esetekben:
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén) (Mivel
áthaladás esetén az EsemAllVegpont jelző az indulásra vonatkozó
értéket tartalmazza és az érkezésre vonatkozó érték ennek az

ellentettje.)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 1 (érkezés)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 6 (áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)

- Ha az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke 2 (kilépés), akkor a

menetvonal rajzolását az esemény szolgálati helye után folytatja, a menetvonal
haladási irányát figyelembe véve a szolgálati helytől kifelé mutató kis nyilacskával,
ami a szolgálati hely vonalával 45 fokos szöget zár be.
A kis nyilacskát vízszintes úttengely esetén a szolgálati hely bal oldalán, függőleges
úttengely esetén alul rajzolja a következő esetekben:

`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
A kis nyilacskát vízszintes úttengely esetén a szolgálati hely jobb oldalán,
függőleges úttengely esetén felül rajzolja a következő esetekben:
`o` Ha a szolgálati helyek elhelyezése az úttengelyen kezdőpont felöli

       - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

       és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „v” (a szolgálati hely végpontja felöli esemény esetén)
`o` Ha a szolgálati helyek elhelyezése az úttengelyen végpont felöli

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 96/526|



        - és az Esemény típus id (EsemTipId) értéke 2 (indulás) vagy 6

(áthaladás)

        és az Állomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

értéke „k” (a szolgálati hely kezdő pontja felöli esemény esetén)

  - Ha az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke 3 (be és kilépés), akkor egy

belépést és egy kilépést jelképező nyilacskát is rajzol az előzőek szerint az esemény
szolgálati helyénél az eseménypontjához.
A menetvonalakhoz rajzolt be/kilépés jelölések fölé pozícionálva, ha a jelölés nem Busz
indulás eseményhez készült (ha az eseménynél a Busz jelző értéke false), a program
megváltoztatja az egér kurzort, ezzel jelezve, hogy ez kattintható terület. [#88993] Ez a logika
csak akkor érvényesül, ha van kapcsolódó vonal vagy menetirányítói szak as z v ag y áb ra.
Amennyiben nincs ilyen, akkor nem kattintható a be/kilépést jelző ny i l acs k a. [ #] **[88993]** **A**
kattintható területen a jobb egér gombot használva, ha a kattintás helyén nincs más
objektum, vagy több objektum esetén bármelyik egér gomb használatakor feljövő
menüből, jobb egér gombbal a be/kilépést jelképező nyilacskához tartozó menetvonal egy
objektumát választva, megnyílik a Be/kilépő menetvonal információs terület, aminek a

található. (Az objektumválasztó menü részletes leírása a dokumentum 2.2.3.9 pontjánál
található.) Ebben az esetben az S_0151_04 szolgáltatástól kapott alábbi adatokat adja át a
kliens (egyszerre csak egy lehet kitöltve):

   - Menetirányítói szakaszról kód (MisrolKod)

   - Vonalról id (VonalrolId)

   - Ábráról Id (AbrarolId) [ #88993]

   - Menetirányítói szakaszra kód (MisraKod)

   - V onalra id (VonalraId)

   - Ábrára Id (AbraraId) [ #88993]

**2.2.3.7.2.5** **Busz közlekedés jelölése**

Ha egy eseménynél teljesülnek a következő feltételek, akkor kilépést jelképező nyilacskát
rajzol a fent leírtak szerint (akkor is, ha a megjelenítési beállítások szerint nem kell be/kilépést
jelző nyilacskákat rajzolni), valamint a nyilacska és a szolgálati hely metszéspontjánál a
hegyesszögben, a menetvonal színével megegyező színben „BU” feliratot helyez el. (A
kilépést jelző nyilacskát az az S_0151_05 szolgáltatástól kapott Esemény be/kilépés jelző
(SzakaszBeKiJel) értéke alapján rajzolja, ami Busz-os esemény esetén 2 (kilépés) értéket
tartalmaz.)

  - Az eseménynél az S_0151_05 szolgáltatástól kapott Busz jelző értéke true

  - Az esemény szolgálati helye látható az út tengelyen

  - Ha a közlekedés irányára szűrni kell (a  - Páros viszonylat megjelenítése és a  Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az egyik/ bekapcsolt)
és a menetvonal két irányú közlekedést tartalmaz (Viszonylat=0), akkor az esemény
iránya (Irany) megfelel a szűrésnek.

A menetvonalakhoz tartozó vonatok számát az irányszámmal és „Rk” jelöléssel együtt
vízszintesen írja ki a program, a menetvonal színével megegyező színnel, a következő
helyeken dinamikusan elhelyezve, hogy ne fedjék egymást:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 2.2.3.10.4

**törölt: R**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 97/526|



  - Ha a menetvonal ábrázolása a grafikon széléről indul, akkor a grafikus terület és a

tengely feliratok között lévő szabad területen

  - Ha a menetvonal ábrázolása nem a grafikon széléről indul, akkor a menetvonal első a

szűrési feltételeknek is megfelelő, ábrázolt eseményénél. Állomási vágányok
megjelenítése esetén, ha érkezés vagy áthaladás az első esemény, akkor a menetvonal
érkezése felöli szélső vágány mellett (függőleges úttengely esetén az érkezés irányát
figyelembe véve a szélső vágány alatt vagy felett). Ha indulás az első esemény, akkor
a menetvonal haladási iránya szempontjából utolsó (szélső) vágány mellett
(függőleges úttengely esetén, alatt vagy felett).

  - A menetvonal olyan a szűrési feltételeknek is megfelelő, eseményénél, ahol változik a

vonatszám vagy az irányszám vagy az Rk jelölés. Állomási vágányok megjelenítése
esetén az előző pontban leírtak szerint.

  - Ha a menetvonal kilép, majd visszatér az adott vonalra/menetirányítói szakaszra,

akkor annál az eseménynél, ahol visszatér, ha az esemény megfelel a szűrési
feltételeknek. Állomási vágányok megjelenítése esetén, a menetvonal visszatérése
felöli szélső vágány mellett (függőleges úttengely esetén alatt, vagy felett).

  - H a a menetvonal, vagy a menetvonal ábrázolása megszakad, majd újraindul, akkor

annál az eseménynél, ahol újraindul. Állomási vágányok megjelenítése esetén a
menetvonal haladási iránya szerinti utolsó (szélső) vágány mellett (függőleges
úttengely esetén, alatt vagy felett).
88997 Ha egy menetvonalnál az S _ 0151 _ 05 szolgáltatástól kapott Vonatszám keretezés jelző
(VonatszamKeret) értéke true, akkor a menetvonalhoz kiírt vonatszámok köré egy sablonban
előre meghatározott színű (sárga) keretet rajzol. [ 88997vége]

**2.2.3.7.2.7** **Körjelölők**

  - Időhenger üzemmódban, ha a megjelenítési beállítások szerint szükség van

körjelölésekre (Kör jelölők megjelenítése ikon bekapcsolt), akkor a vonatszámmal
együtt, a vonat aktuális állapotához tartozó körjelölőt is rajzol a program. Az aktuális
körjelölést az S_0151_05 szolgáltatás Aktuális körjelölő (AktKorjelolo) mezőjében
kapott értékek szerint rajzolja a vonatszám elé:

`o` Ha NULL szerepel a Aktuális körjelölő (AktKorjelolo)mezőben, akkor nem

rajzol körjelölőt.
`o` „K” esetén, ami készrejelentett vagy előzetesen készrejelentett állapotot jelez,

ha a vonat még nem indult el, egy sablonban előre meghatározott színű (zöld)
kitöltött karikát rajzol.
`o` „R” esetén, ami rendkívüli feloszlatást vagy indulás visszavonást jelez, ha még

nincs új készrejelentése a vonatnak, [#97445 ] vagy azt, hogy új készrejelentésre
van szükség előrejelzés törlése miatt, [ #97445vége] e gy sablonban előre
meghatározott színű (piros) kitöltött karikát rajzol.

  - #88981 Időhenger üzemmódban, ha a megjelenítési beállítások szerint szü k ség v an
körjelölésekre (Kör jelölők megjelenítése ikon bekapcsolt), akkor a vonats zám m al
együtt, a vonatszám mögött is rajzol körjelölőt a program. A vonatszám mög ö t t i
körjelölőt az S _ 0151 _ 05 szolgáltatás Másod jelölő (MasodJelolo) mezőj éb en k ap o t t
értéknek megfeleően rajzolja:

`o` Ha NULL szerepel a mezőben, akkor nem rajzol körjelölőt a vonatszám u t án.
`o` „F ” esetén, ami feltaróztatást jelez, egy sablonban előre meghatározo tt színű

(piros) karikát rajzol. [ #88981vége]

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 98/526|



  - Ha a megjelenítési beállítások szerint szükség van körjelölésekre (Kör jelölők

megjelenítése ikon bekapcsolt), akkor az ábrázolt eseménypontoknál (a menetvonal és
a szolgálati hely metszéspontjánál, vágányok megjelenítése esetén a menetvonal és a
vágány metszéspontjánál) körjelöléseket alkalmaz a program. A körjelöléseket az
S_0151_05 szolgáltatás Körjelölő (Korjelolo) mezőjében kapott értékek szerint
rajzolja, de csak olyan eseményeknél, amelyeknek a szolgálati helye látható az út
tengelyen, valamint ha a közlekedés irányára szűrni kell és a menetvonal két irányú
közlekedést tartalmaz (Viszonylat=0), akkor az esemény iránya megfelel a szűrésnek.

`o` Ha NULL szerepel az eseménynél a Körjelölő (Korjelolo) mezőben, akkor

nincs szükség körjelölőre.
`o` „0” esetén, ami 0 perces tartózkodást jelent, egy sablonban előre meghatározott

színű (fehér) karikával jelöli meg az eseményt.
`o` „T” esetén, ami tervezett készre jelentést jelez, a menetvonal színével

megegyező színű kitöltött karikával jelöli meg az eseményt.
`o` „K” esetén, ami készrejelentett vagy előzetesen készrejelentett állapotot jelez,

egy sablonban előre meghatározott színű (zöld) kitöltött karikával jelöli meg az
eseményt.
`o` „R” esetén, ami rendkívüli feloszlatást vagy indulás visszavonást jelez, egy

sablonban előre meghatározott színű (piros) kitöltött karikával jelöli meg az
eseményt.

**2.2.3.7.2.8** **Foglalt vágány**

Ha a következő feltételek teljesülnek, akkor a program az adott menetvonal adott eseményhez
a menetvonal színével megegyező színű „F” betűt ír. Az „F” betűt a menetvonal és a
szolgálati hely vagy állomási vágányok megjelenítése esetén a menetvonal és a vágány
metszéspontjánál a hegyes szögben helyezi el.

  - A megjelenítési beállítások szerint a foglalt vágányra bejáratot meg kell jeleníteni

(Foglalt vágányra bejárat jelölése ikon bekapcsolt).

  - Az eseménynél foglalt vágányra járatást terveztek, vagyis az S_0151_05

szolgáltatástól kapott adatok szerint az eseménynél a Foglalt vágány jelző
(FoglVagany) értéke igaz.

  - Az esemény szolgálati helye látható az út tengelyen.

  - Ha a közlekedés irányára szűrni kell (a  - Páros viszonylat megjelenítése és a  Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az egyik/ bekapcsolt)
és a menetvonal két irányú közlekedést tartalmaz (Viszonylat=0), akkor az esemény
iránya (Irany) megfelel a szűrésnek

**2.2.3.7.2.9** **Helytelen vágány**

Ha egy eseménynél helytelen vágányra indulás történik, vagyis az S_0151_05 szolgáltatástól
kapott adatok szerint az eseménynél a Helytelen vágányra ind. jelző (HelytVaganyraInd)
értéke igaz, akkor ezt a program azzal jelzi, hogy az adott szolgálati hely és a menetvonal
következő szolgálati helye közötti menetvonal szakaszt vastagabb vonallal rajzolja. Ez a
jelölés a menetvonalon lehet az út tengelyen nem látható szolgálati helyek között is.

**2.2.3.7.2.10** **Eltérések megjelenítése**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 99/526|


Ha a megjelenítési beállítások szerint az eltéréseket meg kell jeleníteni (Eltérések
megjelenítése ikon bekapcsolt) és egy eseménynél teljesülnek a következő feltételek, akkor az
adott eseménynél a program a menetvonal színével megegyező színnel megjeleníti az
S_0151_05 szolgáltatástól kapott Eltérés értékét. Az Eltérést a menetvonal és a szolgálati hely
vagy állomási vágányok megjelenítése esetén a menetvonal és a szélső vágány
metszéspontjánál a tompaszögben helyezi el.

  - Az eseménynél az S_0151_05 szolgáltatástól kapott Eltérés (Elteres) mező nem üres

(NULL)

  - Az esemény szolgálati helye látható az út tengelyen

  - Az eseménynél az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke NULL, vagy ha

az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke nem NULL, akkor az

**–**
**S_0151_01** **Megjelenítési beállítások lekérdezése** (MegjelenitesiBeallitasokQuery)
szolgáltatástól kapott, a Be/kilépő eltérések megjelenítésére vonatkozó, beállítás (ami
a felhasználóhoz elmentett vagy alapértelmezett beállítás) szerint meg kell jeleníteni a
Be/kilépésekhez tartozó eltéréseket.

  - Ha a közlekedés irányára szűrni kell (a  - Páros viszonylat megjelenítése és a  Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az egyik/ bekapcsolt)
és a menetvonal két irányú közlekedést tartalmaz (Viszonylat=0), akkor az esemény
iránya (Irany) megfelel a szűrésnek

**2.2.3.7.2.11** **Késések kezelése**

Ha a megjelenítési beállítások szerint a késéseket meg kell jeleníteni (Késések megjelenítése
ikon bekapcsolt) és és egy eseménynél teljesülnek a következő feltételek, akkor az adott
eseménynél a program a menetvonal színével megegyező színnel megjeleníti az Eltérés
értékét. Az Eltérést a menetvonal és a szolgálati hely vagy állomási vágányok megjelenítése
esetén a menetvonal és a szélső vágány metszéspontjánál a tompaszögben helyezi el

  - Az eseménynél az S_0151_05 szolgáltatástól kapott Eltérés (Elteres) mezőben pozitív

érték vagy 0 szerepel.

  - Az esemény szolgálati helye látható az út tengelyen.

  - Az eseménynél az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke NULL, vagy ha

az Esemény be/kilépés jelző (SzakaszBeKiJel) értéke nem NULL, akkor az

**–**
**S_0151_01** **Megjelenítési beállítások lekérdezése** (MegjelenitesiBeallitasokQuery)
szolgáltatástól kapott, a Be/kilépő eltérések megjelenítésére vonatkozó, beállítás (ami
a felhasználóhoz elmentett vagy alapértelmezett beállítás) szerint meg kell jeleníteni a
Be/kilépésekhez tartozó eltéréseket.

  - Ha a közlekedés irányára szűrni kell (a  - Páros viszonylat megjelenítése és a  Páratlan viszonylat megjelenítése ikonok közül az egyik /és csak az egyik/ bekapcsolt)
és a menetvonal két irányú közlekedést tartalmaz (Viszonylat=0), akkor az esemény
iránya (Irany) megfelel a szűrésnek.

**2.2.3.7.2.12** **#88980** **Csatlakozásra várást jelképező** **ikonok kezelése**

Ha a következő feltételek teljesülnek, akkor a program az adott menetvonal adott

eseményéhez csatlakozásra várást jelképező ikont helyez el a grafikonon.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 100/526|



  - A megjelenítési beállítások szerint a csatlakozásra várást meg kell j elen íten i

(Csatlakozásra várás megjelenítése ikon bekapcsolt).

  - Az esemény szolgálati helye látható az út tengelyen.

  - Az S _ 0151 _ 05 szolgáltatástól kapott adatok szerint az adott esemén y nél v an

megjelenítendő csatlakozás (a CsatlakozasIkonJel értéke igaz

A csatlakozásra várást jelképező ikonra bal egér gombbal kattintva:
`o` Az adott csatlakozásban érintett menetvonalak tény vonalát a program (az

előrejelzéssel együtt) kiemelté teszi. (A csatlakozásban azok a menetvonalak
érintettek, amelyeknek valamelyik eseményénél, az S _ 0151 _ 05 szolgál t atá st ó l k ap o t t
adatokban, ugyanaz a CsatlakozasId szerepel, mint az adott eseménynél .
`o` Irányítói üzemmód esetén a csatlakozásra várást jelképező ikon kijelö l t l es z, a szín e

pirosra változik. (A grafikonon más objektumra vagy üres területre (az i k on so r t
kivéve) kattintva, a csatlakozásra várást jelképező ikon kijelöltsége me g szű n i k, szin e
újra sárga lesz. )
`o` Irányítói üzemmód esetén a Szerkesztés menüponthoz tartozó ikonok k ö zü l f eléled a

        - Törlés ikon és a        - Csatlakozásra várás szerkesztése ikon. Az i k o n ok
működésének leírása az ikonok nevének megfelelő pontban található

A csatlakozásra várást jelképező ikonra jobb egér gombbal kattintva:

  - Megjelenítő üzemmód esetén az adott c satlak ozá s adataival megjelenítés üzem

módban megnyílik az A_0151 _ 10 C satlak ozásr a várás ablak. A kliens a következő
adatokat adja át az A _ 0151 _ 10 ablak nak :

`o` Ábra belső azonosítója (AbraId): NULL

`o` A csatlakozás helyének belső azonosítója ( **S_0151_02** **–** **Út tengely** **a** **d** **a** **tok**

**lekérdezése** szolgáltatástól (UttengelySzolgalatiHelyAdatokQuery) kapott
SzhId)

`o` A csatlakozás helyének hosszú neve (S_0151_02     - től kapott SzhHos s zu Nev )

`o` A kiválasztott csatlakozás belső azonosítója (S_0151_04     - t ő l k ap o tt
CsatlakozasId)

Az A _ 0151 _ 10 ablak bezárása után a kliens program a frissítéshez szükséges
szolgáltatások meghívása után frissíti a grafikon tartalmát.

  - Irányítói üzemmód esetén, a csatlakozásra várást jelképező ikon kijelö l t l es z, a szín e

pirosra változik. (A grafikon más objektumra vagy üres területre (az ikons o rt k i v év e)
kattintva, a csatlakozásra várást jelképező ikon kijelöltsége megszűnik, szin e ú jra
sárga lesz. )

  - Irányítói üzemmód esetén a Szerkesztés menüponthoz tartozó ikono k k ö zü l f eléled a

       - Törlés ikon és a        - Csatlakozásra várás szerkesztése ikon. Az i k o n ok
működésének leírása az ikonok nevének megfelelő pontban található [#88980vége]

**2.2.3.7.2.13** **Menetvonal szintű adminisztratív feladatok megjelenítése**

Ha egy **ábra** irányítói **szerkesztés** módban van megnyitva, akkor a menetvonal és az érintett
szolgálati hely **metszéspontjában**, a legfelső szinten (ez látható elsődlegesen) egy jelölő
jelenik meg a következők szerint:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 101/526|



  - Ha az S_0151_01 – **MegjelenitesiBeallitasokQuery** (Megjelenítési beállítások

lekérdezése) szolgáltatás **'KesesIgazolas'** = TRUE **ÉS** a **'VgAdatPotlas'** = False **ÉS**
az S_0151_05 - **TenyadatokQuery** **'AdminFeladat'** = 1 **VAGY** 3.

  - Ha az S_0151_01 – **MegjelenitesiBeallitasokQuery** (Megjelenítési beállítások

lekérdezése) szolgáltatás **'KesesIgazolas'** = FALSE ÉS a **'VgAdatPotlas'** = TRUE **ÉS**
az S_0151_TenyadatokQuery **'AdminFeladat'** = 2 **VAGY** 3.

  - Ha az S_0151_01 – **MegjelenitesiBeallitasokQuery** (Megjelenítési beállítások

lekérdezése) szolgáltatás **'KesesIgazolas'** = TRUE **ÉS** a **'VgAdatPotlas'** = TRUE **ÉS**
az S_0151_05 - **TenyadatokQuery** **'AdminFeladat'** = 1, 2 **VAGY** 3.

A jelölő az **egér jobb billentyűvel** kattintható, és a kezelésére **külön ablakban** meghívódik
az **A_0151_08 ablak**, amelynek **átadásra** kerülnek:

  - **'munkahelyId’**  - A felhasználó munkahelyének belső azonosítója.

  - **’menetvvId’**  - Az érintett vonat MGM megrendelés belső azonosítója. =

**’TenyadatokQuery.MenetvId’**

  - **’kesesIgazolas’**  - Késésigazolási feladat kell. = True, ha a
’MegjelenitesiBeallitasokQuery. **KesesIgazolas’** = True.

  - **’vgAdatPotlas’**  - Vágányadat pótlás feladat kell. = True, ha a
’MegjelenitesiBeallitasokQuery. **VgAdatPotlas’** = True.

**[107248]** **Élő forgaloszabályozási ek megjelenítése**

Ha egy **ábra** irányítói **szerkesztés** módban van megnyitva, akkor a menetvonal és az érintett
szolgálati hely **metszéspontjában**, a legfelső szinten (ez látható elsődlegesen) egy csúcsára
állított zöld háromszög jelölő jelenik meg ha a tényadatokat lekérdező TenyadatokQuery
szolgáltatás ’ Esemenyek.FszModLeiras ’ <> NULL.

A jelölőre pozícionálva súgóban megjelenik az adatelemben kapott szöveg.
A jelölőre kattintva annak színe zöldről pirosra vált. Bárhova kattintva a jelölő vissza kapja a
zöld alapszínét.

**2.2.3.8** **RDE esemény adatok megjelenítése a diagramon**

Az A_0151_01 ablakon a PASS2 adatbázisba bedolgozott, meghatározott feltételeknek eleget
tevő RDE eseményeket jeleníti meg a rendszer, amennyiben az RDE események
megjelenítése ikon bekapcsolt állapotú. Az RDE adatok megjelenítéséhez szükséges forrás
adatokat az **S_0151_19** **–** **RDE adatok lekérdezése** szolgáltatás biztosítja a kliens számára.

**Adatok lekérdezése:**

Időhenger üzemmódban, ha az RDE események megjelenítése ikon bekapcsolt állapotú, akkor
a kliens **két percenként** meghívja az RDE adatok lekérdezéséért felelős **S_0151_19** eljárást,
tehát szinkronban minden negyedik menetvonal adat lekérdezésre vonatkozó szolgáltatás
hívással. A hívás után a kliens újra rajzolja az RDE eseményeket ábrázoló objektumokat is.

Az **S_0151_19** hívás az alábbi bemenő paraméterekkel történik:

  - Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 102/526|



  - Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként NULL

  - Szolgálati hely lista (SzhIdArray): Az **S_0151_02** **–** **Út tengely adatok lekérdezése**

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott szolgálati helyek
listája). A szolgálati hely belső azonosítók pontos vesszővel elválasztva.

  - Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az A_0151_02 ablaktól

kapott lekérdezési időszak kezdete. Időhenger üzemmód esetén az aktuális időpont
mínusz az A_0151_02 ablaktól kapott múlt időintervallum paraméter által
meghatározott idő.

  - Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02 ablaktól

kapott lekérdezési időszak vége. Időhenger üzemmód esetén az aktuális időpont plusz
az A_0151_02 ablaktól kapott jövő időintervallum paraméter által meghatározott idő.

**RDE adatok kliens oldali szűrése:**

Az S_0151_19 szolgáltatás által visszaadott RDE esemény listát a kliens szűri az A_0151_05
ablakon megadott RDE azonosító(k) és RDE okozó(k) szerint az alábbi módon:

  - RDE azonosító szerint szűrés: S_0151_19 kimenő paraméter: Kiterjesztett RDE

azonosító (KiterjRdeAzon)

  - RDE okozó szerinti szűrés: S_0151_19 kimenő paraméter: RDE okozó belső

azonosító (RdeOkozoId)

**Fontos:** Az RDE események szerinti szűrés csak az RDE objektumokat szűri, a menetvonal
szintű „kiemelés”, csak adott RDE objektumra bal gombbal kattintva elérhető funkció. Ebben
az esetben azokat a menetvonalakat emeli ki a rendszer, melyeknél a késés igazolásnál
rögzítették az adott RDE azonosítót.

**RDE esemény adatok megjelenítése:**

Az **S_0151_19** szolgáltatás kimenő paraméterei között kapott Megjelenítési típusa
(MegjTipus) alapján négyféle ábrázolás különböztethető meg:

  - **”v” – vágány:** Ebben az esetben a kimenő paraméterek között mindenképpen szerepel

VaganyId is, ez alapján kell a kapott vágányon megjeleníteni az RDE eseményt
ábrázoló téglalapot. A téglalap egy kicsit túllóg a vágányt jelző vonalon. Amennyiben
a kapott VaganyId nem MGM vágány, akkor a kliens a fiktív vágányra rajzolja az
RDE eseményt.

  - **”s” – szolgálati hely** (kis téglalap): Ebben az esetben a kimenő paraméterben szereplő

szolgálati hely -tól (SzhTol) érték alapján kell a szolgálati helyen ábrázolni az RDE
eseményt jelölő téglalapot. Amennyiben a vágányok megjelenítése bekapcsolt akkor a

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 103/526|


téglalap az összes vágányt magába foglalja. A téglalap egy kicsit túllóg a szolgálati
helyet jelölő vonalon.

*Vágány megjelenítés nélkül:* *Vágány megjelenítéssel:*

- **”t” – szolgálati helyek között** (téglalap): Amennyiben az RDE esemény kevesebb

mint három állomás típusú szolgálati helyet érint, akkor az ábrázolás szintén egy
téglalap formájában történik, mely a szolgáltatástól kapott szolgálati hely -tól (SzhTol)
és szolgálati hely-ig (SzhIg) szolgálati helyek között jelenik meg. A téglalap egy kicsit
túllóg a szolgálati helyet jelölő vonalon.

- **”l” – vonal** (line): Amennyiben az RDE esemény legalább három állomás típusú

szolgálati helyet érint, akkor az ábrázolás az RDE időbeni kezdetét és végét jelző, két
vízszintes (út tengellyel párhuzamos) szakasz és egy őket összekötő, idő tengellyel
párhuzamos szakasz formájában kerül ábrázolásra. Az összekötő szakasz
végpontjaiban egymás felé mutató háromszögek találhatók. Az utat jelző szakaszok
hosszát a szolgáltatástól kapott szolgálati hely -tól (SzhTol) és szolgálati hely-ig
(SzhIg) értékek határozzák meg. A szakaszok kicsit túllógnak a végpontot jelző
szolgálati helyet jelölő vonalon.

`o` Amennyiben az aktuális kamera nézeten kívül helyezkedik el az „l” - vonal
típusú RDE időbeli kezdetét jelző szakasz, akkor az összekötő szakasz
látható, valamint az aktuális nézet felső részén „lebeg” az összekötő
szakaszon ábrázolt háromszög.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 104/526|


`o` Amennyiben az aktuális kamera nézeten kívül helyezkedik el az „l” - vonal
típusú RDE időbeli végét jelző szakasz, akkor az összekötő szakasz látható,
valamint az aktuális nézet alsó részén „lebeg” az összekötő szakaszon
ábrázolt háromszög.

**A megjelenítéssel kapcsolatos további jellemzők:**

  - Az RDE eseményeket mindig fix piros színnel ábrázolja az alkalmazás

  - A téglalapok kitöltött piros színnel jelennek meg és van egy keretük, mely egy eltérő

piros színű árnyalattal rendelkezik.

  - Amennyiben több RDE esemény fedi egymást, akkor a kliens a kisebb RDE eseményt

jeleníti meg előrébb ezzel láthatóvá téve annak pontos kiterjedését.

  - Az RDE eseményt jelölő objektumok stílusa és színe a felhasználók által nem

módosítható.

  - Amennyiben az RDE esemény érvényesség vége (ErvVeg) = 2100.12.31 00:00 vagy

nincs kitöltve, akkor időhenger üzemmódban az idővonalig tart az RDE esemény, míg
fix időszak eseténa megjelenítendő időszak aljáig. Jövő időre vonatkozó fix időszak
esetén (ha az aktuális idő kisebb vagy egyenlő a fix időszak kezdetével), akkor az
érvényesség vége nélküli (futó) RDE események nem jelennek meg. (Az **S_0151_19**
szolgáltatás ezeket nemn adja át.)

  - Egy RDE eseményre bal egér gombbal kattintva (vagy több objektum esetén az RDE-t

bal egér gombbal kiválasztva a megjelenő context menüből) az RDE objektumot
kijelöltté teszi a kliens és az S_0151_19 szolgáltatástól kapott RDE kapcsán érintett
menetvonalak (ErintettMenetvIds) halmazán kívül eső menetvonalakat a háttérrbe
helyezi, azaz elszürkített (behind) állapotba kerülnek. A kijelölést megszüntetve a
háttérbe helyezés megszűnik.

**RDE események feliratai:**

Az RDE eseményekhez kapcsolódóan az alábbi adatokat jeleníti meg a kliens:

  - Pályavasúti felhasználó esetén:

RDE azonosító (RdeAzon) + ’ ’ + ’[’ + Késési forgalmi főkód (FoKod) + ’]’

pl.: 20200317-028 [6B]

  - Vasútvállalati felhasználó esetén:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 105/526|


RDE azonosító (RdeAzon) + ’[’ + Késési UIC kód (UicKod) + ’]’

pl.: 20200317-028 [29]

Amennyiben egy RDE esemény legalább egy kis része látható az aktuális kamera nézeten,
akkor a kapcsolódó feliratot is megjeleníti az alkalmazás. A megjelenítési logika:

  - A feliratok alapvetően az RDE esemény látható részének bal felső sarkához igazítva

jelennek meg.

  - Amennyiben több RDE eseménynek is megegyezik a kezdő szolgálati helye, és a

feliratok fednék egymást, akkor a kliens egymás alatt jeleníti meg az érintett RDE
eseményekre vonatkozó szövegeket. [VK61509 ] Viszont, ha egy RDE-hez több objektum
is tartozik ugyanazzal a kezdő szolgálati hellyel, akkor ugyanazt a feliratot csak
egyszer írja ki az adott szolgálati helynél. [VK61509vége]

**RDE információs terület megnyithatósága:**

  - Amennyiben az S_0151_19 szolgáltatás által visszaadott információs terület

megnyitható jelző ( **InfoTerMegnyithato) = 1**, akkor az RDE eseményt jelölő
objektumra vagy az ahhoz tartozó feliratra jobb egér gombbal kattintva, ha a kattintás
helyén nincs más objektum, vagy több objektum esetén bármelyik egér gomb
használatakor feljövő menüből, jobb egér gombbal RDE eseményt választva,
megnyílik az RDE információs terület.

  - Amennyiben az S_0151_19 szolgáltatás által visszaadott információs terület

megnyitható jelző ( **InfoTerMegnyithato) = 0**, akkor az RDE eseményre kattintva
nem jelenik meg az információs terület és a több, átfedő objektum esetén megjelenő
menüben sem jelenik meg az érintett RDE esemény.

Az RDE információs terület részletes leírása a dokumentum 2.2.3.10.6 pontjánál található.
(Az objektumválasztó menü részletes leírása a dokumentum 2.2.3.9 pontjánál található.)

**2.2.3.9** **Forgalomszabályozási műveletek grafikus támogatása**

**Irányítói** üzemmódban a választott forgalomszabályozási műveletnek megfelelően a
meghatározott **eseményeknél** egy „vezérlőpálca” jelenik meg, amely **megragadásával** és
**mozgatásával** lehet az előre jelzési adatokat grafikusan **szerkeszteni** .

- A vezérlőpálca **előrejelzés** **vonal** esetén csak olyan **eseménynél** jelenik meg, amelyeknek
a **szolgálati** **helye** :
`o` **látható** az út tengelyen,
`o` **MÁV** üzemeltetésű *(’UttengelySzolgalatiHelyAdatokQuery’ ’SzhUzemId’ = 11)* .
`o` Az esemény **jellege** *(’EsemJelleg’ = „E”)* **előrejelzés** .
`o` A vezérlőpálca megjelenik az idővonal fölött is, de elengedésekor annak ideje
ellenőrzésre kerül, hogy nem lehet a múltban.
`o` A vezérlőpálca a **vonat** haladási **iránya** szerint jelenik meg:
      - **Érkezési** eseménynél az **előző** szolgálati hely felé mutat.
      - **Indulási/áthaladási** eseménynél a **következő** szolgálati hely felé mutat.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** **[88961]**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 106/526|


      - Ha a **vágányok** „nyitva vannak”, akkor az **ábra irányának** megfelelően az
**esemény** **végpontja** *(’EsemAllVegpont’)* felöli **oldalon** jelenik meg.

- Az eseményhez tartozó **előrejelzett** időadat módosítás a hozzá tartozó **vezérlőpálca**
megragadásával és **mozgatásával** végezhető el.
`o` A vezérlőpálca **megragadás** után annak színe pirosra változik, mellette megjelenik a
hozzátartozó **időadat.**
`o` 106724 Ha a vezérlőpálca által meghatározott eseményhez a **’** **ModJel** **’** **=** **TRUE**, akkor
a színe **zöld** lesz.
`o` A szerkesztés pontosságának segítésére a **vezérlőpálca mozgatásakor** az időadat a
kurzor által meghatározott időadatra **módosul** .
`o` A vezérlőpálca **nem** mozgatható az előző esemény idejénél **korábbi** időre, de azzal
egyenlő időre igen.
`o` 106724 H a az **érkezési** vezérlőpálcát ragadják meg és **mozgatják**, akkor az előrejelzés
vonal **meredeksége** módosul az **előző** nem oh, pvh típusú szolgálati hely **indulási**
ideje módosítása **nélkül** .
      - Az érkezési eseményt **követő** események ideje **a művelet leírás szerint**
változik.

      - Az **érkezési** esemény **új ideje nem** lehet az **előző** nem oh, pvh típusú szolgálati
hely indulási idejénél **korábbi** **ÉS** nem lehet a **következő** esemény idejénél
**későbbi** .

**csak** az **indulási** eseményt és az ábrán az **utána** levő eseményeket is módosítja. (A
szolgálati helyi „tartózkodási idő” módosul.)
A szolgálati hely **érkezési** esemény ideje **nem** módosul, az indulási esemény utáni
események ideje az új indulási idő figyelembevételével módosulnak.

      Az új indulási eseményidő nem lehet az érkezési eseményidőnél korábbi.
      - Az új áthaladási eseményidő nem lehet az **előző** nem oh, pvh típusú szolgálati
hely indulási idejénél **korábbi** .

jelenik meg, ha ahhoz nem tartozik nem tartozik tényvonal. [ 106724 vége]

- Előrejelzés **létrehozásakor**, módosításakor az előrejelzés vonalhoz tartozó **vonatszám** a
vezérlőpálca **elengedésekor** kerül a vonalhoz igazításra.

**[88961]** **„Új előrejelzés” funkció**

eseménye az ábrán van), még előrejelzéssel és **tényadattal** **nem** rendelkező menetvonal,
**illetve** egy kötelező vonat- **összeállítás** **közlésre** kijelölt szolgálati helyen **tartózkodó**
(beleértve a GySEV-re kilépett és onnan visszatérőt is) menetvonal esetén hozható létre.

**2.2.3.9.2.1** **Megjelenés, elérés**

A **funkció** csak **Irányítói** üzemmódban érhető el egy **menetrendi** vagy egy tényvonal

„Új előrejelzés” ikon leírás).

- A grafikon „ **Új előrejelzés** ” üzemmódra vált át, megjelenik az ehhez tartozó **fejléc** és
**szerkesztő** panel.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** bal egér gombbal ÉS a szerkesztőpanelen a „Csak
érkezés” kapcsoló bekapcsolt

**törölt:** **csak**

**törölt:** **érkezési** eseményidőt módosítja.¶
Az

**törölt:** **nem** változik.

**törölt:** <#>Ha az **érkezési** vezérlőpálcához tartozó
szerkesztőpanelen a „ **Csak érkezés** ” kapcsoló **kikapcsolt**, akkor a
szolgálati hely **érkezési és indulási** eseményideje is módosul, és a
következő események ideje is módosul.¶
Az **érkezési** esemény **új ideje nem** lehet az **előző** nem oh, pvh
típusú szolgálati hely indulási idejénél **korábbi**  
**törölt:** <#>Egy vezérlőpálca elengedésekor ellenőrzésre kerül,
hogy az általa meghatározott idő nem lehet a múltban. Ha az, akkor
„A tervezett eseményidő nem lehet korábbi, mint az aktuális idő!”
popup **üzenet** jelenik meg.¶

**törölt:** [94036]

**törölt:** [94036 vége]

**törölt:** [94036]

**törölt:** [94036] [vége]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 107/526|


93048




- **Fejlécben** megjelenik az **„Új előrejelzés”** szöveg, az **ábra** megnevezése, a felhasználói
aktivitást jelző idősáv, a < **Ment** >, < **Visszavon**   - és a < **Mégsem**   - nyomógombok, és a
szerkesztéshez szükséges **ikonok** (nagyítások, kicsinyítések, idővonalra ugrás,
alapértelmezett kameranézet).
Nyomógombok **kezelhetősége** :
`o` < **Ment**  - nyomógomb **mindig** kezelhető.
`o` < **Visszavon**  - nyomógomb **mindig** kezelhető.
`o` < **Mégsem**  - nyomógomb **mindig** kezelhető.

- A **szerkesztő** panelen megjelennek:
`o` **„Vonatazonosító”** megjelenítő mező (csak az első vonatazonosító jelenik meg)
( *’VonatszamIrszam’* ) + ’ / ’ + vonat indulási dátuma ( ’ IndDatum ’ ) éééé.hh.nn

`o` **„Szolgálati** **hely”** rövid neve megjelenítő mező

helyének (’SzhId’ alapján a tengely adatokból ’SzhRovidNev’) rövid neve.

      **Tény** vonalról kezdeményezve az utolsó érkezési (’Esemenyek’ utolsó
rekordjának a szolgálati hely (’SzhId’ alapján a tengely adatokból
’SzhRovidNev’) rövid neve.

kódja (’MenetrendiAdatokQuery’ ’Esemenyek’ lista ’EsemTipId’  ’K_007_lang’
szolgáltatás ’K_VEF.k_kod’).
`o` **„** **Esemény idő” dátum** és **idő** beviteli mező, ami az új vezérlőpálca által
meghatározott adatokat tartalmazza *(’MenetrendiAdatokQuery’ ’Esemenyek’ lista*
*’EsemIdo’ dátum és idő, perc pontossággal)*, és **kezelhető** .
`o` 93048 **„H.vg** **”** **kapcsoló** a menetvonal helytelen vágányra indul jelző.
Ha a ’ MenetrendiAdatokQuery ’ ’ Esemenyek ’ lista ’ MGMHelytVaganyraInd ’ = 1,
akkor bekapcsolt. Kikapcsolható.
`o` **„3.vg** **”** **kapcsoló** a menetvonal a harmadik helytelen vágányra indul jelző.
Ha a ’ MenetrendiAdatokQuery ’ ’ Esemenyek ’ lista ’ MGMHelytVaganyraInd ’ = 3,
akkor bekapcsolt. Kikapcsolható.
`o` **„Szolgálati helyig** **”** választólista. A helyes/helytelen vágányon közlekedés tervezése
a megadott szolgálati helyig tart.

      A menetvonalnak a menetrendi adatokban szereplő, nem megállóhely típusú
( ' selUttengelyAdatok.SzhTipusKod ' <> 2) szolgálati helyeit tartalmazza a
haladás irány szerinti sorrendben, a szolgálati hely vft       - n belüli sorszámával
( ’ vft _ index ’ ) a háttérben (nem jelenik meg).

      Alapértelmezetten az üres sor van kiválasztva.
      - Lehetséges, hogy a lista nem tartalmaz adatokat, mert a menetvonal „lelép ” a
grafikonról, csak egy menetrendi adata van.

      Mindig kezelhető. [93048 vége]

- A **grafikonon** a menetvonal adataival megjelenik egy új **vezérlőpálca** **ÉS** egy **előrejelzés**
vonal (részletek „Új előrejelzés” ikon kezelése leírás).

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** Több vonatazonosító esetén vesszővel elválasztva jeleníti
meg őket a kliens.

**törölt:** [94036]

**törölt:** [94036]

**törölt:** [94036 vége]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 108/526|


**2.2.3.9.2.2** **Működés**




- A **vezérlőpálca** bal egérgombbal **megragadása** után annak az **időtengellyel** párhuzamos
**mozgatásával** **VAGY** a szerkesztő panelen az új dátum és az **idő módosításával** adható
meg az új előrejelzés **kezdő** időpontja.
`o` A **vezérlőpálca** megragadásakor és **mozgatásakor** mozog az előrejelzés **vonal** is.

**újonnan** „beszúrt” **előrejelzés** vonal és az érintett szolgálati helyen a „ **tartózkodási**
**vonal** ” mozog.
A vezérlőpálca **elengedése** után a kliens **ellenőrzi**, hogy a kezdő időpont **nem** lehet:
      - A **múltban** (nem lehet az idővonalnál korábbi).
Ha annál korábbi, akkor **UC_01_51_ERR_KORAI_ESEM_IDO** „151023: A
tervezett eseményidő nem lehet a rendszeridőnél korábbi!” popup üzenet jelenik

meg.
      - A szerkesztő **panelen** a vezérlőpálca által meghatározott idő **jelenik meg** az
„Eseményidő” dátum/idő beviteli mezőkben.
`o` A **szerkesztőpanelen** a:
      - **dátum/idő** beviteli mező **módosítása** után, arról **lelépve** az új idő alapján
**kirajzolásra** kerül az előrejelzési **vonal.**

      - A kliens **ellenőrzi**, hogy a kezdő időpont:
 Nem lehet a **múltban** .

Ha az, akkor popup ablakban **hibaüzenetet** ad: „A tervezett indulási idő
nem lehet a múltban!”.
 Nem lehet a grafikon **időszakánál** későbbi.

Ha az, akkor popup ablakban **hibaüzenetet** ad: „A megadott idő a
grafikon időszakán kívül esik!”

      - Az új idő alapján **kirajzolásra** kerül az előrejelzési **vonal.**
      - 93048 **”**
**„H.vg** **kapcsoló** a menetvonal helytelen vágányra indul jelző.

      - Ha a ’ MenetrendiAdatokQuery ’ ’ Esemenyek ’ lista
’ MGMHelytVaganyraInd ’ = 1, akkor **bekapcsolt** . Kikapcsolható.

      - A „3.vg ” kapcsolóval **nem** lehet **egyszerre** bekapcsolva, bekapcsolásakor az
kikapcsolódik.

      - Be vagy kikapcsolásakor a „Szolgálati hely ” választólista üres sora lesz a
kiválasztott.

      - **Bekapcsolásakor** a grafikonon a következő állomástípusú szolgálati helyig
vastagabb lesz az előrejelzés vonal.

      - **Kikapcsolásakor**, ha az a menetrendben volt előírva, a következő állomásig
megszűnik a helytelen vágányon közlekedés előírás, az előrejelzés vonal
normál vastagságú lesz.

      - **”**
**„3.vg** **kapcsoló** a menetvonal a harmadik helytelen vágányra indul jelző.

      - Ha a ’ MenetrendiAdatokQuery ’ ’ Esemenyek ’ lista
’ MGMHelytVaganyraInd ’ = 3, akkor bekapcsolt. Kikapcsolható.

      - A „H.vg ” kapcsolóval nem lehet egyszerre bekapcsolva, bekapcsolásakor az
kikapcsolódik.

      - Be vagy kikapcsolásakor a „Szolgálati hely ” választólista üres sora lesz a
kiválasztott.

      - **Bekapcsolásakor** a grafikonon a következő állomástípusú szolgálati helyig
vastagabb lesz az előrejelzés vonal.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [94036]

**törölt:** [94036 vége]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 109/526|



      - **Kikapcsolásakor**, ha az a menetrendben volt előírva, a következő állomásig
megszűnik a helytelen vágányon közlekedés előírás, az előrejelzés vonal
normál vastagságú lesz.

      - **”**
**„Szolgálati helyig** választólista. A helyes/helytelen vágányon közlekedés a
megadott szolgálati helyig tart.

      - Alapértelmezetten az üres sor van kiválasztva.

      - Mindig kezelhető.

      - **Kitöltésekor** a vezérlőpálca által meghatározott szolgálati helytől a
kiválasztott szolgálati helyig a kapcsolóknak megfelelően módosul az
előrejelzés vonal vastagsága:
 Ha valamelyik kapcsoló bekapcsolt, akkor az előrejelzés vonal

vastagabb lesz.
 Ha mind a két kapcsoló kikap cso lt, akkor az előrejelzés vonal normál

vastagságú lesz.

      - Az **üres** sor kiválasztásakor a kapcsolók és az előrejelzés vonal és a
kapcsolók a menetrend szerinti adat ok szerint kerülnek beállításra. [93048 vége]
      - A menetvonalnak az **ábrára** eső új előrejelzett idejei a menetrendtől való eltérés
figyelembevételével **kiszámításra** kerülnek, amiket a kliens **megjelenít** .
`o` **Tárolt** adatok, amiket a szolgáltatásnak át kell adni:

      **’MgmMenetvId’**      - a létrehozandó előrejelzés menetvonalának MGM
azonosítója.
      - **’SzhId’**       - az esemény szolgálati helyének belső azonosítója.

      **’UjEsemIdo’**      - az esemény ideje.

      **’EsemTipId’**      - az esemény típus kódja.
      - **’ModOk’** = 1 - új előrejelzés létrehozása kiindulási szolgálati helyen, 2 közbenső szolgálati helyen.

- A szerkesztő **panelen** kezelt:
`o` < **Ment**  - nyomógomb kezelésekor:

kerül az előrejelzést végző S_0151_42 **ForgSzabMuveletElokeszitesCommand**
szolgáltatás, ami a feltételek ellenőrzése után az usp_0202_updMenetvElorejelzes2
eljárás meghívásával létrehozza az előre jelzést.
      - **Bemenő** adatok:

      - **’MenetvId’**       - a módosítandó előrejelzés menetvonal MGM azonosítója.

      - **’AbraId’**       - az érintett ábra azonosítója.

      - **’MunkahelyId’**       - az ábra munkahelyazonosítója.

      - **’Megerositve’**       - az esetleges megerősítés ténye.
 **Első** híváskor = **FALSE** .
 Ha a szolgáltatás UC_01_51_CONF_SZEM_VON_KORAI_IND
üzenetet adott vissza **ÉS** a felhasználó a megerősítő üzenetre < **Igen**            választ adott, akkor **TRUE.**

      - **[{Esemény lista}]** egy elemű lista, a **vezérlőpálca** által meghatározott
esemény **adatait** tartalmazza.
 **’SzhId’**     - annak a szolgálati helynek a belső azonosítója, amelytől az

előrejelzést létre kell hozni, vagy módosítani kell. Minden esetben
kötelező

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [94036]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 110/526|


helyének érintési sorszáma. - ’ModOk’ = 1 esetén nem kerül átadásra.
 **’ModOk’**   - a módosítás oka.

Lehetséges **értékei**

akkor a **visszakapott** ’ModOk’ (1 - Kiindulási állomási új
előrejelzés létrehozás, 2 - Közbenső állomási előrejelzés
létrehozás).
 Ha az új előrejelzés készítés **tény** **vonalról** lett kezdeményezve,

akkor **2**          - Közbenső állomási előrejelzés létrehozás.
 **’MgmEsemTipId’**   - a **vezérlőpálca** által meghatározott esemény

típusa.
 **’UjEsemIdo’**   - 1 és 2 ’ModOk’ esetén kötelező.
 93048 **’** **MGMHelytVaganyraIn** **d’**   - a menetvonal helytelen vágányra
indul.
Lehetséges **értékei** :
 NULL     - Nem történt változás.
 0     - Mind a kettő kapcsoló kikapcsolt, helyes vágányon közlekedés.
 1     - A „H.vg ” a bekapcsolt, helytelen vágányon közlekedés.
 3     - A „3.vg ” a bekapcsolt, a harmadik, helytelen vágányon

közlekedés.
 **’** **SzhIdIg** **’**   - a „Szolgálati hel y ig ” választólista kiválasztott sorának

' SzhId ' adata. Lehet NULL is.
 **’** **SzhIndexIg** **’**   - a „Szolgálati helyig ” választólistában kiválasztott

sorának ' SzhId ' adata alapján a ’ MenetrendiAdatokQuery ’ esemény lista
' SzhIndex ' adata. Lehet NULL is. [93048 vége]

   - epaiParamXmlDoc
 - Az eljárás **ellenőrzi**, hogy:

   - 100569 Hogy a kezdő időpont nem lehet a **múltban** .
Ha a szolgáltatás **UC_01_51_ER** **R** **_KORAI_ESEM_IDO** **hibaüzenetet**
ad, akkor popup ablakban: „151023: A tervezett eseményidő nem lehet a
rendszeridőnél korábbi! ” üzenet jelenik meg, marad az üzemmód és marad a
menetvonal kijelölés. *(Jelenleg a klien* *s* *ellenőrzi, az eljárás ilyet nem ad vissza.)*

   - 100569 Nem lehet a grafikon **időszakánál** későbbi.
Ha a szolgáltatás **UC_01_51_ERR_KESON_INDULO_VONAT**
hibaüzenetet ad, akkor popup ablakban „151036: A vonat várható indulási
ideje későbbi, mint a grafikonon k ezelt időszak vége ” . **hibaüzenetet** ad,
marad az üzemmód és marad a m e netvonal kijelölés. *(Jelenleg a kliens*
*ellenőrzi, az eljárás ilyet nem ad vissza* *.)*

   - Az adott **munkahely** a felhasználó által van **lefoglalva** .
Ha UC_01_51_ERR_ERVENYTELEN_FOGLALAS üzenetet ad vissza
„ **151005** : Érvénytelen munkahely foglalás, az adatok mentése sikertelen!”
üzenetet ad, nem történik meg a létrehozás.

   - **Nincs** létező **tény** /előrejelzés adata.
Ha UC_01_51_ERR_ELOREJELZE_LETEZIK üzenetet ad vissza, akkor
„ **151019** : Előrejelzés nem hozható létre, már létezik.” üzenetet ad, nem
történik meg a létrehozás. A feldolgozás leáll, kilép a szerkesztés
üzemmódból, a menetvonal kijelöltsége megmarad.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [96834]

**törölt:** [94036 és 96243]

**törölt:** [ 94036 és 96243 vége]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 111/526|



    - Az **új** indulási idő nem lehet **korábbi**, mint a **menetrendszerinti** indulás
idő mínusz a **legkorábbi indulási idő** paraméter (’min_ind_esem_ido’).
Ha ERR_02_17_VONAT_HIBA_IDOBEN üzenetet ad vissza, akkor
„ **217006** : A vonat indulási ideje nem megfelelő!” üzenetet ad, nem történik
meg a létrehozás, marad a szerkesztés üzemmód.

    - A **tervezett** indulási idő nem lehet **későbbi**, mint a **menetrendszerinti**
indulási idő plusz belföldről induló menetvonal esetén az **’aut_lem** _ **belf’**,
illetve külföldről induló vonatnál az **’aut_lem_nemz’** rendszerparaméter.
Ha ERR_02_17_VONAT_HIBA_IDOBEN üzenetet ad vissza, akkor
„217006: A vonat indulási ideje nem megfelelő!” üzenetet ad, nem történik
meg a létrehozás, marad a szerkesztés üzemmód.

    - Ha a menetvonal „A” vagy „B” **kategóriába** esik **ÉS** a **’megerositve’** =
**FALSE**, akkor a tervezett indulási idő nem lehet a **menetrend szerinti**
indulási időnél **korábbi** .

Ha UC_01_51_CONF_SZEM_VON_KORAI_IND üzenetet ad vissza,
akkor „ **151020** : Személyszállító vonat, a menetrendszerinti idő előtti
indulást tervez?” megerősítő üzenetet ad.
 < **Igen**    - esetén újra meghívja a szolgáltatást, ahol a **’megerositve’** =

**TRUE.**
(Ebben az esetben ezt nem kell vizsgálni.)
 < **Nem**    - esetén a feldolgozás leáll, kilép a szerkesztés üzemmódból, a

menetvonal kijelöltsége megmarad.
   - A szolgáltatás **sikeres** lefutása után a **szerkesztőpanel** **bezárásra** kerül, **frissül** a
**grafikon**, a fókuszban és **kiválasztva** marad az új előrejelzési vonal, a
„funkciók” ikonsor marad a **szerkesztésen** .
`o` < **Visszavon** - nyomógomb kezelésekor szolgáltatás hívás nincs, az új előrejelzés
vonal és annak adatai visszaállnak a menetrendszerinti adatokra. (Adatmentés nincs,
az üzemmód új előrejelzés készítése marad.)
`o` < **Mégsem** - nyomógomb kezelésekor a grafikon mentés nélkül kilép az „Új
előrejelzés” üzemmódból, az új előrejelzés vonal „eltűnik”, a menetrendi vonal
kijelölése megszűnik, a többi menetvonal kijelölhető lesz, a „funkciók” ikonsor
marad a „ **Szerkesztés** ” ikonon.

`o` **Felhasználói aktivitás lejártakor**
   - 100302 Ha **popup üzenet** van a grafikonon **ÉS** a felhasználó az **aktivitási** figyelő
**lejártáig** nem kezelte le azt, akkor az üzenet **automatikusan** **bezárásra** kerül,
újabb **szolgáltatás** hívás **nélkül** *(a megerősítő üzenetet úgy tekintjük, mintha*
*nemleges választ adott volna a felhasználó)* a grafikon mentés nélkül **kilép** az
„Új előrejelzés” üzemmódból, az új előrejelzés vonal „ **eltűnik** ”, a menetrendi
vonal **kijelölése** **megmarad**, a többi menetvonal kijelölhető lesz, a „funkciók”
ikonsor marad a „ **Szerkesztés** ” ikonon.

előrejelzést elkészítő *(S_0151_42* ***ForgSzabMuveletElokeszitesCommand)***
szolgáltatás. A szolgáltatás a feltételek ellenőrzése után az
usp_0202_updMenetvElorejelzes2 eljárás meghívásával létrehozza az előre
jelzést.

    - **Bemenő adatok** a <Ment> nyomógomb leírásánál.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [95926] A szerkesztőpanelen a **felhasználó aktivitásának**
**lejártakor**, ha


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 112/526|



      - Ha a szolgáltatás **hiba** **üzenetet** ad vissza, az „ **elnyomásra** ” kerül, a
grafikon mentés nélkül kilép az „Új előrejelzés” üzemmódból, az új
előrejelzés vonal „eltűnik”, a menetrendi vonal kijelölése megszűnik, a
többi menetvonal kijelölhető lesz, a „funkciók” ikonsor marad a
„ **Szerkesztés** ” ikonon.

      - Ha a szolgáltatás **megerősítő** **üzenetet** ad vissza, akkor nemleges válaszként
értelmezve a <Mégsem> nyomómbnál szerint működik.

`o` A *(* ***ForgSzabMuveletElokeszitesCommand*** *)* szolgáltatás lefutása után a
**szerkesztőpanel** **bezárásra** kerül, **frissül** a **grafikon**, a fókuszban és **kiválasztva**
marad az újonnan létrehozott előrejelzés vonal, a „funkciók” ikonsor marad a
**szerkesztésen** .

**[106724]** **„** ~~**Előrejelzés**~~ ~~**módosítása”**~~ ~~**funkció**~~ ~~**(érkezés**~~ **,** ~~**indulás**~~ **,** ~~**áthaladás)**~~ **A fejezet**

**törölve lett összevonás miatt**

**[106724]** **„** ~~**Tartózkodási**~~ ~~**idő**~~ ~~**módosítása”**~~ ~~**fu**~~ **n** ~~**k**~~ **c** ~~**ió**~~ **A fejezet törölve lett összevonás**

**miatt**

**[106724]** ~~**Rendkívüli**~~ ~~**áthaladás**~~ ~~**(megállás**~~ ~~**kihagyása)**~~ ~~**funkci**~~ ~~**ó**~~ **A fejezet törölve lett**

**összevonás miatt**

**[106724]** ~~**Rendkívüli**~~ ~~**megállás**~~ ~~**funkció**~~ **A fejezet törölve lett összevonás miatt**

**[106724]** **Előrejelzés módosítása funkció (érkezés, indulás, tartózkodási idő,**

**rendkívüli megállás és áthaladás)**

Egy **előrejelzés vonal**, azon belül egy esemény ( **vezérlőpálca** ) kiválasztása után a
**vezérlőpálca** bal egérgombbal **megragadásával** annak az **időtengellyel** párhuzamos
**mozgatásával** **VAGY** a szerkesztő **panelen** a dátum és az **idő**, illetve **egyéb adatelemek**
**módosításával** szerkeszthető.

*(Az előrejelzett eseményidő(k) módosításának mentése után egy térben* *k* *o* *rá* *b* *b* *i* *e* *lő* *r* *e* *je* *lz* *é* *s*
*módosítás vagy tényesemény rögzítés hatására készülő új előrejelzéskor az* *é* *r* *in* *te* *tt e* *s* *e* *mé* *n* *y* *is*
*módosul. Az irányító által „legkorábbi indulási időként* *”* *(esemény indulás* *ÉS* *M* *o* *d* *Ok* *=* *3* *)*
*módosított indulási eseményidő csak akkor módosul, ha az új előrejelzett ind* *u* *lá* *s* *i e* *s* *e* *mén* *y* *id* *ő* *az*
*irányító által megadott előrejelzett indulási időnél későbbi lesz.)*

Egy előrejelzés vonal **összes** az ábrán szereplő előrejelzett adata **módosítható** a **mentésig**,
azok **egyszerre** kerülnek **elmentésre** .

**2.2.3.9.3.1** **Megjelenés, elérés**

A **funkció** csak **Irányítói** üzemmódban érhető el **egy előrejelzés** vonal kijelölése után a
„ **Szerkesztés** ” menüsor „ **Előrejelzés módosítása [Alt+e]** ” **ikon** kezelésével (lásd
„Előrejelzés módosítása [Alt+e] ” ikon leírás).

A grafikon „ **Előrejelzés** **módosítása** ” üzemmódra vált át, megjelenik az ehhez tartozó **fejléc**
és a **szerkesztő** panel.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [95926 vége]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 113/526|



- **Fejlécben** megjelenik az:
`o` **„Előrejelzés módosítása** **”** szöveg.
`o` Az **ábra** megnevezése *(az A* *_* *0151* *_* *02 ablaktól kapott* *’* *megjelenitendoNev* *’* *)* .
`o` A felhasználói **aktivitást** figyelő **idősáv.**
`o` A kiválasztott **művelet** leírása = **„Eseményidő módosítás** **”**,
*(A művelet leírás a panelen levő „műveleti* *”* *kapcsolók állapotától függ:*
       - *Ha* ***egyik*** *„műveleti* *”* *(„Áthalad [Alt+á]* *”* *, „Tart. idő mód. [Alt+t]* *”* *, „Min. ind. idő*

*[Alt+i]* *”* *, „Megáll [Alt+m]* *”* *) kapcsoló* ***sincs*** *bekapcsolva, akkor „* ***Eseményidő***

*”*
***módosítása*** *.*
       - *Ha az „* ***Áthalad [Alt+á]*** *”* *kapcsoló* ***van*** *bekapcsolva, akkor* ***„Rendkívüli áthaladás***

***”***
***tervezése*** *.*
       - *Ha a „* ***Megáll [Alt+m]*** *”* *kapcsoló* ***van*** *bekapcsolva, akkor* ***„Rendkívüli megállás***

***”***
***tervezése*** *.*
       - *Ha a „* ***Tart. idő mód. [Alt+t]*** *”* *kapcsoló* ***van*** *bekapcsolva, akkor* ***„Tartózkodási idő***

***”***
***módosítása*** *.*

       - *Ha a „* ***Min. ind. idő [Alt+i]*** *”* *kapcsoló* ***van*** *bekapcsolva, akkor* ***„Legkorábbi indulási***
***idő megadása*** ***”*** *.)*
`o` A < **Ment** >, a < **Visszavon**  - és a < **Mégsem**  - nyomógombok, valamint a
szerkesztéshez szükséges **ikonok** *(idővonalra ugrás, nagyítások, kicsinyítések,*
*alapértelmezett kameranézet)* .

- A **szerkesztőpanel** **négy** oszlopos.

- A **szerkesztőpanelen** megjelennek a következő **adatelemek** :
`o` Az **első** oszlop a **kijelölés adatai** t jeleníti meg.

      - **”**
**„Vonatazonosító** megjelenítő mező.

      - A **kiválasztott** előrejelzésvonal **első** **vonatazonosítója** .

      - **20** karakter széles, 99999       - 2 / éééé.hh.nn **formátumú** . *(* *’* *VonatszamIrszam* *’* *+* *’*
*/* *’* *+ (* *’* *IndDatum* *’* *)*

      - **”**
**„Szolgálati** **hely** megjelenítő mező:
**Üres** .

      - „ **Esemény** ” megjelenítő mező.
**Üres** .

`o` A **második** oszlopban az **érkezési eseménnyel** kapcsolatos **vezérlőelemek** vannak.
      - **„Érkezési idő** **”** dátum       - idő választó.
**Üres, nem** kezelhető **.**
      - **„Áthalad [Alt+á]** **”** kapcsoló *(CheckBox)*       - A vonat rendkívüli módon áthalad
jelző.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 114/526|



      - **Gyorsító** billentyű kombinációja **Alt+á.**

      - **Kikapcsolt, nem** kezelhető **.**

      - **”**       **„Megáll [Alt+m]** kapcsoló *(CheckBox)* A vonat rendkívüli módon megáll
jelző.

      - **Gyorsító** billentyű kombinációja **Alt+m** .

      - **Kikapcsolt, nem** kezelhető.
`o` A **harmadik** oszlopban a **tartózkodással** kapcsolatos **vezérlőelemek** vannak.
      - **„Tart. idő. mód. [Alt+t]** **”** kapcsoló *(CheckBox)*       - Tartózkodási idő módosítás
jelző.

      - **Gyorsító** billentyű kombinációja **Alt+t.**

      - **Kikapcsolt**, **nem** kezelhető **.**
      - **„Tartózkodási idő** **”** szám beviteli mező *(MaskedInput)* .

      - **4 karakter** hosszú, **0 is** írható.

      - **Üres**, **nem** kezelhető **.**
`o` A **negyedik** oszlopban az **indulási/áthaladási** eseménnyel kapcsolatos
**vezérlőelemek** vannak.

      - **”**       **„Min. ind. idő [Alt+i]** kapcsoló *(CheckBox)* legkorábbi indulási idő
módosítása jelző.

      - **Gyorsító** billentyű kombinációja **Alt+i.**

      - **Kikapcsolt, nem** kezelhető.
      - **„Indulási idő** **”** dátum       - idő választó *(DateTimeInput)* .

      - **Üres**, **nem** kezelhető **.**

      - **”**       **„H.vg [Alt+h]** kapcsoló *(CheckBox)* A vonat helytelen vágányra indul jelző.

      - **Gyorsító** billentyű kombinációja **Alt+h** .

      - **Kikapcsolt, nem** kezelhető.

      - **”**       **„3.vg [Alt+3]** kapcsoló *(CheckBox)* A vonat a helytelen harmadik vágányra
indul jelző.

      - **Gyorsító** billentyű kombinációja **Alt+3** .

      - **Kikapcsolt, nem** kezelhető.
      - **„Szolg. helyig** **”** választólista *(DropDownList)*       - A helyes/helytelen vágányon
közlekedés a megadott szolgálati helyig tart.

      - A menetvonalnak a **tényadatokban** szereplő, az ábrán még **hátralevő** **nem**
**megállóhely** típusú *(* *'* *selUttengelyAd* *a* *tok.SzhTipusKod* *'* *<> 2)* szolgálati helyeit
tartalmazza a haladás iránya szeri nti sorrendben (a szolgálati hely vft         - n
belüli sorszámával *(* *’* *vft* *_* *index* *’* *)* a háttérben (nem jelenik meg)).

      - Lehetséges, hogy a lista **nem tartalmaz** adatokat, mert a menetvonal „lelép ”
a grafikonról, csak egy előrejelzett adata van.

      - Az **üres** sor a kiválasztott, **nem** kezelhető.

- A **grafikonon** a kiválasztott előrejelzés vonalon megjelennek a **vezérlőpálcák.**

**2.2.3.9.3.2** **A szerkesztőpanel adatelemeinek összefüggései, működése**

- A grafikonon egy **vezérlőpálcára** **kattintás** után a **szerkesztőpanelen** az adatelemek az
adott **esemény** által meghatározott **szolgálati hely** eseményadatival kitöltésre kerülnek *(a*
*’* *TenyadatokQuery.Esemenyek* *’* *lista alapján).*

A panelen **minden** adatelem **megjelenik**, de csak a **feltételek** t elj esü l és e eseté n
**kezelhetők** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 115/526|


`o` **Kiválasztott** esemény adatai (1.) oszlop:
   - **„Vonatazonosító** **”** megjelenítő mező.    - A kiválasztott **vezérlőpálca** által
meghatározott **szolgálati helyhez** tartozó **első** **esemény** *(ha vezérlőpálca eseménye*
*indulás, akkor az érkezési esemény)* **vonatazonosítója** .

   - **„Szolgálati** **hely** **”** az **esemény** szolgálati helyének rövid neve. *(* *’* *SzhId* *’* *alapján a*
*tengely adatokból* *’* *SzhRovidNev* *’* *.)*
   - „ **Esemény** ” a kiválasztott **esemény** **kódja** *(* *’* *EsemTipId* *’*  *’* *K* *_* *007* *_* *lang* *’*
*szolgáltatás* *’* *K* *_* *VEF.k* *_* *kod* *’* *.)*

`o` **Érkezési** esemény adatai (2.) oszlop

   - **„Érkezési idő** **”** dátum   - idő választó.

    - A **kiválasztott** esemény **szolgálati helyéhez** tartozó **érkezési** esemény
*(* *’* *EsemTipId* *’* *=* *1*  *’* *EsemIdo* *’* *)* idejév el **kitöltött** . Lehet **üres** is.

    - Akkor **módosítható, ha kitöltött** :
 Ha a **kiválasztott** esemény **érk** **ez** **és** *(* *’* *EsemTipId* *’* *=* *1)* VAGY **indulás**

*(* *’* *EsemTipId* *’* *=* *2)* **ÉS** az „ **Áthalad** **[Alt+á]** ” kapcsoló **kikapcsolt** .
 Ha a **kiválasztott** esemény **áthaladás** *(* *’* *EsemTipId* *’* *=* *6)* **ÉS** a „ **Megáll**

”

**[Alt+m]** kapcsoló **bekapcsolt** .
Az **áthaladási esemény idő** értékével *(* *’* *EsemTipId* *’* *=* *6*  *’* *EsemIdo* *’* *)*
lesz **kitöltve** .

    - **Módosításakor** :
 A mező elhagyásakor **ellenőrzé** **sr** **e** kerül, hogy:

 Nem lehet **korábbi**, mint a **rendszeridő** . *(Ideértve a mező törlését*

*is.)*
Ha az, akkor „A tervezett eseményidő nem lehet korábbi, mint az
aktuális idő! ” popup **üzenet** jelenik meg.
 Nem lehet **korábbi**, mint a **megelőző** esemény ideje.

Ha az, akkor „A tervezett eseményidő nem lehet korábbi, mint az
előző eseményidő! ” popup **üzenet** jelenik meg.
 Nem lehet a **grafikon** időszakánál **későbbi** .

Ha az, akkor popup ablakban **hibaüzenetet** ad: „A megadott idő a
grafikon időszakán kívül esik! ”
 Ha a „ **Tart. idő mód.** **[Alt+t]** **”** kapcsoló **bekapcsolt**, akkor **nem**

**”**
lehet az „ **Indulási idő** mező értélénél **későbbi** .
Ha az, akkor „A tervezett esemény idő nem lehet a következő
esemény idejénél később! ” popup **üzenet** jelenik meg.
Az üzeneteket **lekezelve** az **eredeti** idő visszaírásra kerül, az érkezési és
indulási eseménynél a **’** **ModJel** **’** és a **’** **ModOk** **’** értéke **nem** változik.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 116/526|


 Ha **egyik** **„műveleti** **”** *(„Tart. id* *ő* *mód. [Alt+t]* *”* *, „Min. ind. idő [Alt+i]* *”* *,*

*„Megáll* *[Alt+m]* *”* *)* **kapcsoló** **sincs** bekapcsolva:
*(Az érkezési és indulási eseménynél is a* *’* *ModOk* *’* *=* *NULL, beállítása az adott*
*esemény módosításakor történik meg.)*
 A „ **Tartózkodási idő** ” mező értéke **nem** **módosul** .
 Az „ **Indulási idő** ” mező **módosul** .
 A **grafikonon** az **érkezési** **ÉS** az **indulási** vezérlőpálca is **módosul** .
 Az **érkezési** eseménynél a **’** **ModJel** **’** = **TRUE**, a **’** **ModOk** **’** = **3**     
idő módosítás lesz.
 Az **indulási** eseménynél a **’** **ModJel** **’** és a **’** **ModOk** **’** **nem** módosul.
 Ha a „ **Megáll [Alt+m]** ” kapcsoló **bekapcsolt** :

*(A* ***’*** ***ModOk*** ***’*** *értéke mind a két eseménynél a kapcsoló kezelésekor került*
*beállításra: az* ***érkezési*** ***ÉS*** *az* ***áthaladási*** *eseménynél is* ***5*** *-* *rendkívüli*
*megállás.)*
 A „ **Tartózkodási idő** ” mező értéke **nem** **módosul** .
 Az **„Indulási idő** **”** mező **módosul** .
 A **grafikonon** az **érkezési** vezérlőpálca **ÉS** az **indulási**

vezérlőpálca **is** módosul.
 Az érkezési és az indulási **eseményeknél** a **’** **ModJel** **’** **=** **TRUE**

**lesz.**
 Ha a **„Tart. idő mód. [Alt+t]** **”** k apcsoló **bekapcsolt** :

*(A* ***’*** ***ModOk*** ***’*** *értéke mind a két eseménynél a* ***kapcsoló*** *kezelésekor került*
*beállításra: az* ***érkezési*** *eseménynél* ***3*** *-* *idő módosításra, az* ***indulási***
*eseménynél* ***6*** *-* *tartózkodási idő módosításra.)*
 A „ **Tartózkodási idő** ” mező értéke **módosul** .
 Az „ **Indulási idő** ” mező **nem** módosul.
 A **grafikonon** az **érkezési** vezérlőpálca **módosul**, az **indulási**

vezérlőpálca **nem** módosul.
 Az érkezési és az indulási **eseményeknél** a **’** **ModJel** **’** **=** **TRUE**

lesz.
 Ha a „ **Min. ind. idő [Alt+i]** ” ka pc soló **bekapcsolt** :

*(A* ***’*** ***ModOk*** ***’*** *értéke mind a két eseménynél a kapcsoló kezelésekor került*
*beállításra: az* ***érkezési*** *és az* ***indulási*** *eseménynél is* ***3*** *-* *idő módosítás.)*
 A „ **Tartózkodási idő** ” mező értéke **nem** **módosul** .
 Az **„Indulási idő** **”** mező **módosul** .
 A **grafikonon** az **érkezési** ÉS az **indulási** vezérlőpálca is **módosul** .
 Az érkezési és az indulási **eseményeknél** a **’** **ModJel** **’** = **TRUE**

lesz.

   - Ha **visszakapja** **eredeti** értékét:
 Ha **egyik** „műveleti ” *(„Tart. idő* *mód. [Alt+t]* *”* *, „Min. ind. idő [Alt+i]* *”* *,*

*„Megáll [Alt+m]* *”* *)* **kapcsoló** **sincs** bekapcsolva, akkor:
 Az **érkezési** eseménynél a **’** **ModJel** **’** = **FALSE**, a **’** **ModOk** **’** **=**

**NULL** lesz.
 A „ **Tartózkodási idő** ” módosul.
 A **grafikonon** az **érkezési ÉS** az **indulási** vezérlőpálca is **módosul** .
 Az **indulási** eseménynél a **’** **ModJel** és a **’** **ModOk** **’** **nem** módosul.
 Ha a „ **Megáll [Alt+m]** ” kapcsoló **bekapcsolt** :

 A „ **Tartózkodási idő** ” mező értéke **nem** **módosul** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 117/526|


 Az **„Indulási idő** **”** mező **módosul** .
 A **grafikonon** az **érkezési** vezérlőpálca **ÉS** az **indulási**

vezérlőpálca **is** módosul.
 Az érkezési és az indulási **eseményeknél** a **’** **ModJel** **’** **=** **TRUE**

**lesz.**
 Ha a **„Tart. idő. mód. [Alt+t]** **”** k a pcsoló **bekapcsolt** :

 A „ **Tartózkodási idő** ” mező értéke **módosul** .
 Az „ **Indulási idő** ” mező **nem** módosul.
 Az **érkezési** eseménynél a **’** **ModJel** **’** = **FALSE** lesz.
 Az **indulási** eseménynél a **’** **ModJel** **’** nem módosul.
 A **grafikonon** csak az **érkezési** vezérlőpálca módosul.
 Ha a „ **Min. ind. idő [Alt+i]** ” ka pc soló **bekapcsolt** :

 A „ **Tartózkodási idő** ” mező értéke **módosul** .
 Az **„Indulási idő** **”** mező **nem** **módosul** .
 A **grafikonon** **csak** az **érkezési** vezérlőpálca **módosul** .
 Az **érkezési** eseménynél a **’** **ModJel** **’** = **FALSE** lesz.
 Az **indulási** eseménynél a **’** **ModJel** **’** = **TRUE** lesz.

   - Az **indulási** eseménynél a **’** **hvgModJel** **’** **nem** módosul.
 - „ **Áthalad [Alt+á]** ” kapcsoló:

   - **Alapértelmezetten** kikapcsolt.

   - Akkor **kezelhető**, ha a **kiválasztott** esemény **érkezés** *(* *’* *EsemTipId* *’* *=* *1)*
VAGY **indulás** *(* *’* *EsemTipId* *’* *=* *2)* .

   - **Bekapcsolásakor:**
 **Meghívásra** kerül a **Fo** **r** **gSzabMuveletEllenorzesQuery**   Forgalomszabályozási művelet ellenőrzése szolgáltatás, amely
ellenőrzi, hogy az adott szolgálati helyen a vonathoz rendkívüli
áthaladás rögzíthető        - e.
 **Bemenő** adatok:

 **’** **MgmMvId** **’**     - a kijelölt menetvonal MGM belső azonosítója.
 **’** **SzhId** **’**     - a kijelölt szolgálati hely belső azonosítója.
 **’** **SzhIndex** **’**     - a kijelölt szolgálati hely vft     - n belüli sorszáma.
 **’** **ModOk** **’**     - a módosítás oka = „A ”     - rendkívüli áthaladás.
 **’** **Megerositve** **’**     - annak a jelzése, hogy a felhasználó a

vonatkozó megerősítő üzenetet elfogadta, mentéskor már nem
kell ellenőrizni bizonyos feltételeket = FALSE.
*(Alapértelmezett FALSE az értéke, de egy a szolgáltatástól kapott*
*megerősítő üzenet elfogadása esetén TRUE lesz. Később a mentéskor ezt*
*a jelzőt az előrejelzés módosítás előkészítő eljárásnak át kell adni.)*
 Ha a **szolgáltatás** :

 UC_01_51_ **ERR** _ATHALADAS_ **IRANYVALTAS**

„151015: Irányváltás miatt a rendkívüli áthaladás nem
lehetséges! ” **VAGY**
 UC_01_51_ **ERR** _ATHALAD_ELTERO_ **OSSZEALLITAS**

„151018: Eltérő vonatösszeállítás miatt a rendkívüli áthaladás
nem lehetséges! ” **hibaüzenetet** **ad** vissza,
**akkor:**
 A kapcsoló **kikapcsolt** állapotba kerül,
 a **fejlécben** „ **Eseményidő módosítás** ” szöveg **marad**,

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 118/526|


 **nem** történik meg a rendkívüli áthaladáshoz szükséges

**adatmódosítás** .
 Az esemény **kiválasztás** **megmarad** .
 Az érkezési és indulási **eseményeknél** a **’** **ModJel** **’** **ÉS** a

**’** **’**
**ModOk** értéke **nem változik** .
 Ha a **szolgáltatás** :

 UC_01_51_ **CONF** _SZEM_VON_ **ATHALAD** „151016:
Személyszállító vonat! Tényleg rendkívüli módon áthalad? ”
VAGY
 UC_01_51_ **CONF** _ATHALADAS_ **OSSZEALLITAS** _ **KEL**

**L** „151017: A szolgálati helyen vonat        - összeállítás közlés
kötelező. Valóban rendkívüli áthaladást tervez? ” *(ez az üzenet*
*csak akkor jöhet, ha az előrejelzés készítés nem az aktuális*
*összeállítás végéig történik)* üzenet ad vissza, akkor hozzájuk
tartozó **megerősítő** üzenetet adja.
< **Nem**      - esetén:

 A kapcsoló **kikapcsolt** állapotba kerül,
 a **fejlécben** „ **Eseményidő módosítás** ” szöveg **marad**,
 **nem** történik meg a rendkívüli áthaladáshoz szükséges

**adatmódosítás** .
 Az érkezési és indulási **eseményeknél** a **’** **ModJel** **’** ÉS a

**’** **’**
**ModOk** értéke **nem változik** .
< **Igen**      - esetén, vagy ha **nincs** üzenet:

 A panel **fejlécében** megjelenik a **„Rendkívüli áthaladás**

**tervezése** **”** szöveg.
 Az „ **Érkezési idő** ” dátum     - idő választó **üres**, **nem kezelhető** .
 A **„Tart. idő mód. [Alt+t]** **”** kapcsoló **kikapcsolt**, **kezelhető** .
 A **„Tartózkodási idő** **”** szám beviteli mező **üres**, **nem**

**kezelhető** .
 A **„Min. ind. idő [Alt+i]** **”** kapcsoló **kikapcsolt**, **kezelhető** .
 Az „ **Indulási idő** ” dátum     - idő választó az **„Érkezési idő** **”**

értékével *(ha az „Érkezési idő* *”* *dátum* *-* *idő választó módosult, akkor*
*azzal)* **kitöltött**, **módosítható** .
 A **grafikonon**

 Az **érkezési** vezérlőpálca **eltűnik.**
 Az **indulási** vezérlőpálca az „ **Indulási idő** ” mező

értékének megfelelően **módosul** .
 *(A „Megáll* *[Alt+m]* *”* *kapcsoló kikapcsolt, védett.)*
 Az érkezési és az indulási **eseményhez** a **’** **Megerositve** **’** jelző

értéke **TRUE** lesz, amit az eseményhez a mentésig,
visszavonásig **tárol** .
 Az **érkezési** **ÉS** az **indulási** eseményhez **’** **ModJel** **’** nem

változik, a **’** **ModOk** **’** = **4**              - rendkívüli áthaladás lesz.
 Az **indulási** eseménynél a **’** **hvgModJel** **’** **nem** módosul.

   - **Kikapcsolásakor:**
 A **panel** fejlécében megjelenik az **„Eseményidő módosítása** **”** szöveg.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 119/526|


 A panelen és a grafikonon is **v** **i** **sszaállításra** kerülnek a **bekapcsolás**

**előtti** adatok, az **érkezési** és **indulási** eseményeknél a **’** **ModJel** **’** =
**False**, a **’** **ModOk** **’** = **NULL** lesz.
 Az **indulási** eseménynél a **’** **hvgModJel** **’** **nem** módosul.

   - **”**
**„Megáll [Alt+m]** kapcsoló

    - **Alapértelmezetten** kikapcsolt.

    - Akkor **kezelhető**, ha a **kiválasztott** esemény **áthaladás** *(* *’* *EsemTipId* *’* *=* *6)* .

    - **Bekapcsolásakor:**
 A **panel** fejlécében megjelenik a z **„Rendkívüli megállás tervezése** **”**

szöveg.
 *(Új „érkezés* *”* *adatok kerülnek fel* *véte* *lre.)*
 Az „ **Érkezési idő** ” mező az „In du lási idő ” mező értékével **kitöltött** lesz

és **módosítható** .
 A „ **Tart. idő mód [Alt+t]** ” kapcsoló **kikapcsolt**, **nem** kezelhető.
 A **„Tartózkodási idő** **”** mező **0,** **k** **ezelhető** .
 *(A „Min. ind. idő [Alt+i]* *”* *kapcsoló* *kikapcsolt, nem kezelhető.)*
 Az **érkezési** és az **áthaladási** (új i ndulási) **eseményekhez** a **’** **ModJel** **’** =

**TRUE**, a **’** **ModOk** **’** = **4**      - rendkívüli megállás lesz.
 Az **áthaladási** eseménynél a **’** **hv** **g** **ModJel** **’** **nem** módosul.
 A **grafikonon** az eseményhez t ar tozó **érkezési** vezérlőpálca megjelenik

és **kezelhető** .

    - **Kikapcsolásakor:**
 A **panel** fejlécében megjelenik az **„Eseményidő módosítása** **”** szöveg.
 Az „ **Érkezési idő** ” mező **üres** l es z, **nem** módosítható.
 A **grafikonon** az **érkezési** vezér lő pálca „ **eltűnik** ” .
 *(Az érkezési esemény adatok törlés* *r* *e kerülnek.)*
 A „ **Tart. idő mód [Alt+t]** ” kapcsoló **kikapcsolt**, **nem** kezelhető.
 A **„Tartózkodási idő** **”** mező **ü** **re** **s, nem** kezelhető.
 *(A „Min. ind. idő [Alt+i]* *”* *kapcsoló* *k* *ikapcsolt, nem kezelhető.)*
 Az „ **Indulási idő** ” mező **megtartja** az értékét, a **grafikonon** az

**áthaladási** **vezérlőpálca** **nem** módosul.
 Az **áthaladási** eseményhez a **’** **ModJel** **’** nem változik, a **’** **ModOk** **’** = **6**    
tartózkodási idő módosítás lesz.
 Az **áthaladási** eseménynél a **’** **hv** **g** **ModJel** **’** **nem** módosul.

`o` **Tartózkodás** adatai (3.) oszlop:

   - **”**
**„Tart. idő mód. [Alt+t]** kapcsoló.
*(A panelen csak az „Érkezési idő* *”* *és az „Indulási idő* *”* *mezők, illetve a grafikonon az*
*érkezési és az indulási vezérlőpálcák egymáshoz való viszonyát szabályozza.)*

    - **Alapértelmezetten** kikapcsolt.

    - Akkor **kezelhető**, ha a **kiválasztott** esemény **érkezés** *(* *’* *EsemTipId* *’* *=* *1)*
VAGY **indulás** *(* *’* *EsemTipId* *’* *=* *2)* .

    - **Bekapcsolásakor:**
 A **panel** fejlécében megjelenik az **„Tartózkodási idő módosítása** **”**

szöveg.
 Az „ **Áthalad [Alt+á]** ” kapcsoló **kikapcsolt**, **kezelhető** .
 *(A „Megáll [Alt+m]* *”* *kapcsoló ne* *m* *kezelhető.)*
 A „ **Min. ind** . **idő [Alt+i]** ” kapcsoló **kikapcsolt,** **kezelhető** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 120/526|


 Az érkezési és az indulási **esemé** **n** **yeknél** a **’** **ModJel** **’** = **nem változik.**
 Az **érkezési** eseménynél a **’** **Mod** **O** **k** **’** **=** **3**    - idő módosítás lesz.
 Az **indulási** eseménynél a **’Mo** **dOk** **’** **=** **6** lesz    - tartózkodási idő

módosítása lesz.
 Az **indulási** eseménynél a **’** **hvgModJel** **’** **nem** módosul.

    - **Kikapcsolásakor:**
 A **panel** fejlécében megjelenik az **„Eseményidő módosítása** **”** szöveg.

Az **eseményeknél** a **’** **ModJel** **’** **nem** változik.
 Ha az **érkezési** eseménynél:

 A **’** **ModJel** **’** = **TRUE**, akkor a **’** **ModOk** **’** **nem** változik.
 A **’** **ModJel** **’** = **FALSE**, akkor a **’** **ModOk** **’** **=** **NULL** lesz.
 Ha az **indulási** eseménynél:

 A **’** **ModJel** **’** = **TRUE**, akkor a **’** **ModOk** **’** **nem** változik.
 A **’** **ModJel** **’** = **FALSE**, akkor a **’** **ModOk** **’** = **NULL** lesz.
 Az **indulási** eseménynél a **’** **hvgModJel** **’** **nem** módosul.

   - **„Tartózkodási idő** **”** szám beviteli mező:

    - **Alapértelmezésben** az **„Indulási idő** **”** és az „ **Érkezési idő** **”** mező
**különbségével** kitöltött.

    - Akkor **írható**, ha az „ **Indulási** idő ” **ÉS** az „ **Érkezési** idő ” mező is **kitöltött** .

    - **Módosításakor:**
 Ha **üres**, akkor „A tartózkodá si idő értéke 0 és 1439 közé kell, hogy

essen! ” **üzenetet** ad. Az üzenet lekezelése után a mező az „Indulási idő ”
és az „Érkezési idő ” különbségével **kitöltött** lesz.
 **Ellenőrzésre** kerül, hogy **nem** lehet a ’ menetv _ ervv _ utk ’
**rendszerparaméter** által meghatározott percnél **nagyobb** .
Ha az, akkor pop        - up **üzenetben** " A tartózkodási idő nem lehet
% ’ T _ RPT.rparam _ ertek ’* 60% percnél nagyobb! " üzenetet ad és annak
lekezelése után az eredeti tartózkodási időt **visszaírja** .
 Az „ **Érkezési** **idő** ” **nem** mód os ul, az eseménynél a **’** **ModJel** **’** nem

változik.
 Az „ **Indulás** **idő** ” **módosul** .
 Az **indulási** eseménynél a **’** **Mo** **d** **Jel** **’** = **TRUE** lesz, a **’** **hvgModJel** **’**

**nem** módosul.
 A **grafikonon** az indulási idő és a további esemény idők **módosulnak** .

`o` **Indulási/áthaladási** esemény adatai (4.) oszlop

   - **”**
**„Min. ind. idő [Alt+i]** kapcsoló

    - **Alapértelmezetten** kikapcsolt.

    - Akkor **kezelhető**, ha a **kiválasztott** esemény **érkezés** ( ’ EsemTipId ’ = 1)
VAGY **indulás** ( ’ EsemTipId ’ = 2).

    - **Bekapcsolásakor:**
 A **panel** fejlécében megjel eni k az **„Legkorábbi indulási idő**

**megadása** **”** szöveg.
 Az „ **Áthalad [Alt+á]** ” kapcsoló **kikapcsolt**, **kezelhető** .
 *(A „Megáll [Alt+m]* *”* *kapcsoló nem* *k* *ezelhető.)*
 A „ **Tart. idő mód [Alt+t]** ” kapcsoló **kikapcsolt**, **kezelhető** .
 Az érkezési és az indulási **esemé** **n** **yeknél:** a **’** **ModJel** **’** = **nem változik.**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 121/526|


 Az **érkezési** eseménynél a **’** **Mod** **O** **k** **’** = **3**   - idő módosítás lesz.
 Az **indulási** eseménynél a **’** **Mo** **d** **Ok** **’** = **3**   - idő módosítás lesz.
 Az **indulási** eseménynél a **’** **hvgModJel** **’** **nem** módosul.

   - **Kikapcsolásakor:**
 A **panel** fejlécében megjelenik az **„Eseményidő módosítása** **”** szöveg.
 Az **eseményeknél** a **’** **ModJel** **’** nem változik.
 Az **indulási** eseménynél a **’** **hvgModJel** **’** **nem** módosul.
 Az **érkezési** eseménynél a **’** **Mod** **O** **k** **’** **= 3** idő módosítás lesz.
 Az **indulási** eseménynél a **’** **Mod** **O** **k** **’** **= 6**   - tartózkodási idő módosítás

lesz.

 - **„Indulási idő** **”** dátum  - idő választó.

   - A kiválasztott esemény **szolgálati helyéhez** tartozó **indulási** *(* *’* *EsemTipId* *’* *=*
*2* *)* VAGY **áthaladási** *(* *’* *EsemTipI* *d’ =* *6)* esemény idejével *(* *’* *EsemIdo* *’* *)*
**kitöltött** .

   - Akkor **kezelhető,** ha:
 Ha a **kiválasztott** esemény **érk** **ezé** **s** *(* *’* *EsemTipId* *’* *=* *1)* **ÉS** tartozik hozzá

**indulási** idő.
 A **kiválasztott** esemény **indulás** *(* *’* *EsemTipId* *’* *=* *2)* VAGY **áthaladás**

*(* *’* *EsemTipId* *’* *=* *6)* .

   - **Módosításakor** *(beleértve a „* ***Tartózkodási idő*** *”* *módosítás általi*
*módosítást* ***is*** *)* :
 A mező elhagyásakor **ellenőrzé** **sr** **e** kerül, hogy:

 Nem lehet **korábbi**, mint a **rendszeridő** . *(Ideértve a törlését is.)*

Ha az, akkor „A tervezett eseményidő nem lehet korábbi, mint az
aktuális idő! ” popup **üzenet** jelenik meg.
 Nem lehet **korábbi**, mint a **megelőző** esemény ideje.

Ha az, akkor „A tervezett eseményidő nem lehet korábbi, mint az
előző eseményidő! ” popup **üzenet** jelenik meg.
 Nem lehet a **grafikon** időszakánál **későbbi** .

Ha az, akkor popup ablakban **hibaüzenetet** ad: „A megadott idő a
grafikon időszakán kívül esik! ”
Az üzeneteket **lekezelve** az **eredeti** idő visszaírásra kerül, az
indulási/áthaladási eseménynél a **’** **ModJel** **’** ÉS a **’** **ModOk** **’** értéke **nem**
változik. Az **indulási** /áthaladási eseménynél a **’** **hvgModJel** **’** **nem**
módosul.
 Ha **egyik** **„műveleti** **”** *(„Tart. id* *ő* *mód. [Alt+t]* *”* *, „Min. ind. idő [Alt+i]* *”* *,*

*„Megáll [Alt+m]* *”* *)* **kapcsoló** **sincs** bekapcsolva:
*(Az érkezési és indulási eseménynél is a* *’* *ModOk* *’* *=* *NULL, beállítása az adott*
*esemény módosításakor történik meg.)*
 Az **„Érkezési idő** **”** mező értéke **nem** **módosul** .
 Ha a **kiválasztott** esemény **nem áthaladás** *(* *’* *EsemId* *’* *<> 6)*, akkor a

”
„ **Tartózkodási idő** mező értéke **módosul** .
 A **grafikonon** **csak** az **indulási/áthaladási** vezérlőpálca **módosul** .
 Az **érkezési** eseménynél a **’** **ModJel** **’** ÉS a **’** **ModOk** **’** nem módosul.
 Az **indulási** eseménynél a **’** **ModJel** **’** = **TRUE**, a **’** **ModOk** **’** **=** **6**     
tartózkodási idő módosítás lesz.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 122/526|


 Az **áthaladási** eseménynél a **’** **ModJel** **’** = **TRUE**, a **’** **ModOk** **’** **=** **3**     
idő módosítás lesz.
 Az **indulási** /áthaladási eseménynél a **’** **hvgModJel** **’** **nem** módosul.
 Ha az „ **Áthalad [Alt+á]** ” kapcsoló **bekapcsolt** :

*(A* ***’*** ***ModOk*** ***’*** *értéke mind a* ***két*** ***eseménynél*** *a kapcsoló kezelésekor került*
*beállításra:* ***’*** ***ModOk*** ***’*** *=* ***4*** *-* *rendkívüli áthaladás.)*
 A **grafikonon** az **indulási** vezérlőpálca **módosul,** az **előtte** levő

előrejelzés **vonal meredeksége** változik **.**
 Mind a két eseménynél a **’** **ModJel** **’** = **TRUE** lesz, **indulási**

eseménynél a **’** **hvgModJel** **’** **nem** módosul.
 Ha a **„Tart. idő mód.** **[Alt+t]** **”** k apcsoló **bekapcsolt** :

*(A* ***’*** ***ModOk*** ***’*** *értéke mind a két eseménynél a kapcsoló kezelésekor került*
*beállításra: az* ***érkezési*** *eseménynél* ***3*** *-* *idő módosításra, az* ***indulási***
*eseménynél* ***6*** *-* *tartózkodási idő módosításra.)*
 Az „ **Érkezési idő** ” mező **nem** módosul.
 A **grafikonon** **csak** az **indulási** vezérlőpálca **módosul** .
 Az **érkezési** eseménynél a **’** **ModJel** **’** **nem** módosul.
 Az **indulási** eseménynél a **’** **ModJel** **’** **=** **TRUE** lesz.
 Az **indulási** eseménynél a **’** **hvgModJel** **’** **nem** módosul.
 A „ **Tartózkodási idő** ” mező értéke **módosul** .
 Ha a „ **Megáll [Alt+m]** ” kapcsoló **bekapcsolt** :

*(A* ***’*** ***ModOk*** ***’*** *értéke mind a két eseménynél a kapcsoló kezelésekor került*
*beállításra: az* ***érkezési*** ***ÉS*** *az* ***áthaladási*** *eseménynél is* ***5*** *-* *rendkívüli*
*megállás.)*
 A „ **Tartózkodási idő** ” mező értéke **módosul** .
 Az **„Érkezési idő** **”** mező **nem** **módosul** .
 A **grafikonon** az **érkezési** vezérlőpálca **nem**, az **áthaladási**

vezérlőpálca módosul.
 Az **érkezési** és az **áthaladási** eseménynél a **’** **ModJel** **’** **=** **TRUE**

**lesz.**
 Az **áthaladási** eseménynél **’** **hvgModJel** **’** **nem** módosul.
 Ha a „ **Min. ind. idő [Alt+i]** ” ka pc soló **bekapcsolt** :

*(A* ***’*** ***ModOk*** ***’*** *értéke mind a két eseménynél a kapcsoló kezelésekor került*
*beállításra: az* ***érkezési*** *és az* ***indulási*** *eseménynél is* ***3*** *-* *idő módosítás.)*
 A „ **Tartózkodási idő** ” mező értéke **módosul** .
 Az **„Érkezési idő** **”** mező **nem** **módosul** .
 A **grafikonon** csak az **indulási** vezérlőpálca **módosul** .
 Az **érkezési** eseménynél a **’** **ModJel** **’** **nem** módosul.
 Az **indulási** eseménynél a **’** **ModJel** **’** = **TRUE** lesz, a **’** **hvgModJel** **’**

**nem** módosul.

   - Ha **visszakapja** **eredeti** értékét:
 Ha **egyik** „műveleti ” *(„Tart. idő* *mód. [Alt+t]* *”* *, „Min. ind. idő [Alt+i]* *”* *,*

*„Megáll [Alt+m]* *”* *)* **kapcsoló** **sincs** bekapcsolva, akkor:
 Az **indulási/áthaladási** eseménynél a **’** **ModJel** **’** = **FALSE** lesz, a

**’** **hvgModJel** **’** **nem** módosul.
 Ha a **kiválasztott** esemény **nem áthaladás** *(* *’* *EsemId* *’* *<> 6)*, akkor a

„ **Tartózkodási idő** ” módosul.
 A **grafikonon** **csak** az **indulási** vezérlőpálca **módosul** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 123/526|


 Az **érkezési** eseménynél a **’** **ModJel** **’** ÉS a **’** **ModOk** **’** nem módosul.
 Az **indulási** eseménynél a **’** **ModJel** **’** = **FALSE**, a **’** **hvgModJel** **’**

**nem** módosul, a **’** **ModOk** **’** **=** **NULL** lesz.
 Az **áthaladási** eseménynél a **’** **ModJel** **’** = **FALSE**, a **’** **ModOk** **’** **=**

**NULL** lesz.
 Ha az „ **Áthalad [Alt+á]** ” kapcsoló **bekapcsolt** :

*(A* ***’*** ***ModOk*** ***’*** *értéke mind a* ***két*** ***eseménynél*** *a kapcsoló kezelésekor került*
*beállításra:* ***’*** ***ModOk*** ***’*** *=* ***4*** *-* *rendkívüli áthaladás.)*
 A **grafikonon** az **indulási** vezérlőpálca **módosul,** az **előtte** levő

előrejelzés **vonal meredeksége** változik **.**
 Mind a két eseménynél a **’** **ModJel** **’** = **TRUE** marad.
 Az **indulási** eseménynél **’** **hvgModJel** **’** **nem** módosul.
 Ha a „ **Megáll [Alt+m]** ” kapcsoló **bekapcsolt** :

*(A* ***’*** ***ModOk*** ***’*** *értéke mind a két eseménynél a kapcsoló kezelésekor került*
*beállításra: az* ***érkezési*** ***ÉS*** *az* ***áthaladási*** *eseménynél is* ***5*** *-* *rendkívüli*
*megállás.)*
 A „ **Tartózkodási idő** ” mező értéke **módosul** .
 Az **„Érkezési idő** **”** mező **nem** **módosul** .
 A **grafikonon** az **érkezési** vezérlőpálca **nem**, az **áthaladási**

vezérlőpálca módosul.
 Az érkezési és az áthaladási **eseménynél** a **’** **ModJel** **’** **=** **TRUE lesz.**
 Az **áthaladási** eseménynél a **’** **hvgModJel** **’** **nem** módosul.
 Ha a **„Tart. idő. mód. [Alt+t]** **”** k a pcsoló **bekapcsolt** :

 Az „ **Érkezési idő** ” mező **nem** módosul.
 A **grafikonon** **csak** az **indulási** vezérlőpálca **módosul** .
 Az **érkezési** és az **indulási** eseménynél a **’** **ModJel** **’** **nem** módosul.
 A „ **Tartózkodási idő** ” mező értéke **módosul** .
 Ha a „ **Min. ind. idő [Alt+i]** ” ka pc soló **bekapcsolt** :

 A „ **Tartózkodási idő** ” mező értéke **módosul** .
 Az **„Érkezési idő** **”** mező **nem** **módosul** .
 A **grafikonon** csak az **indulási** vezérlőpálca **módosul** .
 Az **érkezési** eseménynél a **’** **ModJel** **’** = **FALSE** lesz.
 Az **indulási** eseménynél a **’** **ModJel** **’** = **TRUE** lesz, a **’** **hvgModJel** **’**

**nem** módosul.

`o` **„H.vg** ” és „ **3.vg** ” kapcsoló
Ha a kiválasztott **esemény** szolgálati helyének a típusa **nem megállóhely**
*(* *'* *selUttengelyAdatok.SzhTipusKod* *'* *<> 2)* **ÉS** az „ **Indulási idő** ” mező **kitöltött,** akkor
**kezelhetők.**

A **működésük** a következő:
   - Kezelésükkor az adott **indulási/áthaladási** eseményhez tartozó **’** **ModJel** **’** ÉS
**’** **ModOk** **’** **nem** változik.

   - „ **H.vg** ” kapcsoló:

    - Ha az **’** **Esemenyek.MGMHelytVaganyraInd** **’** = **1**, akkor **bekapcsolt** .

    - **Módosításakor:**
 Ha a „ **3.vg** ” kapcsoló **bekapcsol** **t**, akkor az **kikapcsolt** lesz.
 A „ **Szolg. helyig** ” választólistáb a n az **üres** sor lesz a **kijelölt** .
 Az **indulási** /áthaladási esem ény hez az **’** **SzhIdIg** **’** = **NULL**, az

**’** **SzhIndexIg** **’** = **NULL** lesz.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 124/526|


 **Bekapcsolásakor:**



 A grafikonon a **következő** **nem megállóhely** típusú szolgálati

helyig **vastagabb** lesz az előrejelzés vonal.
 Ha az **indulási** /áthaladási **eseményhez** :

 Az **’** **Esemenyek.MGMHelytVaganyraInd** ’ = **NULL** volt,

akkor:
 A **’** **HvgModJel** **’** = **TRUE**,
 az **’** **MGMHelytVaganyraInd** **’** **=** **„1** **”** (új helytelen

vágányon közlekedés) lesz.
 Az **’** **MGMHelytVaganyraInd** ’ = „ **1** **”** volt, akkor:

 A **’** **HvgModJel** **’** = **FALSE**,
 az **’** **MGMHelytVaganyraInd** **’** **=** **NULL** (helytelen

vágányon közlekedés nem változott) lesz.
 Az **’** **MGMHelytVaganyraInd** ’ = **„3** **”** volt, akkor

 A **’** **HvgModJel** **’** = **TRUE**,
 az **’** **MGMHelytVaganyraInd** **’** **=** **„1** **”** (helytelen vágányon

közlekedés helyett helytelen 3. helytelen vágányon
közlekedés) lesz.
 **Kikapcsolásakor:**

 A **grafikonon** a következő állomástípusú szolgálati helyig **normál**

**vastag** lesz az előrejelzés **vonal** .
 Ha **indulási** /áthaladási eseményhez eredetileg:

 Az **’** **MGMHelytVaganyraInd** **’** = **1** VAGY **3** volt, akkor:

 A **’** **HvgModJel** **’** = **TRUE**,
 az **’** **MGMHelytVaganyraInd** **’** **=** **„0** **”** lesz. (Helytelen

vágányon közlekedés megszűntetése.)
 Az **’** **MGMHelytVaganyraInd** **’** = **NULL** volt, akkor:

 A **’** **HvgModJel** **’** = **FALSE**,
 az **’** **MGMHelytVaganyraInd** **’** = **NULL** lesz. (Nincs

módosítás.)

 - „ **3.vg** ” kapcsoló:

   - Ha az **’** **Esemenyek.MGMHelytVaganyraInd** **’** = **3**, akkor **bekapcsolt** .

   - **Módosításakor:**
 Ha a „ **H.vg** ” kapcsoló **bekapcs** **ol** **t**, akkor az **kikapcsolt** lesz.
 A „ **Szolg. helyig** ” választólistáb a n az **üres** sor lesz a **kijelölt** .
 Az **indulási** /áthaladási esem ény hez az **’** **SzhIdIg** **’** = **NULL**, az

**’** **SzhIndexIg** **’** = **NULL** lesz.
 **Bekapcsolásakor:**

 A grafikonon a **következő** **nem megállóhely** típusú szolgálati

helyig **vastagabb** lesz az előrejelzés vonal.
 Ha az **indulási** /áthaladási **eseményhez** :

 Az **’** **Esemenyek.MGMHelytVaganyraInd** ’ = **NULL** volt,

akkor:
 A **’** **HvgModJel** **’** = **TRUE**,
 az **’** **MGMHelytVaganyraInd** **’** **=** **„3** **”** lesz. (Új helytelen

3. vágányon közlekedés.)
 Az **’** **Esemenyek.MGMHelytVaganyraInd** ’ = „ **3** **”** volt, akkor:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 125/526|


 A **’** **HvgModJel** **’** = **FALSE**,
 az **’** **MGMHelytVaganyraInd** **’** **=** **NULL** lesz. (Helytelen

3. vágányon közlekedés nem változott.)
 Az **’** **MGMHelytVaganyraInd** ’ = „ **1** ” volt, akkor:

 A **’** **HvgModJel** **’** = **TRUE**,
 az **’** **MGMHelytVaganyraInd** **’** = „ **3** ” lesz. (Helytelen

vágányon közlekedés helyett 3. helytelen vágányon
közlekedés.)
 **Kikapcsolásakor:**

 A **grafikonon** a **következő** állomástípusú szolgálati helyig **normál**

**vastag** lesz az előrejelzés vonal.
 Ha **indulási** /áthaladási **eseményhez** eredetileg:

 Az **’** **MGMHelytVaganyraInd** **’** = **1** VAGY **3** volt, akkor:

 A **’** **HvgModJel** **’** = **TRUE**,
 az **’** **MGMHelytVaganyraInd** **’** **=** **„0** **”** lesz. (Helytelen

vágányon közlekedés megszűntetése.)
 Az **’** **MGMHelytVaganyraInd** **’** = **NULL** volt, akkor:

 A **’** **HvgModJel** **’** = **FALSE**,
 az **’** **MGMHelytVaganyraInd** **’** = **NULL** lesz. (Nincs

módosítás.)

      - „ **Szolg. helyig** ” választólista:

      - **Alapértelmezetten** üres.

      - Akkor **kezelhető**, ha **valamelyik** helytelen vágányos **kapcsoló** **módosult**,
**eltér** az **eredeti** értékétől.

      - **Kitöltésekor** a vezérlőpálca által meghatározott szolgálati **helytől** a
kiválasztott szolgálati **helyig** (ha ni ncs megadva a szolgálati helyig, akkor a
következő nem megállóhely típusú szo lgálati helyig) az előrejelzés vonal:
 **Vastagabb** lesz, ha valamelyik k a pcsoló be van kapcsolva.
 **Normál** vastagságú lesz, ha egyi k kapcsoló sincs bekapcsolva.
 Ha ki van töltve, akkor az e **’** Ha üres, akkor az **SzhIndexIg** **’** = ’ szh **’** **SzhIdIg** _ index **’** ’ . = N semU LL és ényhez az **’** **SzhIndexIg** **’** **SzhIdIg** **’** = **’** NULL. = ’ szh _ id ’ és

      Ha az indulási/áthaladási eseményhez:

      - A **’** **ModOk** **’** **=** **NULL** ÉS a **’** **HvgModJel** **’** = **TRUE**, akkor a **’** **ModOk** **’** = **13**
           - helytelen vágányon közlekedés mó do sítása lesz.

      - A **’** **ModOk** **’** **<>** **NULL**, akkor a **’** **ModOk** **’** nem módosul.

**2.2.3.9.3.3** **A vezérlőpálcák működése**

A vezérlőpálcák kezelésekor a **’** **HvgModJel** **’** **nem módosul.**

- Ha **egyik** **„műveleti** **”** *(„Tart. idő mód. [Alt+t]* *”* *, „Min. ind. idő [Alt+i]* *”* *, „Megáll [Alt+m]* *”* *)*
**kapcsoló** **sincs** bekapcsolva
(A panel fejlécében „ **Eseményidő módosítása** ” szöveg van. A ’ M o d Ok’ = NULL,
vezérlőpálca mozgatáskor kerül beállításra.)

`o` **Érkezési** vezérlőpálca:

      A vezérlőpálca **mozgatásakor:**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 126/526|



      - Az **indulási** és az azt **követő** vezérlőpálca **is** mozgatásra kerül.
Az **indulási** vezérlőpálca **utáni** előrejelzés vonal **meredeksége** **nem**
változik.

      - Az **előző** esemény felé eső előrejelzés **vonal** meredeksége **változik** .

      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre.

      - ”
A vezérlőpálca **elengedése** után (ha az általa meghatározott „új érkezési idő
nem azonos az eredeti érkezési idővel):

      - Ha az **új** eseményidő **korábbi**, mint az **idővonal**, akkor „A tervezett
eseményidő nem lehet korábbi, min t az aktuális idő! ” **üzenetet** ad.

      - Módosul az „ **Érkezési idő** ” a panelen.

      - Az **érkezési** eseményhez a **’** **ModJel** **’** = **TRUE** és a **’** **ModOk** **’** = **3** lesz.

      - Módosul az „ **Indulási** idő ” a panelen.

      - Az **indulási** eseményhez a **’** **ModJel** **’** és a **’** **ModOk** **’** **nem** módosul.

      - Módosul a „ **Tartózkodási** **idő** ” a panelen.

`o` **Indulási** vezérlőpálca:

      A vezérlőpálca **mozgatásakor:**

      - Az **érkezési** vezérlőpálca **nem** kerül mozgatásra.

      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre.
(Üzenetet nem ad.)

      - Az **indulási** vezérlőpálca **utáni** előrejelzés vonal **meredeksége** nem
változik.

      - ”
A vezérlőpálca **elengedése** után (ha az általa meghatározott „új indulási idő
nem azonos az eredeti érkezési idővel):

      - Ha az **új** eseményidő **korábbi**, mint az **idővonal**, akkor „A tervezett
eseményidő nem lehet korábbi, min t az aktuális idő! ” **üzenetet** ad.

      - **Nem** módosul az „ **Érkezési idő** ” a panelen.

      - Az **érkezési** eseményhez a **’** **ModJel** **’** és a **’** **ModOk** **’** **nem** módosul.

      - Módosul az „ **Indulási** idő ” a panelen.

      - Az **indulási** eseményhez a **’** **ModJel** **’** = **TRUE** és a **’** **ModOk** **’** = **6** lesz.

      - Módosul a „ **Tartózkodási** **idő** ” a panelen.

`o` **Áthaladási** vezérlőpálca:
      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre. (Üzenetet
nem ad.)
      - Módosul az „ **Indulási** **idő** ” a panelen.
      - Az **áthaladási** eseményhez a **’** **ModJel** **’** = **TRUE** és a **’** **ModOk** **’** = **3** lesz.

- Ha az „ **Áthalad [Alt+á]** ” kapcsoló bekapcsolt
(A panel fejlécében „ **Rendkívüli áthaladás tervezése** ” szöveg van . A z érk ezési és
indulási eseményhez a **’** **ModOk** **’** = **4**   - rendkívüli áthaladás, vezérlőpálca mozg atá s k o r
nem módosul):
`o` Az **érkezési** vezérlőpálca **eltűnt** (a **panelen** az „Érkezési idő ” és a „Tartózkodási
idő ” **üres** ).
`o` Az **indulási** vezérlőpálca **mozgatásakor** :
      - Az **előző** esemény felé eső előrejelzés **vonal** meredeksége **változik** .
      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre. (Üzenetet
nem ad.)
      - Az **indulási** vezérlőpálca **utáni** előrejelzés vonal **meredeksége** nem változik.
`o` A vezérlőpálca **elengedése** után:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 127/526|


      - Ha az **új** eseményidő **korábbi**, mint az **idővonal**, akkor „A tervezett eseményidő
nem lehet korábbi, mint az aktuális idő! ” **üzenetet** ad.
      - Módosul az „ **Indulási** **idő** ” a panelen.
      - Az **indulási** eseményhez a **’** **ModJel** **’** = **TRUE** lesz.

- Ha a **„Tart. idő mód.** **[Alt+t]** **”** kapcsoló **bekapcsolt** :
*(A panel fejlécében „* ***Tartózkodási idő módosítása*** *”* *szöveg van. Az érk* *e* *z* *ési* *e* *s* *e* *mé* *n* *yh* *e* *z* *a*
***’*** ***ModOk*** ***’*** *=* ***3*** *-* *idő módosítás, az indulási eseményhez a* ***’*** ***ModOk*** ***’*** *=* ***6*** *- t* *a* *r* *tó* *z* *k* *o* *d* *ás* *i id* *ő*
*módosítás, vezérlőpálca mozgatáskor nem módosul.)*

`o` **Érkezési** vezérlőpálca:

      A vezérlőpálca **mozgatásakor:**

      - Az **indulási** és az azt **követő** vezérlőpálca **nem** kerül mozgatásra.

      - Az **előző** esemény felé eső előrejelzés **vonal** meredeksége **változik** .

      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre.

      - ”
A vezérlőpálca **elengedése** után (ha az általa meghatározott „új érkezési idő
nem azonos az eredeti érkezési idővel):

      - Ha az **új** eseményidő **korábbi**, mint az **idővonal**, akkor „A tervezett
eseményidő nem lehet korábbi, min t az aktuális idő! ” **üzenetet** ad.

      - Módosul az „ **Érkezési idő** ” a panelen.

      - Az **érkezési** eseményhez a **’** **ModJel** **’** = **TRUE** lesz.

      - Nem módosul az „ **Indulási** idő ” a panelen.

      - Az **indulási** eseményhez a **’** **ModJel** **’** **nem** módosul.

      - Módosul a „ **Tartózkodási** **idő** ” a panelen.

`o` **Indulási** vezérlőpálca:

      A vezérlőpálca **mozgatásakor:**

      - Az **érkezési** vezérlőpálca **nem** kerül mozgatásra.

      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre.
(Üzenetet nem ad.)

      - Az **indulási** vezérlőpálca **utáni** előrejelzés vonal **meredeksége** nem
változik.

      - ”
A vezérlőpálca **elengedése** után (ha az általa meghatározott „új indulási idő
nem azonos az eredeti érkezési idővel):

      - Ha az **új** eseményidő **korábbi**, mint az **idővonal**, akkor „A tervezett
eseményidő nem lehet korábbi, min t az aktuális idő! ” **üzenetet** ad.

      - **Nem** módosul az „ **Érkezési idő** ” a panelen.

      - Az **érkezési** eseményhez a **’** **ModJel** **’** **nem** módosul.

      - Módosul az „ **Indulási** idő ” a panelen.

      - Az **indulási** eseményhez a **’** **ModJel** **’** = **TRUE** lesz.

      - Módosul a „ **Tartózkodási** idő ” a panelen.

- Ha a „ **Megáll [Alt+m]** ” kapcsoló **bekapcsolt:**
*(A panel fejlécében „* ***Rendkívüli megállás tervezése*** *”* *szöveg van. Az* ***új*** *é* *r* *k* *e* *zé* *s* *i v* *ez* *é* *r* *lő* *p* *á* *lca*
*került megjelenítésre. Az* ***új*** *érkezési eseményhez és az indulási eseményhez* *a* ***’M*** ***o*** ***d*** ***Ok*** ***’*** *=* *5* *-*
*rendkívüli megállás, vezérlőpálca mozgatáskor nem módosul.)*
`o` **Érkezési** vezérlőpálca:

      A vezérlőpálca **mozgatásakor:**

      - Az **áthaladási** és az azt **követő** vezérlőpálca **is** mozgatásra kerül.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 128/526|


Az **áthaladási** vezérlőpálca **utáni** e lőrejelzés vonal **meredeksége** **nem**
változik.

      - Az **előző** esemény felé eső előrejelzés **vonal** meredeksége **változik** .

      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre.

      - ”
A vezérlőpálca **elengedése** után (ha az általa meghatározott „új érkezési idő
nem azonos az eredeti érkezési idővel):

      - Ha az **új** eseményidő **korábbi**, mint az **idővonal**, akkor „A tervezett
eseményidő nem lehet korábbi, min t az aktuális idő! ” **üzenetet** ad.

      - Módosul az „ **Érkezési idő** ” a panelen.

      - Az **érkezési** eseményhez a **’** **ModJel** **’** = **TRUE** lesz.

      - Módosul az „ **Indulási** idő ” a panelen.

      - Az **áthaladási** eseményhez a **’** **ModJel** **’** **nem** módosul.

      - Módosul a „ **Tartózkodási** **idő** ” a panelen.
`o` **Áthaladási** vezérlőpálca:

      A vezérlőpálca **mozgatásakor:**

      - Az **érkezési** vezérlőpálca **nem** kerül mozgatásra.

      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre.
(Üzenetet nem ad.)

      - Az **áthaladási** vezérlőpálca **utáni** előrejelzés vonal **meredeksége** nem
változik.

      - ”
A vezérlőpálca **elengedése** után (ha az általa meghatározott „új indulási idő
nem azonos az eredeti érkezési idővel):

      - Ha az **új** eseményidő **korábbi**, mint az **idővonal**, akkor „A tervezett
eseményidő nem lehet korábbi, min t az aktuális idő! ” **üzenetet** ad.

      - **Nem** módosul az „ **Érkezési idő** ” a panelen.

      - Az **érkezési** eseményhez a **’** **ModJel** **’** **nem** módosul.

      - Módosul az „ **Indulási** idő ” a panelen.

      - Az **áthaladási** eseményhez a **’** **ModJel** **’** = **TRUE** lesz.

      - Módosul a „ **Tartózkodási** idő ” a panelen.

- Ha a „ **Min. ind. idő [Alt+i]** ” kapcsoló bekapcsolt:
(A panel fejlécében „ **Legkorábbi indulási idő megadása** ” szöveg van. A z ér k ezési és az
indulási eseményhez a **’** **ModOk** **’** = **3**   - idő módosítás, vezérlőpálca m ozg at ás k o r n em
módosul.)
`o` **Érkezési** vezérlőpálca:

      A vezérlőpálca **mozgatásakor:**

      - Az **indulási** és az azt **követő** vezérlőpálca **is** mozgatásra kerül.
Az **indulási** vezérlőpálca **utáni** előrejelzés vonal **meredeksége** **nem**
változik.

      - Az **előző** esemény felé eső előrejelzés **vonal** meredeksége **változik** .

      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre.

      - ”
A vezérlőpálca **elengedése** után (ha az általa meghatározott „új érkezési idő
nem azonos az eredeti érkezési idővel):

      - Ha az **új** eseményidő **korábbi**, mint az **idővonal**, akkor „A tervezett
eseményidő nem lehet korábbi, min t az aktuális idő! ” **üzenetet** ad.

      - Módosul az „ **Érkezési idő** ” a panelen.

      - Az **érkezési** eseményhez a **’** **ModJel** **’** = **TRUE** lesz.

      - Módosul az „ **Indulási** idő ” a panelen.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 129/526|



      - Az **indulási** eseményhez a **’** **ModJel** **’** **nem** módosul.

      - Módosul a „ **Tartózkodási** **idő** ” a panelen.
`o` **Indulási** vezérlőpálca:

      A vezérlőpálca **mozgatásakor:**

      - Az **érkezési** vezérlőpálca **nem** kerül mozgatásra.

      - A vezérlőpálca **nem** mozgatható az **előző** eseménynél **korábbi** időre.
(Üzenetet nem ad.)

      - Az **indulási** vezérlőpálca **utáni** előrejelzés vonal **meredeksége** nem
változik.

      - ”
A vezérlőpálca **elengedése** után (ha az általa meghatározott „új indulási idő
nem azonos az eredeti érkezési idővel):

      - Ha az **új** eseményidő **korábbi**, mint az **idővonal**, akkor „A tervezett
eseményidő nem lehet korábbi, min t az aktuális idő! ” **üzenetet** ad.

      - **Nem** módosul az „ **Érkezési idő** ” a panelen.

      - Az **érkezési** eseményhez a **’** **ModJel** **’** **nem** módosul.

      - Módosul az „ **Indulási** idő ” a panelen.

      - Az **indulási** eseményhez a **’** **ModJel** **’** = **TRUE** lesz.

      - Módosul a „ **Tartózkodási** idő ” a panelen.

Az **előrejelzés** vonalon az adatok addig módosíthatók egy **másik vezérlőpálca** választásával,
amíg az **szerkesztő módban** van, azaz nem lett kezelve a <Ment> vagy a <Mégsem>
nyomógomb.

**2.2.3.9.3.4** **Nyomógombok a szerkesztőpanelen**

- < **Visszavon** `o` Akkor **kezelhető**, ha az előrejelzés vonal **módosult**, azaz van legalább egy olyan

**’** **’** **’** **’**
esemény, ahol a **ModJel** VAGY a **HvgModJel** értéke **TRUE** .
`o` A nyomógomb **kezelésekor:**
      - A **grafikonon** az előrejelzés vonal az **eredeti** helyzetre áll vissza, **nincs**
**vezérlőpálca** kiválasztva.
      - **Minden** eseménynél a **’** **ModJel** **’** és a **’** **hvgModJel** **’** = **FALSE**, a **’** **ModOk** **’** =
**NULL** lesz.

      - Szolgáltatáshívás és **adatmentés nem** történik, az **üzemmód** marad előrejelzés
**szerkesztése** .
`o` Az **aktivitás** figyelés **újraindul** .

- < **Ment** `o` A nyomógomb akkor **kezelhető**, ha az előrejelzésben **módosítás** történt, azaz van

**’** **’** **’** **’**
legalább egy olyan esemény, ahol a **ModJel** VAGY a **HvgModJel** értéke **TRUE** .
`o` **Kezelésére** **meghívásra** kerül a „Forgalom szabályozási műveletek mentésének
előkészítése egy menetvonal esetén ” *(* ***ForgSzabMuveletElokeszitesCommand)***
szolgáltatás, ami a megfelelő ellenőrzések után elvégzi az előrejelzés **módosítását** .
**Bemenő** adatok:

      - **’** **MenetvId** **’**       - a módosítandó előrejelzés menetvonal MGM azonosítója.
      - **’** **AbraId** **’**       - az érintett ábra azonosítója.

      - **’** **’**       **MunkahelyId** az ábra munkahelyazonosítója.
      - **’** **Megerositve** **’**       - az esetleges megerősítés ténye. = False.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 130/526|


      
**[{Esemény lista}]** több elemű lista, az **előrejelzés vonal** azon események
**adatait** tartalmazza, ahol módosítás történt *(a* *’* *ModJel* *’* *VAGY* *’* *hvgModJel* *’* *=*
*TRUE)* .

      - **’** **SzhId** **’**       - annak a szolgálati helynek a belső azonosítója, ahol az előrejelzést
módosítani kell.

      - **’** **ModOk** **’**       - a módosítás oka:
 Ha az eseményhez a **’** **ModJel** **’** = **TRUE**, akkor az eseményhez tárolt

**’** **’**
**ModOk** .
 Ha az eseményhez a **’** **ModJel** **’** = **False** ÉS a **’** **hvgModJel** **’** = **TRUE**,

akkor **13**           - helytelen/helyes vágányon közlekedés.

      - **’** **’**       -       **MgmEsemTipId** a módosított esemény típus azonosítója (1 érkezés, 2

           -           indulás vagy 6 áthaladás).

      - **’** **’**       **UjEsemIdo** az új eseményidő.

      - **’** **EredetiEsemIdo** **’**       - az esemény eredeti ideje.

      - **’** **SzhIndex** **’**       - az esemény szolgálati helyének sorszáma a menetrenden belül.

      - **’** **’**       **MGMHelytVaganyraInd** a menetvonal helytelen vágányra indul.
Lehetséges **értékei** :
 NULL     - Nem történt változás.
 0     - Mind a kettő kapcsoló kikapcs o lt, helyes vágányon közlekedés.
 1     - A „H.vg ” a bekapcsolt, helytelen vágányon közlekedés.
 3     - A „3.vg ” a bekapcsolt, a harm a dik, helytelen vágányon közlekedés.

      - **’** **SzhIdIg** **’**       - az eseményhez tárolt **’** **SzhIdIg** **’** adat. Lehet NULL is.

      - **’** **SzhIndexIg** **’**       - az eseményhez tárolt **’** **SzhIndexIg** **’** adat. Lehet NULL is.

      epaiParamXmlDoc
`o` Az eljárás **ellenőrzi**, hogy:
      - Az adott **munkahely** a felhasználó által van **lefoglalva** .
Ha **UC_01_51_ERR_ERVENYTELEN_FOGLALAS** üzenetet ad vissza
„ **151005** : Érvénytelen munkahely foglalás, az adatok mentése sikertelen! ”
üzenetet ad, nem történik meg a létrehozás.
      - A **menetvonal** nincs egy másik felhasználó által szerkesztésre **lefoglalva** .
Ha a szolgáltatás **UC_01_51_ERR_MENETV_FOGLALT** üzenetet ad vissza,
akkor „ **151010** : A menetvonalat más felhasználó szerkeszti, módosítás nem
lehetséges! ” hibaüzenetet ad, nem történik meg a módosítás. A feldolgozás leáll,
kilép a szerkesztés üzemmódból, a menetvonal kijelöltsége megmarad.
      - **A** módosítandó eseményhez előrejelzés adat tartozik
(MGMHa **nem** _, TenyEsem.esem **UC_01_51_ERR_TENYADAT_LETEZIK** _ tipus = „B ” ). üzenetet ad vissza, akkor
„ **151026** : Előrejelzés nem módosítható, az adatok módosultak. ” üzenetet ad,
nem történik meg a létrehozás. A feldolgozás leáll, kilép a szerkesztés
üzemmódból, a menetvonal kijelöltsége megmarad.
`o` **Sikeres** mentés után a grafikon kilép a „Előrejelzés módosítása ” üzemmódból és
**frissül**, meghívásra kerülnek a grafikon megnyitásakor hívott szolgáltatások. A
fókuszban és **kiválasztva** marad a módosított előrejelzés vonal, a „funkciók ” ikonsor
marad a **szerkesztésen** .

- < **Mégsem** `o` Kezelésekor **adatmentés nem** történik, meghívásra kerül a menetvonal foglalást
**feloldó** S_0151_38     - **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 131/526|


**Bemenő** adatok

      - **’** **MenetvonalIdLista** **’**       - a feloldani kívánt menetvonal ’ MGMMenetvId ’ adata.
Egy elemű lista.

      - **’** **’**
**MunkahelyId**
      - **’** **AbraId** **’**

      - **’** **’** = ”       **FoglalasJelzo** „E elengedés, feloldás.
      - **’** **ModositasOk** **’** = NULL

      - **’** **’**
**epaiParamXmlDoc**
`o` Sikeres **feloldás** után a grafikon kilép a „Előrejelzés módosítása ” üzemmódból és a
grafikon **frissül** a fókuszban és **kiválasztva** marad a módosított előrejelzés vonal, a

”
„funkciók ikonsor marad a **szerkesztésen** .

- Felhasználói **aktivitás lejártakor**
`o` Ha **popup üzenet** van a grafikonon **ÉS** a felhasználó az **aktivitási** figyelő **lejártáig**
nem kezelte le azt, akkor az üzenet **automatikusan** **bezárásra** kerül, a mentő
**szolgáltatás** hívása **nélkül** *(a megerősítő üzenetet úgy tekintjük, mintha nemleges*
*választ adott volna a felhasználó)* a grafikon mentés nélkül **kilép** az „Előrejelzés
módosítása ” üzemmódból, meghívásra kerül a menetvonal foglalását feloldó
**MenetvForgSzabFoglalasCommand** (Menetvonalak forgalomszabályozásra

**’** **’** = ”                     lefoglalása) szolgáltatás **FoglalasJelzo** „E elengedés, feloldás paraméterrel, a
menetvonal **kijelölése** **megmarad**, a többi menetvonal kijelölhető lesz, a „funkciók ”
ikonsor marad a „ **Szerkesztés** ” ikonon.
`o` **További** működést lásd a < **Ment**  - nyomógombnál leírtakat, **azzal** a kitétellel, hogy
ha a szolgáltatás **hibaüzenetet** ad vissza az **nem** lesz figyelembe véve és
**meghívásra** kerül a menetvonal foglalását feloldó
**MenetvForgSzabFoglalasCommand** (Menetvonalak forgalomszabályozásra

**’** **’** = ”                     lefoglalása) szolgáltatás **FoglalasJelzo** „E elengedés, feloldás paraméterrel.

**[88977]** **„Előztetés tervezése” funkció**

Az előztetés tervezés **két azonos** irányú **előrejelzés vonal**, azon belül egy **vezérlőpálca**
(esemény) kiválasztása után a **vezérlőpálca** bal egérgombbal **megragadásával,** annak az
**időtengellyel** párhuzamos **mozgatásával** **VAGY** a szerkesztő panelen a dátumok és az **idők**
**módosításával,** egy előrejelzés vonalnál **rendkívüli áthaladás, rendkívüli megállás**
rögzítésével **,** illetve **tartózkodási idő** módosításával (a dátumok és az **idők módosításával)**
végezhető el.

**2.2.3.9.4.1** **Megjelenés, elérés**

A **funkció** csak **Irányítói** üzemmódban érhető el **két azonos irányú előrejelzés** vonal
kijelölése után a „ **Szerkesztés** ” menüsor „ **Előztetés** ” **ikon** kezelésével (lásd „Előztetés” ikon
leírás).

- A grafikon **„Vonat előztetés** ” üzemmódra vált át, megjelenik az ehhez tartozó **fejléc** és a
**szerkesztő** panel.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 132/526|


107096




- **Fejlécben** megjelenik az **„Előztetés tervezése”** szöveg, az **ábra** megnevezése, a
felhasználói **aktivitást** figyelő **idősáv,** a < **Ment** >, < **Visszavon**   - és a < **Mégsem**   nyomógombok, valamint a szerkesztéshez szükséges **ikonok** (nagyítások, kicsinyítések,
idővonalra ugrás, alapértelmezett kameranézet).

- A **szerkesztőpanelen** megjelennek a következő adatelemek:
`o` **„Szolgálati** **hely”** rövid neve megjelenítő mező. **Üres** .
`o` **„** **Előre küldendő vonat”** megjelenítő mező. Az **elsőnek** kiválasztott előrejelzés
vonal első **v** **onatazonosítója** ( ’ VonatszamIrszam ’ ) + ’ / ’ + vonat indulási dátuma

’ ’

`o` **„Érkezési idő”** dátum és idő beviteli mező. **Üres** .
`o` „ **Áthaladás** ” kapcsoló, ami kikapcsolt.
`o` **„Indulási idő”** dátum és idő beviteli mező. **Üres** .

107096
`o` kijelölés megfordítása ikon. Az előrejelzés vonalak kijelölési
sorrendjének, ezzel azok „szerepének ” megfordítása.
`o` **„Előzendő vonat”** megjelenítő mező. A **másodiknak** kiválasztott előrejelzés vonal
első **vonatazonosítója** ( ’ VonatszamIrszam ’ ) + ’ / ’ + vonat indulási dátuma

’ ’

`o` **„Érkezési idő”** dátum és idő beviteli mező. **Üres.**
`o` **„Indulási idő”** dátum és idő beviteli mező. **Üres.**
`o` „ **Megállás** ” kapcsoló, ami **kikapcsolt** .

- A **grafikonon** a kiválasztott előrejelzés vonalak közül a másodiknak kiválasztott
(„ **előzendő** ”) előrejelzés vonalon azokban a szolgálati **hely** és **esemény** ***(’EsemJelleg’ =***
***"E")*** **metszéspontokban**, ahol az „ **előre küldendő** ” vonat előrejelzett **indulási** ideje
**későbbi**, mint az „ **előzendő** ” vonat előrejelzett **indulási** ideje, megjelennek a
**vezérlőpálcák**, a **vonatszám** **zöld** betűszínnel jelenik meg.
Az elsőnek kiválasztott („előre küldendő”) menetvonalon nem jelennek meg a
vezérlőpálcák, de rá lehet kattintani.

**2.2.3.9.4.2** **Működés**

- A **grafikonon** előrejelzés **vonal** **kiválasztásakor**, **váltáskor** az előrejelzés vonalon
azokban a szolgálati **hely** és **esemény** (’EsemJelleg’ = "E") **metszéspontokban**, ahol az
„ **előre** küldendő” (elsőnek kijelölt) vonat előrejelzett **indulási** / **áthaladási** ideje **későbbi**,
mint az „ **előzendő** ” (másodiknak kijelölt) vonat előrejelzett **indulási/áthaladási** ideje,
megjelennek a vezérlőpálcák, a vonatszám zöld betűszínnel jelenik meg. A másik
előrejelzés vonal kijelölése megszűnik, azon eltűnnek a vezérlőpálcák, a vonatszám fehér
betűszínű lesz.

- Egy **vezérlőpálcára** **kattintva** a kliens ellenőrzi, hogy az ábrán van-e olyan más
szolgálati hely, ahol történt előztetés tervezés *(a két előrejelzés vonal közül bármelyiknél az*
*esemény* ***módosítás jele <> NULL*** *)* .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** Több vonatazonosító esetén vesszővel elválasztva jeleníti
meg őket a kliens.

**törölt:** Több vonatazonosító esetén vesszővel elválasztva jeleníti
meg őket a kliens.


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 133/526|


Ha van ilyen, akkor "Előztetés **folyamatban** egy másik szolgálati helyen!" üzenetet ad és
a vezérlőpálca nem lesz kijelölt.
A folyamatban lévő előrejelzés folytatható, ha az adott szolgálati helyhez *(ahol az esemény*
*módosítás jele <> NULL)* tartozó vezérlőpálcát jelölnek ki.

- A grafikonon az egyik **vezérlőpálcára** **kattintáskor** (kijelölésekor) a **szerkesztőpanelen**
az adatelemek az adott esemény adataival **kitöltésre** kerülnek a *(’TenyadatokQuery’*
***’Esemenyek’*** *lista alapján)* :
`o` **„Szolgálati** **hely”**  - az **esemény** szolgálati helyének **rövid** neve. *(’SzhId’ alapján a*
*tengely adatokból ’SzhRovidNev’.)*
`o` **„** **Előre küldendő vonat”**  - az **elsőnek** kiválasztott (előre küldendő) előrejelzés
vonalnak a kiválasztott esemény által meghatározott **vonatazonosítója**
( ’ VonatszamIrszam ’ ) + ’ / ’ + vonat indulási dátuma ( ’ IndDatum ’ ) éééé.hh.nn
formában. Ha a vonatnál nincs kiválasztva esemény akkor az utoljára kiválasztott

`o` **„Érkezési idő”**  - az **elsőnek** kiválasztott (előre küldendő) előrejelzés vonal adott
szolgálati helyéhez tartozó **érkezési** eseményének *(’EsemTipId’ = 1)* ideje *(’EsemIdo’*
*dátum idő)* .
Ha a vonat az adott szolgálati helyen **áthalad** *(’EsemTipId’ = 6 eseménye van)*, akkor
**üres** . Ebben az esetben a mező **védett**, nem kezelhető.
`o` **„Indulási idő”**  - az **elsőnek** kiválasztott (előre küldendő) előrejelzés vonal adott
szolgálati helyéhez tartozó indulási (áthaladási) eseményének *(’EsemTipId’ = 2 vagy 6)*
ideje *(’EsemIdo’ dátum idő)* .
`o` „ **Áthaladás** ” kapcsoló - az **elsőnek** kiválasztott (előre küldendő) vonat rendkívüli
áthaladásának jelzése kapcsoló, ami kikapcsolt.
Akkor **kezelhető**, ha az az **elsőnek** kiválasztott (előre küldendő) vonatnak eredetileg
**érkezési eseménye** van (’EsemTipId’ = 1).
`o` **„** **Előzendő vonat”**  - a **másodiknak** kiválasztott (előzendő) előrejelzés vonal nak a
kiválasztott esemény által meghatározott **v** **onatazonosítója** ( ’ VonatszamIrszam ’ ) + ’
/ ’ + vonat indulási dátuma ( ’ IndDatum ’ ) éééé.hh.nn formában. Ha a vonatnál nincs
kiválasztva esemény akkor az utoljára kiválasztott esemény alapján jelenik meg.
#103703

.
`o` **„Érkezési idő”**  - a **másodiknak** kiválasztott (előzendő) előrejelzés vonal adott
szolgálati helyéhez tartozó érkezési eseményének (’EsemTipId’ = 1) ideje
(’EsemIdo’ dátum idő).
Ha a vonat az adott szolgálati helyen **áthalad** (’EsemTipId’ = 6 eseménye van),
akkor üres, nem kezelhető.
`o` **„Indulási idő”**  - a **másodiknak** kiválasztott (előzendő) előrejelzés vonal adott
szolgálati helyéhez tartozó indulási (áthaladási) eseményének (’EsemTipId’ = 2 vagy
6) ideje (’EsemIdo’ dátum idő).
`o` „ **Megállás** ” kapcsoló - a **másodiknak** kiválasztott (előzendő) vonat rendkívüli
módon megáll jelzése kapcsoló, ami kikapcsolt.
Akkor **kezelhető**, ha a **másodiknak** kiválasztott (előzendő) vonatnak eredetileg
**áthaladási eseménye** *(’EsemTipId’ = 6)* van.

- **Módosítás** a grafikonon a **vezérlőpálcákkal**
`o` Ha az „ **előzendő”** (másodiknak kiválasztott) vonat az adott szolgálati helyen **áthalad**
*(’EsemTipId’ = 6)*, akkor **nincs** szerkesztési lehetőség a grafikonon, azt a szerkesztő
**panelen** kell elvégezni.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** ~~Több~~ ~~vonatazonosító~~ ~~esetén~~ ~~vesszővel~~ ~~elválasztva~~ ~~jeleníti~~
~~meg~~ ~~őket~~ ~~a~~ ~~kliens~~ .


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 134/526|


**Bármely** előrejelzés vonalhoz tartozó vezérlőpálca **mozgatása** után, annak
**elengedésekor** „Előztetés nem tervezhető, az előzendő vonat áthalad! A szerkesztő
panelen rögzítsen rendkívüli megállást!” **üzenetet** ad. A kijelölések megmaradnak, a
szerkesztőpanel kitöltésre kerül. Az **aktivitás** figyelés **újraindul** .
`o` Ha az „ **előzendő** vonat” az adott szolgálati helyen **megálló** *(’EsemTipId’ = 2)*, vagy
ha a „ **Megállás** ” kapcsoló **bekepcsolt** *(’EsemTipId’ = 6)*, a vonat adatainak
szerkesztése (a másodiknak kiválasztott előrejelzés vonal kijelölése után):
   - **Érkezési** vezérlőpálcájának mozgatásakor az **indulási** idő és a **további**
eseményidők is **módosulnak** .

    - **Nem** mozgatható az adott előrejelzés vonal **előző eseményénél** és az
**idővonalnál** **korábbi** időre.

    - A vezérlőpálca **elengedése** után:
 Ha az új érkezési idő az **idővonal** **előtt** van, „A tervezett eseményidő

nem lehet korábbi, mint az aktuális idő!” popup **üzenet** jelenik meg. A
grafikonon és a szerkesztőpanelen nem történik módosítás.
 Ha az új érkezési idő hatására módosuló **új indulási idő** az **előre**

**küldendő** vonat indulási **idejénél** **korábbi**, akkor üzenetet ad: „A
módosítás nem jelent előztetést, végezzen további módosításokat!”. A
módosítás megmarad, a szerkesztés folytatható.
~~~~ ~~Ha~~ ~~az~~ ~~új~~ ~~érkezési~~ ~~idő~~ ~~hatására~~ ~~módosuló~~ ~~**új**~~ ~~**indulási**~~ ~~**idő**~~ ~~az~~ ~~**elő**~~ **re**

~~**küldendő**~~ ~~vonat~~ ~~indulási~~ ~~**idejénél**~~ ~~**későbbi**~~, ~~akkor~~ ~~az~~ ~~előrejelzés~~ ~~vonal~~
~~további~~ ~~**vezérlőpálcái**~~ ~~**eltűnnek**~~ .
 A **szerkesztőpanelen** az „Érkezési idő” és az „Indulási **idő”**

adatbeviteli mező a grafikon szerinti értékre **módosul** .
 Az utána levő események előrejelzés ideje kiszámításra kerül, amit

a kliens a mentésig tárol.
 Az esemény ’ModOk’ értéke = 22 - előztetés lesz. (Ezt kell majd a

szolgáltatásnak átadni.)
 Az **aktivitás** figyelés újraindul.
   - **Indulási** vezérlőpálcájának mozgatásakor a további eseményidők is
módosulnak.

    - **Nem** mozgatható az adott előrejelzés vonal **előző** eseményénél és az
idővonalnál **korábbi** időre.

    - A vezérlőpálca **elengedése** után:
 Ha az új indulási idő az **idővonal** **előtt** van, „A tervezett eseményidő

nem lehet korábbi, mint az aktuális idő!” popup **üzenet** jelenik meg. A
g **rafikonon és a** szerkesztőpanelen nem történik módosítás.
 Ha az új indulási idő az **előre küldendő** vonat indulási **idejénél**

**korábbi**, akkor üzenetet ad: „A módosítás nem jelent előztetést,
végezzen további módosításokat.”. A módosítás megmarad, a
szerkesztés folytatható.
 A **szerkesztőpanel** „Indulási **idő”** adatbeviteli mező a grafikon szerinti

értékre **módosul** .
 Az utána levő események előrejelzés ideje kiszámításra kerül, amit

a kliens a mentésig tárol.
 Az esemény ’ModOk’ értéke = 22 - előztetés lesz. (Ezt kell majd a

szolgáltatásnak átadni.)
 Az **aktivitás** figyelés újraindul.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 135/526|


`o` Az „ **előre küldendő** ” vonat:
      - **Érkezési** vezérlőpálcájának mozgatásakor az **indulási** vezérlőpálca és a **további**
eseményidők is **módosulnak** .

      - **Nem** mozgatható az adott előrejelzés vonal **előző** eseményénél és az
idővonalnál **korábbi** időre.

      - A vezérlőpálca **elengedése** után:
 Ha az új érkezési idő az **idővonal** **előtt** van, „A tervezett eseményidő

nem lehet korábbi, mint az aktuális idő!” popup **üzenet** jelenik meg. A
grafikonon és a szerkesztőpanelen nem történik módosítás.
 Ha az **új** érkezési idő hatására módosuló **indulási** idő az **előzendő**

vonat indulási idejénél **későbbi**, akkor üzenetet ad: „A módosítás nem
jelent előztetést, végezzen további módosításokat.”. A módosítás
megmarad, a szerkesztés folytatható.
 A **szerkesztőpanel** az „Érkezési idő” és az „Indulási **idő”** adatbeviteli

mező a grafikon szerinti értékre **módosul** .
 Az utána levő események előrejelzés ideje kiszámításra kerül, amit

a kliens a mentésig tárol.
 Az esemény ’ModOk’ értéke = 21 - előztetés lesz. (Ezt kell majd a

szolgáltatásnak átadni.)
 Az aktivitás figyelés újraindul.
      - **Indulási** vezérlőpálcájának mozgatásakor a további eseményidők is
módosulnak.

      - **Nem** mozgatható az adott előrejelzés vonal **előző** eseményénél és az
idővonalnál **korábbi** időre.

      - A vezérlőpálca **elengedése** után:
 Ha az új indulási idő az **idővonal** **előtt** van, „A tervezett eseményidő

nem lehet korábbi, mint az aktuális idő!” popup **üzenet** jelenik meg. A
grafikonon és a szerkesztőpanelen nem történik módosítás.
 Ha az új **indulási** idő az **előzendő** vonat indulási idejénél **későbbi**,

akkor üzenetet ad: „A módosítás nem jelent előztetést, végezzen
további módosításokat.”. A módosítás megmarad, a szerkesztés
folytatható.
 A **szerkesztőpanelen** az „Indulási **idő”** adatbeviteli mező a grafikon

szerinti értékre **módosul** .
 Az utána levő események előrejelzés ideje kiszámításra kerül, amit

a kliens a mentésig tárol.
 Az esemény ’ModOk’ értéke = 21 - előztetés lesz. (Ezt kell majd a

szolgáltatásnak átadni.)
 Az aktivitás figyelés újraindul.
`o` 100478 Bármely vezérlőpálca mozgatása után ellenőrzésre kerül, ha az **előreküldendő**
(elsőnek kiválasztott) vonat **érkezési** VAGY áthaladási ideje **korábbi,** mint az
**előzendő** (másodiknak kiválasztott) vonat **érkezési** ideje, akkor **hiba** : "Az előzendő
vonat indulási ideje korábbi, mint az előre küldendő vonat érkezési ideje, előztetés
nem lehetséges."
Az üzenet **lekezelése** után a módosítás nem történik meg, a módosított adat **visszaáll**
az eredetire, a <Ment> nyomógomb nem kezelhető lesz ('ModJel' = FALSE), **mintha**
a < **Visszavon**     - lett volna kezelve.

- **Módosítás szerkesztőpanelen**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 136/526|


`o` „ **Előre küldendő** ” vonat:
   - **„Érkezési idő”** kezelése

    - Ha a vonat **áthalad** a szolgálati helyen *(’EsemTipId’ = 6)*, akkor **nem**
kezelhető.

    - **Módosítása** után, arról lelépve ellenőrzésre kerül:
 Nem lehet **korábbi**, mint a **rendszeridő** .

Ha az, akkor pop-up üzenet "A tervezett eseményidő nem lehet korábbi,
mint az aktuális idő!" üzenetet ad.
 Nem lehet **korábbi**, mint az ábrán levő **megelőző** esemény **ideje** .

Ha az, akkor pop-up üzenet "A tervezett eseményidő nem lehet korábbi,
mint az előző eseményidő!" üzenetet ad.
(Ha az érkezési esemény az ábrán az első esemény, akkor ezt a mentő
eljárás fogja ellenőrizni.)
 Nem lehet a **grafikon** időszakánál **későbbi** .

Ha az, akkor popup ablakban **hibaüzenetet** ad: „A megadott idő a
grafikon időszakán kívül esik!”
 Az „ **Indulási** idő” az az eredeti érkezési idő és az új érkezési idő

különbségével **módosul és ellenőrzésre kerül:**
 A **korrigált** **indulási** idő nem lehet a **grafikon** időszakánál

**későbbi** .
Ha az, akkor popup ablakban **hibaüzenetet** ad: „A megadott idő a
grafikon időszakán kívül esik!”
 A **korrigált indulási** idő **korábbi** -e, mint az **előzendő** vonat

indulási ideje.
Ha **nem**, akkor **üzenetet** ad: „A módosítás nem jelent előztetést,
végezzen további módosításokat!”.
A módosítás megmarad, a szerkesztés folytatható.

    - A grafikonon az érkezési és az indulási és a további esemény idők
módosulnak, amit a kliens a mentésig tárol.
   - „ **Áthaladás** ” kapcsoló bekapcsolása után:

    - **Meghívásra** kerül az S_0151_49 - **ForgSzabMuveletEllenorzesQuery**     Forgalomszabályozási művelet ellenőrzése
(core.usp_0151_checkForgSzabMuvelet) szolgáltatás, amely ellenőrzi, hogy
az adott szolgálati helyen a vonathoz rendkívüli áthaladás rögzíthető-e.
 **Bemenő** adatok:

 **’MgmMvId’**     - a kijelölt (kapcsoló által meghatározott) menetvonal

MGM belső azonosítója.
 **’SzhId’**     - a kijelölt szolgálati hely belső azonosítója.
 **’SzhIndex’**     - a kijelölt szolgálati hely (kapcsoló által
meghatározott) vft-n belüli sorszáma.
 **’ModOk’**     - a módosítás oka = „A” - rendkívüli áthaladás.
 **’Megerositve’**     - annak a jelzése, hogy a felhasználó a vonatkozó

megerősítő üzenetet elfogadta, mentéskor már nem kell ellenőrizni
bizonyos feltételeket = FALSE.
*(Alapértelmezett FALSE az értéke, de egy a szolgáltatástól kapott*
*megerősítő üzenet elfogadása esetén TRUE lesz. Később a*
*mentéskor ezt a jelzőt az előrejelzés módosítás előkészítő*
*eljárásnak át kell adni.)*

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 137/526|


 Ha a szolgáltatás:



 UC_01_51_ERR_ATHALADAS_IRANYVALTAS „151015:
Irányváltás miatt a rendkívüli áthaladás nem lehetséges!” VAGY
 UC_01_51_ERR_ATHALAD_ELTERO_OSSZEALLITAS

„151018: Eltérő vonatösszeállítás miatt a rendkívüli áthaladás nem
lehetséges!” üzenetet ad vissza,
akkor a kapcsoló **kikapcsolt** állapotba kerül, **nem** történik meg a
rendkívüli áthaladáshoz szükséges **adatmódosítás** .
 Ha a szolgáltatás:

 UC_01_51_CONF_SZEM_VON_ATHALAD „151016:
Személyszállító vonat! Tényleg rendkívüli módon áthalad?”
VAGY
 UC_01_51_CONF_ATHALADAS_OSSZEALLITAS_KELL

„151017: A szolgálati helyen vonat-összeállítás közlés kötelező.
Valóban rendkívüli áthaladást tervez?” üzenet *(* *[95621]* *ez az üzenet csak*
*akkor jöhet, ha az előrejelzés készítés nem az aktuális összeállítás végéig*
*történik)* ad vissza,
akkor a hozzájuk tartozó **megerősítő** üzenetet adja.
< **Igen**      - esetén
 Az **érkezési** idő törlésre kerül ( **üres** lesz).
 Az **indulási** idő módosul az érkezési idő értékére.
 A grafikonon az **érkezési** vezérlőpálca **eltűnik**, az indulási idő és a

következő események módosulnak.
 Az eseményhez a **’Megerositve’** jelző értéke TRUE lesz, amit az

eseményhez a mentésig tárol.
< **Nem**      - esetén a kapcsoló **kikapcsolt** állapotba kerül, **nem** történik meg
a rendkívüli áthaladáshoz szükséges **adatmódosítás** .

   - Az „ **Érkezési** idő” üres és védett lesz.

   - Az „ **Indulási** idő” felveszi az „ **Érkezési** idő” (a módosítottat is) értékét.
Megtörténnek az „Indulási idő” adatnál leírtak szerinti **ellenőrzések** és
módosítások.
 - „ **Áthaladás** ” kapcsoló **kikapcsolása** után az „Érkezési idő” és az „Indulási idő”,
valamint a további eseményidők **visszakapják** az **eredeti** értéküket, az
„Érkezési idő” módosítható lesz.

 **„Indulási idő” kezelése**

   - Ha a vonat **áthalad** a szolgálati helyen *(’EsemTipId’ = 6)*, akkor **nem**
kezelhető.

   - **Módosítása** után, arról lelépve **ellenőrzésre** kerül, hogy:
 Nem lehet **korábbi**, mint a **rendszeridő** .

Ha az, akkor pop-up üzenet "A tervezett eseményidő nem lehet korábbi,
mint az aktuális idő!" üzenetet ad.
 Nem lehet **korábbi**, mint az ábrán levő **megelőző** esemény **ideje** .

Ha az, akkor pop-up üzenet "A tervezett eseményidő nem lehet korábbi,
mint az előző eseményidő!" üzenetet ad.
 Nem lehet a grafikon időszakánál későbbi.

Ha az, akkor popup ablakban **hibaüzenetet** ad: „A megadott idő a
grafikon időszakán kívül esik!”
 Az új **indulási idő** **korábbi** -e, mint az **előzendő** vonat indulási ideje.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 138/526|


Ha **nem**, akkor **üzenetet** ad: „A módosítás nem jelent előztetést,
végezzen további módosításokat!”.
A módosítás megmarad, a szerkesztés folytatható.

    - A grafikonon az **indulási** és a **további esemény idők** **módosulnak,** amit a
kliens a mentésig tárol.
`o` „ **Előzendő** vonat”:
   - **„Érkezési idő”** kezelése

    - Ha a vonat **áthalad** a szolgálati helyen *(’EsemTipId’ = 6)*, akkor üres, nem
kezelhető.

    - Ha a vonat megáll *(’EsemTipId’ <> 6)* a szolgálati helyen VAGY ha
**áthalad** *(’EsemTipId’ = 6)* a szolgálati helyen **ÉS** a „ **Megállás** ” kapcsoló
bekapcsolt, akkor **kezelhető** .

    - **Módosítása** után, arról lelépve:
 Nem lehet **korábbi**, mint a **rendszeridő** .

Ha az, akkor pop-up üzenet "A tervezett eseményidő nem lehet korábbi,
mint az aktuális idő!" üzenetet ad.
 Nem lehet **korábbi**, mint az ábrán levő **megelőző** esemény **ideje** .

Ha az, akkor pop-up üzenet "A tervezett eseményidő nem lehet korábbi,
mint az előző eseményidő!" üzenetet ad.
(Ha az érkezési esemény az ábrán az első esemény, akkor ezt a mentő
eljárás fogja ellenőrizni.)
 Nem lehet a **grafikon** időszakánál **későbbi** .

Ha az, akkor popup ablakban **hibaüzenetet** ad: „A megadott idő a
grafikon időszakán kívül esik!”
 Az „ **Indulási** idő” az eredeti érkezési idő és az új érkezési idő

különbségével **módosul és ellenőrzésre kerül:**
 A **korrigált** **indulási** idő nem lehet a **grafikon** időszakánál

**későbbi** .
Ha az, akkor popup ablakban **hibaüzenetet** ad: „A megadott idő a
grafikon időszakán kívül esik!”
 A korrigált indulási idő későbbi-e, mint az előre küldendő vonat

indulási ideje.
Ha **nem**, akkor **üzenetet** ad: „A módosítás nem jelent előztetést,
végezzen további módosításokat!”.
A módosítás megmarad, a szerkesztés folytatható.
 A **grafikonon** az érkezési és az indulási és a további **esemény idők**

**módosulnak**, amit a kliens a mentésig tárol.
   - „ **Megállás** ” kapcsoló:

    - Csak akkor **kezelhető**, ha a vonat az adott szolgálati helyen **áthalad**
(’EsemTipId’ = 6).

    - **Bekapcsolása** után az „ **Érkezési** idő” felveszi az „Indulási idő” értékét (a
módosítottat is), a grafikonon **új** érkezési **vezérlőpálca** kerül beszúrásra az
adott szolgálati helyhez és a vezérlőpálcák **mozgathatók** lesznek.
Megtörténnek az „Érkezési idő” módosításánál leírt **ellenőrzések** .

    - **Kikapcsolása** után az „Érkezési idő” üres lesz, az indulási idő visszakapja
eredeti értékét, vagy a módosított érkezési időt és üzenetet ad: „Előztetés
nem tervezhető, az előzendő vonat áthalad!”
   - **„Indulási idő”** kezelése:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 139/526|



      - Ha a vonat **áthalad** a szolgálati helyen *(’EsemTipId’ = 6)*, akkor **nem**
kezelhető. Ha a „ **Megállás** ” kapcsoló bekapcsolt, akkor **kezelhető** .

      - **Módosítása** után, arról lelépve **ellenőrzésre** kerül, hogy:
 Nem lehet **korábbi**, mint a **rendszeridő** .

Ha az, akkor pop-up üzenet "A tervezett eseményidő nem lehet korábbi,
mint az aktuális idő!" üzenetet ad.
 Nem lehet a grafikon időszakánál későbbi.

Ha az, akkor popup ablakban **hibaüzenetet** ad: „A megadott idő a
grafikon időszakán kívül esik!”
 Nem lehet **korábbi**, mint az ábrán levő **megelőző** esemény **ideje** .

Ha az, akkor pop-up üzenet "A tervezett eseményidő nem lehet korábbi,
mint az előző eseményidő!" üzenetet ad.
 Az új **indulási idő** **későbbi-e**, mint az **előzésre kijelölt** vonat indulási

ideje.
Ha **nem**, akkor **üzenetet** ad: „A módosítás nem jelent előztetést,
végezzen további módosításokat!”.
A módosítás megmarad, a szerkesztés folytatható.

      - A grafikonon az **indulási** és a **további esemény idők** **módosulnak,** amit a
kliens a mentésig tárol.
`o` 100478 Bármelyik idő módosításkor, ha az **előreküldendő** (elsőnek kiválasztott) vonat
**érkezési** **VAGY** áthaladási ideje **korábbi,** mint az **előzendő** (másodiknak
kiválasztott) vonat **érkezési** ideje, akkor **hiba** : "Az előzendő vonat indulási ideje
korábbi, mint az előre küldendő vonat érkezési ideje, előztetés nem lehetséges."
Az üzenet **lekezelése** után a módosítás nem történik meg, a módosított adat **visszaáll**
az eredetire, a <Ment> nyomógomb nem kezelhető lesz ('ModJel' = FALSE), **mintha**
a < **Visszavon**     - lett volna kezelve.

`o` 107096 A kijelölés megfordítása ikon kezelésére:

      Ha a grafikonon már volt esemény is kiválasztva, akkor az megszűnik.

      - ”
Ha történt adatmódosítás is, akkor azok „törlésre kerülnek (lásd: <Visszavon>
kezelése) a panelen és a grafikonon is.
      - Meg változik a vonatok kijelölési sorrendje, azaz a korábban az " Előzendő
vonat " lesz az " Előre küldendő vonat ” .

      - Ellenőrzésre kerül, hogy az előztetés a megfordított sorrendben is lehetséges       - e.
Ha nem, akkor hibát ad.
      - A vezérlőpálcák az új kijelölési sorrendnek megfelelően kerülnek
megjelenítésre.
      - A panelen az adatok úgy jelennek meg, mintha " most " nyitották volna meg az új
kijelölés szerint.

- **Nyomógombok** a szerkesztőpanelen
`o` < **Visszavon**  
      - Akkor kezelhető, ha bármelyik előrejelzés **vonal módosult** .
      - A nyomógomb **kezelésekor** az előrejelzés vonalak az **eredeti** helyzetre állnak
vissza, nincs vezérlőpálca kiválasztva.

      Minden eseménynél a ’ModJel’ = FALSE lesz.
      - Szolgáltatáshívás és **adatmentés nem** történik, az üzemmód marad előztetés
szerkesztése.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 140/526|


    Az aktivitás figyelés újraindul.



`o` < **Mégsem**    - Kezelésekor **adatmentés nem** történik, meghívásra kerül a menetvonal foglalást
**feloldó** S_0151_38     - MenetvForgSzabFoglalasCommand (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás.
**Bemenő** adatok

    - **’MenetvonalIdLista’**     - a feloldani kívánt menetvonal ’MGMMenetvId’
adata. Egy elemű lista.

    - **’MunkahelyId’**

    - **’AbraId’**

    - **’FoglalasJelzo’** = „E” - elengedés, feloldás.

    - **’ModositasOk’** = NULL

    - ’epaiParamXmlDoc’
   - Sikeres **feloldás** után a grafikon kilép a „Előztetés tervezése” üzemmódból és a
grafikon **frissül,** a fókuszban és **kiválasztva** maradnak a kiválasztott előrejelzés
vonalak, a „funkciók” ikonsor marad a **szerkesztésen** .
`o` < **Ment** 
   - A nyomógomb akkor **kezelhető**, ha az előrejelzésben **módosítás** történt.
   - Kezelésekor **ellenőrzésre** lerül, hogy az adott állomáson **történt-e előztetés**,
azaz az előre küldendő vonat indulási ide korábbi, mint az előzendőé.
Ha nem, akkor a "Módosítás nem jelent előztetést végezzen további módosítást."
üzenetet ad ÉS nem történik szolgáltatás hívás, a vezérlés marad.
   - **Kezelésére** (vagy az aktivitást figyelő idősáv lejártakor) meghívásra kerül a
„Vonat előztetés és találkozás tervezése” *(* ***VonatEloztetesTalalkozasCommand*** *)*
szolgáltatás, ami a megfelelő ellenőrzések után elvégzi az előrejelzés
módosítását.

**Bemenő** adatok:

    - **’MunkahelyId’**     - Munkahely belső azonosítója.

    - **’AbraId’**     - Ábra belső azonosítója.

    - **’SzhId’**     - Szolgálati hely belső id.

    - **’MenetvLista’** json - minden esetben kételemű lista, akkor is, ha az egyik
menetvonalon nem történt módosítás.

 **’MenetvId’**

 **’ModOk’**

 Az előre küldendő (elsőnek kiválasztott) vonat esetén = 21.
 Az előzendő (másodiknak kiválasztott) vonat esetén = 22.
 **'EredetiErkIdo'**

A tényadat lekérdező szolgáltatás által kapott érkezési idő. *(Ha a*
*menetvonal eredetileg áthaladt, akkor NULL.)*
 **’UjErkIdo’**

Ha a menetvonalon **nem** történt **módosítás**, akkor **NULL** .
**Módosítás** esetén
 Ha az **előre küldendő** vonat:

 **Megálló** volt (van "EsemTipId":1 eseménye) **ÉS** rendkívüli

**áthaladása** lesz, akkor az UjErkIdo= **NULL** .
 **Megálló** volt (van "EsemTipId":1 eseménye) **ÉS** az is **marad**,

akkor az UjErkIdo a módosított, vagy az eredeti lesz.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 141/526|


 Ha **haladós** volt ("EsemTipId":6) **ÉS** az is **maradt**, akkor

UjErkIdo **nem** lesz **átadva** (nem NULL).
 Ha az **előzendő vonat:**

 **Megálló** volt (van "EsemTipId":1 eseménye) **ÉS** az is **maradt**

akkor az UjErkIdo a módosított, vagy az eredeti érkezési idő
lesz.
 **Haladós** volt (van "EsemTipId":6 eseménye) **ÉS** **megálló** lesz,

akkor az UjErkIdo a megadott érkezési idő lesz.
 **'EredetiIndIdo'**

A tényadat lekérdező szolgáltatás által kapott indulási vagy áthaladási
idő.
 **’UjIndIdo’**

Ha a menetvonalon **nem** történt **módosítás**, akkor **NULL** .
**Módosítás** esetén:
 Ha az **előre küldendő** vonat:

 **Megálló** volt (van "EsemTipId":1 eseménye) **ÉS** rendkívüli

**áthaladása** lesz, akkor az UjIndIdo a **módosított** (az eredeti
érkezési idővel felülírt, vagy a felhasználó által módosított)
**indulási** idő lesz.
 **Megálló** volt (van "EsemTipId":1 eseménye) **ÉS** az is **marad**,

akkor az UjIndIdo a módosított, vagy az eredeti **indulási** idő
lesz.
 **Haladós** volt ("EsemTipId":6) **ÉS** az is **marad**, akkor

UjIndIdo a módosított, vagy az eredeti **áthaladási** idő lesz.
 Ha az **előzendő** vonat:

 **Megálló** volt (van "EsemTipId":1 eseménye) **ÉS** az is **marad**

akkor az UjIndIdo a módosított, vagy az eredeti **indulási** idő
lesz.
 **Haladós** volt (van "EsemTipId":6 eseménye) **ÉS** **megálló** lesz,

akkor az UjIndIdo a módosított, vagy az eredeti **áthaladási** idő
lesz.
 **’SzhIndex’**   - az előztetés **szolgálati** helye **ÉS** a 'MenetvId' által

meghatározott 'szh_index' a tényadat lekérdező szolgáltatás által kapott
adatok alapján.

   - **epaiParamXmlDoc**
 - Az **eljárás ellenőrzi**, hogy:

   - Az adott **munkahely** a felhasználó által van **lefoglalva** .
Ha **UC_01_51_ERR_ERVENYTELEN_FOGLALAS** üzenetet ad vissza
„ **151005** : Érvénytelen munkahely foglalás, az adatok mentése sikertelen!”
üzenetet ad, nem történik meg a létrehozás.

   - A **menetvonal** nincs egy másik felhasználó által szerkesztésre **lefoglalva** .
Ha a szolgáltatás **UC_01_51_ERR_MENETV_FOGLALT** üzenetet ad
vissza, akkor „ **151010** : A menetvonalat más felhasználó szerkeszti,
módosítás nem lehetséges!” hibaüzenetet ad, nem történik meg a módosítás.
A feldolgozás leáll, kilép a szerkesztés üzemmódból, a menetvonal
kijelöltsége megmarad.

   - Az **előre** **küldendő** (elsőnek kiválasztott) **ÉS** az előzendő (másodiknak
kiválasztott) vonatnak **sem** lehet MGM **tény** **érkezési** eseménye az adott

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 142/526|


szolgálati helyre és mind a két vonathoz kell legyen előrejelzés adat
(MGM_TenyEsem.esem_tipus = „B”).
Ha a szolgáltatás **UC_01_51_ERR_TENYADAT_LETEZIK** üzenetet ad
vissza, akkor „ **151026** : Előrejelzés nem módosítható, az adatok
módosultak.” hibaüzenetet ad, nem történik meg a módosítás. A feldolgozás
leáll, kilép a szerkesztés üzemmódból, a menetvonal kijelöltsége megmarad.

      - 100544 Az előztetés nem lehet a másodlagos vonat kiindulási szolgálati helye.
Ha a szolgáltatás **UC_05_51_ERR_HELYBOL_INDULO_VONAT**
üzenetet ad vissza, akkor „ **151041** : A vonat kiindulási állomásán előztetés,
vonattalálkozás nem lehetséges.” üzenetet ad.
      - Sikeres **mentés** után a grafikon **kilép** a szerkesztő üzemmódból és a grafikon
**frissül,** a fókuszban és **kiválasztva** maradnak a kiválasztott előrejelzés vonalak,
a „funkciók” ikonsor marad a **szerkesztésen** .

`o` **Felhasználói aktivitás lejártakor**
      - 100302 Ha **popup üzenet** van a grafikonon **ÉS** a felhasználó az **aktivitási** figyelő
**lejártáig** nem kezelte le azt, akkor az üzenet **automatikusan** **bezárásra** kerül, a
mentő **szolgáltatás** hívása **nélkül** *(a megerősítő üzenetet úgy tekintjük, mintha*
*nemleges választ adott volna a felhasználó)* a grafikon mentés nélkül **kilép** az
„Előrejelzés módosítása” üzemmódból, meghívásra kerül a menetvonal
foglalását feloldó **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás **’FoglalasJelzo’** = „E” elengedés, feloldás paraméterrel, a menetrendi vonal **kijelölése** **megmarad**, a
többi menetvonal kijelölhető lesz, a „funkciók” ikonsor marad a „ **Szerkesztés** ”
ikonon.

      - **Ellenőrzi**, hogy az előztetés szolgálati helyén megtörtént-e az **előztetés** tervezés,
azaz az elsőnek kiválasztott vonat elrejelzett indulási/áthaladási ideje korábbi,
mint a másodiknak kiválasztott vonat indulási ideje.

      - Ha **igen**, akkor **meghívásra** kerül a
**ForgSzabMuveletElokeszitesCommand** szolgáltatás a < **Ment**        nyomógombnál leírt paraméterekkel, azzal a kitétellel, hogy ha a
szolgáltatás **hibaüzenetet** ad vissza az **nem** lesz **figyelembe** véve és
**meghívásra** kerül a menetvonal foglalását feloldó
**MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás (lásd <Mégsem>
nyomógomb leírásnál).

      - Ha **nem**, akkor **nem** kerül meghívásra a
ForgSzabMuveletElokeszitesCommand szolgáltatás, helyette a
**MenetvForgSzabFoglalasCommand** szolgáltatás kerül meghívásra, 'E' elengedés paraméterrel.

**[88979]** **„Vonattalálkozás tervezése” funkció**

A vonattalálkozás tervezés **két ellentétes** irányú előrejelzés vonal, azon belül egy
**vezérlőpálca** (esemény) kiválasztása után a vezérlőpálca bal egérgombbal **megragadásával**,
annak az időtengellyel párhuzamos **mozgatásával** VAGY a szerkesztő **panelen** a dátumok és
az idők **módosításával**, egy előrejelzés vonalnál rendkívüli **áthaladás**, rendkívüli **megállás**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 143/526|


rögzítésével, illetve **tartózkodási** idő módosításával (a dátumok és az idők módosításával)
végezhető el.

**2.2.3.9.5.1** **Megjelenés, elérés**

A funkció csak **Irányítói** üzemmódban érhető el **két ellentétes** irányú előrejelzés vonal
kijelölése után a „ **Szerkesztés** ” menüsor „ **Vonattalálkozás** ” **ikon** kezelésével (lásd
„Vonattalálkozás ikon” leírás).

- A grafikon **„Vonattalálkozás tervezése”** üzemmódra vált át, megjelenik az ehhez tartozó
**fejléc** és a **szerkesztő** panel.

107096

- **Fejlécben** megjelenik az „ **Vonattalálkozás tervezése** ” szöveg, az **ábra** megnevezése, a
felhasználói **aktivitást** figyelő idősáv, a < **Ment** >, < **Visszavon**   - és a < **Mégsem**   nyomógombok, valamint a szerkesztéshez szükséges **ikonok** (nagyítások, kicsinyítések,
idővonalra ugrás, alapértelmezett kameranézet).

- A **szerkesztőpanelen** megjelennek a következő adatelemek:
`o` „ **Szolgálati hely** ” rövid neve megjelenítő mező. **Üres** .
`o` „ **Várakozó vonat** ” megjelenítő mező. A **másodiknak** kiválasztott előrejelzés vonal
első **vonatazonosítója** ( ’ VonatszamIrszam ’ ) + ’ / ’ + vonat indulási dátuma

’ ’

`o` „ **Érkezési idő** ” dátum és idő beviteli mező. **Üres** .
`o` „ **Indulási idő** ” dátum és idő beviteli mező. **Üres** .
`o` „ **Megállás** ” kapcsoló, ami kikapcsolt.

`o` 107096 kijelölés megfordítása ikon. Az előrejelzés vonalak kijelölési
sorrendjének, ezzel azok „szerepének ” megfordítása.
`o` „ **Bevárandó vonat** ” megjelenítő mező. Az **elsőnek** kiválasztott előrejelzés vonal
első **vonatazonosítója** ( ’ VonatszamIrszam ’ ) + ’ / ’ + vonat indulási dátuma

’ ’
( IndDatum ) éééé.hh.nn formában. [#103703] .
`o` „ **Érkezési idő** ” dátum és idő beviteli mező. Üres.
`o` „ **Áthaladás** ” kapcsoló, ami kikapcsolt.
`o` „ **Indulási idő** ” dátum és idő beviteli mező. Üres.

- A **grafikonon** a kiválasztott előrejelzés vonalak közül a **másodiknak** kiválasztott
(„ **várakozó** ”) előrejelzés vonalon azokban a szolgálati **hely** és **esemény** ***(’EsemJelleg’ =***
***"E")*** **metszéspontokban**, ahol a „ **várakozó** ” vonat előrejelzett **indulási** ideje **korábbi**,
mint a „ **bevárandó** ” vonat előrejelzett **érkezési, vagy áthaladási** ideje, megjelennek a
**vezérlőpálcák**, a **vonatszám** **zöld** betűszínnel jelenik meg **.**
Az **elsőnek** kiválasztott („bevárandó”) menetvonalon **nem** jelennek meg a vezérlőpálcák,
de rá lehet kattintani.

**2.2.3.9.5.2** **Működés**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** száma (’VonatszamIrszam’) + ’ / ’ + vonat indulási
dátuma (’IndDatum’) éééé.hh.nn formában. Több vonatazonosító
esetén vesszővel elválasztva jeleníti meg őket a kliens. [#103703]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 144/526|



- A **grafikonon** egy előrejelzés vonal **kiválasztásakor**, **váltáskor** a kiválasztott
**előrejelzés** vonalon azokban a szolgálati hely és esemény *(’EsemJelleg’ = "E")*
**metszéspontokban**, ahol a „ **várakozó** ” (másodiknak kijelölt) vonat előrejelzett
**indulási** /áthaladási ideje *(’EsemTipId’ = 2 vagy 6)* **korábbi**, mint a „ **bevárandó** ” (elsőnek
kijelölt) vonat előrejelzett **érkezési** /áthaladási ideje *(’EsemTipId’ = 1 vagy 6)*, megjelennek
a **vezérlőpálcák**, a **vonatszám** **zöld** betűszínnel jelenik meg. A **másik** előrejelzés vonal
kijelölése megszűnik, azon eltűnnek a vezérlőpálcák, a **vonatszám** **fehér** betűszínű lesz.

- Egy **vezérlőpálcára** kattintva a kliens **ellenőrzi**, hogy az ábrán **van-e** olyan **más**
szolgálati hely, ahol a két előrejelzés vonal közül bármelyiknél történt vonattalálkozás
tervezés *(az esemény* ***módosítás jele <> NULL*** *)* .
Ha van ilyen, akkor "Vonattalálkozás tervezése **folyamatban** egy másik szolgálati
helyen!" üzenetet ad és a vezérlőpálca nem lesz kijelölt.
A folyamatban lévő előrejelzés folytatható, ha az adott szolgálati helyhez (ahol az
esemény módosítás jele <> NULL) tartozó vezérlőpálcát jelölnek ki.

- A grafikonon az egyik **vezérlőpálcára** **kattintáskor** (kijelölésekor) a **szerkesztőpanelen**
az adatelemek az adott szolgálati helyre vonatkozó események adataival **kitöltésre**
kerülnek a ’TenyadatokQuery’ **’Esemenyek’** lista alapján:
`o` **„Szolgálati** **hely”**  - az **esemény** szolgálati helyének **rövid** neve. *(’SzhId’ alapján a*
*tengely adatokból ’SzhRovidNev’.)*
`o` **„** **Várakozó vonat”**  - a **másodiknak** kiválasztott előrejelzés vonal nak a kiválasztott
esemény által meghatározott **vonatazonosítója** ( ’ VonatszamIrszam ’ ) + ’ / ’ + vonat
indulási dátuma ( ’ IndDatum ’ ) éééé.hh.nn formában. Ha a vonatnál nincs kiválasztva
esemény akkor az utoljára kiválasztott esemény alapján jelenik meg. [#103703]
`o` **„Érkezési idő”**  - a **másodiknak** kiválasztott (várakozó) előrejelzés vonal adott
szolgálati helyéhez tartozó **érkezési** eseményének *(’EsemTipId’ = 1)* ideje *(’EsemIdo’*
*dátum idő)* .
Ha a vonat az adott szolgálati helyen **áthalad** *(’EsemTipId’ = 6 eseménye van)*, akkor
**nem jelenik meg** .
`o` **„Indulási idő”**  - a **másodiknak** kiválasztott (várakozó) előrejelzés vonal adott
szolgálati helyéhez tartozó **indulási** vagy **áthaladási** eseményének *(’EsemTipId’ = 2*
*vagy 6)* ideje *(’EsemIdo’ dátum idő)* .
`o` „ **Megállás** ” kapcsoló - a **másodiknak** kiválasztott (várakozó) vonat rendkívüli
megállásának jelzése kapcsoló, ami alapértelmezetten **kikapcsolt** .
Akkor **kezelhető**, ha a **másodiknak** kiválasztott (várakozó) vonatnak eredetileg
**áthaladási eseménye** van *(’EsemTipId’ = 6)* .
Ha az adott szerkesztési **folyamatban** lett bekapcsolva, akkor a **módosított** értéknek
megfelelően bekapcsolt és kikapcsolható.
`o` **„** **Bevárandó vonat”**  - az **elsőnek** kiválasztott előrejelzés vona lnak a kiválasztott
esemény által meghatározott **vonatazonosítója** ( ’ VonatszamIrszam ’ ) + ’ / ’ + vonat
indulási dátuma ( ’ IndDatum ’ ) éééé.hh.nn formában. Ha a vonatnál nincs kiválasztva
esemény akkor az utoljára kiválasztott esemény alapján jelenik meg. [#103703] .
`o` **„Érkezési idő”**  - az **elsőnek** kiválasztott (bevárandó) előrejelzés vonal adott
szolgálati helyéhez tartozó érkezési eseményének *(’EsemTipId’ = 1* *)* ideje *(’EsemIdo’*
*dátum idő)* .
Ha a vonat az adott szolgálati helyen **áthalad** *(’EsemTipId’ = 6 eseménye van)*, akkor
**nem jelenik meg** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 145/526|


`o` **„Indulási idő”**  - az **elsőnek** kiválasztott (bevárandó) előrejelzés vonal adott
szolgálati helyéhez tartozó indulási vagy áthaladási eseményének *(’EsemTipId’ = 2*
*vagy 6)* ideje *(’EsemIdo’ dátum idő)* .
`o` „ **Áthaladás** ” kapcsoló - az **elsőnek** kiválasztott (bevárandó) vonat rendkívüli módon
áthalad jelzése kapcsoló, ami kikapcsolt.
Akkor **kezelhető**, ha az **elsőnek** kiválasztott (bevárandó) vonatnak eredetileg
**érkezési eseménye is** *(’EsemTipId’ <> 6)* van.
Ha az adott szerkesztési folyamatban lett bekapcsolva, akkor a módosított értéknek
megfelelően bekapcsolt és kikapcsolható.

- **Módosítás** a **grafikonon** a vezérlőpálcákkal
`o` Ha a „ **várakozó** vonat” (másodiknak kiválasztott) az adott szolgálati helyen **áthalad**
*(’EsemTipId’ = 6)*, akkor **nincs** szerkesztési lehetőség a grafikonon, azt a szerkesztő
**panelen** kell elvégezni.
**Bármely** előrejelzés vonalhoz tartozó vezérlőpálca **mozgatása** után, annak
**elengedésekor** „Vonattalálkozás nem tervezhető, a várakozó vonat áthalad! A
szerkesztő panelen rögzítsen rendkívüli megállást!” **üzenetet** ad. A kijelölések
megmaradnak, a szerkesztőpanel kitöltésre kerül. Az **aktivitás** figyelés **újraindul** .
A **„Megállás”** kapcsoló működése a „Módosítás szerkesztőpanelen” fejezetben.

`o` Ha a „ **várakozó** vonat” (másodiknak kiválasztott) az adott szolgálati helyen **megáll**
*(’EsemTipId’ = 2)*, vagy **bekapcsolták** a „ **Megállás** ” kapcsolót *(’EsemTipId’ = 6)*, a
vonat adatainak **szerkesztése** az előrejelzés vonal kijelölése után:
      - **Érkezési** vezérlőpálcájának mozgatásakor az **indulási** idő és a **további**
eseményidők is **módosulnak** .

      - **Nem** mozgatható az adott előrejelzés vonal **előző eseményénél** és az
**idővonalnál** **korábbi** időre.

      - A vezérlőpálca **elengedése** után, ha az **új** **érkezési** idő:
 Az **idővonal** **előtt** van, „A tervezett esemény idő nem lehet korábbi,

mint az aktuális idő!” popup **üzenet** jelenik meg. A grafikonon és a
szerkesztőpanelen nem történik módosítás.
 **Későbbi**, mint a **bevárandó** (elsőnek kiválasztott) vonat **érkezési** vagy

**áthaladási** ideje, akkor üzenetet ad: „A várakozó vonat érkezési ideje
nem lehet későbbi, mint a bevárandó vonat érkezési/áthaladási ideje.”
 **Későbbi**, mint a **bevárandó** (elsőnek kiválasztott) vonat **indulási** vagy

**áthaladási** **ideje**, akkor üzenetet ad: „A módosítás nem jelent
vonattalálkozást, végezzen további módosításokat!”. A módosítás
megmarad, a szerkesztés folytatható.

      - A **szerkesztőpanelen** az „Érkezési idő” és az „Indulási **idő”** adatbeviteli
mezők a grafikon szerinti értékre **módosulnak** .
 Az utána levő események előrejelzés ideje kiszámításra kerül, amit a

kliens a mentésig tárol.
 Az **érkezési** esemény és a módosított **indulás** esemény ’ModJel’ értéke

= TRUE lesz. (Ezt az eseményt kell majd a szolgáltatásnak átadni.)

      - Az **aktivitás** figyelés **újraindul** .

      - **Indulási** vezérlőpálcájának mozgatásakor a további eseményidők is
módosulnak.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 146/526|



    - **Nem** mozgatható az adott előrejelzés vonal **előző** eseményénél és az
idővonalnál **korábbi** időre.

    - A vezérlőpálca **elengedése** után, ha az **új indulási** idő:
 Az **idővonal** **előtt** van, „A tervezett esemény idő nem lehet korábbi,

mint az aktuális idő!” popup **üzenet** jelenik meg. A g **rafikonon és a**
szerkesztőpanelen nem történik módosítás.
 **Korábbi,** mint a **bevárandó** vonat **érkezési vagy áthaladási** **ideje**,

akkor üzenetet ad: „A módosítás nem jelent vonattalálkozást, végezzen
további módosításokat.”. A módosítás megmarad, a szerkesztés
folytatható.

    - A **szerkesztőpanel** „Indulási **idő”** adatbeviteli mező a grafikon szerinti
értékre **módosul** .
 Az utána levő események előrejelzés ideje kiszámításra kerül, amit a

kliens a mentésig tárol.
 Az **indulási** esemény ’ModJel’ értéke = TRUE lesz. (Ezt kell majd a

szolgáltatásnak átadni.)

    - Az **aktivitás** figyelés **újraindul** .

`o` A „ **bevárandó** ” (elsőnek kiválasztott) vonat:
   - **Érkezési** vezérlőpálcájának mozgatásakor az **indulási** vezérlőpálca és a **további**
eseményidők is **módosulnak** .

    - **Nem** mozgatható az adott előrejelzés vonal **előző** eseményénél és az
idővonalnál **korábbi** időre.

    - A vezérlőpálca **elengedése** után, ha az **új érkezési idő** :
 Az **idővonal** **előtt** van, „A tervezett esemény idő nem lehet a korábbi,

mint az aktuális idő!” popup **üzenet** jelenik meg. A grafikonon és a
szerkesztőpanelen nem történik módosítás.
 **Későbbi**, mint a „ **várakozó”** (másodiknak kiválasztott) vonat **indulási**

ideje, akkor üzenetet ad: „A módosítás nem jelent vonattalálkozást,
végezzen további módosításokat.”. A módosítás megmarad, a
szerkesztés folytatható.

    - Ha az új érkezési idő hatására **módosuló** **új** **indulási** idő vagy az új
**áthaladási** idő **korábbi**, mint a **várakozó** (másodiknak kiválasztott) vonat
**érkezési** ideje, akkor üzenetet ad: „A módosítás nem jelent vonattalálkozást,
végezzen további módosításokat.”. A módosítás megmarad, a szerkesztés
folytatható.

    - A **szerkesztőpanel** az „Érkezési idő” és az „Indulási **idő”** adatbeviteli mező
a grafikon szerinti értékre **módosul** .
 Az utána levő események előrejelzés ideje kiszámításra kerül, amit a

kliens a mentésig tárol.
 A szolgálati helyhez tartozó **érkezési** és az **indulási** esemény ’ModJel’

értéke = TRUE lesz. (Ezt kell majd a szolgáltatásnak átadni.)

    - Az **aktivitás** figyelés **újraindul** .

   - **Indulási** vagy **áthaladási** vezérlőpálcájának mozgatásakor a további
eseményidők is módosulnak.

    - **Nem** mozgatható az adott előrejelzés vonal **előző** eseményénél és az
idővonalnál **korábbi** időre.

    - A vezérlőpálca **elengedése** után, ha az **új indulási/áthaladási** idő:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 147/526|


 Az **idővonal** **előtt** van, „A tervezett esemény idő nem lehet korábbi,

mint az aktuális idő!” popup **üzenet** jelenik meg. A grafikonon és a
szerkesztőpanelen nem történik módosítás.
 **Korábbi**, mint **„várakozó”** (másodiknak kiválasztott) vonat **érkezési**

ideje, akkor üzenetet ad: „A módosítás nem jelent vonattalálkozást,
végezzen további módosításokat.”. A módosítás megmarad, a
szerkesztés folytatható.

      - A **szerkesztőpanelen** az „Indulási **idő”** adatbeviteli mező a grafikon szerinti
értékre **módosul** .
 Az utána levő események előrejelzés ideje kiszámításra kerül, amit a

kliens a mentésig tárol.
 A szolgálati helyhez tartozó **indulási** /áthaladási esemény **’ModJel’**

értéke = TRUE lesz. (Ezt kell majd a szolgáltatásnak átadni.)

      - Az **aktivitás** figyelés **újraindul** .

- **Módosítás szerkesztőpanelen**
`o` „ **Várakozó** vonat”
      - **„Érkezési idő”** kezelése:

      - Ha a vonat **áthalad** a szolgálati helyen *(’EsemTipId’ = 6)*, akkor **nem** **jelenik**

meg.

      - Ha a vonat a szolgálati helyen **megáll** *(’EsemTipId’ <> 6)*, vagy a
„ **Megállás** ” kapcsoló **bekapcsolt**, akkor megjelenik.

      - **Módosítása** után, arról lelépve:
 Az **aktivitás** figyelés újraindul.
 Nem lehet **korábbi**, mint a **rendszeridő** .

Ha az, akkor "A tervezett eseményidő nem lehet korábbi, mint az
aktuális idő!" **üzenetet** ad.
 Nem lehet **korábbi**, mint az ábrán levő **megelőző** esemény **ideje** .

Ha az, akkor "A tervezett eseményidő nem lehet korábbi, mint az előző
eseményidő!" **üzenetet** ad.
*(Ha az érkezési esemény az ábrán az első esemény, akkor ezt a mentő eljárás*
*fogja ellenőrizni.)*
 Nem lehet a **grafikon** időszakánál **későbbi** .

Ha az, akkor **hibaüzenetet** ad: „A megadott idő a grafikon időszakán
kívül esik!”
 Az „ **Indulási** idő” az eredeti érkezési idő és az új érkezési idő

különbségével **módosul és ellenőrzésre kerül:**
 A korrigált indulási idő nem lehet a grafikon időszakánál későbbi.

Ha az, akkor „A megadott idő a grafikon időszakán kívül esik!”
**hibaüzenetet** ad.
 A **korrigált indulási** idő nem lehet **korábbi**, mint a **„bevárandó”**

(elsőnek kiválasztott) vonat **érkezési/áthaladási** ideje.
Ha **az**, akkor: „A módosítás nem jelent előztetést, végezzen további
módosításokat!” figyelmeztető **üzenetet** ad.
A módosítás megmarad, a szerkesztés folytatható.

      - A **grafikonon** az érkezési és az indulási és a további esemény idők
**módosulnak**, amit a kliens a mentésig tárol.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 148/526|



    - A szolgálati **helyhez** tartozó **érkezési** és a módosuló **indulási** esemény
**’ModJel’** értéke = TRUE lesz. (Ezt kell majd a szolgáltatásnak átadni.)

   - „ **Megállás** ” kapcsoló

    - Akkor **kezelhető**, ha a „várakozó” (másodiknak kijelölt) vonat az adott
szolgálati helyen **áthalad** *(’EsemTipId’ = 6)* .

    - **Bekapcsolása** után:
 Az „ **Érkezési** **idő** ” megjelenik és felveszi az „Indulási idő” **értékét** (a

módosítottat is). Az **indulási** idő **nem** módosul automatikusan.
 **Megtörténnek** az „Érkezési idő” módosításánál leírt **ellenőrzések** .
 A grafikonon **új** érkezési **vezérlőpálca** kerül beszúrásra és az kezelhető.

    - **Kikapcsolása** után:
 Az „ **Érkezési** idő” **eltűnik**, az **indulási** idő **visszakapja** **eredeti** értékét

és **üzenetet** ad: „Vonattalálkozás nem tervezhető, a várakozó vonat
áthalad!”
 A grafikonon a beszúrt **érkezési** **vezérlőpálca** **törlésre** kerül.
   - **„Indulási idő”** kezelése:

    - Ha a vonat **áthalad** a szolgálati helyen *(’EsemTipId’ = 6)*, akkor **nem**
kezelhető. Ha a „ **Megállás** ” kapcsoló bekapcsolt, akkor **kezelhető** .

    - **Módosítása** után, arról lelépve **ellenőrzésre** kerül, hogy az új indulási idő:
 Nem lehet **korábbi,** mint a **rendszeridő** .

Ha az, akkor "A tervezett eseményidő nem lehet korábbi, mint az
aktuális idő!" üzenetet ad. Az eredeti idő kerül visszaírásra.
 Nem lehet **korábbi**, mint az ábrán levő **megelőző** esemény **ideje** .

Ha az, akkor "A tervezett eseményidő nem lehet korábbi, mint az előző
eseményidő!" üzenetet ad.
 **Nem** lehet a grafikon **időszakánál** **későbbi** .

Ha az, akkor „A megadott idő a grafikon időszakán kívül esik!”
**hibaüzenetet** ad.
 Nem lehet **korábbi**, mint a **„bevárandó”** vonat **érkezési** /áthaladási

ideje.
Ha **az**, akkor „A módosítás nem jelent vonattalálkozást, végezzen
további módosításokat!” üzenetet ad.
A módosítás megmarad, a szerkesztés folytatható.

    - A grafikonon az **indulási** és a **további esemény idők** **módosulnak,** amit a
kliens a mentésig tárol.

    - A szolgálati **helyhez** tartozó **indulási** esemény **’ModJel’** értéke = TRUE
lesz. (Ezt kell majd a szolgáltatásnak átadni.)

`o` **Bevárandó** vonat
   - **„Érkezési idő”** kezelése:

    - Ha a vonat **áthalad** a szolgálati helyen *(’EsemTipId’ = 6)*, akkor **nem** jelenik

meg.

    - Ha a vonat a szolgálati helyen **megáll** *(’EsemTipId’ <> 6)*, akkor a
**módosítása** után, arról lelépve ellenőrzésre kerül:
 Nem lehet **korábbi**, mint a **rendszeridő** .

Ha az, akkor "A tervezett eseményidő nem lehet korábbi, mint az
aktuális idő!" **üzenetet** ad.
 Nem lehet **korábbi**, mint az ábrán levő **megelőző** esemény **ideje** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 149/526|


Ha az, akkor "A tervezett eseményidő nem lehet korábbi, mint az előző
eseményidő!" **üzenetet** ad.
(Ha az érkezési esemény az ábrán az első esemény, akkor ezt a mentő
eljárás fogja ellenőrizni.)
 Nem lehet a **grafikon** időszakánál **későbbi** .

Ha az, akkor **hibaüzenetet** ad: „A megadott idő a grafikon időszakán
kívül esik!”
 Az „ **Indulási** idő” az eredeti érkezési idő és az új érkezési idő

különbségével **módosul és ellenőrzésre kerül:**
 A korrigált indulási idő nem lehet a grafikon időszakánál későbbi.

Ha az, akkor „A megadott idő a grafikon időszakán kívül esik!”
**hibaüzenetet** ad.
 Az új **indulási** idő nem lehet **korábbi**, mint a **„várakozó”** vonat

**érkezési** ideje.
Ha **az**, akkor: „A módosítás nem jelent vonattalálkozást, végezzen
további módosításokat!” figyelmeztető **üzenetet** ad
A módosítás megmarad, a szerkesztés folytatható.

   - A **grafikonon** az érkezési és az indulási és a további esemény idők
**módosulnak**, amit a kliens a mentésig tárol.

   - A szolgálati **helyhez** tartozó **érkezési** és a módosuló **indulási** esemény
**’ModJel’** értéke = TRUE lesz. (Ezt kell majd a szolgáltatásnak átadni.)

 - „ **Áthaladás** ” kapcsoló

   - Akkor **kezelhető**, ha a „bevárandó” (elsőnek kiválasztott) vonat az adott
szolgálati helyen **megáll** *(’EsemTipId’ <> 6)* .

   - **Bekapcsolása** után **meghívásra** kerül az S_0151_49   **ForgSzabMuveletEllenorzesQuery**     - Forgalomszabályozási művelet
ellenőrzése (core.usp_0151_checkForgSzabMuvelet) szolgáltatás, amely
ellenőrzi, hogy az adott szolgálati helyen a vonathoz rendkívüli áthaladás
rögzíthető-e.
 **Bemenő** adatok:

 **’MgmMvId’**     - a kijelölt (kapcsoló által meghatározott) menetvonal

MGM belső azonosítója.
 **’SzhId’**     - a kijelölt szolgálati hely belső azonosítója.
 **’SzhIndex’**     - a kijelölt szolgálati hely (kapcsoló által
meghatározott) vft-n belüli sorszáma.
 **’ModOk’**     - a módosítás oka = „A” - rendkívüli áthaladás.
 **’Megerositve’**     - annak a jelzése, hogy a felhasználó a vonatkozó

megerősítő üzenetet elfogadta, mentéskor már nem kell ellenőrizni
bizonyos feltételeket = FALSE.
(Alapértelmezett FALSE az értéke, de egy a szolgáltatástól kapott
megerősítő üzenet elfogadása esetén TRUE lesz. Később a
mentéskor ezt a jelzőt az előrejelzés módosítás előkészítő
eljárásnak át kell adni.)
 Ha a **szolgáltatás** :

 UC_01_51_ERR_ATHALADAS_IRANYVALTAS „ **151015** :
Irányváltás miatt a rendkívüli áthaladás nem lehetséges!” VAGY

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 150/526|


 UC_01_51_ERR_ATHALAD_ELTERO_OSSZEALLITAS

„ **151018** : Eltérő vonatösszeállítás miatt a rendkívüli áthaladás nem
lehetséges!” **üzenetet ad** vissza,
akkor a kapcsoló **kikapcsolt** állapotba kerül, **nem** történik meg a
rendkívüli áthaladáshoz szükséges **adatmódosítás** .
 Ha a szolgáltatás:

 UC_01_51_CONF_SZEM_VON_ATHALAD „ **151016** :
Személyszállító vonat! Tényleg rendkívüli módon áthalad?”
VAGY
 UC_01_51_CONF_ATHALADAS_OSSZEALLITAS_KELL

„ **151017** : A szolgálati helyen vonat-összeállítás közlés kötelező.
Valóban rendkívüli áthaladást tervez?” **üzenetet ad** vissza *(* *[95621]* *ez*
*az üzenet csak akkor jöhet, ha az előrejelzés készítés nem az aktuális*
*összeállítás végéig történik)*,
akkor a hozzájuk tartozó **megerősítő** üzenetet adja.
< **Igen**      - esetén
 Az **érkezési** idő törlésre kerül (üres lesz).
 Az **indulási** idő módosul az érkezési idő értékére.
 A **grafikonon** az érkezési vezérlőpálca eltűnik, az indulási idő és a

következő események módosulnak.
 Az eseményhez a **’Megerositve’** jelző értéke TRUE lesz, amit az

eseményhez a mentésig tárol.
< **Nem**      - esetén a kapcsoló **kikapcsolt** állapotba kerül, **nem** történik meg
a rendkívüli áthaladáshoz szükséges **adatmódosítás** .
 Az „ **Érkezési** idő” üres és védett lesz.
 Az „ **Indulási** idő” felveszi az „Érkezési idő” **értékét** (a módosítottat

is), az **érkezési** idő **üres** lesz és nem kezelhető. A grafikonon az
érkezési **vezérlőpálca** eltűnik.
 Ha az új **áthaladási** (indulási) idő **későbbi**, mint a **„várakozó”** vonat

**indulási** ideje, akkor: „A módosítás nem jelent előztetést, végezzen
további módosításokat!” figyelmeztető **üzenetet** ad.
A módosítás megmarad, a szerkesztés folytatható.
 Ha az új **áthaladási** (indulási) idő **korábbi**, mint a **„várakozó”** vonat

**érkezési** ideje, akkor: „A módosítás nem jelent előztetést, végezzen
további módosításokat!” figyelmeztető **üzenetet** ad.
A módosítás megmarad, a szerkesztés folytatható.
 Az „ **Áthaladás** ” kapcsoló **kikapcsolása** után az „Érkezési idő” és az

„Indulási idő”, valamint a további eseményidők **visszakapják** az
**eredeti** értéküket, az „Érkezési idő” módosítható lesz, az érkezési
vezérlőpálca újra megjelenik.

 - **„Indulási idő”** kezelése

   - Ha a vonat **áthalad** a szolgálati helyen *(’EsemTipId’ = 6)*, akkor **nem**
kezelhető.

   - **Módosítása** után, arról lelépve **ellenőrzésre** kerül, hogy:
 **Nem lehet korábbi**, mint a **rendszeridő** .

Ha az, akkor "A tervezett eseményidő nem lehet korábbi, mint az
aktuális idő!" üzenetet ad. Az eredeti idő kerül visszaírásra.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 151/526|


 **Nem lehet korábbi**, mint az ábrán levő **megelőző** esemény **ideje** .

Ha az, akkor "A tervezett eseményidő nem lehet korábbi, mint az előző
eseményidő!" üzenetet ad.
 **Nem** lehet a grafikon **időszakánál** **későbbi** .

Ha az, akkor „A megadott idő a grafikon időszakán kívül esik!”
**hibaüzenetet** ad.
 Ha a vonat megálló *(’EsemTipId’ <> 6)*, akkor **nem lehet korábbi**, mint

a **várakozó** (másodiknak kiválasztott) vonat **érkezési** ideje.
Ha **az**, akkor „A módosítás nem jelent vonattalálkozást, végezzen
további módosításokat!” üzenetet ad.
A módosítás megmarad, a szerkesztés folytatható.
 Ha a vonat áthaladó *(’EsemTipId’ = 6)*, akkor **nem lehet korábbi**, mint a

**várakozó** (másodiknak kiválasztott) vonat **érkezési** ideje **ÉS** nem lehet
**későbbi**, mint a **várakozó** (másodiknak kiválasztott) vonat **indulási**
ideje.
Ha **az**, akkor „A módosítás nem jelent vonattalálkozást, végezzen
további módosításokat!” üzenetet ad.
A módosítás megmarad, a szerkesztés folytatható.

      - A grafikonon az **indulási** és a **további esemény idők** **módosulnak,** amit a
kliens a mentésig tárol.

      - A szolgálati **helyhez** tartozó **indulási** esemény **’ModJel’** értéke = TRUE
lesz. (Ezt kell majd a szolgáltatásnak átadni.)

`o` 102793 Bármelyik idő módosításakor (akár vezérlőpálcával, akár panelen), ha a
**bevárandó** (elsőnek kiválasztott) vonat **érkezési** **VAGY** áthaladási ideje **korábbi,**
mint a **várakozó** (másodiknak kiválasztott) vonat **érkezési** ideje, akkor **hiba** : "A
várakozó vonat érkezési ideje nem lehet későbbi, mint a bevárandó vonat
érkezési/áthaladási ideje."
Az üzenet **lekezelése** után a módosítás nem történik meg, a módosított adat **visszaáll**
az eredetire, a <Ment> nyomógomb nem kezelhető lesz ('ModJel' = FALSE), **mintha**
a < **Visszavon**     - lett volna kezelve.

`o` 107096 A kijelölés megfordítása ikon kezelésére:

      Ha a grafikonon már volt esemény is kiválasztva, akkor az megszűnik.

      - ”
Ha történt adatmódosítás is, akkor azok „törlésre kerülnek (lásd: <Visszavon>
kezelése) a panelen és a grafikonon is.
      - Meg változik a vonatok kijelölési sorrendje, azaz a korábban az " Várakozó
vonat " lesz az " Bevárandó vonat ” .

      Ellenőrzésre kerül, hogy a vonattalálkozás a megfordított sorrendben is

              lehetséges e. Ha nem, akkor hibát ad.
      - A vezérlőpálcák az új kijelölési sorrendnek megfelelően kerülnek
megjelenítésre.
      - A panelen az adatok úgy jelennek meg, mintha " most " nyitották volna meg az új
kijelölés szerint.

- **Nyomógombok** a szerkesztőpanelen
`o` < **Visszavon**  
      - Akkor kezelhető, ha bármelyik előrejelzés **vonal módosult** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 152/526|


   - A nyomógomb **kezelésekor** az előrejelzés vonalak az **eredeti** helyzetre állnak
vissza, nincs vezérlőpálca kiválasztva.

   Minden eseménynél a ’ModJel’ = FALSE lesz.
   - Szolgáltatáshívás és **adatmentés** **nem** történik, az üzemmód marad
vonattalálkozás tervezése.

   Az aktivitás figyelés újraindul.

`o` < **Mégsem**    - Kezelésekor **adatmentés nem** történik, **meghívásra** kerül a menetvonal
foglalást **feloldó** MenetvForgSzabFoglalasCommand (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás.
**Bemenő** adatok

    - **’MenetvonalIdLista’**     - a feloldani kívánt menetvonalak ’MGMMenetvId’

adata. Kételemű lista.

    - **’MunkahelyId’**

    - **’AbraId’**

    - **’FoglalasJelzo’** = „E” - elengedés, feloldás.

    - **’ModositasOk’** = NULL

    - ’epaiParamXmlDoc’
   - Sikeres **feloldás** után a grafikon kilép a „Vonattalálkozás tervezése”
üzemmódból és a grafikon **frissül,** a fókuszban és **kiválasztva** maradnak a
kiválasztott előrejelzés vonalak, a „funkciók” ikonsor marad a **szerkesztésen** .
`o` < **Ment**    - A nyomógomb akkor **kezelhető**, ha az előrejelzésben **módosítás** történt.
   - Kezelésekor **ellenőrzésre** kerül, hogy az adott állomáson **történt-e**
**vonattalálkozás tervezés**, azaz a bevárandó vonat **érkezési** /áthaladási ideje
**későbbi**, mint a **várakozó** vonat **érkezési** ideje **ÉS** **korábbi**, mint mint a
várakozó vonat **indulási** ideje.
Ha nem, akkor a "Módosítás nem jelent vonattalálkozást végezzen további
módosítást." üzenetet ad ÉS nem történik szolgáltatás hívás, a vezérlés marad.
   - **Kezelésére** (vagy az aktivitást figyelő idősáv lejártakor) meghívásra kerül a
„Vonat előztetés és találkozás tervezése” *(* ***VonatEloztetesTalalkozasCommand*** *)*
szolgáltatás, ami a megfelelő ellenőrzések után elvégzi az előrejelzések
módosítását.

**Bemenő** adatok:

    - **’MunkahelyId’**     - Munkahely belső azonosítója.

    - **’AbraId’**     - Ábra belső azonosítója.

    - **’SzhId’**     - Szolgálati hely belső id.

    - **’MenetvLista’** json - minden esetben kételemű lista, akkor is, ha az egyik
menetvonalon nem történt módosítás.

 **’MenetvId’**

 **’ModOk’**

 A bevárandó (elsőnek kiválasztott) vonat esetén = 31.
 A várakozó (másodiknak kiválasztott) vonat esetén = 32.
 **'EredetiErkIdo'**

A tényadat lekérdező szolgáltatás által kapott érkezési idő. *(Ha a*
*menetvonal eredetileg áthaladt, akkor NULL.)*
 **’UjErkIdo’**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 153/526|


Ha a menetvonalon **nem** történt **módosítás**, akkor **NULL** .
**Módosítás** esetén
 Ha a **bevárandó** vonat:

 **Megálló** volt *(van "EsemTipId":1 eseménye)* **ÉS** rendkívüli

**áthaladása** lesz, akkor az UjErkIdo= **NULL** .
 **Megálló** volt *(van "EsemTipId":1 eseménye)* **ÉS** az is **marad**,

akkor az ’UjErkIdo’ a módosított, vagy az eredeti lesz.
 Ha **haladós** volt *("EsemTipId":6)* **ÉS** az is **maradt**, akkor

UjErkIdo **nem** lesz **átadva** (nem NULL).
 Ha a **várakozó vonat:**

 **Megálló** volt *(van "EsemTipId":1 eseménye)* **ÉS** az is **maradt**

akkor az ’UjErkIdo’ a módosított, vagy az eredeti érkezési idő
lesz.
 **Haladós** volt *(van "EsemTipId":6 eseménye)* **ÉS** **megálló** lesz,

akkor az ’UjErkIdo’ a megadott érkezési idő lesz.
 **'EredetiIndIdo'**

A tényadat lekérdező szolgáltatás által kapott indulási vagy áthaladási
idő.
 **’UjIndIdo’**

Ha a menetvonalon **nem** történt **módosítás**, akkor **NULL** .
**Módosítás** esetén:
 Ha a **bevárandó** vonat:

 **Megálló** volt *(van "EsemTipId":1 eseménye)* **ÉS** rendkívüli

**áthaladása** lesz, akkor az ’UjIndIdo’ a **módosított** (az eredeti
érkezési idővel felülírt, vagy a felhasználó által módosított)
**indulási** idő lesz.
 **Megálló** volt *(van "EsemTipId":1 eseménye)* **ÉS** az is **marad**,

akkor az ’UjIndIdo’ a módosított, vagy az eredeti **indulási** idő
lesz.
 **Haladós** volt *("EsemTipId":6)* **ÉS** az is **marad**, akkor az

’UjIndIdo’ a módosított, vagy az eredeti **áthaladási** idő lesz.
 Ha a **várakozó** vonat:

 **Megálló** volt *(van "EsemTipId":1 eseménye)* **ÉS** az is **marad**

akkor az ’UjIndIdo’ a módosított, vagy az eredeti **indulási** idő
lesz.
 **Haladós** volt *(van "EsemTipId":6 eseménye)* **ÉS** **megálló** lesz,

akkor az ’UjIndIdo’ a módosított, vagy az eredeti **áthaladási**
idő lesz.
 **’SzhIndex’**   - az előztetés **szolgálati** helye **ÉS** a 'MenetvId' által

meghatározott 'szh_index' a tényadat lekérdező szolgáltatás által kapott
adatok alapján.

   - **epaiParamXmlDoc**
 - Az **eljárás ellenőrzi**, hogy:

   - Az adott **munkahely** a felhasználó által van **lefoglalva** .
Ha **UC_01_51_ERR_ERVENYTELEN_FOGLALAS** üzenetet ad vissza
„ **151005** : Érvénytelen munkahely foglalás, az adatok mentése sikertelen!”
üzenetet ad, nem történik meg a létrehozás.

   - A **menetvonal** nincs egy másik felhasználó által szerkesztésre **lefoglalva** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 154/526|


Ha a szolgáltatás **UC_01_51_ERR_MENETV_FOGLALT** üzenetet ad
vissza, akkor „ **151010** : A menetvonalat más felhasználó szerkeszti,
módosítás nem lehetséges!” hibaüzenetet ad, nem történik meg a módosítás.
A feldolgozás leáll, kilép a szerkesztés üzemmódból, a menetvonal
kijelöltsége megmarad.

    - A **bevárandó** (elsőnek kiválasztott) **ÉS** a várakozó (másodiknak
kiválasztott) vonatnak **sem** lehet MGM **tény** **érkezési** eseménye az adott
szolgálati helyre és mind a vonathoz létezik előrejelzés adat
(MGM_TenyEsem.esem_tipus = „B”).
Ha a szolgáltatás **UC_01_51_ERR_TENYADAT_LETEZIK** üzenetet ad
vissza, akkor „ **151026** : Előrejelzés nem módosítható, az adatok
módosultak.” hibaüzenetet ad, nem történik meg a módosítás. A feldolgozás
leáll, kilép a szerkesztés üzemmódból, a menetvonalak kijelöltsége
megmarad.

    - A vonattalálkozás helye nem lehet a másodlagos vonat kiindulási szolgálati
helye.
Ha a szolgáltatás **UC_05_51_ERR_HELYBOL_INDULO_VONAT**

**frissül,** a fókuszban és **kiválasztva** maradnak a kiválasztott előrejelzés vonalak,
a „funkciók” ikonsor marad a **szerkesztésen** .

`o` **Felhasználói aktivitás lejártakor**
   - Ha **popup üzenet** van a grafikonon **ÉS** a felhasználó az **aktivitási** figyelő
**lejártáig** nem kezelte le azt, akkor az üzenet **automatikusan** **bezárásra** kerül, a
mentő **szolgáltatás** hívása **nélkül** *(a megerősítő üzenetet úgy tekintjük, mintha*
*nemleges választ adott volna a felhasználó)* a grafikon mentés nélkül **kilép** a
„Vonattalálkozás tervezése” üzemmódból, meghívásra kerül a menetvonal
foglalását feloldó **MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás **’FoglalasJelzo’** = „E” elengedés, feloldás paraméterrel, a menetrendi vonal **kijelölése** **megmarad**, a
többi menetvonal kijelölhető lesz, a „funkciók” ikonsor marad a „ **Szerkesztés** ”
ikonon.

   - **Ellenőrzi**, hogy a vonattalálkozás szolgálati helyén megtörtént-e a
**vonattalálkozás** tervezés, azaz az elsőnek kiválasztott vonat előrejelzett
indulási/áthaladási ideje korábbi, mint a másodiknak kiválasztott vonat indulási
ideje.

    - Ha **igen**, akkor **meghívásra** kerül a
**ForgSzabMuveletElokeszitesCommand** szolgáltatás a < **Ment**      nyomógombnál leírt paraméterekkel, azzal a kitétellel, hogy ha a
szolgáltatás **hibaüzenetet** ad vissza az **nem** lesz **figyelembe** véve és
**meghívásra** kerül a menetvonal foglalását feloldó
**MenetvForgSzabFoglalasCommand** (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás (lásd <Mégsem>
nyomógomb leírásnál).

    - Ha **nem**, akkor **nem** kerül meghívásra a
ForgSzabMuveletElokeszitesCommand szolgáltatás, helyette a

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 155/526|


**MenetvForgSzabFoglalasCommand** szolgáltatás kerül meghívásra, 'E' elengedés paraméterrel.

**[#88981]** **„Irányítói feltartóztatás” funkció**

Egy előrejelzés/tény nem MRN vonathoz tartozó vonal kiválasztása és az „Irányítói
feltartóztatás ” ikon kezelése után a menetvonal megfelelő szolgálati helyének kiválasztásával
(ami a grafikonon a megfelelő vezérlő pálca vagy a szerkesztő panelen a lenyílóból egy
szolgálati hely kiválasztásával lehetséges) feltartóztatás rögzíthető a szolgálati helyen, illetve
a Feltartóztatás a szolgálati hely előtt kapcsoló bekapcsolt állapota esetén a szolgálati hely
előtt.
Feltartóztatás a menetvonalnak az ábrán megjelenő, olyan szolgálati helyén rögzíthető, ahol
előrejelzett ( ’ EsemJelleg ’ = " E " ) érkezés, áthaladás vagy indulás eseménye van.

**2.2.3.9.6.1** **Megjelenés, elérés**

A funkció csak Irányítói üzemmódban érhető el egy nem MRN vonathoz tartozó
előrejelzés/tény vonal kijelölése után a „Szerkesztés ” menüsoron az „Irányítói feltartóztatás ”
ikon kezelésével (lásd „Irányítói feltartóztatás ” ikon leírás).

Az ikon kezelésekor:

  - A kliens program meghívja a kiválasztott menetvonal szerkesztésre l ef og l alás át v ég ző

**S_0151_38** **-** **MenetvForgSzabFoglalasCommand** **(** **Menetv** **o** **na** **l** **ak**
**forgalomszabályozásra lefoglalása)** szolgáltatást a következő adatokkal:

       - MenetvonalIdLista: A kiválasztott menetvonal belső MGM azonosítója

(Egy elemű listaként)

       - TerMunkahelyId: A kiválasztott munkahely belső azonosítója

       - AbraId: A felhasználó által szerkesztésre lefoglalt ábra belső azonosítója

       - = ”       FoglalasJelzo „F foglalás.

       - ModositasOk = NULL

       - epaiParamXmlDoc

Ha a szolgáltatás UCkliens program megerősítő üzenetet _ 01 _ 51 _ CONF ad. _ME N E TV _ F O GLALT üzenetet ad vissza, akkor a

Megerősítő üzenet: 151004  - UC_0 1_51_C ON F _MENETV_FOGLALT – „A {0} vonatot
{1} munkahelyen {2} óta szerkeszt i k! F elülír ja a m e netvonal foglalását? ”, ahol:

    - =
{0} ERRTEXT első paramétere (a lefoglalt menetvonal első vonatazonosítója).

    - =
{1} ERRTEXT második paramétere (a foglaló munkahely megnevezése).

    - =
{2} ERRTEXT harmadik paramétere (a foglalás kezdő ideje).

A megerősítő üzenetre adott **<Nem** **>** vála sz es et é n, nem történik meg a menetvonal
foglalása, a menetvonal kijelölése m egszűni k, a tö bbi objektum elérhetővé válik, és az
ikonsor marad a „Szerkesztés ” ikon on .

**<Igen>** esetén újra meghívja az S _0151_38 - MenetvForgSzabFoglalasCommand
(Menetvonalak forgalomszabályoz ásr a lef og lalá s a) szolgáltatást, de a Foglalás jelzőbe
(FoglalasJelzo) :„A ” (átvétel) értéket hely ez.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 156/526|



- Ha sikeres volt a kiválasztott menetvonal lefoglalása, akkor a g r af i k o n **„** **Irá** **ny** **í** **tó** **i**

**feltartóztatás** **”** **üzemmód** ra vált át.

***Irányítói feltartóztatás üzemmód***

`o` A kiválasztott előrejelzés vonalon a következő feltételeknek megfelelő esem én y ek n él

vezérlőpálcák jelennek meg:

    - Az esemény jellege szerint előrejelzett esemény (EsemJelleg = ’ E ’ )

    - Az esemény nem nyílt vonali (SzhIdIg = NULL)

    - Az esemény típusa érkezés (EsemTipId = 1), vagy áthaladás (Es em Ti pI d = 6 )

vagy indulás (EsemTipId = 2), de indulás esetén csak akkor, ha nincs
előrejelzett érkezés a szolgálati helyen.

    - Az esemény helye az S _ 0151 _ 02 szolgáltatástól kapott adatok szeri n t MÁV

üzemeltetésű és nem országhatár és nem pályavasúti határ. (SzhUzemId = 11,
SzhTipusKod nem ’ 6 ’ és nem ’ 15 ’ )

`o` A grafikonon az automatikus frissítés leáll és a többi mentvonal (m en etre nd i, t én y és

előrejelzés) nem kiválaszthatóvá válik.

`o` Ha az ábrán van pulzáltatandó menetvonal, a pulzálás leáll.

`o` Megjelenik az „Irányítói feltartóztatás ” üzemmódhoz tartozó fejl éc és szer k es zt ő

panel.

`o` Fejlécben megjelenik a „Irányítói feltartóztatás ” szöveg, az áb ra m eg n ev ezés e, a

felhasználói aktivitást figyelő idősáv, a <Ment>, és a <Mégsem> ny om óg om b ok,
valamint a szerkesztéshez szükséges ikonok (nagyítások, kicsinyíté sek, i d ő v o nalra
ugrás, alapértelmezett kameranézet).

`o` A szerkesztőpanelen megjelennek a következő adatelemek:

    - **„Vonatazonosító** **”** megjelenítő mező. A kijelölt menetvonal vonatszáma

(VonatszamIrszam) + ’ / ’ + vonat indulási dátuma ( ’ IndDatum ’ ) éééé.hh.nn
formában. Több vonatazonosító e setén vesszővel elválasztva jeleníti meg
őket a kliens. [#103703] .

    - **„Feltartóztatás helye** **”** rövid nevet tartalmazó lenyíló, beviteli mező. A

kliens program a rövid nevet (SzhR ov idNev) az **S_0151_02** **–** **Út tengely**
**adatok lekérdezése szolgáltatás** **(** **U** **t** **tengelySzolgalatiHelyAdatokQuery)**
adataiból veszi (SzhId alapján) . Alapértelmezetten üres a mező.
Értékkészletében a menetvonal azon s zolgálati helyeinek a rövid neve jelenik
meg, amelyekre teljesülnek a következő feltételek:

       - Az **S_0151_05** **–** **Tényadatok lekérdezése (TenyadatokQuery)**

szolgáltatás által a szolgálati helyre visszaadott események között
szerepel előrejelzett, nem nyílt vonali esemény (EsemJelleg = ’ E ’,
SzhIdIg = NULL )

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 157/526|



        - Az S _ 0151 _ 05 szolgáltatás által a szolgálati helyre visszaado tt

előrejelzett esemény típusa érkezés (EsemTipId = 1) vagy áthaladás
(EsemTipId = 6) vagy indulás (EsemTipId = 2)

        - A szolgálati hely az S _ 0151 _ 02 szolgáltatástól kapott adatok sze r i n t

MÁV üzemeltetésű és nem országhatár és nem pályavasúti határ.
(SzhUzemId = 11, SzhTipusKod nem ’ 6 ’ és nem ’ 15 ’ ).

      - „ **Feltartóztatás** **a** **szolgálati** **hely** **előtt** ” kapcsoló      - 104768
~~bekapcsolt~~ . ~~k~~ ikapcsolt [104768vége]

**2.2.3.9.6.2** **Működés**

***Módosítás a grafikonon***

A grafikonon egy vezérlőpálcára kattintáskor:

- Az aktivitás figyelés újraindul.

- A vezérlőpálca kiválasztott lesz, színe pirosra változik.

- A vezérlőpálcához tartozó szolgálati hely bekerül a szerkesztőpanelen a Feltartóztatás

helye beviteli mezőbe.

- A kliens program **ellenőrzések** et végez és ha hibát talál, akkor azt popup üzenetben

jeleníti meg:

`o` Ha a feltartóztatás helyén a vezérlőpálca előrejelzett indulási esemé n y hez t ar t o zik

és a szerkesztő panelen „Feltartóztatás a szolgálati hely előtt ” kapcsoló b ek ap cso l t,
akkor hibát ad: UClehet az indító állomás előtt! _ 01 _ 51 _ ERR ” _ FELTART _ IND _ ELOTT „A feltartóztatá s n em
`o` Ha a feltartóztatás helyén a vezérlőpálca előrejelzett áthaladási esemén y hez

tartozik és a szerkesztő panelen „Feltartóztatás a szolgálati hely előtt ” kap cso l ó
kikapcsolt, akkor hibát ad: UC„Áthaladás esetén a feltartóztatás csak a szolgálati hely előtt lehetséges _ 01 _ 51 _ ERR _ SZH _ FELTART _ ATHALAD !”
`o` Ha a feltartóztatás helyén a vezérlőpálcához tartozó eseménynél az Sszolgáltatástól kapott Esemény be/kilépés jelző (SzakaszBeKiJel) értéke _0 1 51 1 _ 0 5

(belépés) és a szerkesztő panelen „Feltartóztatás a szolgálati hely előtt ” k ap cso l ó
bekapcsolt, akkor hibát ad: UCfeltartóztatás nem lehet az ábrára való belépés előtt! _ 01 _ 51 _ ERR _ FELTART ” _ BELEPES _ EL OTT „A
`o` Ha a feltartóztatás helyén a vezérlőpálcához tartozó eseménynél az Sszolgáltatástól kapott Menetvonal indító/cél jelző (MenetvIndCelJel) ért _0 1 ék5 1e _„c” 0 5 és

a szerkesztő panelen „Feltartóztatás a szolgálati hely előtt ” kapcsoló kik ap cso l t,
akkor hibát ad: UClehet a célállomáson! _ 01 ” _ 51 _ ERR _ FELTART _ CELALL „A feltartóztat á s nem

- Ha az ellenőrzések során a program nem talált hibát, akkor a grafikonon a következők

szerint módosítja a kiválasztott menetvonal előrejelzés vonalát:

`o` Ha a szerkesztő panelen a „Feltartóztatás a szolgálati hely előtt ” kap cso l ó

kikapcsolt, akkor a program a kiválasztott vezérlő pálcához tartozó esem én y t ő l a
szolgálati hely vonalán tartózkodási vonalat húz a lekérdezett időszak v ég éig .
`o` Ha a szerkesztő panelen a „Feltartóztatás a szolgálati hely előtt ” kap cso l ó

bekapcsolt, akkor a menetvonal haladási irányát figyelembe véve a kivála s zt o t t
vezérlőpálcához tartozó szolgálati hely előtt 100m      - el húzza a tartózkodási v o n alat,

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 158/526|


a szolgálati hely vonalával párhuzamosan a kiválasztott esemény idejétő l k ezdv e,
majd eltünteti a kiválasztott vezérlőpálcát.

Módosítás a vezérlőpálca mozgatásával nem lehetséges.

***Módosítás szerkesztő panelen***

- „ **Feltartóztatás helye** ” lenyíló, beviteli mező módosításakor (a mező elhagyásakor):

`o` Az aktivitás figyelés újraindul.
`o` Ha a módosítás után a mező üres, akkor a grafikonon a szerkesztő p an el

megnyitásakori állapot szerint jelenik meg a kiválasztott menetvonal el ő re j el zés
vonala és rajta a vezérlőpálcák.
`o` Ha a módosítás után a mező nem üres, akkor a program a feltartózta tá s hely ér e

rajzolt vezérlőpácát kiválasztottá teszi (ha látszik a vezérlőpálca a feltar t ó ztatás
helyén), és elvégzi a vezérlő pálca kiválasztásánál leírt ellenőrzéseket ( az
ellenőrzéseket akkor is elvégzi, ha nem látszik a vezérlőpálca a korábbi
módosítások miatt). Ha hibát talál, akkor azt popup üzenetben megjelen íti .
`o` Ha a módosítás után a mező nem üres és az ellenőrzéseknél nem vol t h i b a, ak kor a

következők szerint módosítja a kiválasztott menetvonal előrejelzés vonalát.

       - A feltartóztatáshoz megrajzolandó tartózkodási vonalig, a szerkesztő panel

megnyitásakori állapot szerint rajzolja meg az előrejelzés vonalat és a
vezérlőpálcákat.

       - Ha a „ **Feltartóztatás a szolgálati hely előtt** ” kapcsoló **kikapcsolt**, akkor

ha szükséges a feltartóztatás helyén megrajzolja és kiválasztottá teszi a
vezérlőálcát, majd a vezérlő pálcáho z tartozó eseménytől a szolgálati hely
vonalán tartózkodási vonalat húz a a lekérdezett időszak végéig.

       - Ha a „ **Feltartóztatás a szolgálati hely előtt** **”** kapcsoló **bekapcsolt**, akkor a

menetvonal haladási irányát figyelembe véve a kiválasztott szolgálati hely
előtt 100m         - el húzza a tartózkodási v o nalat, a szolgálati hely vonalával
párhuzamosan.(Ilyenkor a feltartóztatás helyéhez nem rajzol vezérlő
pálcát.)

- „Feltartóztatás a szolgálati hely előtt ” kapcsoló

`o` **Bekapcsolásakor** :

       - Az aktivitás figyelés újraindul.

       - Ha a „ **Feltartóztatás helye** ” mező **üres**, akkor nem változik a grafikon

       - Ha a „ **Feltartóztatás helye** ” mező **kitöltött**, akkor a program elvégzi a

vezérlő pálca kiválasztásánál leírt e lle nőrzéseket.

Ha hibát talál, akkor azt popup üzenetben megjeleníti.
Ha nem talál hibát, akkor úgy módosítja a menetvonal előrejelzés
vonalát, hogy a feltartóztatáshoz húzott tartózkodási vonal a
menetvonal haladási irányát figyelembe véve a kiválasztott szolgálati

                            hely előtt legyen 100m el (Ilyenkor a feltartóztatás helyéhez tartozó
vezérlő pálca eltűnik)
`o` **Kikapcsolásakor:**

       - Az aktivitás figyelés újraindul.

       - Ha a „ **Feltartóztatás helye** ” mező **üres**, akkor nem változik a grafikon

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 159/526|



       - Ha a „ **Feltartóztatás helye** ” mező **kitöltött**, akkor a program elvégzi a

vezérlő pálca kiválasztásánál leírt e lle nőrzéseket.

Ha hibát talál, akkor azt popup üzenetben megjeleníti.
Ha nem talál hibát, akkor úgy módosítja a menetvonal előrejelzés
vonalát, hogy a feltartóztatáshoz húzott tartózkodási vonal a szolgálati
hely vonalán legyen. Ilyenkor megrajzolja és kiválasztottá teszi, annak
az eseménynek a vezérlőpálcáját, amelytől a tartózkodási vonalat
húzza.

- A szerkesztés befejezése történhet automatikusan felhasználói inaktivitás miatt vagy a

fejlécen található <Ment> és <Mégsem> nyomógombok használatával.

***<Ment> nyomógomb***

- A < **Ment** - **nyomógomb** akkor **kezelhető**, ha az előrejelzés vonal megváltozott.

- A **nyomógomb** **használatakor** a program a következő ellenőrzéseket végzi és ha hibát

talált, akkor azt megjeleníti:

`o` Ha a feltartóztatás helyén a vezérlőpálca előrejelzett indulási esemé n y hez t ar t o zik

és a szerkesztő panelen „Feltartóztatás a szolgálati hely előtt ” kapcsoló b ek ap cso l t,
akkor hibát ad: UClehet az indító állomás előtt! _ 01 _ 51 _ ERR ” _ FELTART _ IND _ ELOTT „A feltartóztatá s n em
`o` Ha a feltartóztatás helyén a vezérlőpálca előrejelzett áthaladási esemén y hez

tartozik és a szerkesztő panelen „Feltartóztatás a szolgálati hely előtt ” kap cso l ó
kikapcsolt, akkor hibát ad: UC„Áthaladás esetén a feltartóztatás csak a szolgálati hely előtt lehetséges! _ 01 _ 51 _ ERR _ SZH _ FELTART _ ATHALAD ”
`o` Ha a feltartóztatás helyén a vezérlőpálcához tartozó eseménynél az Sszolgáltatástól kapott Esemény be/kilépés jelző (SzakaszBeKiJel) értéke _0 1 51 1 _ 0 5

(belépés) és a szerkesztő panelen „Feltartóztatás a szolgálati hely előtt ” k ap cso l ó
bekapcsolt, akkor hibát ad: UCfeltartóztatás nem lehet az ábrára való belépés előtt! _ 01 _ 51 _ ERR _ FELTART ” _ BELEPES _ EL OTT „A
`o` Ha a feltartóztatás helyén a vezérlőpálcához tartozó eseménynél az Sszolgáltatástól kapott Menetvonal indító/cél jelző (MenetvIndCelJel) ér _0t 1ék 5 1 e _ „c0 5” és

a szerkesztő panelen „Feltartóztatás a szolgálati hely előtt ” kapcsoló ki k ap cso l t,
akkor hibát ad: UClehet a célállomáson! _ 01 ” _ 51 _ ERR _ FELTART _ CELALL „A feltartóztat á s nem

- Ha az ellenőrzések során nem talált hibát, akkor meghívja az **S_0151_42** **-** **Forgalom**

**szabályozási** **műveletek** **mentésének** **előkészítése** **egy** **mene** **t** **v** **o** **na** **l** **es** **et** **én**
**(ForgSzabMuveletElokeszitesCommand)** szolgáltatást a következő a d ato k k al:

`o` ' MgmMenetvId ’   - a módosítandó menetvonal belső MGM azonosító j a.
`o` ’ AbraId ’   - az érintett ábra azonosítója.
`o` ’ MunkahelyId ’   - az ábra munkahelyazonosítója.
`o` ’ Megerositve ’   - az esetleges megerősítés ténye. = False.
`o` [{Esemény lista}] – Csak egy elemet helyez a listába, a feltartóztatá s hely én él

figyelembe vett eseményt

       - ’ SzhId ’       - a feltartóztatás helyének belső azonosítója

       - ’ ModOk ’       - a módosítás oka.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 160/526|



          - 11           - „Irányítói feltartóztatás szolgálati helyen ” Ha a „Feltartóztatás a

szolgálati hely előtt ” kapcsoló kikapcsolt

          - 12           - „Irányítói feltartóztatás szolgálati hely előtt ” Ha a

„Feltartóztatás a szolgálati hely előtt ” kapcsoló bekapcsolt

       - ’ ’       MgmEsemTipId a feltartóztatás helyénél figyelembe vett esemény

típusának azonosítója.

       - ’ ’       UjEsemIdo a feltartóztatás helyénél figyelembe vett esemény ideje.

       - ’ SzhIndex ’       - a feltartóztatás helyének sorszáma a menetrenden belül.
`o` epaiParamXmlDoc

- Ha a szolgáltatás hibát jelez, akkor azt megjeleníti és **nem lép ki** az „ **Irányítói**

**”**
**feltartóztatás** **üzemmódból** .

- Ha a szolgáltatás rendben lefutott, akkor a program **kilép** „ **Irányítói feltartóztatás** **”**

**üzemmódból** . Meghívásra kerülnek a grafikon frissítéséhez szüksége s szo l g ált atá sok . A
fókuszban és kiválasztva marad a módosított előrejelzés vonal.

***<Mégsem> nyomógomb***

- A < **Mégsem** - nyomógomb **mindig** **használható** .

- A nyomógomb használatakor adatmentés nem történik, a kliens program meghívja a

kiválasztott menetvonal szerkesztésre lefoglalását, feloldását vé g ző S _ 0 1 5 1_3 8  **MenetvForgSzabFoglalasCommand** (Menetvonalak forgalomszabály o zásra l ef og l alá sa)
szolgáltatást a következő adatokkal, hogy megszüntesse a menetvonal f og lalás át:

`o` MenetvonalIdLista: A kiválasztott menetvonal belső MGM azonosítója

(Egy elemű listaként)
`o` TerMunkahelyId: A kiválasztott munkahely belső azonosítója
`o` AbraId: A felhasználó által szerkesztésre lefoglalt ábra belső azonosítója
`o` FoglalasJelzo = „E ”      - elengedés.
`o` ModositasOk = NULL
`o` epaiParamXmlDoc

Ezután a program az adatok mentése nélkül kilép az „ **Irányító** **i** **f** **elta** **rt** **ó** **zt** **a** **tá** **s”**
**üzemmódból** . Meghívásra kerülnek a grafikon frissítéséhez szüksége s szo l g ált atá sok . A
fókuszban és kiválasztva marad a módosított előrejelzés vonal.

***Felhasználói aktivitás lejártakor***

- Ha popup üzenet van a grafikonon és a felhasználó az aktivitási figyelő lejártáig nem

kezelte le azt, akkor az üzenet automatikusan bezárásra kerül, a mentő szo l g ált atá s h í v ás a
nélkül *(a megerősítő üzenetet úgy tekintjük, mintha nemleges válas* *zt* *a* *d* *o* *t* *t* *vo* *ln* *a* *a*
*felhasználó),* a program mentés nélkül **kilép** az „ **Irányítói feltartózta** **tá** **s** **” üzem** **m** **ó** **d** **bó** **l** **.**
Meghívásra **MenetvForgSzabFoglalasCommand** kerül a menetvonal (Menetvonalak forgalomszabályfoglalását feloldó o zásra l S_0 1 5ef 1 _ og3 8l alá sa) szolgáltatás **’** **FoglalasJelzo** **’** = „E ”   - elengedés, paraméterrel. Meg h í v ásra k erü l nek a
grafikon frissítéséhez szükséges szolgáltatások. A fókuszban és kiv ála s zt v a m ar ad az
előrejelzés vonal.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 161/526|



- Ha az előrejelzés vonal nem változott, akkor a program mentés nélkül **kilép** az „ **Irányítói**

**feltartóztatás** **”** **üzemmódból.** Meghívásra kerül a menetvonal f og l alás át f elo l d ó
S_0151_38  - **MenetvForgSzabFoglalasCommand** ( Men e t v o nala k
forgalomszabályozásra lefoglalása) szolgáltatás **’** **FoglalasJelzo** **’** = „E” - eleng ed és,
paraméterrel. Meghívásra kerülnek a grafikon frissítéséhez szükséges szo l g ált atá sok . A
fókuszban és kiválasztva marad az előrejelzés vonal.

- Ha az előrejelzés vonal változott, akkor a < **Ment** - nyomógombn ál l eírtak szeri n t

működik, azzal a kitétellel, hogy hiba esetén a mentés nem történik m e g . A h i b át nem
jeleníti meg a program, de meghívja a menetvonal f og l alás át f elo l d ó
**MenetvForgSzabFoglalasCommand** (Menetvonalak forgalomszabály o zásra l ef og l alá sa)
szolgáltatás **’** **FoglalasJelzo** **’** = „E ”   - elengedés, feloldás paraméterrel.

**[88976]** **Másik pályán közlekedés tervezése funkció**

Egy **előrejelzési** vonal kiválasztása és a „Másik pályán közlekedés” **ikon** kezelése után a
**grafikonon** egy **indulási** /áthaladási **vezérlőpálcára** a bal egérgombbal kattintással tervezhető
a másik pályán közlekedés.

**2.2.3.9.7.1** **Megjelenés, elérés**

A **funkció** csak **Irányítói** üzemmódban érhető el egy előrejelzés vonal kijelölése után a
„ **Szerkesztés** ” menüsor „ **Másik pályán közlekedés** ” **ikon** kezelésével.

- A **grafikon** „Másik pályán közlekedés” **üzemmódra** vált át, megjelenik az ehhez tartozó
**fejléc** a <Mégsem> nyomógombbal ( **csak ez** jelenik meg). **Szerkesztő** panel nem jelenik

meg.

**2.2.3.9.7.2** **Működés**

- A grafikonon egy **indulási** /áthaladási **vezérlőpálcára** **kattintás** után meghívásra kerül a
**ForgSzabMuveletEllenorzesQuery** (Forgalomszabályozási művelet ellenőrzése)
szolgáltatás, amely ellenőrzi, hogy az adott szolgálati helyen a vonathoz másik pályán
közlekedés tervezhető-e.

`o` **Bemenő** adatok:

      **’MgmMvId’**     - a kijelölt menetvonal MGM belső azonosítója.
      - **’SzhId’**       - a kijelölt szolgálati hely belső azonosítója.
      - **’SzhIndex’**       - a kijelölt szolgálati hely vft-n belüli sorszáma.
      - **’ModOk’**       - a módosítás oka = „M” - másik pályán közlekedés.

      **’Megerositve’**       - annak a jelzése, hogy a felhasználó a vonatkozó megerősítő
üzenetet elfogadta, mentéskor már nem kell ellenőrizni bizonyos feltételeket =
FALSE.

`o` Ha a **szolgáltatás** :
      - UC_01_51_ERR_MAS_PALYA_ **UTVONAL** hibaüzenetet ad vissza, akkor
megjelenik a „151044: Másik pályán közlekedés {0} szolgálati helytől nem
engedélyezett!” hibaüzenet:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 162/526|



    - Az üzenetben a {0} helyére a visszakapott ERRTEXT-ben levő paraméter
kerül.

    - Az üzenet lekezelése után:
 A feldolgozás leáll,
 a másik pályán közlekedés tervezése üzemmódból kilép,
 meghívásra kerül a MenetvForgSzabFoglalasCommand szolgáltatás,

ahol a ’FoglalasJelzo’ = „E” - elengedés,
 az előrejelzés vonal kiválasztott marad, a grafikon frissül.
   - UC_01_51_ERR_MAS_PALYA_ **OSSZEALLITAS** hibaüzenetet ad vissza,
akkor megjelenik a „151045: Másik pályán közlekedés kötelező vonatösszeállítás közlés miatt nem lehetséges!” hibaüzenet.
Az üzenet lekezelése után:

    - A feldolgozás leáll,

    - a másik pályán közlekedés tervezése üzemmódból kilép,

    - meghívásra kerül a MenetvForgSzabFoglalasCommand szolgáltatás, ahol a
’FoglalasJelzo’ = „E” - elengedés,

    - az előrejelzés vonal kiválasztott marad, a grafikon frissül.

`o` Ha **nincs hiba**, akkor **négy** a datot ad **vissza** :

   **MppId**    - a lehetséges másik pálya belső azonosítója.
   - **KezdoSzhRnev**    - a másik pálya kezdő szolgálati helyének belső azonosítója,

   **VegSzhRnev**    - a másik pálya visszalépő szolgálati helyének belső azonosítója
   - 106120 **’** **RkRid** **’**    - a menetvonal rendkívüli küldeményt és/vagy veszélyes árut
továbbít.
Lehetséges **értékei** :

    - 0     - nincs

    - 1     - Rk     - t továbbít

    - 2     - veszélyes árut továbbít

    - 3     - Rk     - t és veszélyes árut is továbbít.
`o` A visszakapott adatok alapján **megerősítő** **üzenetet** ad:
   - Ha az **’** **RkRid** **’** = **0**, akkor
„{KezdoSzhRnev} szolgálati hely és {VegSzhRnev} szolgálati hely között
valóban másik pályán közlekedést tervez?” megerősítő üzenetet ad. Az üzeneten
az < **Igen**     - nyomógomb a kijelölt.
   - Ha az **’** **RkRid** **’** = **1**, akkor
’ UC_01_51_CONF_MASIKPALYA_RK ’      - 151047: „A vonat közlekedése nem
tervezhető másik pályára Rk küldemény továbbítása miatt! Valóban áttervezi? ”
megerősítő üzenetet ad. Az üzeneten a < **Nem**     - nyomógomb a kijelölt.
   - Ha az **’** **RkRid** **’** = **2**, akkor
’ UC_01_51_CONF_MASIKPALYA_RID ’      - 151048 „A vonat közlekedése nem
tervezhető másik pályára veszélyes áru továbbítása miatt! Valóban áttervezi? ”
megerősítő üzenetet ad. Az üzeneten a < **Nem**     - nyomógomb a kijelölt.
   - Ha az **’** **RkRid** **’** = **3**, akkor
’ nem tervezhető másik pályára Rk küldemény és veszélyes áru továbbítása miatt! UC _ 01 _ 51 _ CONF _ MASIKPALYA _ RK _ RID ’      - 151049 „A vonat közlekedése
Valóban áttervezi? ” megerősítő üzenetet ad. Az üzeneten a < **Nem**     - nyomógomb
a kijelölt. [106120 vége]

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 163/526|


      - < **Igen**       - esetén meghívásra kerül a **MasPalyaMgmCommand**
(core.usp_0151_setMasPalyaMgm) szolgáltatás, amely ellenőrzi, hogy a másik
pályán közlekedés egyéb feltételei (ábrafoglalás, menetvonal foglalás, nincs
egyéb tényadat stb.) megvannak. Ha igen, akkor elvégzi a másik pályán
közlekedés adatainak rögzítését.

      - **Bemenő** adatok:
 **'MunkahelyId'**
 **'AbraId'**
 **’MgmId’**
 **’SzhId’**

 **’SzhIndex’**
 **'MppId'**
 epaiParamXmlDoc

      - Ha a szolgáltatás 'UC_01_51_ERR_TENYADAT_LETEZIK' **üzenetet** ad,
akkor a feldolgozás leáll., a másik pályán közlekedés tervezése üzemmódból
**kilép**, a grafikon **frissül** . **Meghívja** a **MenetvForgSzabFoglalasCommand**
szolgáltatást, ahol a ’FoglalasJelzo’ = „E” - elengedés.

      - Ha a szolgáltatás 'UC_01_51_ERR_MENETV_FOGLALT' **üzenetet** ad,
akkor a feldolgozás leáll, a másik pályán közlekedés tervezése üzemmódból
**kilép**, az előrejelzés vonal kiválasztott marad, a grafikon **frissül** . **Nem** kell a
feloldáshoz meghívni a **MenetvForgSzabFoglalasCommand** szolgáltatást.

      - Ha a menetvonal hátralevő előrejelzése az adott ábrán megszűnt (pl.: átkerül
másik ábrára, RFO-t rögzítettek, lemondták), akkor a szolgáltatás
’UC_01_51_ERR_VONAT_ELOREJEZES_MEGSZUNT’ üzenetet ad
vissza. Ekkor a másik pályán közlekedés tervezése üzemmódból **kilép**, az
előrejelzés vonal **kiválasztása** **megszűnik**, a grafikon **frissül** .

      - **Sikeres** mentés után a másik pályán közlekedés tervezése üzemmódból
**kilép**, a grafikon **frissül** . **Meghívja** a **MenetvForgSzabFoglalasCommand**
szolgáltatást, ahol a ’FoglalasJelzo’ = „E” - elengedés.
      - < **Nem**       - esetén:

      - a feldolgozás leáll,

      - a másik pályán közlekedés tervezése üzemmódból kilép,

      - meghívásra kerül a **MenetvForgSzabFoglalasCommand** szolgáltatás, ahol
a **’FoglalasJelzo’** = „ **E** ” - elengedés,

      - az előrejelzés vonal kiválasztott marad, a grafikon frissül.

- A < **Mégsem** - nyomógomb kezelésekor adatmentés nem történik, meghívásra kerül a
menetvonal foglalást feloldó MenetvForgSzabFoglalasCommand (Menetvonalak
forgalomszabályozásra lefoglalása) szolgáltatás.
`o` **Bemenő** adatok

      - **’MenetvonalIdLista’**       - a feloldani kívánt menetvonal ’MGMMenetvId’ adata.
Egy elemű lista.

      **’MunkahelyId’**
      - **’AbraId’**
      - **’FoglalasJelzo’** = „ **E** ” - elengedés, feloldás.
      - **’ModositasOk’** = NULL

      ’epaiParamXmlDoc’

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 164/526|


`o` **Sikeres feloldás** után a grafikon **kilép** a szerkesztő üzemmódból és a grafikon **frissül**
a fókuszban és kiválasztva marad a módosított előrejelzés vonal, a „funkciók”
**ikonsor** marad a **szerkesztésen** .

- Felhasználói **aktivitás** figyelő lejártakor a működés a < **Mégsem** - nyomógomb szerinti.

**2.2.3.10** **Vágányzárak megjelenítése** **,** **[ 88953]** **tény vágányzárak szerkesztése** **[88953]** **[vége]** **a**

**diagramon**

Az A_0151_01 ablakon megjelenő vágányzári adatok:

  - a PASS2 adatbázisba bedolgozott, K2 rendszerben kiutalt, tervezett vágányzárak,

állapotú.

  - 88953 a tervezett vágányzárakhoz, az A _ 0151 _ 01 ablakon rögzített t én y v ág án y zári
adatok, amennyiben a Tény vágányzárak megjelenítése ikon beka p csol t áll ap o t ú .

88953vége

A vágányzárak megjelenítéséhez szükséges forrás adatokat az **S_0151_06 Vágányzárak**
**lekérdezése (VaganyzarakQuery)** szolgáltatás biztosítja a kliens számára.

Időhenger üzemmódban, a vágányzári adatok frissítéséhez a kliens két percenként újra
meghívja az **S_0151_06** szolgáltatást és a kapott adatokkal újra rajzolja az vágányzárakat
ábrázoló objektumokat is.

Az **S_0151_06** szolgáltatást a következő paraméterekkel hívja meg:

  - Vonal id (VonalId): Ha az A_0151_02 ablakon vonalat választott ki, akkor annak a

belső azonosítója, egyébként NULL

  - Menetirányítói szakasz kódja (MisKod): Ha az A_0151_02 ablakon menetirányítói

szakaszt választott ki a felhasználó, akkor annak a kódja, egyébként NULL

  - Szolgálati hely lista (SzhIdArray): Az **S_0151_02** **–** **Út tengely adatok lekérdezése**

szolgáltatás (UttengelySzolgalatiHelyAdatokQuery) által visszaadott szolgálati helyek
listája). A szolgálati hely belső azonosítók pontos vesszővel elválasztva.

  - Időszak kezdet (IdoszakKezd): Fix időszak üzemmód esetén az A_0151_02 ablaktól

kapott lekérdezési időszak kezdete. Időhenger üzemmód esetén az aktuális időpont
mínusz az A_0151_02 ablaktól kapott múlt időintervallum paraméter által
meghatározott idő.

  - Időszak vége (IdoszakVeg): Fix időszak üzemmód esetén az A_0151_02 ablaktól

kapott lekérdezési időszak vége. Időhenger üzemmód esetén az aktuális időpont plusz
az A_0151_02 ablaktól kapott jövő időintervallum paraméter által meghatározott idő.

**Vágányzárak megjelenítése**

A kliens program az **S_0151_06 Vágányzárak lekérdezése (VaganyzarakQuery)**
szolgáltatástól kapott adatok alapján ábrázolja a vágányzárakat. Egy vágányzárhoz több
vonali és több állomási kizárás is tartozhat. Amennyiben egy vágányzáron belül szükség van a

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** at jeleníti meg a program

**törölt:** V


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 165/526|


korlátozások összevonására vagy darabolására, azt az **S_0151_06 Vágányzárak lekérdezése**
**(VaganyzarakQuery)** szolgáltatás elvégzi. A kliens a szolgáltatástól kapott minden

sraffozott téglalappal ábrázol ja, egy sablonban előre meghatározott (piros) színnel. [88953] Ha
egy vágányzárhoz terv és tény időadatok is tartoznak, és azok eltérnek, vagy a vágányzárhoz
elmaradást rögzítettek, vagyis azoknál az S _ 0151 _ 06 szolgáltatástól kapott vágányzári

                                        rekordoknál, az Elmaradás (Elmaradas) értéke igaz, a kliens 90 % os áttetszőséggel ábrázolja
a terv adatokhoz tartozó téglalapot. [ 88953vége] Időben a téglalapok széleit a vágányzárakhoz
kapott érvényesség kezdete és vége határozza meg. Ha az érvényesség kezdete korábbi, mint a
lekérdezett időszak kezdete vagy az érvényesség vége későbbi, mint a lekérdezett időszak
vége, akkor ott nem rajzol határoló vonalat.

Az **S_0151_06 Vágányzárak lekérd** **ezé** **se** **(** **VaganyzarakQuery)** szolgáltatás kimenő
paraméterei között kapott Megjelenítési típusa (MegjTipus) alapján a vágányzári
korlátozásoknak négy féle ábrázolása különböztethető meg:

  - **”v” – vágány:** Ebben az esetben a téglalapot a fiktív vágányra kell rajzolni úgy, hogy

a téglalap egy kicsit túllógjon a vágányt jelző vonalon. A vágányzárak állomási
kizárásait kell így ábrázolni, amennyiben az érintett objektumok típusa nem „1- teljes
állomás”.

  - **”s” – szolgálati hely** : Ebben az esetben a kimenő paraméterben szereplő szolgálati

hely -tól (SzhTol) érték alapján kell a szolgálati helyen ábrázolni a vágányzárat jelölő
téglalapot. Amennyiben a vágányok megjelenítése bekapcsolt akkor a téglalap az
összes vágányt magába foglalja. A téglalapnak egy kicsit túl kell lógnia a szolgálati
helyet jelölő vonalon. A vágányzárak állomási kizárásainál fordul elő ez az eset,
amennyiben az érintett objektum típusa „1- teljes állomás”.

  - **”t” – szolgálati helyek között** : Ebben az esetben a téglalapot a szolgáltatástól kapott

szolgálati hely -tól (SzhTol) és szolgálati hely-ig (SzhIg) szolgálati helyek között kell
megjeleníteni úgy, hogy a téglalap ne érje el a –tól és az –ig szolgálati helyeket jelölő
vonalakat. A vágányzárak vonali kizárásait kell így ábrázolni, ha pályakizárást is
tartalmaznak.

  - **”k” – szolgálati helyek között a geometriai középvonalnál:** Ebben az esetben egy

szűk téglalapot kell rajzolni a szolgáltatástól kapott szolgálati hely -tól (SzhTol) és
szolgálati hely-ig (SzhIg) szolgálati helyek között, a geometriai középvonalon. A
vágányzárak vonali kizárásait kell így ábrázolni, ha nem tartalmaznak pályakizárást.

**Vágányzárak feliratai**

A vágányzárakhoz kapcsolódóan az alábbi adatokat jeleníti meg a kliens egy sablonban előre
meghatározott (sárga) színnel:

  - Vágányzár azonosító (VgzAzon)

pl.: 2021/14921/0

  - Vágány (Vagany) A vágányzár azonosító alatt írja ki. (Csak vonali kizárások esetén

kitöltött.) Az **S_0151_06** **Vágányzárak** **lekérdezése** **(VaganyzarakQuery)**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** korlátozást


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 166/526|


szolgáltatás több Vagany adatot is visszaadhat (a vágányok előtt szereplő előtaggal
együtt), amelyket egymás alatt ír ki.

pl.:

Kiz: jobb

Korl: bal

Amennyiben egy vágányzárnak már egy kis része látható az aktuális kamera nézeten, akkor a
kapcsolódó feliratot is megjeleníti az alkalmazás. A megjelenítési logika:

  - A feliratok alapvetően a vágányzári téglalapon belül, a látható rész bal felső sarkához

igazítva jelennek meg, de túlnyúlhatnak a téglalapon.

  - 88953 Ha egy vágányzárhoz terv és tényadatok is tartoznak és azok kezdési i d eje elt ér,
akkor is csak egy felirat jelenik meg, a látható részen korábban kezdőd ő t égl alap b al
felső sarkához igazítva. [88953vége]

  - Amennyiben több vágányzárnál is megegyezik a kezdő szolgálati hely, és a feliratok

fednék egymást, akkor a kliens egymás alatt jeleníti meg a feliratokat.

A vágányzári téglalapok vagy feliratok fölé pozícionálva a program megváltoztatja az egér
kurzort, ezzel jelezve, hogy ez kattintható terület.

A kattintható területen a jobb egér gombot használva, ha a kattintás helyén nincs más
objektum, vagy több objektum esetén bármelyik egér gomb használatakor feljövő menüből,
jobb egér gombbal a vágányzárat választva, megnyílik a Vágányzár információs terület,
aminek a részletes leírása a dokumentum 2.2.3.10.5 pontjánál található. (Az objektumválasztó
menü részletes leírása a dokumentum 2.2.3.9 pontjánál található.)

A kattintható területen bal egér gombot használva, ha a kattintás helyén nincs más objektum,
vagy több objektum esetén bármelyik egér gomb használatakor feljövő menüből, bal egér
gombbal a vágányzárat választva, a vágányzárhoz tartozó felirat félkövéren és nagyobb
betűmérettel jelenik meg.

**[88953]** **Vágányzárak szerkesztése**

Irányítói üzemmódban, egy ábrán megjelenő vágányzárnál, ha az ábrát a felhasználó
szerkesztésre lefoglalta (ami csak időhenger üzemmódban lehetséges), akkor lehet
kezdeményezni egy vágányzár tény adatainak a szerkesztését.

A szerkesztő üzemmód egy vágányzári objektum bal egér gombbal történő kiválasztása után
(vagy az objektumválasztó menüből a vágányzárat kiválasztva), majd a „Szerkesztés ”
menüponthoz tartozó almenüsorból a Vágányzár szerkesztése ikonra kattintva indul el.

A Vágányzár szerkesztése ikonra kattintva a kliens program meghívja az S_0151_22 –
Vágányzár szerkesztéshez adatok lekérdezése (VaganyzarSzerkeszteshezQuery) szolgáltatást
a kiválasztott vágányzár belső azonosítójával (VgzId), ami visszaadja a szerkesztéshez
szükséges adatokat.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 167/526|


Ezután az ablak átvált Vágányzár szerkesztése üzemmódra, megjelenik az ehhez tartozó fejléc
és a kiválasztott vágányzári objektum szerkeszthetővé, a grafikonon megjelenő többi
objektum pedig nem kiválaszthatóvá válik.

A kiválasztott vágányzári objektum szerkesztése egyszerre történhet a grafikonon és a
szerkesztő fejlécre pozícionálva beúszó szerkesztő panelen. A grafikonon történő
szerkesztéssel létrejövő tény adatok, egy mozgatás befejezésekor azonnal átkerülnek a
szerkesztő panelre. A szerkesztő panelen megadott tény időadatoknak megfelelő változások
az érintett mezők módosítása után azonnal felkerülnek a grafikonra.

**2.2.3.10.3.1** **Vágányzárak szerkesztése a grafikonon**

Ha még nincs tényadata a kiválasztott vágányzárnak és nem rögzítettek hozzá elmaradást,
akkor a szerkesztés megkezdésekor a kiválasztott vágányzárhoz a kliens program
automatikusan létrehozza a tény téglalapokat a tervezett kezdési és befejezési időkkel.
Ilyenkor a terv és tény téglalapok azonos méretűek és színűek.

A kiválasztott vágányzárnak a terv adata nem módosítható csak a tény adata.

A tény vágányzár kezdési vagy befejezési időpontját (a vágányzári téglalap időtengelyre
merőleges oldalát), ha az nincs a megjelenített időszakon túl, bal egérgombbal megfogva lehet
mozgatni az idő tengellyel párhuzamosan, korábbi vagy későbbi időpontra.

A mozgatás csak egész percekre lehetséges, a megjelenített időszak kezdetéig vagy végéig.

A tény vágányzári téglalap mozgatott oldalának elengedésekor:

  - A kiválasztott vágányzárhoz tartozó összes objektum tény tégl alapj a mó d osu l a

grafikonon. A vágányzárhoz tartozó terv téglalapok eredeti mérete megm a r ad, d e h a a
mozgatás után a terv és tény idők eltérnek, akkor 90 %     - os áttetszőségű l es z a szín e.

  - A beúszó szerkesztő panelre is átkerül az új tény idő adat, de ez az ad atb ázi sb a, csak a

szerkesztő panelen történő mentéskor kerül.

**2.2.3.10.3.2** **Vágányzárak szerkesztése beúszó szerkesztő panelen**

A Vágányzárak szerkesztése fejlécre pozícionálva beúszó szerkesztő panelen, lehetőség van a
kiválasztott vágányzárhoz tény adatok rögzítésére, módosítására, valamint a grafikonon
rögzített tény idők kiegészítésére, módosítására, mentésére.

*2.2.3.10.3.2.1* *Vágányzári szerkesztő panel megjelenése*

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 168/526|


2.2.3.10.3.2.2 *Vágányzári szerkesztő panel működése*



Vágányzár szerkesztése ikon használata után a kiválasztott vágányzári objektum szerkesztése
egyszerre történhet a grafikonon és a szerkesztő fejlécre pozícionálva beúszó szerkesztő
panelen.

***Szerkesztő fejléc felépítése***

A szerkesztő fejléc bal oldalán fixen megjelenik a „Vágányzár szerkesztése ” felirat.

Középen található a és a nyomógomb.

A szerkesztő fejléc jobb oldalán pedig azok az ikonok, amelyek szerkesztés közben is
használhatók:

  -   - Idővonalra ugrás ikon

  -   - X és Y tengely kicsinyítése ikon

  -   - X és Y tengely nagyítása ikon

  -   - X tengely kicsinyítése ikon

  -   - X tengely nagyítása ikon

  -   - Y tengely kicsinyítése ikon

  -   - Y tengely nagyítása ikon

***Beúszó szerkesztő panel***

A beúszó szerkesztő panelen lévő mezőket, a szerkesztés indításakor, a Vágányzár

–
szerkesztése ikon használatakor meghívott S_0151_22 Vágányzár szerkesztéshez adatok
lekérdezése (VaganyzarSzerkeszteshezQuery) szolgáltatástól kapott adatokkal tölti fel a
kliens program.

*Szerkesztő panelen lévő mezők*

  - Azonosító: Vágányzár VPE azonosítóját (éééé/iiiiiii/vvvv) (VgzA zo n ) m eg j elen ít ő

mező

  - Vágányzár oka: Vágányzár okának megnevezését (VgzOkNev) me g j elen ít ő mező

  - Vágányzár típusa: Vágányzár típusának megnevezését (VgzTipNev) m eg j elen ítő mező

  - Terület: A vágányzárhoz tartozó kizárások területének (Terulet) f elso r o l ását eg y m ás

alatt megjelenítő mező. Ötnél több terület esetén függőlegesen görgethető v é v áli k .
Vonali kizárásnál a terület tartalm a: v onal tak t neve+ ’ ’ +szolgálati helytől hosszú
neve+ ’    - ’ +szolgálati helyig hosszú ne ve
Állomási kizárásnál a terület tartalm a: a k izá r ás szolgálati helyének hosszú neve

  - Elmaradás: Kapcsoló a vágányzár elmaradásának jelzéséhez (Elmar ad as)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 169/526|


Bekapcsolásakor a kliens program a K ezdési é s Befejezési időket törli és mindkét
mezőt nem kezelhetővé teszi. A gr afi k onon a vá gányzárhoz tartozó tény téglalapokat

                                           törli, a tervezett időkhöz tartozó tég lalap ok színét pedig 90 % os áttetszőségűvé
változtatja.
Kikapcsolásakor a Kezdési időbe a ter v ez ett kezdési (TervErvKezdet) időt a
Befejezési időbe pedig a tervezett befej ez ési idő t (TervErvVeg) írja és mindkét mezőt
kezelhetővé teszi. A grafikonon a f elkínált id őkkel létrehozza a tény vágányzári
téglalapokat és a tervezett időkhö z tar tozó té glalapoknál a 90 %  - os áttetszőséget
megszünteti.

- Kezdési idő: A vágányzár tény kezdési idejének rögzítésére szolgál ó b e v i t eli mező .

Ha a panel megnyitásakor a vágányzá r hoz nincs tényadat (Az S_0151_22 – Vágányzár
szerkesztéshez adatok lekérdezése s zol gáltatá stól kapott adatokban a TenyErvKezdet
mező üres és az Elmaradás é r t ék e F alse. ), akkor a tervezett kezdési időt
(TervErvKezdet) kínálja fel a mező ben a pr og r am .
Ha az Elmaradás kapcsoló bekapcsolt, akk or ür es és nem kezelhető a mező.
Ha a Befejezési idő kitöltött, akkor k ötel ez ő a k it öltése.
Ha a mezőbe kerülő idő későbbi, mint a ter v eze t t kezdési idő (TervErvKezdet), akkor
a Megjegyzés mező kitöltése kötele zővé v áli k .
Ha a Kezdési idő későbbi, vagy az onos a B e fejezési idővel, akkor a mező alatt
hibaüzenetet jelenik meg. („Kisebb k ell legy en, mint a befejezés. ” )
Ha a Kezdési és a Befejezési idő is k itöltött, akkor a kliens program a megadott
időkkel a grafikonon létrehozza, v agy ha m á r léteznek, akkor módosítja a tény
vágányzári téglalapokat. Ha a K e zdé si idő vagy a Befejezési idő túlnyúlik a
megjelenített időszakon, akkor a tény v ágány zá rnak csak a megjelenített időszakon
belüli részét ábrázolja a grafikonon . H a a ter v e zett kezdési vagy befejezési idő nem
egyezik meg a ténnyel, akkor a ter vez ett idők höz tartozó téglalapok színét 90 %  - os
áttetszőségűvé változtatja.
Ha a Kezdési és Befejezési idő is ü r es, akk or a program törli a vágányzárhoz tartozó
tény téglalapokat. A tervezett időkhöz tar tozó té glalapoknak pedig a színét igazítja az
Elmaradás kapcsoló állapota szerint. H a az E lmaradás kapcsoló bekapcsolt, akkor
90%  - os áttetszőségűvé változtatja, ha k i k apcsolt, akkor pedig megszünteti az
áttetszőséget (amennyiben áttetsző v olt. )

- Elrendelő távirat: Tény vágányzári adatokhoz az elrendelő távirat rög zít ésér e s zo l g áló,

max 30 karakter hosszú, szöveges beviteli mező (Tavirat)

- Befejezési idő: A vágányzár tény befejezési idejének rögzítésér e szo lg áló b ev i t eli

mező.
Ha a panel megnyitásakor a vágányzá r hoz nincs tényadat (Az S_0151_22 – Vágányzár
szerkesztéshez adatok lekérdezése s zol gáltatá s tól kapott adatokban a TenyErvVeg
mező üres és az Elmaradás értéke F al se. ), akk or a tervezett vége időt (TervErvVeg)
kínálja fel a mezőben a program.
Ha az Elmaradás kapcsoló bekapcsolt, akk or ür es és nem kezelhető a mező.
Ha a Kezdési idő kitöltött, akkor kö telező a k itöltése
Ha a mezőbe kerülő idő későbbi, m int a ter v ezett vége idő (TervErvVeg), akkor a
Megjegyzés mező kitöltése kötelezőv é válik .
Ha a Kezdési idő későbbi, vagy az onos a B efejezési idővel, akkor a mező alatt
hibaüzenet jelenik meg. („Nagyobb k ell legy en, mint a kezdete. ” )

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 170/526|


Ha a Kezdési és a Befejezési idő is k itöltött, akkor a kliens program a megadott
időkkel a grafikonon létrehozza, v agy ha m á r léteznek, akkor módosítja a tény
vágányzári téglalapokat. Ha a K ezdé si idő vagy a Befejezési idő túlnyúlik a
megjelenített időszakon, akkor a t ény v ágány zárnak csak a megjelenített időszakon
belüli részét ábrázolja a grafikonon. H a a ter v e zett kezdési vagy befejezési idő nem
egyezik meg a ténnyel, akkor a ter vez ett idők höz tartozó téglalapok színét 90 %    - os
áttetszőségűvé változtatja.
Ha a Kezdési és Befejezési idő is ü r es, akk or a program törli a vágányzárhoz tartozó
tény téglalapokat. A tervezett időkhöz tar tozó té glalapoknak pedig a színét igazítja az
Elmaradás kapcsoló állapota szeri nt. H a az Elmaradás kapcsoló bekapcsolt, akkor
90%   - os áttetszőségűvé változtatja, ha k i k apcsolt, akkor pedig megszünteti az
áttetszőséget (amennyiben áttetsző v olt. )

  - Megjegyzés: Maximum 2000 karakter hosszú, szabad szöveg rög zít és ére alk al m as,

függőlegesen scrollozható beviteli mező.
A tervezettnél későbbi kezdési vagy bef eje zé si idő megadása esetén kötelezően
kitöltendő.

A szerkesztés befejezése a fejlécen található <Ment> és
<Mégsem> nyomógombokkal lehetséges.

***nyomógomb***

A <Ment> nyomógomb akkor kezelhető, ha a szerkesztő panel megnyitása óta a szerkesztő
panelen vagy a grafikonon változás történt a vágányzár tényadataiaban [VK94548] (A tervezett
idők felkínálása esetén is kezelhető a nyomógomb.) [VK94548vége] .

A nyomógomb használatakor a program a következő ellenőrzéseket végzi:

  - Ha a szerkesztő panelen van olyan mező, aminek a kitöltése kötelező és n i n cs k i t ö l t v e,

akkor ezt az érintett mező alatt jelzi a program és az adatok mentése nélk ü l f o l y t ath ató
a vágányzár szerkesztése.

  - Ha a Kezdési idő későbbi vagy azonos a Befejezési idővel, akk o r a m ező k alatt

hibaüzenetet ad a program és az adatok mentése nélkül folytatható a v ág án y zár
szerkesztése.

|VK94548-el törölve Ha a tény idők megegyeznek a tervezett időkkel, akkor hibaüzenetet ad („A megadott tényidők megegyeznek a tervezett időkkel.”) és az adatok mentése|Col2|
|---|---|
|||
|nélkül folytatható a vágányzár szerkesztése.|VK94548vége|
|||



  - Ha a szerkesztő panelen az Elmaradás kikapcsolt, a Kezdési valami n t a Bef ejezési i d ő

üres és a szerkesztés megkezdésekor az Elmaradás bekapcsolt volt (A z S _ 0 1 5 1 _ 2 2
szolgáltatástól kapott adatokban) akkor megerősítést kér a folytatáshoz:

„Biztos törli az elmaradást? (I/N) ”

Igenlő válasz esetén a program fol y tatja a k öve tkezőkben leírt működést. Nemleges
válasz esetén a többi műveletet nem v ég zi el é s f olytatható a vágányzár szerkesztése.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 171/526|



  - Ha a szerkesztő panelen az Elmaradás kikapcsolt, a Kezdési valami n t a Bef ejezési i d ő

üres és a szerkesztés megkezdésekor volt tényadat a vágányzárhoz ( A z S _ 0 1 5 1 _ 2 2
szolgáltatástól kapott adatokban a TenyErvKezdet mező nem ür es), ak k or
megerősítést kér a folytatáshoz:

„Biztos törli a vágányzári tény adatot? ( I /N)”

Igenlő válasz esetén a program fol y tatja a k öve tkezőkben leírt működést. Nemleges
válasz esetén a többi műveletet nem v ég zi el é s folytatható a vágányzár szerkesztése

Ha a program az ellenőrzések során nem talált hibát, valamint megerősítő üzenet esetén

–
igenlő válasz érkezett, akkor meghívja az S_0151_23 Vágányzári tény adatok mentése
(VaganyzarTenyMentesCommand) szolgáltatást ábra esetén AbraId - val, továbbá a panelen

–
lévő adatokkal, valamint az S_0151_22 Vágányzár szerkesztéshez adatok lekérdezése
(VaganyzarSzerkeszteshezQuery) szolgáltatástól kapott utolsó módosítási idővel.

Ha a szolgáltatás hibát jelez, akkor azt megjeleníti és nem lép ki a vágányzár szerkesztése
üzemmódból.

Ha a szolgáltatás rendben lefutott, akkor a program kilép a Vágányzár szerkesztése
üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fejléc és panel, a vágányzár kijelölése
megszűnik, a többi objektum elérhetővé válik és a Vágányzár szerkesztése ikon nem
kezelhetővé válik. A program meghívja a következő szolgáltatásokat és a szolgáltatásoktól
kapott adatokkal frissíti a grafikon tartalmát:

  - Amennyiben szükséges a menetrendi adatok megjelenítése a g raf i k o n o n a

megjelenítési beállítások szerint akkor meghívja az **S_0151_04** **–** **Menet** **rend** **i** **a** **da** **tok**
**lekérdezése** (MenetrendiAdatokQuery) szolgáltatást

  - A tény adatok frissítéséhez meghívja az **S_0151_05** **–** **Ténya** **da** **to** **k** **l** **ek** **érdezés** **e**

(TenyadatokQuery) szolgáltatást.

  - Az RDE adatok frissítéséhez, amennyiben az RDE események m eg j elen ít és e i k o n

beállítása szerint szükséges, meghívja az **S_0151_19** **–** **RDE adat** **ok** **l** **ek** **érdezés** **e**
(RdeAdatokQurey) szolgáltatást.

  - A vágányzári adatok frissítéséhez meghívja az **S_0151_06** **-** **V** **á** **gá** **ny** **zá** **ra** **k**

**lekérdezése** (VaganyzarakQuery) szolgáltatást.

***nyomógomb***

A <Mégsem> nyomógomb mindig használható.

A nyomógomb használatakor, ha a szerkesztő panel megnyitása óta a szerkesztő panelen vagy
a grafikonon változtak a vágányzár tény adatai, akkor a program megerősítést kér a
folytatáshoz. (151009 - UC_01_51_CONF_CANCEL - „Biztosan kilép? A nem mentett
adatok elvesznek! ” )

A megerősítő üzenetre adott nemleges válasz esetén folytatható a Vágányzár szerkesztése.

Igenlő válasz esetén a program az adatok mentése nélkül kilép a Vágányzár szerkesztése
üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fejléc és panel, a vágányzár kijelölése
megszűnik, a többi objektum elérhetővé válik és a Vágányzár szerkesztése ikon nem

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 172/526|


kezelhetővé válik. A program meghívja a következő szolgáltatásokat és a szolgáltatásoktól
kapott adatokkal frissíti a grafikon tartalmát:

  - Amennyiben szükséges a menetrendi adatok megjelenítése a g raf i k o n o n a

megjelenítési beállítások szerint akkor meghívja az **S_0151_04** **–** **Menet** **rend** **i** **a** **da** **tok**
**lekérdezése** (MenetrendiAdatokQuery) szolgáltatást

  - A tény adatok frissítéséhez meghívja az **S_0151_05** **–** **Ténya** **da** **to** **k** **l** **ek** **érdezés** **e**

(TenyadatokQuery) szolgáltatást.

  - Az RDE adatok frissítéséhez, amennyiben az RDE események m eg j elen ít és e i k o n

beállítása szerint szükséges, meghívja az **S_0151_19** **–** **RDE adat** **ok** **l** **ek** **érdezés** **e**
(RdeAdatokQurey) szolgáltatást.

  - A vágányzári adatok frissítéséhez meghívja az **S_0151_06** **-** **V** **á** **gá** **ny** **zá** **ra** **k**

**lekérdezése** (VaganyzarakQuery) szolgáltatást.

88953vége

**2.2.3.11** **[89001 ]** **Szöveges megjegyzések kezelése a diagramon**

Az A_0151_01 ablakon ábra megnyitása esetén, a megfelelő
OP_0151_MGMIranyitoiSzovegMegtekint jogosultsággal rendelkező PV felhasználónál
jelenhetnek meg az adott ábrához rögzített szöveges megjegyzések, ha a Szöveges
megjegyzések megjelenítése ikon állapota szerint meg kell jeleníteni a szöveges
megjegyzéseket.

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta (ami csak időhenger
üzemmódban lehetséges), akkor lehetősége van új szöveges megjegyzések rögzítésére,
VK105779 meglevő szöveges megjegyzések idővonalhoz kötöttségének módosítására, VK105779vége
valamint az általa rögzített szöveges megjegyzések módosítására, törlésére is.

**Szöveges megjegyzések megjelenítése**

Az A_0151_01 ablakon a szöveges megjegyzések csak ábra megnyitása esetén és csak a
megfelelő OP_0151_MGMIranyitoiSzovegMegtekint jogosultsággal rendelkező PV
felhasználónál jelennek meg, a Szöveges megjegyzések megjelenítése ikon állapotának
megfelelő módon.

A szöveges megjegyzések megjelenítéséhez szükséges adatokat az **S** **_** **0151** **_** **32 Szöveges**
**megjegyzések lekérdezése (SzovMegjegyzesekQuery)** szolgáltatás biztosítja. A kliens az
adott ábra belső azonosítójával és a lekérdezett időszakkal hívja meg a szolgáltatást.

Időhenger üzemmódban, a szöveges megjegyzések frissítéséhez a kliens 30 másodpercenként
újra meghívja az **S_0151_32** szolgáltatást és a kapott adatokkal újra rajzolja a szöveges
megjegyzéseket.

A Szöveges megjegyzések megjelenítése ikon állapota szerint a következő ábrázolási módok
lehetségesek:

  - Nem kell megjeleníteni a szöveges megjegyzéseket

  - Csak a szöveges megjegyzés típusának megfelelő ikont kell megjelen íten i

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 173/526|



  - A szöveges megjegyzések típusának megfelelő ikont és mellette a szö v eg es

megjegyzés első 20 karakterét kell megjeleníteni. A szövegrészt az A _ 01 51_0 4
ablakon beállított stílusnak megfelelő színnel kell kiírni a grafikonon.
A grafikonon a szöveges megjegyzés ábrázolását, a kliens program az **S_0151_32**
szolgáltatástól kapott adatok alapján végzi.
Térben:

  - Ha az úttengelyen a szolgálati hel y ek m eg jelenít ése a kezdőpont felöli és a szöveges

megjegyzés létrehozása is kezdőpon t felöl tör tént (S _ 0151 _ 32 szolgáltatástól kapott
KezdopontVegpontIrany értéke Tru e ), akk or a kapott szolgálati helytől (KezdSzhId) a
kezdő távolság mezőben (TavKezdSzhTol) k apo tt km    - nek megfelelő helyen kezdi az
ábrázolást.

  - Ha az úttengelyen a szolgálati h el y ek m eg jelenít ése a kezdőpont felöli, de a szöveges

megjegyzés létrehozása végpont fel öl tör tént ( S_ 0151 _ 32 szolgáltatástól kapott
KezdopontVegpontIrany értéke False ), akk or a kapott szolgálati hely (KezdSzhId)
előtt a kezdő távolság mezőben (Ta v K ezdS zhTol) kapott km     - nek megfelelő helyen
fejezi be a szöveges megjegyzés ábr ázolását.

  - Ha az úttengelyen a szolgálati hel y ek m eg jelenítése végpont felöli, de a szöveges

megjegyzés létrehozása kezdőpont felöl tör tént ( S _ 0151 _ 32 szolgáltatástól kapott
KezdopontVegpontIrany értéke Tru e ), akk or a k apott szolgálati hely (KezdSzhId)
előtt a kezdő távolság mezőben (Ta v K ezdS zhTol) kapott km     - nek megfelelő helyen
fejezi be a szöveges megjegyzés ábr ázolá sát.

  - Ha az úttengelyen a szolgálati helyek megjelenítése a végpont felöli és a szö v eg es

megjegyzés létrehozása is végpont felöl történt (S _ 0151 _ 32 szolgáltatást ó l k ap o t t
KezdopontVegpontIrany értéke False), akkor a kapott szolgálati helytől ( Kezd S zh Id ) a
kezdő távolság mezőben (TavKezdSzhTol) kapott km    - nek megfelelő hel y en k ezd i az
ábrázolást.
Időben az érvényesség kezdeténél kezdi az ábrázolást, ha az nem üres. Ha az érvényesség
kezdete üres, akkor időhenger esetén az idővonalnál, fix időszak esetén pedig az aktuális
időnél kezdi az ábrázolást (amennyiben az aktuális idő beleesik a lekérdezett időszakba).

A szöveges megjegyzésnek a következő típusai lehetnek:

     -     - figyelmeztetés

     -     - információ

Az ikonok vagy szövegrészek fölé pozícionálva a program megváltoztatja az egér kurzort,
ezzel jelezve, hogy ez kattintható terület.

A kattintható területen a jobb egér gombot használva, ha a kattintás helyén nincs más
objektum, vagy több objektum esetén bármelyik egér gomb használatakor feljövő menüből,
jobb egér gombbal a szöveges megjegyzést választva, megnyílik a Szöveges megjegyzés
információs terület. Ennek leírása a Szöveges megjegyzés információs terület című fejezetben
található

A kattintható területen bal egér gombot használva, ha a kattintás helyén nincs más objektum,
vagy több objektum esetén bármelyik egér gomb használatakor feljövő menüből, bal egér
gombbal a szöveges megjegyzést választva, a szöveges megjegyzés megjelenített része
félkövéren és nagyobb betűmérettel jelenik meg.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 174/526|


**Szöveges megjegyzések szerkesztése**



Irányítói üzemmódba, ha az ábrát a felhasználó szerkesztésre lefoglalta (ami csak időhenger
üzemmódban lehetséges) és a Szöveges megjegyzések megjelenítése ikon állapota szerint a
grafikonon megjelennek a szöveges megjegyzések, akkor lehetősége van új szöveges
megjegyzések rögzítésére, valamint az általa rögzített szöveges megjegyzések módosítására,
törlésére.

**2.2.3.11.2.1** **Új szöveges megjegyzés rögzítése**

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta és a szöveges
megjegyzések megjelenítését bekapcsolta, akkor kezelhetővé válik a Szerkesztés
menüponthoz tartozó Új szöveges megjegyzés rögzítése ikon.

Az ikonra kattintva a kliens program a grafikonon látható terület középső részére felhelyez
egy új információ típusú szöveges megjegyzéshez tartozó ikont, amit automatikusan ki is
választ. Az ablak átvált Szöveges megjegyzés szerkesztése üzemmódra, megjelenik az ehhez
tartozó fejléc és az újonnan létrehozott szöveges megjegyzés szerkeszthetővé, a grafikonon
megjelenő többi objektum nem kiválaszthatóvá válik. A szöveges megjegyzés szerkesztése
egyszerre történhet a grafikonon és a szerkesztő fejlécre pozicionálva beúszó szerkesztő
panelen.

**2.2.3.11.2.2** **Szöveges megjegyzés módosítása**

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta és az ábrán bal egér
gombbal [VK105779 ] ~~egy~~ ~~olyan~~ ~~szöveges~~ ~~megjegyzést~~ ~~vál~~ as ~~ztott~~ ~~ki~~, ~~amit~~ ~~ő~~ ~~rögzített~~ kiválasztott
egy szöveges megjegyzést [ VK105779vége], akkor kezelhetővé válik a Szerkesztés menüponthoz
tartozó almenüsorból a Szöveges megjegyzés szerkesztése ikon.

Az ikonra kattintva az ablak átvált Szöveges megjegyzés szerkesztése üzemmódra,
megjelenik az ehhez tartozó fejléc és a kiválasztott szöveges megjegyzés szerkeszthetővé, a
grafikonon megjelenő többi objektum nem kiválaszthatóvá válik.

Amennyiben a kiválasztott [VK105779] szöveges megjegyzést a szerkesztést kezdeményező
felhasználó hozta létre, akkor a [ VK105779vége] szöveges megjegyzés szerkesztése egyszerre
történhet a grafikonon és a szerkesztő fejlécre pozicionálva beúszó szerkesztő panelen.
VK105779 Amennyiben a kiválasztott szöveges megjegyzést nem a szerkesztést kezdeményező
felhasználó hozta létre, akkor a szöveges megjegyzésnek csak az idővonalhoz kötöttsége
változtatható a szerkesztő panelen. [ VK105779vége ] A beúszó szerkesztő panelen lévő mezőket, az
**S_0151_32** **–** **Szöveges** **megjegyzések** **lekérdezése** **(SzovMegjegyzesekQuery)**
szolgáltatástól kapott adatokkal tölti fel a kliens program.

**2.2.3.11.2.3** **Szöveges megjegyzés szerkesztése a grafikonon**

VK105779 Ha a kiválasztott szöveges megjegyzést a szerkesztést kezdeményező felhasználó
hozta létre, akkor [ VK105779vége] a grafikonon a kiválasztott szöveges megjegyzéshez tartozó ikon

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 175/526|


és a megjelenő szövegrész (amennyiben megjelenik a beállítások szerint), egérrel megfogható
és mozgatható.

A mozgatás során a szöveges megjegyzés mérete nem változik.

                                      A mozgatás időben csak egész percekre, térben pedig egész km ekre lehetséges.

Ha a szerkesztő panelen az Idővonalra mozgatás kapcsoló bekapcsolt állapotú, akkor a
mozgatás hatására kikapcsolt lesz.

A szöveges megjegyzés adatainak a megadása, módosítása a szerkesztő panelen lehetséges.

**2.2.3.11.2.4** **Szöveges megjegyzések szerkesztése beúszó szerkesztő panelen**

A Szöveges megjegyzés szerkesztése panelen, van lehetőség a kiválasztott szöveges
megjegyzés adatainak a megadására, módosítására, valamint a szöveges megjegyzés
mentésére.

*2.2.3.11.2.4.1* *Szöveges megjegyzés szerkesztő panel megjelenése*

*2.2.3.11.2.4.2* *Szöveges megjegyzés szerkesztő panel működése*

VK105779 Ha a kiválasztott szöveges megjegyzést a szerkesztést kezdeményező felhasználó
hozta létre, akkor [ VK105779vége] a kiválasztott szöveges megjegyzés szerkesztése egyszerre
történhet a grafikonon és a szerkesztő fejlécre pozícionálva beúszó szerkesztő panelen.
VK105779 Amennyiben a kiválasztott szöveges megjegyzést nem a szerkesztést kezdeményező
felhasználó hozta létre, akkor a szöveges megjegyzésnek csak az idővonalhoz kötöttsége
változtatható a szerkesztő panelen. [ VK105779vége]

***Szerkesztő fejléc felépítése***

A szerkesztő fejléc bal oldalán fixen megjelenik a „Szöveges megjegyzés szerkesztése ”
felirat.

Középen található a és a nyomógomb.

A szerkesztő fejléc jobb oldalán pedig azok az ikonok, amelyek szerkesztés közben is
használhatók:

  -   - Idővonalra ugrás ikon

  -   - X és Y tengely kicsinyítése ikon

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 176/526|



  -   - X és Y tengely nagyítása ikon

  -   - X tengely kicsinyítése ikon

  -   - X tengely nagyítása ikon

  -   - Y tengely kicsinyítése ikon

  -   - Y tengely nagyítása ikon

***Beúszó szerkesztő panel***



Szöveges megjegyzés módosítása esetén a beúszó szerkesztő panelen lévő mezőket, a
**S_0151_32** **–** **Szöveges** **megjegyzések** **lekérdezése** **(SzovMegjegyzesekQuery)**
szolgáltatástól kapott adatokkal tölti fel a kliens program.

*Szerkesztő panelen lévő mezők*

  - Szöveges megjegyzés típusa rádiógomb csoport, aminél a követk ez ő ért ék ek k özü l

lehet választani:

`o` Információ

`o` Figyelmeztetés

A megfelelő érték kiválasztása utá n a g r afi k ono n megjelenik a kiválasztott értékhez
tartozó ikon. [VK105779] Csak a szöveg es m eg jeg yzést létrehozó felhasználó számára
kezelhető mező. [VK105779vége]

  - Idővonalra mozgatás kapcsoló.

A panel megnyitásakor, ha az **S_** **0151_32 –** **Szöveges megjegyzések lekérdezése**
**(SzovMegjegyzesekQuery)** szolgá ltatá stól k apo tt adatokban az érvényesség kezdete
NULL, akkor bekapcsolt egyébként p edig k i k apc solt az állapota.
Bekapcsolásakor a grafikonon a szöv ege s m eg je gyzéshez tartozó ikont és a megjelenő
szövegrészt (amennyiben megjele nik a beállítások szerint) a kliens program az
idővonalhoz mozgatja. A kapcsoló bek apcsolt á llapota esetén a szöveges megjegyzés
automatikusan mozog az idővonalla l.
Kikapcsolásakor a szöveges megjegy zés hel y zete a grafikonon nem nem változik, de a
kapcsoló kikapcsolt állapota esetén a szöve ges megjegyzés már nem mozog
automatikusan az idővonallal.

  - Megjegyzés: Maximum 1000 karakter hosszú, szabad szöveg rög zít és ére alk al m as,

függőlegesen scrollozható beviteli mező. Kitöltése kötelező. [VK105779] Csak a szö v eg es
megjegyzést létrehozó felhasználó számára kezelhető mező. [VK105779vége]
A beírt megjegyzés első 20 kar ak ter e, a m ező elhagyása után, amennyiben a
megjelenítési beállítások szerint szüks é g es, megjelenik a grafikonon, a szöveges
megjegyzéshez tartozó ikon mellett.

A szerkesztés befejezése a fejlécen található <Ment> és
<Mégsem> nyomógombokkal lehetséges.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 177/526|


***nyomógomb***

A <Ment> nyomógomb a következő esetekben kezelhető:

  - új szöveges megjegyzés létrehozásakor




  - szöveges megjegyzés módosításakor, ha a szerkesztő panel m eg ny i t ása ó t a a

szerkesztő panelen vagy a grafikonon változás történt a szöveges megje g y zésnél .

A nyomógomb használatakor a program a következő ellenőrzéseket végzi:

  - Ha a szerkesztő panelen van olyan mező, aminek a kitöltése kötele ző és n i n cs k i t ö l t v e,

akkor ezt az érintett mező alatt jelzi a program és az adatok mentése nélk ü l f o l y t ath ató
a szöveges megjegyzés szerkesztése.

Ha a program az ellenőrzések során nem talált hibát, akkor meghívja az **S_0151_37** **–**
**Szöveges megjegyzés adatainak a** karbantartása **(SzovMegjegyzesKarbantartCommand)**
szolgáltatást a grafikonon és a panelen lévő adatokkal, ’ M ’ működési móddal [VK105779 ] és az
**S_0151_32** szolgáltatástól kapott Utolsó módosítás idejével [VK105779vége] . Amennyiben az
Idővonalra mozgatás kapcsoló bekapcsolt, akkor az érvényesség kezdete mezőbe NULL - t
helyez.

Ha a szolgáltatás hibát jelez, akkor azt megjeleníti és nem lép ki a Szöveges megjegyzés
szerkesztése üzemmódból.

Ha a szolgáltatás rendben lefutott, akkor a program kilép a Szöveges megjegyzés szerkesztése
üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fejléc és panel, a szöveges megjegyzés
kijelölése megszűnik, a többi objektum elérhetővé válik és a Szöveges megjegyzés
szerkesztése ikon nem kezelhetővé válik. A program meghívja a következő szolgáltatásokat
és a szolgáltatásoktól kapott adatokkal frissíti a grafikon tartalmát:

  - Amennyiben szükséges a menetrendi adatok megjelenítése a g raf i k o n o n a

megjelenítési beállítások szerint akkor meghívja az **S_0151_04** **–** **Menet** **rend** **i** **a** **da** **tok**
**lekérdezése** (MenetrendiAdatokQuery) szolgáltatást

  - A tény adatok frissítéséhez meghívja az **S_0151_05** **–** **Ténya** **da** **to** **k** **l** **ek** **érdezés** **e**

(TenyadatokQuery) szolgáltatást.

  - Az RDE adatok frissítéséhez, amennyiben az RDE események m eg j elen ít és e i k o n

beállítása szerint szükséges, meghívja az **S_0151_19** **–** **RDE adat** **ok** **l** **ek** **érdezés** **e**
(RdeAdatokQurey) szolgáltatást.

  - A vágányzári adatok frissítéséhez, amennyiben a megjelenít ési b eáll í t ások ( a

megjelenítést vezérlő ikonok) szerint szükséges a vágányzárak megjelení t ése, ak k o r
meghívja az **S_0151_06** **-** **Vágányzárak lekérdezése** (Vag an y zarak Qu e ry )
szolgáltatást.

  - A menetengedélyek frissítéséhez, amennyiben a megjelenítési b eáll í t ások ( a

megjelenítést vezérlő ikon) szerint szükséges a menetengedélyek meg j elen ítés e a
grafikonon, akkor az **S_0151_34** **–** **Menetengedélyek** **l** **ek** **érdezése**
**(MenetengedelyekQuery)** szolgáltatást.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 178/526|



  - A szöveges megjegyzések frissítéséhez meghívja az **S_0151** **_** **3** **2** **– S** **zö** **v** **eg** **es**

**megjegyzések lekérdezése (SzovMegjegyzesekQuery)** szolgáltatást.

***nyomógomb***

A <Mégsem> nyomógomb mindig használható.

A nyomógomb használatakor, új szöveges megjegyzés létrehozása esetén, vagy szöveges
megjegyzés módosítása esetén, ha változtak az adatai, akkor a program megerősítést kér a
folytatáshoz. (151009 - UC_01_51_CONF_CANCEL - „Biztosan kilép? A nem mentett
adatok elvesznek! ” )

A megerősítő üzenetre adott nemleges válasz esetén folytatható a szöveges megjegyzés
szerkesztése.

Igenlő válasz esetén a program az adatok mentése nélkül kilép a Szöveges megjegyzés
szerkesztése üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fejléc és panel, a
szöveges megjegyzés kijelölése megszűnik, a többi objektum elérhetővé válik és a Szöveges
megjegyzés szerkesztése ikon nem kezelhetővé válik. A program meghívja a következő
szolgáltatásokat és a szolgáltatásoktól kapott adatokkal frissíti a grafikon tartalmát:

  - Amennyiben szükséges a menetrendi adatok megjelenítése a g raf i k o n o n a

megjelenítési beállítások szerint akkor meghívja az **S_0151_04** **–** **Menet** **rend** **i** **a** **da** **tok**
**lekérdezése** (MenetrendiAdatokQuery) szolgáltatást

  - A tény adatok frissítéséhez meghívja az **S_0151_05** **–** **Ténya** **da** **to** **k** **l** **ek** **érdezés** **e**

(TenyadatokQuery) szolgáltatást.

  - Az RDE adatok frissítéséhez, amennyiben az RDE események m eg j elen ít és e i k o n

beállítása szerint szükséges, meghívja az **S_0151_19** **–** **RDE adat** **ok** **l** **ek** **érdezés** **e**
(RdeAdatokQurey) szolgáltatást.

  - A vágányzári adatok frissítéséhez, amennyiben a megjelenít ési b eáll í t ások ( a

megjelenítést vezérlő ikonok) szerint szükséges a vágányzárak megj elení t ése, ak k o r
meghívja az **S_0151_06** **-** **Vágányzárak lekérdezése** (Vag an y zarak Qu e ry )
szolgáltatást.

  - A menetengedélyek frissítéséhez, amennyiben a megjelenítési b eáll í t ások ( a

megjelenítést vezérlő ikon) szerint szükséges a menetengedélyek meg j elen ítés e a
grafikonon, akkor az **S_0151_34** **–** **Menetengedélyek** **l** **ek** **érdezése**
**(MenetengedelyekQuery)** szolgáltatást.

  - A szöveges megjegyzések frissítéséhez meghívja az **S_0151** **_** **3** **2** **– S** **zö** **v** **eg** **es**

**megjegyzések lekérdezése (SzovMegjegyzesekQuery)** szolgáltatást.

**2.2.3.11.2.5** **Szöveges megjegyzés törlése**

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta és az ábrán bal egér
gombbal egy olyan szöveges megjegyzést választott ki, amit ő hozott létre, akkor kezelhetővé

válik a Szerkesztés menüponthoz tartozó almenüsorból a **Törlés** ikon.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 179/526|


Ilyenkor a kiválasztott szöveges megjegyzés törlése a **Törlés** ikon kezelésével vagy a
**Del/Delete** billentyű megnyomásával is kezdeményezhető.

A megfelelő szöveges megjegyzés kiválasztása után a **Törlés** ikon illetve a **Del/Delete**
billentyű kezelésekor a törlés végrehajtása előtt a kliens program megerősítést kér a
folytatáshoz:
Törli a kiválasztott {0}? <Igen>/<Nem>
{0} = ’ szöveges megjegyzést ’

A megerősítésre adott igenlő válasz esetén, a szöveges megjegyzés törléséhez, meghívja az
**S_0151_37** **–** **Szöveges** **megjegyzés** **adatainak** **a** **karbantartása**
**(SzovMegjegyzesKarbantartCommand)** szolgáltatást a következő paraméterekkel:

  - Szöveges megjegyzés belső azonosítója (SzovegMegjId): a k i j elö l t szö v eg es

megjegyzés belső azonosítója

  - Működési mód (MukodesiMod): ’ T ’- Törlés

  - Ábra belső azonosítója (AbraId): A lefoglalt ábra belső azonosítója

  - Szöveg típusa (SzovegTip) ( ’ f ’- figyelmeztetés, ’ i ’- információ): NULL

  - Érvényesség kezdete (ErvKezdet): NULL

  - Érvényesség vége (ErvVeg): NULL

  - Kezdő szolgálati hely (KezdSzhId): NULL

  - Távolság a kezdő szolgálati helytől (TavKezdSzhTol): NULL

  - Vég szolgálati hely (VegSzhId): NULL

  - Távolság a vég szolgálati helytől (TavVegSzhTol): NULL

  - Megjegyzés (Megj): NULL

   - VK105779 ~~Létrehozó~~ ~~felhasználó~~ ~~azonosítója~~ ~~(LetrFelhAzon):~~ ~~A~~ ~~me~~ ~~g~~ ~~j~~ ~~eg~~ ~~y~~ ~~zés~~ ~~t~~ ~~l~~ ~~étre~~ ~~h~~ ~~o~~ ~~zó~~
~~felhasználó~~ ~~azonosítója~~ [VK105779vége ]

  - Kezdőponttól a végpontig irány jelző (KezdopontVegpontIrany):NU LL

  - VK105779 Felhasználó azonosítója (FelhAzon): A törlést végző felhas z n áló a zo n o sí t ó j a

  - Utolsó módosítás ideje (UtolsoMod): Az **S_0151_32** szolgáltatá st ó l k ap o t t u t o l só

módosítás ideje [VK105779vége]

Ha az S _ 0151 _ 37 szolgáltatás nem adott vissza hibát, akkor meghívja a grafikon frissítéséhez
szükséges szolgáltatásokat és a szolgáltatásoktól kapott adatokkal frissíti a grafikon tartalmát.

89001vége

**2.2.3.12** **[88998 ]** **Teljesítménycsökkenés szerkesztése**

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta (ami csak időhenger
üzemmódban lehetséges) és az ábrán egy olyan, nem MRN *(menetrend nélküli,* *’* *VNTTId* *’* *<>*
*1* *’* *)* vonathoz tartozó, menetvonalat választott, amihez tartozik tény/előrejelzés vonal, akkor

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 180/526|


kezelhetővé válik a Szerkesztés menüponthoz tartozó almenüsorból a Teljesítménycsökkenés
ikon.

Az ikonra kattintva a kliens program a kiválasztott menetvonal belső azonosítójával meghívja
a következő szolgáltatásokat:

  - **S_0151_40** **–** **Teljesítménycsökkenés** **szerkesztéséhez** **ada** **tok** **l** **ek** **érdezés** **e**
**(TeljesitmenycsokkQuery)** szolgáltatást, ami visszaadja a szerkeszté shez szü k ség es
adatokat.

  - **S_0151_44** **–** **Menetvonal** **szolgálati** **helyeinek** **l** **ek** **érdezés** **e**
**(MenetvonalSzolgHelyekQuery** ) szolgáltatást, ami a panelen lévő szo lg álati h ely
beviteli mezők lenyíló listájának értékkészletét biztosítja.

Ezután az ablak átvált Teljesítménycsökkenés szerkesztése üzemmódra, megjelenik az ehhez
tartozó fejléc és a grafikonon az objektumok nem kiválaszthatóvá válnak.

A szerkesztő fejlécre pozicionálva beúszó szerkesztő panelen lehetséges a kiválasztott
menetvonal aktuális vonatának aktuális vonatösszeállításában szereplő vontatójárművekhez
teljesítménycsökkenés rögzítésére, módosítására, törlésére.

**Teljesítménycsökkenés szerkesztése panel megjelenése**

**Teljesítménycsökkenés szerkesztése panel működése**

***Szerkesztő fejléc felépítése***

A szerkesztő fejléc bal oldalán fixen megjelenik a „Teljesítménycsökkenés szerkesztése ”
felirat.

Középen található a és a nyomógomb.

A szerkesztő fejléc jobb oldalán pedig azok az ikonok, amelyek szerkesztés közben is
használhatók:

  -   - Idővonalra ugrás ikon

  -   - X és Y tengely kicsinyítése ikon

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 181/526|



  -   - X és Y tengely nagyítása ikon

  -   - X tengely kicsinyítése ikon

  -   - X tengely nagyítása ikon

  -   - Y tengely kicsinyítése ikon

  -   - Y tengely nagyítása ikon

***Beúszó szerkesztő panel***



**–**
A beúszó szerkesztő panelen lévő mezőket és a gridet a **S_0151_40** **Teljesítménycsökkenés**
**szerkesztéséhez adatok lekérdezése (TeljesitmenycsokkQuery)** és az **S_0151_44** **–**
**Menetvonal** **szolgálati** **helyeinek** **lekérdezése** **(MenetvonalSzolgHelyekQuery** )
szolgáltatástól kapott adatokkal tölti fel a kliens program.

*Szerkesztő panelen lévő mezők* :

  - Vonatazonosító: Vonatszám+ ’ / ’ +vonat indulási dátuma (éééé.hh . n n ) (Vo n atAzo n )

Megjelenítő mező

  - Megrendelés azonosító: Igénylés éve+ ’ / ’ +iktatószám+ ’ / ’ +verzi ószám (Meg rA zo n )

Megjelenítő mező

  - Megrendelő: VV rövid nevét megjelenítő mező (Megrendelo)

  - Aktuális vonatösszeállítás érvényessége (felirat)

`o` Szolgálati helytől: A vonatösszeállítás kezdő szolgálati helyének t elj es n ev ét

megjelenítő mező (VoKezdSzhNev)
`o` Szolgálati helyig: A vonatösszeállítás vég szolgálati helyének t elj es nev ét

megjelenítő mező (VoVegSzhNev)

  - Teljesítménycsökkenés (felirat)

`o` Vontatójármű azonosító: A listából kiválasztott vontatójármű azo n osí t ó j át

                              megjelenítő mező (xx xx xxxx xxx x) (JarmuAzon)
`o` Csökkentett teljesítmény:

        - A csökkentett teljesítmény mér té kének megadására szolgáló 2 hosszú

beviteli mező (99). Alapértelmezetten üres. 1            - 99 érték írható a mezőbe .
Csak akkor írható, ha van kiválasztott sor a listában.

        - ’ % ’ (felirat a beviteli mező mögött)
`o` Szolgálati helytől: A szolgálati hely statisztikai számát és r öv i d n ev ét

tartalmazó lenyíló beviteli mező, ahol a menetvonal szolgálati helyei közül
lehet választani. Értékkészletét az **S_0151_44** **–** **Menetvonal szolgálati**
**helyeinek** **lekérdezése** **(MenetvonalSzolgHelyekQuery** ) szolgáltatás
biztosítja. Csak akkor írható a mező, ha van kiválasztott sor a listában. Ha a
kiválasztott vontatójárműhöz még nincs rögzítve teljesítménycsökkenés, akkor
az aktuális vonatösszeállítás kezdő szolgálati helyét kínálja fel a mezőben a

program.
`o` Szolgálati helyig: A szolgálati hely statisztikai számát és r öv i d nev ét

tartalmazó lenyíló beviteli mező, ahol a menetvonal szolgálati helyei közül
lehet választani. Értékkészletét az **S_0151_44** **–** **Menetvonal szolgálati**
**helyeinek** **lekérdezése** **(MenetvonalSzolgHelyekQuery** ) szolgáltatás

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 182/526|


biztosítja. Csak akkor írható a mező, ha van kiválasztott sor a listában. Ha a
kiválasztott vontatójárműhöz még nincs rögzítve teljesítménycsökkenés, akkor
az aktuális vonatösszeállítás vég szolgálati helyét kínálja fel a mezőben a

program.
*<Módosít> nyomógomb*
A <Módosít> nyomógomb akkor használható, ha van kiválasztott sor a g r i d b en és a
panelen változott valamelyik beviteli mező tartalma.
A nyomógomb használatakor a kliens program ellenőrzést végez:

  - Ha a szerkesztő panelen van olyan beviteli mező, ami nincs kitöltve, ak k or a k l i en s

program az érintett mező alatt hibaüzenetet ad. Hibaüzenet: 1 5 1 0 0 7    UC_01_51_ERR_KITOLT_KOTELEZO   - „Kitöltése kötelező! ” .

  - Ha a Csökkentett teljesítmény mezőben 0 érték szerepel, akkor a k l i en s pr o g r am

hibaüzenetet ad. Hibaüzenet: 151024    UC_01_51_ERR_NULLANAL_NAGYOBB_LEHET – „Csak 0   - n ál n ag yo bb
érték adható meg. ”

  - Ha a Szolgálati helytől mezőben megadott szolgálati helynél (az S _0 1 5 1 _ 4 4

szolgáltatástól kapott adatok alapján) a vonat sorszáma (VonatSors z) nag yo b b,
mint Szolgálati helyig mezőhöz tartozó vonat sorszám, vagy ha a vonat sor s zám ok
megegyeznek, de a Szolgálati helytől vonatforgalmi tervben lév ő sor s zám a
(VftSzhIndex) nagyobb vagy egyenlő, mint a Szolgálat helyighez tarto zó so rs zám,
akkor a kliens program hibaüzenetet ad. Hibaüzenet: 1 5 1 0 0 8UC_01_51_ERR_SZHTOL_NEM_KORABBI   - „A Szolgálati hely t ő l cs ak
korábbi lehet, mint a Szolgálati helyig. ”
Ha nem volt hiba, akkor a beviteli mezők tartalmával a kliens pr o g ram f elü l í r j a a
kiválasztott sor tartalmát. A módosított értékek csak a <Ment> nyomó g omb h aszn ál atáv al
kerülnek elmentésre az adatbázisba és válnak láthatóvá mások számára .
*<Töröl> nyomógomb*
A <Töröl> nyomógomb akkor használható, ha van kiválasztot t so r a g r i d b en.
Használatakor kiürülnek a beviteli mezők és a gridben az Azonosítót ki v év e, a k i v ála szto t t
vontatójárműnél is kiürülnek a mezők. Az adatbázisban a törlés csak a <M en t>
nyomógomb használatával történik meg és csak ezután lesz láthatóvá m ás o k szám ár a.
*Vontatójárművek teljesítménycsökkenése grid*
Ez egy nem lapozható grid. A grid magassága maximum 3 sor lehet, en n él t ö b b so r esetén
függőleges gördítő sáv jelenik meg. A gridből csak egy sor válasz t h at ó k i . Eg y so r
kijelölésekor, az adott sorban lévő adatok megjelennek a grid feletti mező k b en . A k l i en s
program a szerkesztő panel megnyitásakor az **S_0151_40** **–** **Teljesí** **t** **mén** **y** **cs** **ö** **kk** **e** **nés**
**szerkesztéséhez adatok lekérdezése (TeljesitmenycsokkQuery)** szo l g ál t atást ó l k ap o t t
adatokkal tölti fel a gridet.
*Vontatójárművek teljesítménycsökkenése grid* oszlopai az alapértelmezet t so rr endbe n








|Col1|Felirat|Megnev ezés|Súgó (ToolTi p) szöveg|Hos sz|Maszk/Típus|Alapértelm ezett érték|Törzstábl a/kódtábl a|
|---|---|---|---|---|---|---|---|
||Azonosító|Vontatójá rműazono sító|Vontatój árműazo nosító|16|xx xx xxxx xxx-x||JarmuAzon|
||Csökk telj|Csökkent|Csökken|2|99||Mertek|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 183/526|







|(%)|ett teljesítm ény|tett teljesítm ény|Col4|Col5|Col6|Col7|
|---|---|---|---|---|---|---|
|Szolg helytől|Szolgálati helytől|Szolgálati helytől|12|||TCsKezdSz hRovidNev|
|Szolg helyig|Szolgálati helyig|Szolgálati helyig|12|||TCsVegSzh RovidNev|


A szerkesztés befejezése a fejlécen található <Ment> és
<Mégsem> nyomógombokkal lehetséges.

***nyomógomb***

A <Ment> nyomógomb akkor kezelhető, ha a szerkesztő panel megnyitása óta változás történt
a gridben szereplő adatokban.

A nyomógomb használatakor a kliens program meghívja az **S_0151_43** **–**
**Teljesítménycsökkenés mentése (TeljesitmenycsokkMentesCommand)** szolgáltatást a
következő adatokkal:

  - Ábra belső azonosítója (AbraId): A felhasználó által szerkesztésre l ef og l alt áb ra bels ő

azonosítója

  - Menetvonal Id (MenetvId): A kiválasztott menetvonal belső MGM azo n osí t ó j a

  - Bejelentkezett felhasználó azonosítója (Pass2UserId)

  - Teljesítménycsökkenés lista: A gridben szereplő sorok adatai

`o` Jármű belső azonosítója (JarmuId): Vontatójármű belső azonosítója, az

S _ 0151 _ 40 szolgáltatás által visszaadott
`o` Teljesítménycsökkenés belső azonosítója (MgmKorlId) (lehet NULL is) (Csak

a már korábban is létezett soroknál k itöltött, az S _ 0151 _ 40 szolgáltatás által
visszaadott)
`o` Működési mód (MukodesiMod) ( ’ M ’- Mentés, ’ T ’- Törlés, [88997] ’ ’- Nincs

változás [88997vége] )

         - 88997 ” – 88997vége
„ Azoknál a soroknál, amelyek nem változtak

         - „M ” – Azoknál a módosított soroknál, ahol a csökkentett teljesítmény

mértéke nem üres

         - „T ” – Azoknál a módosított soroknál, ahol a csökkentett teljesítmény

mértéke nincs kitöltve
`o` Csökkentett teljesítmény mértéke (Mertek): A vontatójárműhöz rögzített

csökkentett teljesítmény (NULL, ha nin c s kitöltve)
`o` Csökkentett teljesítmény kezdő szolgálati helyének belső azonosítója

(TCsKezdSzhId): Szolgálati helytől bels ő azonosítója (SzhId az S_0151_44        től kapott adatokból) (NULL, ha nin c s k itöltve a kezdő szolgálati hely)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 184/526|


`o` Csökkentett teljesítmény kezdő szolgálati helyéhez tartozó vonatforgalmi terv

                                    id (TCsKezdVftId) (VftId az S_0151_44 től kapott adatokból) (NULL, ha
nincs kitöltve a kezdő szolgálati hely )
`o` Csökkentett teljesítmény kezdő szolgálati helyének sorszáma a vonatforgalmi

                                                  tervben (TCsKezdVftSzhIndex) (VftSzhIndex az S_0151_44 től kapott
adatokból) (NULL, ha nincs kitöltv e a kezdő szolgálati hely)
`o` Csökkentett teljesítmény vég szolgálati helyének belső azonosítója
(TCsVegSzhId) Szolgálati helyig b el ső azonosítója (SzhId az S_0151_44        - től
kapott adatokból) (NULL, ha nincs k itölt ve a vég szolgálati hely)
`o` Csökkentett teljesítmény vég szolgálati helyéhez tartozó vonatforgalmi terv id

(TCsVegVftId) (VftId az S_0151_44 -tő l kapott adatokból) (NULL, ha nincs
kitöltve a vég szolgálati hely)
`o` Csökkentett teljesítmény vég szolgálati helyének sorszáma a vonatforgalmi

tervben (TCsVegVftSzhIndex) ( VftS zhIndex az S_0151_44       - től kapott
adatokból) (NULL, ha nincs kitöltv e a vég szolgálati hely)

Ha a szolgáltatás hibát jelez, akkor azt megjeleníti és nem lép ki a Teljesítménycsökkenés
szerkesztése üzemmódból.

Ha a szolgáltatás rendben lefutott, akkor a program kilép a Teljesítménycsökkenés
szerkesztése üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fejléc és panel, a
menetvonal kijelölése megszűnik, a többi objektum elérhetővé válik és a
Teljesítménycsökkenés szerkesztése ikon nem kezelhetővé válik. Majd a program meghívja a
grafikon frissítéséhez szükséges szolgáltatásokat.

***nyomógomb***

A <Mégsem> nyomógomb mindig használható.

A nyomógomb használatakor, ha a szerkesztő panel megnyitása óta a szerkesztő panelen
változtak az adatok, akkor a program megerősítést kér a folytatáshoz. (151009 UC_01_51_CONF_CANCEL - „Biztosan kilép? A nem mentett adatok elvesznek! ” )

A megerősítő üzenetre adott nemleges válasz esetén folytatható a szerkesztés.

Igenlő válasz esetén a program az adatok mentése nélkül kilép a Teljesítménycsökkenés
szerkesztése üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fejléc és panel, a
menetvonal kijelölése megszűnik, a többi objektum elérhetővé válik és a
Teljesítménycsökkenés szerkesztése ikon nem kezelhetővé válik. Majd a program meghívja a
grafikon frissítéséhez szükséges szolgáltatásokat.

**2.2.3.13** **Egyéb sebességkorlátozás szerkesztése**

Irányítói üzemmódban, ha az ábrát a felhasználó szerkesztésre lefoglalta (ami csak időhenger
üzemmódban lehetséges) és az ábrán egy olyan, nem MRN *(menetrend nélküli,* *’* *VNTTId* *’* *<>*
*1* *’* *)* vonathoz tartozó, menetvonalat választott, amihez tartozik tény/előrejelzés vonal, akkor

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 185/526|


kezelhetővé válik a Szerkesztés menüponthoz tartozó almenüsorból az Egyéb
sebességkorlátozás ikon.

Az ikon kezelésekor a kliens program

  - Meghívja a kiválasztott menetvonal szerkesztésre lefoglalását vég ző S _ 0 1 5 1_3 8  
**MenetvForgSzabFoglalasCommand** (Menetvonalak forgalo m s z ab ál y o zás ra
lefoglalása) szolgáltatást a következő adatokkal:

`o` MenetvonalIdLista: A kiválasztott menetvonal belső MGM azonosítója

(Egy elemű listaként)
`o` TerMunkahelyId: A kiválasztott munkahely belső azonosítója
`o` AbraId: A felhasználó által szerkesztésre lefoglalt ábra belső azonosítója
`o` FoglalasJelzo = „F ”      - foglalás.
`o` ModositasOk = NULL

`o` epaiParamXmlDoc

Ha a szolgáltatás UCa kliens program megerősítő üzenetet a _ 01 _ 51 _ CONF _ MEN d . E TV _ FOGLALT üzenetet ad vissza, akkor

Megerősítő üzenet: 151004    - UC_01_51_C O NF_MENETV_FOGLALT – „A {0}
vonatot {1} munkahelyen {2} óta sze r k eszti k! Felülírja a menetvonal foglalását? ”,
ahol:

      - {0} = ERRTEXT első paramétere (a lefoglalt menetvonal első
vonatazonosítója).

      - =
{1} ERRTEXT második paramétere (a foglaló munkahely megnevezése).

A megerősítő üzenetre adott <Nem> vála sz esetén, nem történik meg a menetvonal
foglalása, a menetvonal kijelölése m egs zűni k, a többi objektum elérhetővé válik, és az
ikonsor visszaáll az „Alapfunkciók ” i k onr a.

<Igen> esetén újra meghívja az S _0151_38    - MenetvForgSzabFoglalasCommand
(Menetvonalak forgalomszabályozá sr a lefog lal ás a) szolgáltatást, de a Foglalás jelzőbe
(FoglalasJelzo) :„A ” (átvétel) értéket hely ez.

**Sikeres** lefoglalás után (az S _ 0151 _ 38 szolgáltatás sikeres futása esetén) a kliens program a
kiválasztott menetvonal belső azonosítójával meghívja a következő szolgáltatásokat:

  - **S_0151_41** **–** **Egyéb sebességkorlátozások lekérdezése (Egyeb** **S** **eb** **K** **o** **rl** **Q** **uery)**

szolgáltatást, ami visszaadja a szerkesztéshez szükséges adatokat.

  - **S_0151_44** **–** **Menetvonal** **szolgálati** **helyeinek** **l** **ek** **érdezés** **e**
**(MenetvonalSzolgHelyekQuery** ) szolgáltatást, ami a panelen lévő szo lg álati h ely
beviteli mezők lenyíló listájának értékkészletét biztosítja.

Ezután az ablak átvált Egyéb sebességkorlátozás szerkesztése üzemmódra, megjelenik az
ehhez tartozó fejléc és a grafikonon az objektumok nem kiválaszthatóvá válnak.

A szerkesztő fejlécre pozicionálva beúszó szerkesztő panelen lehetséges a kiválasztott
menetvonalhoz egyéb sebességkorlátozás rögzítése, módosítása, törlése.

**Egyéb sebességkorlátozás szerkesztése panel megjelenése**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** {0} = a lefoglalt menetvonal első vonatazonosítója
„99999 ÉÉÉÉ/HH/NN” formában.¶
<#>{1} = a foglaló munkahely megnevezése.¶
<#>{2} = a foglalás kezdő ideje „ÉÉÉÉ.HH.NN ÓÓ:PP”
formában.¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 186/526|


**Egyéb sebességkorlátozás szerkesztése panel működése**

***Szerkesztő fejléc felépítése***

A szerkesztő fejléc bal oldalán fixen megjelenik az „Egyéb sebességkorlátozás szerkesztése ”
felirat és mellette a felhasználói aktivitást figyelő idősáv.

Középen található a és a nyomógomb.

A szerkesztő fejléc jobb oldalán pedig azok az ikonok, amelyek szerkesztés közben is
használhatók:

  -   - Idővonalra ugrás ikon

  -   - X és Y tengely kicsinyítése ikon

  -   - X és Y tengely nagyítása ikon

  -   - X tengely kicsinyítése ikon

  -   - X tengely nagyítása ikon

  -   - Y tengely kicsinyítése ikon

  -   - Y tengely nagyítása ikon

***Beúszó szerkesztő panel***

**–**
A beúszó szerkesztő panelen lévő mezőket és a gridet az **S_0151_41** **Egyéb**
**sebességkorlátozások lekérdezése (EgyebSebKorlQuery)** és az **S_0151_44** **–** **Menetvonal**
**szolgálati helyeinek lekérdezése (MenetvonalSzolgHelyekQuery** ) szolgáltatástól kapott
adatokkal tölti fel a kliens program.

*Szerkesztő panelen lévő mezők* :

  - Megrendelés azonosító: Igénylés éve+ ’ / ’ +iktatószám+ ’ / ’ +verzi ószám (Meg rA zo n )

Megjelenítő mező

  - Megrendelő: VV rövid nevét megjelenítő mező (Megrendelo)

  - Egyéb sebességkorlátozás (felirat)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 187/526|


`o` Szolgálati helytől: A szolgálati hely statisztikai számát és r öv i d n ev ét

tartalmazó lenyíló beviteli mező, ahol a menetvonal szolgálati helyei közül
lehet választani. Értékkészletét az **S_0151_44** **–** **Menetvonal szolgálati**
**helyeinek** **lekérdezése** **(MenetvonalSzolgHelyekQuery** ) szolgáltatás
biztosítja.
`o` Szolgálati helyig: A szolgálati hely statisztikai számát és r öv i d nev ét

tartalmazó lenyíló beviteli mező, ahol a menetvonal szolgálati helyei közül
lehet választani. Értékkészletét az **S_0151_44** **–** **Menetvonal szolgálati**
**helyeinek** **lekérdezése** **(MenetvonalSzolgHelyekQuery** ) szolgáltatás
biztosítja.
`o` Mérték:

       - Az egyéb sebességkorlátozás mértékének megadására szolgáló 3

hosszú beviteli mező (999).

       - ’ km/h ’ (felirat a beviteli mező mögött)
`o` Megjegyzés: Maximum 1000 karakter hosszú, szabad szöveg r ög zít ésér e

alkalmas, függőlegesen scrollozható beviteli mező.
*<Hozzáad> nyomógomb*
A < *Hozzáad* - nyomógomb mindig kezelhető.
A < *Hozzáad* - nyomógomb használatakor a kliens program ellenőrzést v ég ez:

  - Ha a szerkesztő panelen van olyan beviteli mező #107055 a m eg j eg y zésen
kívül [#107055vége], ami nincs kitöltve, akkor a kliens program az érintet t m ező alat t
hibaüzenetet ad. Hibaüzenet: 151007    - UC_01_51_ERR_KITOLT_KO T E L EZO    
”
„Kitöltése kötelező! .

  - Ha a Mérték mezőben 0 érték szerepel, akkor a kliens program hi baü zen etet ad .

Hibaüzenet: 151024    - UC_01_51_ERR_NULLANAL_NAGYOBB _L E HET –

          - ”
„Csak 0 nál nagyobb érték adható meg.

  - Ha a Szolgálati helytől mezőben megadott szolgálati helynél (az S_ 0 1 5 1_4 4

szolgáltatástól kapott adatok alapján) a vonat sorszáma (VonatSorsz) nag yo b b,
mint Szolgálati helyig mezőhöz tartozó vonat sorszám, vagy ha a vonat sor s zám ok
megegyeznek, de a Szolgálati helytől vonatforgalmi tervben lévő sor s zám a
(VftSzhIndex) nagyobb vagy egyenlő, mint a Szolgálat helyighez tarto zó so rs zám,
akkor a kliens program hibaüzenetet ad. Hibaüzenet: 1 5 1 0 0 8UC_01_51_ERR_SZHTOL_NEM_KORABBI   - „A Szolgálati hely t ő l csak
korábbi lehet, mint a Szolgálati helyig. ”
Ha nem volt hiba, akkor a beviteli mezők tartalmával a kliens pr o g ram eg y ú j
sebességkorlátozást ír a gridbe. Az adatok csak a <Ment> nyomógomb h aszn ál atáv al
kerülnek elmentésre az adatbázisba és válnak láthatóvá mások számára.
*<Módosít> nyomógomb*
A <Módosít> nyomógomb akkor használható, ha van kiválasztott sor a g r i d b en és a
panelen változott valamelyik beviteli mező tartalma.
A nyomógomb használatakor a kliens program ellenörzést végez:

  - Ha a szerkesztő panelen van olyan beviteli mező #107055 a m eg j eg y zésen
kívül [#107055vége], ami nincs kitöltve, akkor a kliens program az érintet t m ező alatt
hibaüzenetet ad. Hibaüzenet: 151007    - UC_01_51_ERR_KITOLT_KO T E L EZO    
”
„Kitöltése kötelező! .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 188/526|



  - Ha a Mérték mezőben 0 érték szerepel, akkor a kliens program h i baü zen etet ad .

Hibaüzenet: 151024    - UC_01_51_ERR_NULLANAL_NAGYOBB _L E HET –

          - ”
„Csak 0 nál nagyobb érték adható meg.

  - Ha a Szolgálati helytől mezőben megadott szolgálati helynél (az S_ 0 1 5 1_4 4

szolgáltatástól kapott adatok alapján) a vonat sorszáma (VonatSors z) nag yo b b,
mint Szolgálati helyig mezőhöz tartozó vonat sorszám, vagy ha a vonat sor s zám ok
megegyeznek, de a Szolgálati helytől vonatforgalmi tervben lévő sor s zám a
(VftSzhIndex) nagyobb vagy egyenlő mint a Szolgálat helyighez tarto zó s o rs zám,
akkor a kliens program a hibaüzenetet ad. Hibaüzenet: 1 5 1 0 0 8    UC_01_51_ERR_SZHTOL_NEM_KORABBI   - „A Szolgálati hely t ő l csak
korábbi lehet, mint a Szolgálati helyig. ”
Ha nem volt hiba, akkor a beviteli mezők tartalmával a kliens pr o g ram f elü l í r j a a
kiválasztott sor tartalmát. A módosított értékek csak a <Ment> nyomó g omb h aszn ál atáv al
kerülnek elmentésre az adatbázisba és válnak láthatóvá mások számára .
*<Töröl> nyomógomb*
A <Töröl> nyomógomb akkor használható, ha van kiválaszto t t so r a g r i d b en .
Használatakor kiürülnek a beviteli mezők és a gridből a kliens program t ö rl i a k i v ála szto t t
sebességkorlátozást. Az adatbázisban a törlés csak a <Ment> nyomógomb h aszn ál atá v al
történik meg és csak ezután lesz láthatóvá mások számára.
*Egyéb sebességkorlátozások grid*
Ez egy nem lapozható grid. A grid magassága maximum 3 sor lehet, en n él t ö b b so r esetén
függőleges gördítő sáv jelenik meg. A gridből csak egy sor válasz t h at ó k i . Eg y so r
kijelölésekor, az adott sorban lévő adatok megjelennek a grid feletti mező k b en . A k l i en s
program a szerkesztő panel megnyitásakor az **S_0151_41** **–** **Egyéb sebes** **ség** **k** **o** **rlá** **to** **zá** **s** **o** **k**
**lekérdezése (EgyebSebKorlQuery)** szolgáltatástól kapott adatokkal töl t i f el a g r i d et.
*Egyéb sebességkorlátozások grid* oszlopai az alapértelmezett sorrendbe n















|Col1|Felirat|Megnev ezés|Súgó (ToolTi p) szöveg|Hoss z|Maszk/Típus|Alapértelm ezett érték|Törzstábl a/kódtábl a|
|---|---|---|---|---|---|---|---|
||Szolg helytől|Szolgálati helytől|Szolgálati helytől|12|||ESKezdSzh RovidNev|
||Szolg helyig|Szolgálati helyig|Szolgálati helyig|12|||ESVegSzhR ovidNev|
||Mérték (km/h)|Mérték|Mérték|3|999||Mertek|
||Megjegyzés|Megjegyz és|Megjegyz és|max 1000|||Megjegyze s|


A szerkesztés befejezése történhet automatikusan felhasználói inaktivitás miatt vagy a

fejlécen található <Ment> vagy <Mégsem> nyomógomb
használatával.

***Felhasználói inaktivitás (felhasználói aktivitást figyelő idősáv*** ***)***

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 189/526|


Ha a felhasználó utolsó aktivitása óta eltelt az MGM felhasználói aktivitás idő

(mgm_aktivitas_ido) rendszerparaméterben megadott idő, akkor a kliens program a
következő műveleteket hajtja végre:

  - Ha a szerkesztő panel megnyitása óta változás történt a gridben szerep l ő ad at ok b an,

akkor a <Ment> nyomógombnál leírt paraméterekkel meghívja az **S** **_** **0** **1** **5** **1** **_** **4** **5** **–**
**Egyéb** **sebességkorlátozások** **mentése** **(EgyebSebKorlMentes** **Com** **m** **a** **n** **d)**
szolgáltatást.

  - Meghívja a kiválasztott menetvonal szerkesztésre lefoglalását, f elo l dás á t v ég ző

S_0151_38    - **MenetvForgSzabFoglalasCommand** ( Men e t v o nala k
forgalomszabályozásra lefoglalása) szolgáltatást a <Ment> nyomó g o m bnál l eí r t
paraméterekkel ( Függetlenül attól, hogy szükség volt    - e előtte az S _ 0 1 5 1_4 5
szolgáltatás hívására vagy sem, sikeres volt    - e az S _ 0151 _ 45 szolgálta tá s f u t ás a v ag y
sem ).

  - Kilép az Egyéb sebességkorlátozás szerkesztése üzemmódból. E zá l t al a g raf i k o n o n

eltűnik a szerkesztő fejléc és panel, a menetvonal kijelölése meg s zű ni k, a t ö b b i
objektum elérhetővé válik és az Egyéb sebességkorlátozás szerkesz té s e i k o n n em
kezelhetővé válik. Majd meghívja a grafikon frissítéséhez szükséges sz o lg ált at ások at.

A szerkesztő panel fejlécében a felhasználói aktivitást figyelő idősáv
jelzi a felhasználó utolsó aktivitása óta eltelt időt és azt, hogy még mennyi idő van hátra az
automatikus mentés/kilépés indításáig.

***nyomógomb***

A <Ment> nyomógomb akkor kezelhető, ha a szerkesztő panel megnyitása óta változás történt
a gridben szereplő adatokban.

**–**
A nyomógomb használatakor a kliens program meghívja az **S_0151_45** **Egyéb**
**sebességkorlátozások mentése (EgyebSebKorlMentesCommand)** szolgáltatást a következő
adatokkal:

  - Munkahely belső azonosítója (MunkahelyId): A kiválasztott mu nk ah el y bels ő

azonosítója

  - Ábra belső azonosítója (AbraId): A felhasználó által szerkesztésre l ef og l alt áb ra bels ő

azonosítója

  - Menetvonal Id (MenetvId): A kiválasztott menetvonal belső MGM azo n osí t ó j a

  - Bejelentkezett felhasználó azonosítója (Pass2UserId)

  - Egyéb sebességkorlátozások lista:

`o` Egyéb sebességkorlátozás belső azonosítója (MgmKorlId) (lehet NULL is)

(Csak az S _ 0151 _ 41 szolgáltatás ált al v isszaadott soroknál kitöltött)
`o` Működési mód (MukodesiMod) ( ’ U ’- Új, ’ M ’- Módosítás, ’ T ’- Törlés, [VK95023 ] ’

’- Nincs változás [ VK95023vége] )

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 190/526|



         - „U ” – A panel megnyitása óta a gridbe újonnan felvett soroknál (ahol

az Egyéb sebességkorlátozás belső azonosítója (MgmKorlId) üres)

         - „M ” – Azoknál a soroknál, ahol az Egyéb sebességkorlátozás belső

azonosítója (MgmKorlId) nem üres és tartalmuk változott a panel
megnyitása óta

         - „T ” – Azoknál a törölt soroknál, amelyek a panel megnyitásakor

léteztek

         - VK95023 ’ ’- Azoknál a soroknál, amelyeknél nem történt változás a panel
megnyitása óta [ VK95023vége]
`o` Korlátozás mértéke (Mertek)
`o` Korlátozás kezdő szolgálati helyének belső azonosítója (KezdSzhId):

Szolgálati helytől belső azonosadatokból) ítója (SzhId az S _ 0151 _ 44          - től kapott
`o` Korlátozás kezdő szolgálati helyéhez tartozó vonatforgalmi terv id

(KezdVftId) (VftId az S_0151_44        - t ől k a pott adatokból)
`o` Korlátozás kezdő szolgálati helyének sorszáma a vonatforgalmi tervben

(KezdVftSzhIndex) (VftSzhIndex az S _0 151_44        - től kapott adatokból)
`o` Korlátozás vég szolgálati helyének belső azonosítója (VegSzhId) Szolgálati

helyig belső azonosítója (SzhId az S _015 1 _ 44        - től kapott adatokból)
`o` Korlátozás vég szolgálati helyéhez tartozó vonatforgalmi terv id (VegVftId)

(VftId az S_0151_44        - től kapott adato k ból
`o` Korlátozás vég szolgálati helyének sorszáma a vonatforgalmi tervben

(VegVftSzhIndex) (VftSzhIndex az S _01 51_44        - től kapott adatokból)
`o` Megjegyzés (Megjegyzes)

Ha a szolgáltatás hibát jelez, akkor azt megjeleníti és nem lép ki az Egyéb sebességkorlátozás
szerkesztése üzemmódból.

Ha a szolgáltatás rendben lefutott, akkor meghívja a kiválasztott menetvonal szerkesztésre
lefoglalását, (Menetvonalak forgalomszabályozásra lefoglalása) szolgáltatást a következő adatokkal, hogy feloldását végző S _ 0151 _ 38 - **MenetvForgSzabFoglalasCommand**
megszüntesse a menetvonal foglalását:

`o` MenetvonalIdLista: A kiválasztott menetvonal belső MGM azonosítója

(Egy elemű listaként)
`o` TerMunkahelyId: A kiválasztott munkahely belső azonosítója
`o` AbraId: A felhasználó által szerkesztésre lefoglalt ábra belső azonosítója
`o` FoglalasJelzo = „E ”      - elengedés.
`o` ModositasOk = NULL

`o` epaiParamXmlDoc

Ezután a program kilép az Egyéb sebességkorlátozás szerkesztése üzemmódból. Ezáltal a
grafikonon eltűnik a szerkesztő fejléc és panel, a menetvonal kijelölése megszűnik, a többi
objektum elérhetővé válik és az Egyéb sebességkorlátozás szerkesztése ikon nem kezelhetővé
válik. Majd a program meghívja a grafikon frissítéséhez szükséges szolgáltatásokat.

***nyomógomb***

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 191/526|


A <Mégsem> nyomógomb mindig használható.



A nyomógomb használatakor, ha a szerkesztő panel megnyitása óta a szerkesztő panelen
változtak az adatok, akkor a program megerősítést kér a folytatáshoz. (151009 UC_01_51_CONF_CANCEL - „Biztosan kilép? A nem mentett adatok elvesznek! ” )

A megerősítő üzenetre adott nemleges válasz esetén folytatható a szerkesztés.

Igenlő válasz esetén meghívja a kiválasztott menetvonal szerkesztésre lefoglalását, feloldását
végző forgalomszabályozásra lefoglalása) szolgáltatást a következő adatokkal, hogy megszüntesse a S _ 0151 _ 38 - **MenetvForgSzabFoglalasCommand** (Menetvonalak
menetvonal foglalását:

`o` MenetvonalIdLista: A kiválasztott menetvonal belső MGM azonosítója

(Egy elemű listaként)
`o` TerMunkahelyId: A kiválasztott munkahely belső azonosítója
`o` AbraId: A felhasználó által szerkesztésre lefoglalt ábra belső azonosítója
`o` FoglalasJelzo = „E ”      - elengedés.
`o` ModositasOk = NULL

`o` epaiParamXmlDoc

Ezután a program az adatok mentése nélkül kilép az Egyéb sebességkorlátozás szerkesztése
üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fejléc és panel, a menetvonal
kijelölése megszűnik, a többi objektum elérhetővé válik és az Egyéb sebességkorlátozás
szerkesztése ikon nem kezelhetővé válik. Majd a program meghívja a grafikon frissítéséhez
szükséges szolgáltatásokat.

88998vége

**2.2.3.14** **[#89002 ]** **MEFI/MERÁFI menetengedély** **–** **(BÉ)**

**MEFI/MERÁFI menetengedélyek megjelenítése**

**Csak ábra megjelenítésekor, minden idő üzemmódban** láthatók **PV felhasználók** számára.

A menetengedély objektumok megjelenítése az ablak megnyitásakor vagy az A _ 0151 _ 03
ablakból mentéssel kilépve az A _ 0151 _ 03 ablakon mentett beállítások alapján történik. Ha a
megjelenítés ott bekapcsolt, akkor megjelennek és a megjelenítési nyomógombok is

                                                         bekapcsolva láthatók. A PV felhasználó a menetengedély megjelenítési ikonokkal ki
/bekapcsolhatja az aktuális megjelenítést.

Ha valamelyik menetengedély megjelenítés bekapcsolt, akkor az ábrán, a szolgáltatástól
visszakapott menetengedélyeket az adataik alapján megrajzolja (a megjelenítési
beállításoknak megfelelően). A kezdő szolgálati helytől ( *Vágányos* nézet esetén, iránynak
megfelelően, a szolgálati hely **utolsó vágányától** ) a vége szolgálati helyig ( *Vágányos* nézet

|esetén a szolgálati hely első vagy utolsó vágányáig), a kapott időpontban rajzol. Egy olyan|Col2|
|---|---|
|, ami párhuzamos az út tengellyel, a nyíl hegye a típusnak megfelelően (’k’)||
|vagy|(’b’) és a nyíl kezdete alá kerül a vonatszám.|



Eltérés 101375 Ha a kezdő szolgálati hely megegyezik a vége szolgálati hellyel, akkor az iránynak
megfelelően (True = bal/False = jobb) csak egy nyílhegyet rajzol. [Eltérés 101375 vége]

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 192/526|


**MEFI/MERÁFI menetengedélyek szerkesztése (létrehozása)**

A szerkesztés üzemmódba lépés előtt beállított nézetnek (Vágányos / Nem vágányos)
megfelelően lehet végezni a szerkesztést.

Az új menetengedélyek **létrehozásának feltételei** :

  - Irányításra **lefoglalt ábra** .

  - **Időhenger** idő üzemmód.

  - **PV** felhasználó.

  - A felhasználónak rendelkeznie k ell az **O** **P_0151_MGMIranyito** illetve az

**OP_0151_MGMMefiMerafiRogzi** **t** oper anduso kkal.

  - Legyen **kiválasztva egy**, nem MRN *(menetrend nélküli,* *’* *VNTTId* *’* *<> 1* *’* *)* vonathoz

tartozó, **menetvonal**, amely **szerepel a ténymenetvonalak között** .

  - A „ **Menetengedély** a szolgálati hel y **k** **i** **j** **á** **ra** **t** **i** / **bejárati** jelzőjéig szerkesztés ” **ikont**

**bekapcsolja** .

  - A választott ikonnak megfe lelően az alá bbi **menetengedélyek létrehozása**

lehetséges:

`o` „ **Menetengedély** a szolgálati hel y **k** **ij** **á** **rat** **i** jelzőjéig ” :

         - a kezdőponttól ( *Vágányos* nézet esetén a szolgálati hely **utolsó**

**vágányától** ) a kiválasztott szolgálati helyig ( *Vágányos* nézet esetén a

az adott menetvonal **vonatszáma** .

         - Eltérés 101375 a kiválasztott szolgálati helyig ( *Vágányos* nézet esetén a
szolgálati hely **utolsó vágányáig** ) egy kiválasztott irányba mutató piros nyílhegy

és a **nyílhegy alá** kerül az adott menetvonal
**vonatszáma** . [Eltérés 101375 vége]

`o` „ **Menetengedély** a szolgálati hel y **bej** **á** **rat** **i** jelzőjéig ” : a kezdőponttól ( *Vágányos*

nézet esetén a szolgálati hely **utolsó vágányától** ) a kiválasztott szolgálat i h ely i g

menetvonal **vonatszáma** .

  - Az ábra felett **megjelenik** **a** **s** **zer** **k** **es** **ztő** **panel** (ami csak egy fejléc
nyomógombokkal).

  - Az ábrán a kiválasztott menetvonal egyi k **szo** **lgálati helyének a vonalára** **kattintva**

lehet indítani a nyíl rajzolását. A kattintást k öv etően **megjelenik egy nyílhegy** ~~[Eltérés]~~

~~100246~~ ~~a~~ ~~két~~ ~~oldalán~~ ~~**egy**~~ ~~**-**~~ ~~**egy**~~ ~~**vezér**~~ ~~**l**~~ ~~**őpá**~~ ~~**lcáva**~~ ~~**l**~~ ~~E~~ ~~ltérés~~ ~~100246~~ ~~vége~~ . **Alatta** a kiválasztott
menetvonal **vonatszáma** látható.

  - **Ha nem szolgálati helytől** **indít** **aná** a m enetengedélyt, akkor nem kezdi meg a

rajzolást és **hibaüzenetet** ad: „Csak szolgálati helytől indítható a menet en g ed ély !” .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 193/526|



  - Ha a [Eltérés 101375] „Menetengedél y a szol g ál ati h ely bejárati jelzőjéig ” (sárga hegyű)

Eltérés 101375 vége nyíl mérete rövid ( csak egy **n** **yílhegy** ), akkor **nem menthető el** a
menetengedély.

  - ~~Eltérés~~ ~~10024~~ ~~6~~ ~~A~~ ~~vezérlőpálcák~~ ~~segít~~ ~~ségév~~ ~~el~~ ~~E~~ ~~ltérés~~ ~~100246~~ ~~vége~~ **A nyílhegy mindkét irányba**
**húzható** . A nyílhegy a húzástól alakul át nyíllá. ~~[Eltérés]~~ ~~[100246]~~ ~~A~~ ~~jobb~~ ~~oldalival~~ ~~jobbra~~, ~~a~~
~~bal~~ ~~oldalival~~ ~~balra~~ . ~~[Eltérés]~~ ~~[100246]~~ ~~[vége]~~

  - **Mindkét menetengedély** (kijárati/be jár ati jelző ig) **létrehozása** esetén a **nyílhegyből**

történő **első húzás iránya** határozza meg **a nyíl** **irány** át. A nyíl iránya
**megfordítható**, amíg a szerkesztő pane l ny it v a van.

  - Eltérés 101375 **Menetengedély** kijárati jelzőig **nyílhegy létrehozása** esetén, amíg **csak**
**nyílhegy**, a grafikonon **bárhova** való **kattintás** **megváltoztatja a** **nyílhegy** **irány** át.
(Húzással **átalakítható nyíllá** .) [Eltérés 101375 vége]

  - A nyilat a felhasználó **húzha** **t** **j** **a** a m enet v on al **bármelyik következő szolgálati**

**helyéig** . Ha **áthalad** a szolgálati hel yközök elméleti **középvonalán**, akkor a
következő szolgálati helyig **hosszabbod** **i** **k meg a nyíl** .

  - A **végpont** (nyíl hegye) ~~[Eltérés]~~ ~~[10024]~~ ~~[6]~~ ~~vez~~ ~~ér~~ ~~lőpálca~~ ~~[E]~~ ~~[ltérés]~~ ~~[100246]~~ ~~[vége]~~ **húzásával növelhető**

**vagy csökkenthető** **a** nyíl **mérete** . Ellentét es i r á nyú húzásával akár **megfordítható a**
**nyíl iránya** is.

~~~~ ~~A~~ ~~**kezdőpont**~~ ~~(nyíl~~ ~~vége)~~ ~~[Eltérés]~~ ~~[100246]~~ ~~vez~~ ~~ér~~ ~~lőpálca~~ ~~[Eltérés]~~ ~~[100246]~~ ~~[vége]~~ ~~**húzásával**~~ ~~**növelhető**~~

~~**vagy**~~ ~~**csökkenthető**~~ ~~**a**~~ ~~nyíl~~ ~~**mérete**~~ . ~~Ellentétes~~ i ~~r~~ á ~~nyú~~ ~~húzásával~~ ~~akár~~ ~~**megfordítható**~~ ~~**a**~~
~~**nyíl**~~ ~~**iránya**~~ ~~is~~ . ( [Eltérés 101375] Megszűnt!)

**Szerkesztő panel (fejléc)**

  - Cím: „ **Menetengedélyek szerkeszt** **ése** ”

  - Nyomógombok:

`o` <Ment>

`o` <Mégsem>

  - Méretezés ikonok (szerkesztés közben is haszná lhatók)

`o`     - Idővonalra ugrás ikon

`o`     - X és Y tengely kicsinyítése ikon

`o`     - X és Y tengely nagyítása ikon

`o`     - X tengely kicsinyítése ikon

`o`     - X tengely nagyítása ikon

`o`     - Y tengely kicsinyítése ikon

`o`     - Y tengely nagyítása ikon

A **mentés** a szerkesztő panelen található <Ment> nyomógomb kezelésével
lehetséges.

A szerkesztés megszakítása a <Mégsem> nyomógomb használatával lehetséges.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 194/526|


A megrajzolt menetengedély csak mentés után lesz látható más PV felhasználók számára.

<Ment> nyomógomb

  - A <Ment> nyomógomb akkor **kezelhető, ha** a szerkesztő panel meg ny i t ása ó t a

**változás történt** .

  - A [Eltérés 101375] „Menetengedély a szolgálati hely bejárati jelzőjéig ” (sárg a h eg yű) [Eltérés ]

101375 vége menetengedély **mérete legalább egy szolgálati helyköznyi** .

  - A felhasználónak **rendelkeznie kell** az **OP_0151_MGMIr** **a** **ny** **i** **to** i l l etv e az

**OP_0151_MGMMefiMerafiRogzit** operandusokkal.

  - Megfelelő **jogosultság esetén** meghívódik az „ **S_0151_35** **–** **Menet** **en** **gedél** **y** **mentése**

**(MenetengedelyMentesCommand)** ” szolgáltatás az alábbi paramétere k k el :

`o` Menetengedély belső azonosítója ( **MenetengId** ) = **NULL**

`o` Menetengedély típusa ( **MenetengTip** ) ( ’ k ’- kijárati jelzőig, ’b’- b ej ár ati
jelzőig)

        - = **’** **k** **’** – Menetengedély a szolgá l ati hely **kijárati jelzőjéig esetén**

        - = **’** **b** **’** – Menetengedély a szolgá l ati hely **bejárati jelzőjéig esetén**

`o` Menetengedély ideje ( **MenetengIdo** ) = a megrajzolt **menetenge** **dély** **ideje**

`o` Ábra belső azonosítója ( **AbraId** ) = az **aktuális ábra belső azon** **o** **sí** **tó** **ja**

`o` MGM menetvonal belső azonosítója ( **MgmMvId** ) = az aktuáli s **MG** **M**
**menetvonal belső azonosítója**

`o` Vonatszám ( **Vonatszam** ) = az aktuális (megjelenített) vonatszám

`o` Menetengedély kezdő szolgálati hely belső azo n o sí t ó j a
( **MenetengKezdSzhId** ) = a megrajzolt menetengedély **kezdő szolgálati**
**hely belső azonosítója**

`o` Menetengedély vége szolgálati hely belső azo n o sí t ó j a
( **MenetengVegeSzhId** ) = a megrajz o lt menetengedély **vége szolgálati hely**
**belső azonosítója**

`o` Eltérés 101375 Menetengedély iránya jelző ( **IranyJelzo** ) =

        - **NULL**, ha a menetengedély kezdő és vége szolgálati helye nem

egyezik meg

        - ”
„ **Igaz**, ha a nyílhegy balra mutat

        - „ **Hamis** ”, ha a nyílhegy jobbra mutat [Eltérés 101375 vége]

  - **Ha** a szolgáltatás rendben **lefutott**, akkor a program **kilép** *M* *e* *neten* *g* *e* *d* *élyek*

*szerkesztése* üzemmódból. Ezáltal a grafikonon **eltűnik a szerkesztő fej** **l** **éc** **és** **panel**, a
menetvonal **kijelölése megszűnik**, a **többi** objektum **elérhetőv** **é** **v** **á** **l** **i** **k** és a
*Menetengedély a szolgálati hely bejárati/kijárati jelzőjéig szerkesz* *t* *és* **i** **k** **o** **n** **nem**
**kezelhetővé** válik. Majd a program meghívja a grafikon frissítéséh ez szü k ség es
szolgáltatásokat.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 195/526|


<Mégsem> nyomógomb

 - A <Mégsem> nyomógomb **mindig használható** .




- Megszakítja a szerkesztést (rajzolást) és visszaáll a szerkesztés előt t i áll ap o t .

- A nyomógomb használatakor, ha a szerkesztő panel megnyitása ó t a a g r af i k o n

változott (menetengedély készült), akkor a program megerősítést kér a f o l y t atá sh o z.
(151009  - UC_01_51_CONF_CANCEL  - „Biztosan kilép? A nem m en t ett ad at o k
elvesznek! ” )

- A megerősítő üzenetre adott nemleges válasz esetén folytatható a sz er k es zt és.

- Igenlő válasz esetén a program az adatok mentése nélkül kilép a *Men* *eten* *g* *ed* *ély* *ek*

*szerkesztése* üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fe jl éc és pan el, a
menetvonal kijelölése megszűnik, a többi objektum elérhetőv é v álik és a
*Menetengedély a szolgálati hely bejárati/kijárati jelzőjéig szerkes* *z* *t* *és* i k o n n em
kezelhetővé válik. Majd a program meghívja a grafikon frissítéséh ez szü k ség es
szolgáltatásokat.

**Menetengedély törlése**

- Egy megjelenített menetengedély objek tum **k** **ij** **e** **lölését követően törölhető** .

- A **törlés** a szerkesztő ikonsávo n található **Törlés** ikon kezelésével vagy a
**Del/Delete** billentyű megnyomásáv al k ez dem én yezhető.

- A felhasználónak **rendelkeznie k** **ell** az **OP_0151_MGMIranyito** illetve az

**OP_0151_MGMMefiMerafiRogzi** **t** oper anduso kkal.

- Megfelelő jogosultság esetén a **t** **ö** **rl** **és** v égr eha jtása előtt megerősítő üzenetet kap a

felhasználó.

’ Törli a kiválasztott {0}? ’ <Igen>/< N em   Ahol a

`o` {0} = ’ Menetengedély kijárati jelzőig objektumot ’ – „Menet eng ed él y a

szolgálati hely kijárati jelzőjéig ” szerkesztés esetén
`o` {0} = ’ Menetengedély bejárati jelzőig objektumot ’ – „Menet en g ed él y a

szolgálati hely bejárati jelzőjéig ” szerkesztés esetén

- Ha a törlés végrehajtható, ak kor m eg hí v ódik az „ **S_0151_35** **–** **Menetengedély**

**mentése (MenetengedelyMentesCommand)** ” szolgáltatás az alábbi p araméte r ek k el:

`o` Menetengedély belső azonosítója ( **MenetengId** ) = a kijelölt menet en g ed ély

objektum belső azonosítója

`o` Menetengedély típusa ( **MenetengTip** ) ( ’ k ’- kijárati jelzőig, ’ b ’- b e j ár ati

jelzőig) = **NULL**

`o` Menetengedély ideje ( **MenetengIdo** ) = **NULL**

`o` Ábra belső azonosítója ( **AbraId** ) = az **aktuális ábra belső azonosí** **tó** **ja**

`o` MGM menetvonal belső azonosítója ( **MgmMvId** ) = **NULL**

`o` Vonatszám ( **Vonatszam** ) = **NULL**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 196/526|


`o` Menetengedély kezdő szolgálati hely belső azo n osí t ó j a
( **MenetengKezdSzhId** ) = **NULL**

`o` Menetengedély vége szolgálati hely belső azonosítója ( **MenetengVeg** **eSz** **hI** **d** )

= **NULL**

`o` Eltérés 101375 Menetengedély iránya jelző ( **IranyJelzo** ) = **NULL** Eltérés 101375 vége

  - Sikeres törlést követően az obje k tum eltűnik az ábráról.

**2.2.3.15** **#89003** **Kulcsfüggés feloldás** **–** **(BÉ)**

**Kulcsfüggés feloldás megjelenítése**

**Csak ábra megjelenítésekor, minden idő üzemmódban** láthatók **PV felhasználók** számára.

A kulcsfüggés feloldás objektumok megjelenítése az ablak megnyitásakor vagy az
A _ 0151 _ 03 ablakból mentéssel kilépve az A _ 0151 _ 03 ablakon mentett beállítások alapján
történik. Ha a megjelenítés ott bekapcsolt, akkor megjelennek és a megjelenítési
nyomógombok is bekapcsolva láthatók. A PV felhasználó a kulcsfüggés feloldás

                megjelenítési ikonokkal ki /bekapcsolhatja az aktuális megjelenítést.

Ha kulcsfüggés feloldás megjelenítés bekapcsolt, akkor az ábrán, a szolgáltatástól
visszakapott kulcsfüggés feloldásokat az adataik alapján megrajzolja. A kapott **szolgálati hely**
**jobb oldali** (vágányos nézet kikapcsolt állapotában is látható) **vágánya körül** a kapott
időponttól rajzol egy **sraffozott** téglalapot a lezárási időpontig vagy az idővonalig. Az
objektum jobb oldalán, az **ábrán látható részén**, az objektum **kezdetéhez** kerül a **felirat** .

**Kulcsfüggés feloldás kezelésének (létrehozás, lezárás) feltételei:**

  - Irányításra **lefoglalt** **ábra** .

  - **Időhenger** idő üzemmód.

  - **PV** felhasználó.

  - A felhasználónak rendelkezn ie k ell az **O** **P_0151_MGMIranyito** illetve az

**OP_0151_MGMMefiMerafiRogzi** **t** oper anduso kkal.

**Kulcsfüggés feloldás létrehozása**

  - Legyen **kiválasztva egy szolgála** **t** **i** **hely** .

  - A „Kulcsfüggés feloldás rög zítése” **i** **k** **ont** **k** **ezeli** .

  - Ha a szolgálati helyen **már va** **n** **nyit** **o** **t** **t** k ulcs függés feloldás, akkor **hibaüzenetet**

kap: „Nem lehet új kulcsfüggés feloldást rögzíteni, mert már l éte zik ny i t o t t
kulcsfüggés feloldás a szolgálati helyen! ”

  - Ha **még nincs nyitott** kulcsfüg gés f eloldás a k iválasztott szolgálati helyen, akkor az

ábra felett megjelenik a szerkesztő **panel**, melyen látható a kiválaszto t t s zo l g álati
hely.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 197/526|



- A **szolgálati hely vonalán** egy a dott **m** **últ** **beli** id őpontra vagy az idővonalra **kattintva**

lehet **indítani** az objektum rajzolásá t.

- A kattintás helye nem lehet a jö v őben ( időv onal alatt. Ha ilyen helyre kattint, akkor a

panelen az adatok nem frissülnek é s **h** **i** **baüzenetet** ad: „Nem lehet későbbi, mint az
aktuális idő! ” .

- A kattintás helye **nem lehet** e gy **m** **ár lét** **ez** **ő**, de már **lezárt** kulcsfüggés feloldás

objektum *Lezárási időjénél* **korább** **i** . H a il y en helyre kattint, akkor a panelen az
adatok nem frissülnek és **hibaüz** **enet** **et** ad: „Kezdési idő nem lehet egy lezárt
kulcsfüggés feloldás objektum Lezá r ási időjén él korábbi! ” .

- A rendszer a kiválasztott **szol** **gá** **l** **a** **t** **i hely** **jobb oldali** (vágányos nézet kikapcsolt

állapotában is látható) **vágánya** **k** **örül**, a kiválasztott **időponttól** kezdve, az
**idővonalig**, egy **sraffozott** téglalapot rajzol. Az **idővonal húzza** magával az
objektum **végét** .

- Ha az **idővonalra kattint**, akko r cs a k az objek t um **kezdő vonala rajzolódik ki**, ettől

a ponttól kezdve. Az idő múlásáva l, a z **i** **dővonal húzza** magával az objektum **végét**,
és így lesz majd időbeni kiterjedése i s az obje k tu mnak.

- **Ha** az objektum rögzítése olyan, nem MRN *(menetrend nélküli,* *’* *VNTTId* *’* *<> 1* *’* *)*

vonathoz tartozó, menetvonalhoz történik (a kattintás helye alapján), amelynek **van**
rögzített **vonateseménye**, akár 0 pe r ces t ar tózk o dással, akkor a rendszer **felajánlja** a
menetvonalhoz tartozó **vonatszámot** a *F* *elirat* mezőben.

A vonatszámot az alábbi esetekben lehet felajánlani:

`o` szolgálati hely/egy menetvonal metszéspontja/tartózkodása alapján az ak t uáli s

vonat
`o` szolgálati hely/több menetvonal metszéspontja/tartózkodása k özü l a
kiválasztott vonat

- A kattintást követően (a kattintá s hel y e alap ján) a panelen megjelennek (frissülnek) a

kulcsfüggés feloldás objektum adata i

`o` *Felirat*

       - Ha már kitöltött az objektum létrehozása előtt és menetvonalra kattint,

akkor a vonatszámmal átírja a már kitöltött mezőt. Ha nem
menetvonalra kattint, akkor nem módosul.

       - Ha még nem kitöltött az objektum létrehozása előtt és menetvonalra

kattint, akkor a vonatszámmal kitölti a mezőt. Ha nem menetvonalra
kattint, akkor üres marad.
`o` *Kezdési idő*

- Csak a *Felirat* vagy a *Kezdési id* *ő* m ódosítható a panelen!

- Az objektumhoz a szerkesztő pane len **m** **egad** **ható** (módosítható) a *Felirat*, amely

lehet egy vonatszám vagy egy tetszől eg es **szöv** **eg**, ami az ábrán a **objektum fölött**
**jelenik meg** .

- Az objektum adatai megjelenn ek a pane len, azok még módosíthatók. A rögzítés a

szerkesztő panelen lévő nyomógombokk al bef ejezhető.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 198/526|


**Kulcsfüggés feloldás lezárása**




  - Legyen **kiválasztva egy nyitott** **ku** **l** **csf** **üggés** **f** **el** **oldás** .

  - A „Kulcsfüggés feloldás lez ár ása ” **i** **k** **ont** **k** **ezeli** .

  - Az ábra felett megjelenik a s zer kesztő **panel**, melyen látható a kiválasztott

kulcsfüggés feloldás objektum adatai.

  - Ha a **nyitott** kulcsfüggés feloldás objek tum on **belül** egy időpontnál kattint, akkor az

lesz a kulcsfüggés feloldás lezárási időpontja. A panelen frissülnek az adatok.

  - Ha **nem megfelelő helyen** tört éni k a **lez** **á** **rá** **si kattintás**, akkor a **panelen nem**

**frissülnek** az adatok és a kattintás helyétől függően **hibaüzenetet ad** :

`o` ha az idővonal alá kattint, akkor „Nem lehet későbbi, mint az aktuáli s i d ő! ”.
`o` ha az objektum kezdő időpontja elé kattint, akkor „Nem lehet korá b b i, m i n t a

Kezdési idő! ” .

  - A **helyes lezárási kattintást** kö vetően ( a k attin tás helye alapján) a panelen frissül a

kulcsfüggés feloldás *Lezárási idő* mező.

  - Csak a *Lezárási idő* módosíth ató ak ár a pane len, akár az ábrán **ismételt lezárási**

**kattintással** !

  - A rendszer a kiválasztott időpo ntnál **lez** **á** **rj** **a** **az objektumot** . (Az objektum csak a

befejezési időpontig lesz megrajzolva. )

  - A lezárás a szerkesztő panelen lév ő <Ment> vagy <Mégsem> nyomógombokkal

befejezhető.

**Szerkesztő panel (Kulcsfüggés feloldás létrehozás / lezárás)**

**Fejléc:**

  - Cím: „ **Kulcsfüggés feloldás sze** **rk** **es** **zt** **ése** ”

  - Nyomógombok:

`o` <Ment>

`o` <Mégsem>

  - Méretezés ikonok (szerkesztés közben is haszná lhatók)

`o`     - Idővonalra ugrás ikon

`o`     - X és Y tengely kicsinyítése ikon

`o`     - X és Y tengely nagyítása ikon

`o`     - X tengely kicsinyítése ikon

`o`     - X tengely nagyítása ikon

`o`     - Y tengely kicsinyítése ikon

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 199/526|


`o`     - Y tengely nagyítása ikon

**Mezők**

  - *Szolgálati hely*



Szöveges **megjelenítő** .
Létrehozáskor a kiválasztott szolgálati hel y neve.
Lezáráskor a kiválasztott kulcsfügg és feloldás ob jektum szolgálati helynek a neve.

  - *Felirat*

**Létrehozáskor kötelező** en kitöltendő, de s zabad on írható, egyébként megjelenítő.
Maximum 30 karakter.
A kattintás helyétől függően kerül het bel e az aktuális vonatszám, ha van rögzített
vonateseménye

`o` szolgálati hely és egy menetvonal metszéspontja/tartózkodása alapj án az

aktuális vonat
`o` szolgálati hely és több menetvonal metszéspontja/tartózkodása k ö zü l a

kiválasztott vonat

  - *Kezdési idő*

Dátum és idő beviteli mező kiválasztó funkcióval/megjelenítő.
**Létrehozáskor kötelezően kitölten** **dő**, egy ébként megjelenítő.
A kattintás helyétől függően kerül bele az érték. Ha a felhaszná l ó m ó d osí t j a a
panelen, akkor ellenőrizni kell, hogy az időpont

`o` **Nem lehet későbbi**, mint az **aktuális idő** (idővonal). Ha későb b i, ak k or

”
**hibaüzenetet** ad: „Nem lehet későbbi, mint az aktuális idő! .
`o` **Nem eshet bele egy másik** kulcsfüggés feloldás **időszakába** . H a b ele esi k,

akkor **hibaüzenetet** ad: „Kezdési idő nem lehet egy lezárt kulcsfüggés

”
feloldás objektum Lezárási időjénél korábbi! .
`o` N **em lehet korábbi**, mint a grafikonon **megjelenített legkorábbi idő** **pont** . Ha

korábbi, akkor **hibaüzenetet** ad: „Kezdési idő nem lehet korábbi, mint a

”
grafikonon megjelenített legkorábbi időpont! .

  - *Lezárási idő*

Dátum és idő beviteli mező kiválasztó funkcióval.

Létrehozáskor üres.
**Lezáráskor kötelezően kitöltendő**, egy ébként megjelenítő (védett).
A **lezárási kattintás** helyétől függően kerül bele az érték. Ha a felhaszn áló mó d osí t j a
a panelen, akkor ellenőrizni kell, hogy az időpont

`o` **Nem lehet későbbi**, mint az **aktuális idő** (idővonal). Ha későb b i, ak k or

**hibaüzenetet** ad: „Nem lehet későbbi, mint az aktuális idő! ” .
`o` **Nem lehet korábbi**, mint a ***Kezdési idő*** . Ha későbbi, akkor hibaüzenetet ad :

”
„Nem lehet korábbi, mint a Kezdési idő! .

Ha a felhasználó **szabályosan változtatja** az adatokat, akkor az adott objektum megjelenése a
változtatásnak megfelelően **változik az ábrán is** . (Ez még nem mentett, csak a szerkesztés
közbeni állapot!)

A **mentés** a szerkesztő panelen található <Ment> nyomógomb kezelésével
lehetséges.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 200/526|


A szerkesztés megszakítása a <Mégsem> nyomógomb használatával lehetséges.

A megrajzolt kulcsfüggés feloldás csak mentés után lesz látható más PV felhasználók
számára.

<Ment> nyomógomb

  - A <Ment> nyomógomb akkor **kezelhető, ha** a szerkesztő panel meg ny i t ása ó t a

**változás történt**, és az újként létrehozott vagy lezárni kívánt kulcsfü g g és f elo l d ás
objektum **adatai helyesek** .

  - A felhasználónak **rendelkeznie kell** az **OP_0151_MGMIr** **a** **ny** **i** **to** i l l etv e az

**OP_0151_MGMMefiMerafiRogzit** operandusokkal.

  - Megfelelő **jogosultság esetén** meghívódik az „ **47** **–** **Kulcsfüggé** **s** **f** **elo** **l** **d** **á** **s me** **nt** **és** **e**

**(KulcsfuggesMentesCommand)** ” szolgáltatás az alábbi paraméterekkel:

`o` Kulcsfüggés feloldás belső azonosító ( **KulcsfuggesId** ) =

        - Létrehozáskor **NULL**

        - Lezáráskor **a kiválasztott kulcsfüggés feloldás** objektum belső

azonosítója

`o` Működési mód ( **MukodesiMod** ) =

        - Létrehozáskor ’ **U** ’

        - Lezáráskor ’ **M** ’

`o` Ábra belső azonosítója ( **AbraId** ) = az **aktuális ábra belső azon** **o** **sí** **tó** **ja**

`o` Kulcsfüggés feloldás szolgálati hely belső azonosítója ( **Kulcsfu** **g** **g** **esS** **zhI** **d** )
= a megrajzolt kulcsfüggés feloldás **s** **zolgálati helyének belső azonosítója**
(a megjelenített szolgálati hely)

`o` Kulcsfüggés feloldás felirat ( **KulcsfuggesFelirat** ) = a rögzített ***Felira*** ***t***

`o` Kulcsfüggés feloldás kezdési idő ( **KulcsfuggesKezd** ) = a r ög zít et t
kulcsfüggés feloldás ***Kezdési idő***

`o` Kulcsfüggés feloldás lezárási idő ( **KulcsfuggesLezar** ) =

        - Létrehozáskor **NULL**

        - Lezáráskor a rögzített kulcsfügg és feloldás ***Lezárási idő***

  - Ha a szolgáltatás rendben lefutott, akkor a program kilép *Kul* *csf* *ü* *g* *g* *és* *f* *elo* *l* *d* *ás*

*szerkesztése* üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fejl éc és pan el, a
menetvonal kijelölése megszűnik, a többi objektum elérhetővé válik é s a *K* *u* *l* *csf* *ü* *g* *g* *és*
*feloldás szerkesztés* ikon nem kezelhetővé válik. Majd a program megh í v j a a g r af i k o n
frissítéséhez szükséges szolgáltatásokat.

<Mégsem> nyomógomb

  - A <Mégsem> nyomógomb mindig használható.

  - Megszakítja a szerkesztést (rajzolást) és visszaáll a szerkesztés elő t t i áll ap o t .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 201/526|



  - A nyomógomb használatakor, ha a szerkesztő panel megnyitása ó t a a g r af i k o n

változott (kulcsfüggés feloldás készült), akkor a program meger ősí t ést k ér a
folytatáshoz. (151009    - UC_01_51_CONF_CANCEL    - „Biztosan k i l ép? A n em
mentett adatok elvesznek! ” )

  - A megerősítő üzenetre adott nemleges válasz esetén folytatható a sz er k es zt és.

  - Igenlő válasz esetén a program az adatok mentése nélkül kilép a *Ku* *l* *csf* *ü* *gg* *és f* *elo* *l* *d* *ás*

*szerkesztése* üzemmódból. Ezáltal a grafikonon eltűnik a szerkesztő fe jl éc és pan el, a
menetvonal kijelölése megszűnik, a többi objektum elérhetővé válik és a K *u* *l* *csf* *ü* *g* *gés*
*feloldás szerkesztés* ikon nem kezelhetővé válik. Majd a program megh í v j a a g r af i k o n
frissítéséhez szükséges szolgáltatásokat.

**Kulcsfüggés feloldás törlése**

  - Egy megjelenített kulcsfüggés f eloldás **k** **i** **j** **el** **ö** **lését követően törölhető** .

  - A **törlés** a szerkesztő ikonsávon található **Törlés** ikon kezelésével vagy a
**Del/Delete** billentyű megnyomásával k ez dem én yezhető.

  - A felhasználónak **rendelkeznie k** **ell** az **OP_0151_MGMIranyito** illetve az

**OP_0151_MGMMefiMerafiRogzi** **t** oper anduso kkal.

  - Megfelelő jogosultság esetén a **t** **ö** **rl** **és** v égr eha jtása előtt megerősítő üzenetet kap a

felhasználó.

„Törli a kiválasztott {0}? <Igen>/<N em    - ”

Ahol a {0} = ’ Kulcsfüggés feloldás objektumot ’ szöveg.

  - Ha a törlés végrehajtható, akko r m eg hí v ódi k az „ **47** **–** **Kulcsfüggés feloldás mentése**

**(KulcsfuggesMentesCommand)** ” szol g áltatá s az alábbi paraméterekkel:

`o` Kulcsfüggés feloldás belső azonosító ( **KulcsfuggesId** ) = a kijelölt k u l cs f üg g é s

feloldás objektum belső azonosítója

`o` Működési mód ( **MukodesiMod** ) = ’ **T** ’

`o` Ábra belső azonosítója ( **AbraId** ) = az **aktuális ábra belső azonosí** **tó** **ja**

`o` Kulcsfüggés feloldás szolgálati hely belső azonosítója ( **KulcsfuggesS** **zhI** **d** ) =

**NULL**

`o` Kulcsfüggés feloldás felirat ( **KulcsfuggesFelirat** ) = **NULL**

`o` Kulcsfüggés feloldás kezdési idő ( **KulcsfuggesKezd** ) = **NULL**

`o` Kulcsfüggés feloldás lezárási idő ( **KulcsfuggesLezar** ) = **NULL**

  - Sikeres törlést követően az objek tum eltűnik az á bráról.

**2.2.3.16** **Objektumválasztó menü**

A grafikon olyan kattintható területén (a megváltozott egér kurzor jelzi a kattintható területet)
használva az egér bal vagy jobb gombját, ahol több objektum található egymáson, egy

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 202/526|


választó menü jelenik meg az egymáson lévő objektumok felsorolásával. A menü mérete
dinamikusan igazodik a tartalomhoz.

Pályavasúti (belső /vvt_szerv_id=11/) felhasználó esetén minden érintett objektum megjelenik
a felsorolásban. Vasútvállalati (külső /vvt_szerv_id<>11/) felhasználó esetén a vágányzári és
az RDE objektumok, valamint a menetvonalakhoz tartozó objektumok közül azok,
amelyeknél a felhasználó vasútvállalata megegyezik a menetvonal megrendelő
vasútvállalatával (MenetvTulId=vvt_szerv_id) vagy üzemeltető vasútvállalatával
(UzemeltVvId =vvt_szerv_id).

A menüben a következő objektumok lehetségesek:

  - Rde: „Rde:” előtag után az Rde azonosítója (pl. Rde: 20211202-105)

  - Vágányzár: „Vágányzár” előtag után a vágányzár azonosítója (pl. Vágányzár:

2021/70501/0)

  - M enetvonal: Tény, előrejelzés és menetrendi vonal esetén a menetvonalhoz tartozó

vonatszám előtag nélkül. (pl. 2474)

  - 89001 Szöveges megjegyzés: Előtag nélkül a szöveges me g j eg y zés els ő 2 0
karaktere [89001]

  - #88980 Csatlakozásra várás: „Csatlakozásra várás: ” előtag után a csatlak o zás v árásban
lévő vonatok közül azoknak a vonatszáma, amelyeknek van kölek ed ési ad ata a
lekérdezett időszakban (pl. Csatlakozásra várás: 38711, 17808) [ #88980vége]

A menüből bal egér gombbal választva, ha a kiválasztott objektum egy menetvonalhoz tartozó
objektum, a menetvonal menetrendi és tény vonala is (az előrejelzéssel együtt) kiemelt lesz és
a többi menetvonal elhalványul. Ha a menetvonal menetrendi vonala a megjelenítési
beállítások miatt nem látható, de a megjelenítési beállítások szerint csak a kijelölt [vk54879] és
tény/előre jelezett adattal nem rendelkező vk54879 vége menetvonal menetrendjét kell
megjeleníteni, akkor a menüből a menetvonalat választva, a program kiemelten megrajzolja a
menetvonal menetrendi vonalát (természetesen a tény vonal is az előrejelzés részével együtt
kiemelt lesz) . [VK107679] A kijelölt menetvonalak felirata félkövéren és nagyobb betűmérettel
jelenik meg, míg a többi menetvonal felirata pedig elhalványul [ VK107679vége] .

A menüből jobb egér gombbal választva, megjelenik a megfelelő információs terület, illetve
menetvonalhoz tartozó objektum kiválasztásakor a menetvonal menetrendi és tény vonala is
kiemelt lesz az előző bekezdésben leírtak szerint. Az információs területek részletes leírása a
következő, Információs területek, pontban található.

**2.2.3.17** **Információs területek**

Jelen pont az A_0151_01 – Út-idő diagram ablakról megnyitható információs terület típusú
popup ablakok leírásait tartalmazza.
Az információs területek az egér segítségével, a bal vagy jobb egérgombot az információs
területen nyomva tartva/drag and drop módszerrel/, mozgathatók a grafikus terület széléig.
Egérrel egy információs terület mellé kattintva az információs terület bezáródik.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 2.2.3.10-es


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 203/526|


**Út tengely/szolgálati hely információs terület**



Az út tengelynél található szolgálati hely nevére jobb gombbal kattintva jelenik meg az Út
tengely/szolgálati hely információs terület külön popup ablakban. Az ablak forrásadatait az
**S_0151_02** szolgáltatás biztosítja a kliensnek. A popup ablak mérete igazodik a
megjelenítendő tartalomhoz.
**Pályavasúti (belső) felhasználó esetén az ablak megjelenése és tartalma:**
Az információs terület megjelenése:

Adattartalom:

  - Teljes név {Szolgálati hely teljes név} – [#89004] Linkként jelenik meg. Kezelésekor a

kliens egy új böngésző ablakot nyit, melyben az S_0151_02    - Út tengely adatok

PvPortalLink paraméterben kapott linket nyitja meg. [ #89004 VÉGE]

  - CB szám {Telefonszám CB}

  - Mobilszám {Telefonszám Mobil}

  - VK52821 Vonalirányító CB szám {Telefonszám CB}

  - Vonalirányító mobilszám {Telefonszám Mobil} [VK52821 Vége]
**Vasútvállalati (külső) felhasználó esetén az ablak megjelenése és tartalma:**
Az információs terület megjelenése:

Adattartalom:

  - Teljes név {Szolgálati hely teljes név} – [#89004] Vasútvállalati felhasználó esetén nincs

linkszerű megjelenítés [#89004 VÉGE]

  - Vonalirányító CB szám {Vonalirányító telefonszám CB}

  - Vonalirányító mobilszám {Vonalirányító telefonszám Mobil}

**[60618]** **Menetvonal/szolgálati hely információs terület**

Egy menetvonalhoz rajzolt bármelyik vonal és egy szolgálati hely találkozása fölé
pozícionálva és ott a jobb egér gombot használva, ha ott nincs más objektum, vagy több
objektum esetén az ott feljövő választó menüből jobb egér gombbal menetvonalhoz tartozó
objektumot választva, jelenik meg a Menetvonal/szolgálati hely információs terület külön
popup ablakban.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**

**törölt:** szolgáltatás

**törölt:**

**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 204/526|


Pályavasúti (belső /vvt_szerv_id=11/) felhasználó esetén bármelyik vonal és szolgálati hely
találkozásánálmegjelenik az információs terület.
Vasútvállalati (külső /vvt_szerv_id<>11/) felhasználó esetén csak olyan menetvonalnál
jelenik meg az információs terület, amelynél a felhasználó vasútvállalata megegyezik a
menetvonal megrendelő vasútvállalatával (MenetvTulId=vvt_szerv_id) vagy üzemeltető
vasútvállalatával (UzemeltVvId =vvt_szerv_id). Egyébként. ha ott nincs más objektum, akkor
a klies „Az adatok megtekintéséhez nincs jogosultsága.” üzenetet ad. Több egymáson lévő
objektum esetén a feljövő választó menüben meg sem jelenik olyan menetvonal, amihez a
vasútvállalatnak nincs jogosultsága.
Pályavasúti és Vasútvállalati felhasználó számára megjelenő információs terület között egy
kis tartalmi különbség is van. PV-i felhasználó számára a késési kódoknál a főkód és a segéd
kód jelenik meg, míg VV-i felhasználó számára pedig az UIC kód.
A popup ablak megnyitása előtt az információs területen megjelenő adatok kiolvasásához a

**–**
kliens program meghívja az **S_0151_09** **Menetvonal/Szolgálati hely információs**
**területhez adatok lekérdezése (MenetvSzhelyInfoTerQuery)** szolgáltatást a következő
paraméterekkel:

  - Menetvonal id (MenetvId): Az adott menetvonal belső azonosítója

  - Szolgálati hely id (SzhId): Az adott szolgálati hely belső azonosítója

  - Szolgálati hely index (SzhIndex): Az adott menetvonalon a szolgálati helynek a

kiválasztott metszéspontnál lévő sorszáma

A szolgáltatástól kapott adatokat felhasználva a kliens program megjeleníti az információs
területet.

**A popup ablak megjelenése és tartalma:**

A popup ablak mérete igazodik a megjelenítendő tartalomhoz. Egy menetvonal menetrendi
vagy tény vonalán ugyanazon szolgálati helyre (a szolgálati hely ugyanazon előfordulására)
kattintva, nincs különbség a megjelenő információs terület tartalmában.

Adattartalom:

  - Vonatazonosító: {Vonatszám irányszámmal+’/’+vonat indulási dátuma (éééé.hh.nn)

(S_0151_09 szolgáltatástól kapott Vonatazon)}

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 205/526|



- Szolgálati hely: {Szolgálati hely teljes név (S_0151_02 szolgáltatástól kapott

SzhHosszuNev)}
Vonat adatok

- Vontatójármű: {A legelső vontatójármű azonosítója+’ ’+a legelső vontatójármű

vontatási neme szövegesen (S_0151_09 szolgáltatástól kapott Vontatojarmu)}

- Vonat fejadatok: {vontatott jármű db+’db / ’+teljes hossz+’m / ’+teljes tömeg+’t’

(S_0151_09 szolgáltatástól kapott VonatFejadat)}

- Megrendelő: {Megrendelő rövid neve (S_0151_09 szolgáltatástól kapott
Megrendelo)}

- Forgalmi vonatnem: {Forgalmi vonatnem rövid neve+’ ’+Forgalmi vonatnem teljes

neve (S_0151_09 szolgáltatástól kapott ForgVnem)}

- Kiindulási állomás: {A vonat kiindulási állomásának teljes neve (S_0151_09

szolgáltatástól kapott IndAll)}

- Végállomás: {A vonat célállomásának teljes neve (S_0151_09 szolgáltatástól kapott

VegAll)}

- Megrendelésazonosító: {Igénylés éve+’/’+Iktatószám+’/’+Verziószám (S_0151_09

szolgáltatástól kapott MegrAzon)}

Közlekedési tényadatok (S_0151_09 szolgáltatástól kapott adatok alapján)

**Eltérés:** **Ig.késés:** **Késési kód:**


{PV-i felhasználó esetén:
Késési ok főkód (ErkKesesFokod) +'  ' +
Késési ok segédkód (ErkKesesSegedkod)

VV-i felhasználó esetén:

Késési ok UIC kód (ErkKesesUIC)}


{Eltérés
percben

érkezéskor

(ErkElteres)}


{Érkezéskor
igazolt késés
percben
(ErkKeses)}


Érkezés:


{Tény

érkezési idő

(óó:pp)
(ErkIdo)}


… …


{Érkezéskor
igazolt késés
percben
(ErkKeses)}


{PV-i felhasználó esetén:
Késési ok főkód (ErkKesesFokod) +'  ' +
Késési ok segédkód (ErkKesesSegedkod)

VV-i felhasználó esetén:

Késési ok UIC kód (ErkKesesUIC)}


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 206/526|


{Eltérés
percben
induláskor

(IndElteres)}


{Induláskor
igazolt késés
percben
(IndKeses)}


{PV-i felhasználó esetén:
Késési ok főkód (IndKesesFokod) +'  ' +
Késési ok segédkód (IndKesesSegedkod)

VV-i felhasználó esetén:

Késési ok UIC kód (IndKesesUIC)}


Indulás:


{Tény

indulási idő

(óó:pp)
(IndIdo)}


… …


{Induláskor
igazolt késés
percben
(IndKeses)}

**Menetvonal adatok információs terület**


{PV-i felhasználó esetén:
Késési ok főkód (IndKesesFokod) +'  ' +
Késési ok segédkód (IndKesesSegedkod)

VV-i felhasználó esetén:

Késési ok UIC kód (IndKesesUIC)}


Egy menetvonalhoz rajzolt bármelyik a vonalnak nem a szolgálati helyekre eső részére és
nem a be/kilépést jelölő nyilacskákra pozicionálva, ott a jobb egér gombot használva, ha ott
nincs más objektum, vagy több objektum esetén az ott feljövő választó menüből jobb egér
gombbal menetvonalhoz tartozó objektumot választva, megnyílik a Menetvonal adatok
információs terület külön popup ablakban. A menetvonal menetrendi vagy tény vonalát
(beleértve az előrejelzést is) választva, nincs különbség a megjelenő információs terület
tartalmában.
Felhasználó vasútvállalat alapján:

  - Pályavasúti (belső /vvt_szerv_id=11/) felhasználó esetén bármelyik vonalnál

megjelenik az információs terület.

  - Vasútvállalati (külső /vvt_szerv_id<>11/) felhasználó esetén csak olyan
menetvonalnál jelenik meg az információs terület, amelynél a felhasználó
vasútvállalata megegyezik a menetvonal megrendelő vasútvállalatával
(MenetvTulId=vvt_szerv_id) vagy üzemeltető vasútvállalatával (UzemeltVvId
=vvt_szerv_id). Egyébként. ha ott nincs más objektum, akkor a kliens „Az adatok
megtekintéséhez nincs jogosultsága.” üzenetet ad. Több egymáson lévő objektum
esetén a feljövő választó menüben meg sem jelenik olyan menetvonal, amihez a
vasútvállalatnak nincs jogosultsága.
A popup ablak megnyitása előtt az információs területen megjelenő adatok kiolvasásához a
kliens program meghívja az **S_0151_08** **–** **Menetvonal adatok információs területhez**
**adatok lekérdezése (M** **enetvAdatInfoTerQuery** **)** szolgáltatást a következő paraméterekkel:

  - Menetvonal id (MenetvId): Az adott menetvonal belső azonosítója

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 207/526|



  - Szolgálati helyek listája ( **S_0151_02** **–** **Út tengely adatok lekérdezése** szolgáltatás

(UttengelySzolgalatiHelyAdatokQuery) által visszaadott szolgálati helyek listája)

`o` Szolgálati hely id: Az **S_0151_02** szolgáltatás által visszaadott szolgálati
hely belső azonosítója

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 208/526|


**törölt:**

**törölt:**


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 209/526|


Adattartalom:




- Vonatazonosító: {Vonatszám+’ / ’+vonat indulási dátuma (éééé.hh.nn)
(S_0151_08 szolgáltatástól kapott VonatAzon)}

...
{Vonatszám+’ / ’+vonat indulási dátuma (éééé.hh.nn)
(S_0151_08 szolgáltatástól kapott VonatAzon)}

- Grafikon utolsó jelentőpontja: {Utolsó esemény helyének teljes neve (S_0151_08

szolgáltatástól kapott UtEsemHely}

- Grafikon utolsó eseménye: {Esemény ideje (éééé.hh.nn óó:pp)+’ ’+ Esemény

fajtájának kódja(K_VEF.k_kod)+GPS alapján rögzített esemény esetén (Ha
MGM_TenyEsem. esem_tipus=’G’) akkor ’ (GPS)’ (S_0151_08 szolgáltatástól kapott
UtEsem)}

- Eltérés: {(Eltérés az utolsó eseménynél+’ perc’) (S_0151_08 szolgáltatástól kapott

UtElteres)}

**Alapadatok (1.tab/fül)**

- Vontatójármű

`o` Azonosító: {Az első vontatójármű azonosítója (xx xx xxxx xxx-x) (S_0151_08

szolgáltatástól kapott VontatojarmuAzon)}
`o` Vontatási nem: {A vontatójármű vontatási neme szövegesen (S_0151_08

szolgáltatástól kapott VontatojarmuVontNem)}

- VK93679 Fejadatok {vontatott jármű db+ ’ db / ’ +teljes hossz+ ’ m / ’ +teljes t ömeg +’ t ’
(S _ 0151 _ 08 szolgáltatástól kapott Fejadat)} [ VK93679vége]

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 210/526|



 - Mozdonyvezető



`o` Neve: {Mozdony vezető neve (S_0151_08 szolgáltatástól kapott MozdVezNev)}
`o` Telefonszáma: {Mozdonyvezető telefonszáma (S_0151_08 szolgáltatástól kapott

MozdVezTel)}

- Vonatkisérő

`o` VK93679 Neve: {Vonatkisérő neve ( S _0151_08 szolgáltatástól kapott
VonKiseroNev)} [ VK93679vége]
`o` T elefonszáma: {Vonatkisérő telefonszáma (S_0151_08 szolgáltatástól kapott

VonKiseroTel)}

- VK93679 Menetrendi sebesség
`o` Alap: {Legmagasabb értékű ala p sebes s ég ( S _ 0151 _ 08 szolgáltatástól kapott

LegmErtAlapSeb)}
`o` Legnagyobb: {Legmagasabb értékű leg nagy o bb sebesség (S_0151_08

szolgáltatástól kapott LegmErtLegn S eb ) } [ VK93679vége ]

- Menetvonal

`o` Megrendelő: {Megrendelő rövid neve (S_0151_08 szolgáltatástól kapott

Megrendelo)}
`o` Forgalmi vonatnem: {Forgalmi vonatnem rövid neve+’ ’+Forgalmi vonatnem

teljes neve (S_0151_08 szolgáltatástól kapott ForgVnem)}
`o` Kiindulási állomás: {A menetvonal kiindulási állomásának teljes neve (S_0151_08

szolgáltatástól kapott IndAll)}
`o` Végállomás: {A menetvonal célállomásának teljes neve (S_0151_08

szolgáltatástól kapott VegAll)}
`o` Megrendelésazonosító: {Igénylés éve+’/’+Iktatószám+’/’+Verziószám

(S_0151_08 szolgáltatástól kapott MegrAzon)}

**Vonatadatok (2.tab/fül)**

- Készrejelentés rögzítési ideje: {Készrejelentés rögzítésének ideje (éééé.hh.nn óó:pp)

(S_0151_08 szolgáltatástól kapott KeszreJelRogzIdo)

- Fejadatok: {vontatott jármű db+’db / ’+teljes hossz+’m / ’+teljes tömeg+’t’

(S_0151_08 szolgáltatástól kapott Fejadat)}

- RID: {’Igen’- ha tartalmaz veszélyes árut a vonatösszeállítás (S_0151_08

szolgáltatástól kapott Rid) }

- Rk: {Rk kód+’ tip ’+Rk engedély szám (xxxxx/éééé) (S_0151_08 szolgáltatástól
kapott adatok alapján: RkKod+’ ’+RkEng)}

...

{Rk kód+’ tip ’+Rk engedély szám (xxxxx/éééé) (S_0151_08 szolgáltatástól
kapott adatok alapján: RkKod+’ ’+RkEng)}

- 88997 Vonat max. műszaki sebessége: {Vonatosszeallitas.train_m ax _speed+ ’k m / h ’ }
(S _ 0151 _ 08 szolgáltatástól kapott VonMaxMuszakiSeb) [ 88997vége]

- Vonatösszeállítás érvényessége

`o` Szolgálati helytől: {A vonatösszeállítás kezdő szolgálati helyének teljes neve

(S_0151_08 szolgáltatástól kapott VosszSzhtol)}

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 211/526|


`o` Szolgálati helyig: {A vonatösszeállítás vég szolgálati helyének teljes neve

(S_0151_08 szolgáltatástól kapott VosszSzhig)}

- Járműlista (S_0151_08 szolgáltatástól kapott adatok alapján)

88997

Ssz Azonosító Alkalmazás Rk Rk kisorozó áll

Seb korl


88997

Teljesítménycsökkenés


{ Teljesítménycsökken
és (mertek+ ’ %

{ Sebességkorlát ’ +Korlátozás kezdő

{Rk {Rk kisorozó

{Járműazonosító ozás szolgálati helyének

{ Sorszá {Alkalmazás engedélyszám állomás rövid ’
m (Ssz) } (xx xx xxxx xxx-x x) (Alk)} (xxxxx/éééé) neve (sebesseg_korla ’ ’ rövid neve+ ’ –

(JarmuAzon)} tozas+ km/h ) +Korlátozás vég

(RkEngSzam)} (KisorozoAll)}

(SebKorl) } szolgálati helyének

rövid neve)
(TeljCsokk) }

… … … … … … …


{Rk kisorozó

állomás rövid

neve

(KisorozoAll)}


{ Sebességkorlát
ozás

(sebesseg_korla
tozas+ ’ km/h ’ )
(SebKorl) }


{ Sorszá
m (Ssz) }


{Járműazonosító
(xx xx xxxx xxx-x x)
(JarmuAzon)}


{Alkalmazás
(Alk)}


{Rk
engedélyszám
(xxxxx/éééé)
(RkEngSzam)}


{ Teljesítménycsökken
és (mertek+ ’ %
’ +Korlátozás kezdő
szolgálati helyének

’
rövid neve+ –
’ +Korlátozás vég
szolgálati helyének
rövid neve)
(TeljCsokk) }


{Rk kisorozó

állomás rövid

neve

(KisorozoAll)}


{ Sebességkorlát
ozás

(sebesseg_korla
tozas+ ’ km/h ’ )
(SebKorl) }


{ Sorszá
m (Ssz) }


{Járműazonosító
(xx xx xxxx xxx-x x)
(JarmuAzon)}


{Alkalmazás
(Alk)}


{Rk
engedélyszám
(xxxxx/éééé)
(RkEngSzam)}


**#88956** **Menetrendi adatok (3.tab/fül)**

A fülön egy grid található, melyben a kiválasztott menetvonal terv, elő rejelzés és t én y
adatain felül a kapcsolódó késési adatok jelennek meg táblázatos formáb an . A g r i d ad at ait
az információs terület megnyitásakor hívott **S_0151_08** szolgáltatás biztosítja.
A grid oszlopai:

Igazolt
Szolgálati hely Terv Tény/várható Vágány Hv Késés Ok kód
késés


**törölt:** **[88997]** **E (3.tab/fül)¶**
(Egyéb korlátozásokat tartalmazó lista az S_0151_08 szolgáltatástól
kapott adatok alapján)¶
Szolg helytől ...


…

…

…


…

…


…

…


…

…


…

…


…

…


**88997** **Egyéb korlátozások (4.tab/fül)**

(Egyéb korlátozásokat tartalmazó lista az S _ 0151 _ 08 szolgáltatást ó l k ap o t t ad at ok
alapján)

Mérték
Szolg helytől Szolg helyig Megjegyzés
(Km/h)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 212/526|


{ Megjegyzés
(Megjegyzes) }


{ Korlátozás
kezdő
szolgálati
helyének rövid

neve

(KorlKezdSzh)
}


{ Korlátozás
vég szolgálati
helyének
rövid neve

(KorlVegSzh)
}


{ Mérték
(Mertek) }


… … … …


{ Korlátozás
kezdő
szolgálati
helyének rövid

neve

(KorlKezdSzh)
}


{ Korlátozás
vég szolgálati
helyének
rövid neve

(KorlVegSzh)
}


{ Mérték
(Mertek) }


{ Megjegyzés
(Megjegyzes) }


88997vége

**A popup ablak működése**

A popup ablak mérete igazodik a megjelenítendő tartalomhoz és egy adott méret után
gördíthetővé válik.
Az ablak felső részében (fülek feletti részen) minden adat csak megtekintésre szolgál.
Több vonatazonosító esetén a vonatazonosítók egymás alatt jelennek meg a többi adat
lefelé tolásával.

A telefonszámokon kívül minden adat csak megtekintésre szolgál.
A telefonszámok linkként jelennek meg. Ezekre kattintáskor a számítógéphez bluetooth
kapcsolaton keresztül párosított telefonkészüléken keresztül indítható telefonhívás,
amennyiben az alábbi feltételek teljesülnek:

   - MyPhone Explorer alkalmazás telepítve van az IÜR-t futtató számítógépen

   - Van párosított telefon a MyPhone Explorer alkalmazáson keresztül

   - A megfelelő registry beállítások rendelkezésre állnak

Minden adat csak megtekintésre szolgál.

A Járműlista mérete igazodik a megjelenítendő tartalomhoz és egy adott méret után (ha
már nem fér ki az ablakon) gördíthetővé válik.

A fül minden esetben kezelhető, az adatok csak megjelenítésre szolgálna k .
A menetrendi adatokat tartalmazó lista mérete igazodik a megjelenítend ő tart alomh oz és
egy adott méret után (ha már nem fér ki az ablakon) gördíthetővé válik.
Az adatok megjelenítési logikája:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 
**törölt:** **LAPADATOK**

**törölt:** **ONATADATOK**

**törölt:** **[88997EGYÉB KORLÁTOZÁSOK (3.tab/fül)¶]**

**A fül csak akkor kezelhető, ha tartozik hozzá adat.¶**

**A fülön minden adat csak megtekintésre szolgál.¶**

**A korlátozásokat tartalmazó lista mérete igazodik a megjelenítendő tartalomhoz és egy adott méret**

**után (ha már nem fér ki az ablakon) gördíthetővé válik.¶**

**A listában a megjegyzés, ha nem fér ki, akkor több sorban megtörve jelenik meg. 88997vége ¶**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 213/526|


Az adatokat az **S_0151_08** szolgáltatás biztosítja és a kliens az alábbiak szerint jeleníti
meg őket:

  - **Szolgálati hely** : MenetrendLista\SzhelyNev

  - **Terv** :

`o` A cella felső sorában a MenetrendLista\TervErk értéke jelenik meg
`o` A cella alsó sorában a MenetrendLista\TervInd értéke jelenik meg

  - **Tény/Várható** :

`o` A cella felső sorában vagy a MenetrendLista\TenyErk értéke vagy vagy a

MenetrendLista\VarhatoErk értéke je lenik meg attól függően, hogy melyik
van kitöltve. Csak az egyik lehet kitöltve adott szolgálati helynél. A tény
időt félkövér módon, nappali üzemmód esetén fekete, éjszakai üzemmód
esetén fehér színnel, a várható időt pedig dőlt módon kék színnel jeleníti
meg a kliens.
`o` A cella alsó sorában vagy a MenetrendLista\TenyInd értéke vagy vagy a

MenetrendLista\VarhatoInd értéke jelenik meg attól függően, hogy melyik
van kitöltve. Csak az egyik lehet kitöltve adott szolgálati helynél. A tény
időt félkövér módon, nappali üzemmód esetén fekete, éjszakai üzemmód
esetén fehér színnel, a várható időt pedig dőlt módon kék színnel jeleníti
meg a kliens.

  - **Vágány** :

`o` A cella felső sorában a MenetrendLista\ErkVagany értéke jelenik meg.

Amennyiben adott eseménynél van TenyErk, akkor félkövér módon,
nappali üzemmód esetén fekete, éjszakai üzemmód esetén fehér színnel,
egyéb esetben dőlt módon kék sz ín nel jeleníti meg a kliens a vágány
értékét.
`o` A cella alsó sorában a MenetrendLista\IndVagany értéke jelenik meg.

Amennyiben adott eseménynél v an TenyInd, akkor félkövér módon,
nappali üzemmód esetén fekete, éjszakai üzemmód esetén fehér színnel,
egyéb esetben dőlt módon kék sz ín nel jeleníti meg a kliens a vágány
értékét.

  - **Hv** (Helytelen vágányról/  - ra)

`o` A cella felső sorában a MenetrendLista\ErkHelytVagany értéke jelenik

meg. Amennyiben adott eseményné l van TenyErk, akkor félkövér módon,
nappali üzemmód esetén fekete, éjszakai üzemmód esetén fehér színnel,
egyéb esetben dőlt módon kék sz ín nel jeleníti meg a kliens a vágány
értékét.
`o` A cella alsó sorában a MenetrendLista\IndHelytVagany értéke jelenik meg.

Amennyiben adott eseménynél v an TenyInd, akkor félkövér módon,
nappali üzemmód esetén fekete, éjszakai üzemmód esetén fehér színnel,
egyéb esetben dőlt módon kék sz ín nel jeleníti meg a kliens a vágány
értékét.

  - **Igazolt késés** :

`o` A cella felső sorában a MenetrendLista\ErkKesesAdatok tömb adott

szolgálati helyre vonatkozó Keses é r tékeinek összegét jeleníti meg a kliens.
Amennyiben az így kapott érték előjel nélküli (tehát nullánál nagyobb),
akkor a kliens egy ’ + ’ előtaggal egy üt t jeleníti meg (pl. +5)
`o` A cella alsó sorában a MenetrendLista\IndKesesAdatok tömb adott

szolgálati helyre vonatkozó Keses ér t ékeinek összegét jeleníti meg a kliens.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 214/526|


Amennyiben az így kapott érték e lő jel nélküli (tehát nullánál nagyobb),
akkor a kliens egy ’ + ’ előtaggal egy üt t jeleníti meg (pl. +5)

  - **Késés ok kód** :

`o` MÁV felhasználó esetén (vvt_szerv_id = 11):

`o` A cella felső sorában a MenetrendLista\ErkKesesAdatok tömb

FoKod értékeit jeleníti meg a következők szerint: A kapott Érkezési
késés adatok tömbben szereplő késés főkódok ( ’ FoKod ’ ) egymástól
pontos vessző + három szóközzel elválasztva jelennek meg. Az
utolsó kód (páros) után nem jelenik meg pontosvessző.
*Formátuma: {Fokod} +* *’* *;* *’* *+ {Fokod} +* *’* *;* *’* *+ {Fokod}*
`o` A cella alsó sorában a MenetrendLista\IndKesesAdatok tömb

FoKod értékeit jeleníti meg a következők szerint: A kapott Indulási
késés adatok tömbben szereplő késés főkódok ( ’ FoKod ’ ) egymástól
pontos vessző + három szóközzel elválasztva jelennek meg. Az
utolsó kód (páros) után nem jelenik meg pontosvessző.
*Formátuma: {Fokod} +* *’* *;* *’* *+ {Fokod} +* *’* *;* *’* *+ {Fokod}*

`o` Vasútvállalati felhasználó esetén (vvt_szerv_id <> 11):

`o` A cella felső sorában a MenetrendLista\ErkKesesAdatok tömb

UicKod értékeit jeleníti meg a következők szerint: A kapott
Érkezési késés adatok tömbben szereplő UIC kódok ( ’ UicKod ’ )
egymástól pontos vessző + három szóközzel elválasztva jelennek
meg. Az utolsó kód (páros) után nem jelenik meg pontosvessző.
*Formátuma: {UicKod} +* *’* *;* *’* *+ {UicKod} +* *’* *;* *’* *+ {UicKod}*
`o` A cella alsó sorában a MenetrendLista\IndKesesAdatok tömb

UicKod értékeit jeleníti meg a következők szerint: A kapott Indulási
késés adatok tömbben szereplő UIC kódok ( ’ UicKod ’ ) egymástól
pontos vessző + három szóközzel elválasztva jelennek meg. Az
utolsó kód (páros) után nem jelenik meg pontosvessző.
*Formátuma: {UicKod} +* *’* *;* *’* *+ {UicKod} +* *’* *;* *’* *+ {UicKod}*

Egy főkódok felé mozgatva az egeret tooltip - ben az alábbi adatok jelenn ek m eg eg y m ás
alatt:

  - késés főkód megnevezése ( ’ FoKodNev ’ )

~~~~ ~~késés~~ ~~segédkód~~ ~~megnevezése~~ ~~(~~ ~~’~~ ~~S~~ eg ~~edK~~ odN ~~ev~~ ~~’~~ ~~)~~ ~~–~~ ~~ha~~ ~~nincs~~ ~~segédkód~~, ~~ak~~ ~~k~~ ~~o~~ ~~r~~ ~~n~~ ~~i~~ ~~n~~ ~~cs~~

~~külön~~ ~~sor~~

  - késés indoklása ( ’ Indoklas ’ ) [ #88956]

  - HUBA azonosító ( ’ HubaAzon ’ ) ééééhhnn  - vvvv formátumban [ #106597]

**#88997** **Egyéb korlátozások (4.tab/fül)**

A fül csak akkor kezelhető, ha tartozik hozzá adat.

A fülön minden adat csak megtekintésre szolgál.

A korlátozásokat tartalmazó lista mérete igazodik a megjelenítendő tartalo m h o z és eg y
adott méret után (ha már nem fér ki az ablakon) gördíthetővé válik.

A listában a megjegyzés, ha nem fér ki, akkor több sorban megtörve jelenik meg. [ 88997vége]

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 215/526|


**Be/kilépő menetvonal információs terület**



Egy menetvonalhoz rajzolt bármelyik a vonalnak vagy menetirányítói szakasznak vagy
ábrának a be/kilépést jelölő nyilacskájára pozicionálva, ott a jobb egér gombot használva, ha
ott nincs más objektum, vagy több objektum esetén az ott feljövő választó menüből jobb egér
gombbal a be/kilépést jelképező nyilacskához tartozó menetvonal objektumát választva,
megnyílik a Be/kilépő menetvonal információs terület külön popup ablakban.
Pályavasúti (belső /vvt_szerv_id=11/) felhasználó esetén bármelyik be/kilépést jelölőnél
megjelenik a Be/kilépő menetvonal információs terület.
Vasútvállalati (külső /vvt_szerv_id<>11/) felhasználó esetén csak olyan menetvonalnál
jelenik meg az információs terület, amelynél a felhasználó vasútvállalata megegyezik a
menetvonal megrendelő vasútvállalatával (MenetvTulId=vvt_szerv_id) vagy üzemeltető
vasútvállalatával (UzemeltVvId =vvt_szerv_id). Egyébként, ha ott nincs más objektum, akkor
a kliens „Az adatok megtekintéséhez nincs jogosultsága.” üzenetet ad. Több egymáson lévő
objektum esetén a feljövő választó menüben meg sem jelenik olyan menetvonal, amihez a
vasútvállalatnak nincs jogosultsága.
Az információs terület megnyitásakor nincs külön szolgáltatás hívás, az A_0151_01 ablak az
alábbi adatokat adja át megnyitáskor, melyek közül egyszerre csak egy van kitöltve:

   - Menetirányítói szakaszról kód (MisrolKod)

   - V onalról id (VonalrolId)

   - Ábráról Id (AbrarolId)

   - Menetirányítói szakaszra kód (MisraKod)

   - V onalra id (VonalraId)

   - Ábráról Id (AbrarolId)
**Vasútvonal esetén az ablak megjelenése:**

**Menetirányítói szakasz esetén az ablak megjelenése:**

**#88993** **Ábra (megtekint üzemmód) esetén az ablak megjelenése:**

**Ábra (irányítói üzemmód) esetén az ablak megjelenése:**

**#88993 VÉGE**

1. **Vasútvonal esetén** az ablakon megjelenő felirat: „Kapcsolódó vonal:”

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 216/526|


Vasútvonal esetén az ablakon hiperlinkként megjelenő értéket az A_0151_01 ablaktól
kapott VonalrolId vagy VonalraId alapján az **S_0151_14** **–** **Vasútvonalak,**
**menetirányítói** **szakaszok** **és** **ábrák** **lekérdezése**
**(VasutvonalEsMenetirSzakaszEsAbraQuery)** szolgáltatás kimenő listájából keresi ki a
kliens és jeleníti meg az alábbi módon:

   - TAKT név – Megnevezés
2. **Menetirányítói szakasz** esetén az ablakon megjelenő felirat: „Kapcsolódó irányítói

szakasz:”

Menetirányítói szakasz esetén az ablakon hiperlinkként megjelenő értéket az A_0151_01
ablaktól kapott MisrolKod vagy MisraKod alapján az **S_0151_14** **–** **Vasútvonalak,**
**menetirányítói** **szakaszok** **és** **ábrák** **lekérdezése**

kliens és jeleníti meg az alábbi módon:

   - Menetirányítói szakasz kód - Megnevezés
3. **[#88993]** **Ábra esetén** az ablakon megjelenő felirat: „Kapcsolódó ábra: ”

Ábra esetén az alábbi módon működik az információs terület:

   - **Megtekint módban** ábra esetén az abla k on hiperlinkként megjelenő értéket az

A _ 0151 _ 01 ablaktól kapott Abrar olI d v agy AbraraId alapján az **S_0151_14** **–**
**Vasútvonalak,** **menetirányítói** **szak** **a** **szok** **és** **ábrák** **lekérdezése**
**(VasutvonalEsMenetirSzakaszEsA** **bra** **Q** **ue** **ry)** szolgáltatás kimenő listájából
keresi ki a kliens és jeleníti meg az alábbi m ó don:

`o` Megnevezés

   - **Irányítói üzemmódban** az abla k on nem hiperlinkként jelenik meg az ábra

megnevezése. **[ #88993 VÉGE]**

A hiperlinkra kattintva a rendszer egy új ablakban nyit egy új UC_01_51 példányt, melynek
átadja az alábbi adatokat:

   - Idő üzemmód (Időhenger/fix időszak)

   - Múlt időintervallum és jövő idő intervallum – csak időhenger üzemmód esetén

kitöltött

   - Menetirányítói szakasz kód (rövid) – csak menetirányítói szakasz esetén kitöltött

   - V asútvonal belső azonosítója – csak vasútvonal esetén kitöltött

   - #88993 Ábra belső azonosítója – Csak ábr a esetén kitöltött

   - Nyelvi beállítás

   - Nappali/éjjeli megjelenítési üzemmód jelző
A be/kilépő menetvonal információs területről nyitott új A_0151_01 ablak automatikusan
megnyitja az A_0151_02 – Út-idő diagram kiválasztása ablakot, mely a kapott adatok alapján
állítja be a vezérlőelemek értékeit.

**Vágányzár információs terület**

Egyvágányzári téglalapon vagy feliraton jobb egér gombbal kattintva, ha a kattintás helyén
nincs más objektum, vagy több objektum esetén bármelyik egér gomb használatakor feljövő

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** **-**

**törölt:** **és**

**törölt:** **-**

**törölt:** **és**

**törölt:** **VasutvonalEsMenetirSzakaszQuery**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 217/526|


menüből, jobb egér gombbal a vágányzárat választva, jelenik meg a Vágányzár információs
terület külön popup ablakban.
A popup ablak megnyitása előtt az információs területen megjelenő adatok kiolvasásához a
kliens program meghívja az **S_0151_07** **Vágányzár információs területhez adatok**
**lekérdezése (VaganyzarInfoTerQuery)** szolgáltatást a következő paraméterekkel:

  - Vágányzár belső azonosító (VgzId): Az adott vágányzár belső azonosítója

  - Korlátozás belső azonosító lista (KorlIdArray): Az adott vágányzári téplalaphoz

tartozó, S_0151_06 szolgáltatástól kapott korlátozás azonosító lista

  - Megjelenítés típusa: (MegjTipus): Az adott vágányzári téplalap, S_0151_06

szolgáltatástól kapott, megjelenítési típusa. Lehetséges értékei:

`o` ”v” – vágány

`o` ”s” – szolgálati hely

`o` ”t” – szolgálati helyek között

`o` ”k” – szolgálati helyek között a geometriai középvonalnál

A szolgáltatástól kapott adatokat felhasználva a kliens program megjeleníti az információs
területet.

**A popup ablak megjelenése és tartalma:**
A popup ablak mérete igazodik a megjelenítendő tartalomhoz. A vágányzári téglalap
megjelenítési típusától függően változik az információs területen megjelenő adattartalom.
Amennyiben a megjelenítés típusa „t” – „szolgálati helyek között” vagy ”k” – szolgálati
helyek között a geometriai középvonalnál, akkor az vonali kizárást jelent, amennyiben „v” –
„vágány” vagy „s” – „szolgálati hely”, akkor állomási kizárást. Más adattartalommal jelenik
meg az információs terület vonali kizárás és más adattartalommal állomási kizárás esetén.

88954 Az információs terület felső részen jelennek meg a vágányzár fej adatai, valamint a
térbeli kiterjedésre vonatkozó adatok. Az információs adatok alsó részén pedig két lapfül
található:

  - Tervadatok lapfül – Itt láthatók a vágányzár időbeli kiterjedésére v o n atk o zó t erv ezett

adatok valamint a terv adatokhoz tartozó megjegyzés.

–
Tényadatok lapfül Amennyiben rögzítettek tény adatokat a vágányzárhoz, akkor ezen a
lapfülön láthatók. [88954vége]

*Állomási kizárás esetén* :
88954 Tervadatok lapfüllel.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 218/526|






-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 219/526|



  - Dízel kitoló szükséges (Csak akkor kell kiírni, ha az Állomási kizárások listában van

olyan rekord, ahol a DizelKitolo értéke igaz)

  - Kizárandó objektum(ok)(típusuk szerint csoportosítva):

`o` {Állomási kizárások listából a kizárandó objektum típusának neve

(KizObjTipusNev)}

        {Állomási kizárások listából az adott típusnak megfelelő kizárandó

objektum (KizObj)}

        {Állomási kizárások listából az adott típusnak megfelelő kizárandó

objektum (KizObj)}

….

`o` {Kizárandó objektum típusának neve (KizObjTipusNev)}

        {Állomási kizárások listából az adott típusnak megfelelő kizárandó

objektum (KizObj)}

        {Állomási kizárások listából az adott típusnak megfelelő kizárandó

objektum (KizObj)}

….

….

88954 Tervadatok (lapfül)

  - Kezdési idő: {Tervezett érvényesség kezdete (éééé.hh.nn óó:pp) (ErvKezd et ) }

  - Befejezési idő: {Tervezett érvényesség vége (éééé.hh.nn óó:pp) (Er vVeg )} [ 88954vége]

  - Megjegyzés (A mező egy függőlegesen scrollozható szövegdoboz formájában jelenik

meg az információs területen.):

`o` {Állomási kizárások listából a lista első rekordjánál lévő (a vágányzár

fejadathoz tartozó) megjegyzés (Megj)}

88954 Tényadatok (lapfül)

  - Kezdési idő: {Tény érvényesség kezdete (éééé.hh.nn óó:pp) (TenyErv Ke zd et)}

  - Befejezési idő: {Tény érvényesség vége (éééé.hh.nn óó:pp) (TenyErv Veg )}

  - Elrendelő távirat: {Elrendelő távirat (Tavirat)} (max 30 karakter ho s s zú )

  - Elmaradás (kapcsoló): {Elmaradás (Elmaradas)}

  - Megjegyzés (A mező egy függőlegesen scrollozható szövegdoboz f orm ájá b an j elen i k

meg az információs területen. Max 2000 karaktert tartalmazhat):

{Tény megjegyzés (TenyMegj)} [ 88954vége]

88954 Tervadatok lapfüllel.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** :


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 220/526|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 221/526|


Tényadatok lapfüllel:



88954vége

Adattartalom vonali kizárás esetén (S_0151_07 szolgáltatástól kapott adatokat használva):

  - Azonosító: {Vágányzár VPE azonosítója (éééé/iiiiiii/vvvv) (VgzAzon)}

helyig (SzhigNev)}

  - Pálya kizárása (Csak akkor kell kiírni, ha az S_0151_07 szolgáltatástól kapott Vonali

kizárások listában van olyan rekord ahol az PalyaKiz értéke igaz)  {Vágány
(Vagany)}, {Vágány (Vagany)},… (Vonali kizárások listában szereplő, azon nem üres
Vágány(Vagany) mezők felsorolása vesszővel és space-el elválasztva, ahol a PalyaKiz
értéke igaz.)

  - Vonali biztosító berendezés kizárása (Csak akkor kell kiírni, ha a Vonali kizárások

listában van olyan rekord, ahol a VonaliBiztKiz értéke igaz)  {Vágány (Vagany)},

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** Kezdési idő: {Érvényesség kezdete (éééé.hh.nn óó:pp)
(ErvKezdet)}¶
Befejezési idő: {Érvényesség vége (éééé.hh.nn óó:pp) (ErvVeg)}

**törölt:** 

-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 222/526|


{Vágány (Vagany)},… (Vonali kizárások listában szereplő, azon nem üres
Vágány(Vagany) mezők felsorolása vesszővel és space-el elválasztva, ahol a
VonaliBiztKiz értéke igaz.

  - Felsővezeték kizárása (Csak akkor kell kiírni, ha a Vonali kizárások listában van olyan

rekord, ahol a FelsovezKiz értéke igaz)  {Vágány (Vagany)}, {Vágány (Vagany)},…
(Vonali kizárások listában szereplő, azon nem üres Vágány(Vagany) mezők
felsorolása vesszővel és space-el elválasztva, ahol a FelsovezKiz értéke igaz.

  - Lassúmenet: (Csak akkor kell kiírni, ha a Vonali kizárások listában van olyan rekord,

ahol a Lassú menet értéke (LassuMenErtek) mező kitöltött)

`o` {Vonali kizárások listából Lassú menet értéke (LassuMenErtek)}  {Vágány

(Vagany)} (Vonali kizárások listából az adott rekordhoz tartozó
Vágány(Vagany)).

`o` {Vonali kizárások listából Lassú menet szelvények (LassuMenSzelv)}

`o` {Vonali kizárások listából Lassú menet értéke (LassuMenErtek)}  {Vágány

(Vagany)} (Vonali kizárások listából az adott rekordhoz tartozó
Vágány(Vagany))

`o` {Vonali kizárások listából Lassú menet szelvények (LassuMenSzelv)}

….

88954 Tervadatok (lapfül)

  - Kezdési idő: {Tervezett érvényesség kezdete (éééé.hh.nn óó:pp) (ErvKezd et ) }

  - Befejezési idő: {Tervezett érvényesség vége (éééé.hh.nn óó:pp) (Er vVeg )} [ 88954vége]

  - Megjegyzés (A mező egy függőlegesen scrollozható szövegdoboz formájában jelenik

meg az információs területen.):

`o` { Vonali kizárások listából, a lista első rekordjánál lévő (a vágányzár fejadathoz

tartozó) megjegyzés (Megj)}

88954 Tényadatok (lapfül)

  - Kezdési idő: {Tény érvényesség kezdete (éééé.hh.nn óó:pp) (TenyErv Ke zd et)}

  - Befejezési idő: {Tény érvényesség vége (éééé.hh.nn óó:pp) (TenyErv Veg )}

  - Elrendelő távirat: {Elrendelő távirat (Tavirat)} (max 30 karakter ho s s zú )

  - Elmaradás (kapcsoló): {Elmaradás (Elmaradas)}

  - Megjegyzés (A mező egy függőlegesen scrollozható szövegdoboz f orm ájá b an j elen i k

meg az információs területen. Max 2000 karaktert tartalmazhat):

{Tény megjegyzés (TenyMegj)} [ 88954vége]

**RDE információs terület**

Egy RDE eseményt jelölő objektumra vagy az ahhoz tartozó feliratra jobb egér gombbal
kattintva, ha a kattintás helyén nincs más objektum, vagy több objektum esetén bármelyik
egér gomb használatakor feljövő menüből, jobb egér gombbal RDE -t választva, jelenik meg

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 223/526|


**–**
az RDE információs terület külön popup ablakban. Az ablak forrásadatait az **S_0151_20**
**RDE információs terület adatok lekérdezése (RdeInfoTerQuery)** szolgáltatás biztosítja a
kliensnek. A kliens az alábbi bemenő paraméterrel hívja meg a szolgáltatást:

  - RDE azonosító (RdeAzon): Formátuma: ééééhhnn- xxx x pl.: 20200317- 003 0 [#99774]

A szolgáltatástól kapott adatokat felhasználva a kliens program megjeleníti az információs
területet, melynek tartalma eltér attól függően, hogy bejelentkezett felhasználó Pályavasúti
(belső) vagy vasútvállalati (külső).
**Pályavasúti (belső) felhasználó esetén az ablak megjelenése és tartalma:**
Az információs terület megjelenése:

Adattartalom:

  - RDE azonosító – kliensen rendelkezésre álló érték

  - Érvényesség kezdete (ErvKezdet)

  - Érvényesség vége (ErvVeg)

  - Késési forgalmi főkód (FoKod) – Ok kód első tagja

  - Késési segédkód (SegedKod) - Ok kód második tagja. Amennyiben NULL-t kap a

kliens, akkor ezt „-„ formájában jeleníti meg a felületen. HUBA esetén nincs [#99774]

  - RDE tárgy (Targy) [ #105445]

  - RDE leírás (Leiras)

A Leírás mező egy függőlegesen scrollozható szövegdoboz formájában jelenik meg az
információs területen.

**Vasútvállalati (külső) felhasználó esetén az ablak megjelenése és tartalma:**
Az információs terület megjelenése:

Adattartalom:

  - RDE azonosító – kliensen rendelkezésre álló érték

  - Érvényesség kezdete (ErvKezdet)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 224/526|



  - Érvényesség vége (ErvVeg) – Amennyiben a szolgáltatás 2100.12.31 értéket ad

vissza, akkor a kliens nem jelenít meg értéket a Befejezési időnél

  - Késési UIC kód (UicKod)

**[89001]** **Szöveges megjegyzés információs terület**

A szöveges megjegyzések csak ábra megnyitása esetén és csak a megfelelő
(OP_0151_MGMIranyitoiSzovegMegtekint) jogosultsággal rendelkező PV felhasználónál
jelenhetnek meg.
Egy szöveges megjegyzés típusát jelölő ikonra vagy a megjelenő szövegrészre jobb egér
gombbal kattintva, ha a kattintás helyén nincs más objektum, vagy több objektum esetén
bármelyik egér gomb használatakor feljövő menüből, jobb egér gombbal a szöveges
megjegyzést választva, jelenik meg a Szöveges megjegyzés információs terület külön popup
ablakban. Az ablak forrásadatait a **S_0151_32** **–** **Szöveges megjegyzések lekérdezése**
**(SzovMegjegyzesekQuery)** szolgáltatás biztosítja.
Az információs terület megjelenése:

VK105780

[VK105780vége ]

Adattartalom:

  - {A szöveges megjegyzés típusának megfelelő ikon és a típus m eg n ev ezése j elen i k

meg. A következő értékei lehetnek:

`o` Figyelmeztetés (Ha a Szöveg típusa (SzovegTip) =’ f ’ )

`o` Információ (Ha a Szöveg típusa (SzovegTip) =’ i ’ )}

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 225/526|



  - VK105780 Létrehozta: {Létrehozó felhasználó teljes neve (Letr F elh Nev e)+ ’ ; ’+
Létrehozás ideje (LetrIdo) (éééé.hh.nn óó:pp)}

  - Utolsó módosítás: {Utolsó módosító felhasználó neve (UtolsoMo d Felh N ev e) + ’; ’+

Utolsó módosítás ideje (UtolsoMod) (éééé.hh.nn óó:pp)}

  - {Megjegyzés (Megj) mező tartalma egy függőlegesen scrollozh ató s zö v eg d o b o z

formájában jelenik meg} [ VK105780vége] [89001vége]

**2.2.3.18** **Ismétlődő (ütemezett) szolgáltatáshívások vezérlése**

Egy kliens oldalon megvalósított programrész (vezérlő) 30 másodpercenként hívja az alábbi
szolgáltatásokat a diagramon megjelenő információk ütemezett frissítés céljából:

  - **S_0151_04** **–** **Menetrendi adatok lekérdezése** szolgáltatás (MenetrendiAdatokQuery)

  - **S_0151_05** **–** **Tényadatok lekérdezése** szolgáltatás (TenyadatokQuery)

  - 89001 **S_0151_32** **–** **Szöveges megjegyzések lekérdezése (SzovMegjeg** **y** **zes** **ekQ** **uery** **)**
szolgáltatás     - csak PV felhasználónál, ha rendelkezik megfelelő j o g osu l t s á g g al
(OP_0151_MGMIranyitoiSzovegMegtekint) és a megjelenítési beá l l í t ások s ze r i n t
szükséges a szöveges megjegyzések megjelenítése. [89001vége]

  - **#89002** **S_0151_34** **–** **Menetengedélyek lekérdezése (Menetengedel** **y** **e** **k** **Q** **uery** **)**

  - **#89003** **S_0151_46** **–** **Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery)**

  - **#88995** **S_0151_57** **–** **Értesítésben érintett (pulzáló) menetvonalak** **l** **ek** **érdezés** **e**
**(PulzaloMenetvonalakQuery)** – Csak irányítói üzemmódban kerül meg hí v ásra

Ez a vezérlő kezeli a következő adatfrissítés időpontját jelző progress bar ( )
működését is. A progress bar teljes terjedelmében 30 másodpercet jelöl, a folyamatjelző sáv
másodpercenként frissül. A szolgáltatások hívása akkor történik, amikor a kék sáv teljesen
„elfogyott”, majd a sikeres hívások után ismét újraindul a folyamat. Egy esetleges hiba vagy
alkalmazás frissítés hatására a vezérlő megállítja az ismétlődő folyamatot.

A vezérlő program 2 percenként hívja meg az alábbi szolgáltatásokat (ezek minden 4.
menetrendi/tényadat lekérdezési hívás során kerülnek meghívásra):

  - **S_0151_19** **–** **RDE adatok lekérdezése** szolgáltatás (RdeAdatokQurey)

  - **S_0151_06** **–** **Vágányzárak lekérdezése** szolgáltatás (VaganyzarakQuery)

#94833 Irányítói üzemmódban amennyiben a grafikon **frissítésekor** van **kijelölt** menetvonal,
akkor **ellenőrzi**, hogy szerkesztő menüsoron levő ikonok közül melyik lehet **kezelhető** . A
kezelhetőség feltételeit lásd a „Szerkesztés menü ikon ” fejezetben. [#94833 vége]

**2.2.3.19** **Nyomtatási kép**

Az A_0151_01 ablakon található gomb kezelésével a felhasználónak lehetősége van az
aktuális kameranézeten (a képernyőn látható diagram rész) nyomtatására.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 226/526|


A gomb kezelésekor a kliens készít egy képet az aktuális kameranézetről a nyomtatási
színprofilban definiált stílusokat érvényesítésével. Az alkalmazás ezután nyit egy új
böngészőablakot, melyben megjeleníti az előállított képet, valamint a rendszer meghívja a
böngésző saját nyomtatási funkcióját, tehát a képernyőn megjelenik a böngészőspecifikus
nyomtatási eszköztár is. A nyomtatási eszköztár a böngésző által biztosított nyomtatási
beállítások módosítását teszi lehetővé, erre alkalmazás oldalról nincs ráhatása a rendszernek.
A megjelenő nyomtatási kép kisebb eltéréseket tartalmazhat a grafikus képhez képest (pl.
animált elemek megjelenítése)

A nyomtatási képet megjelenítő ablakkal párhuzamosan tovább működik az A_0151_01 ablak
is.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 227/526|

##### **Az ablak szerkezeti leírása **


##### **Beviteli/megjelenítő mezők, kiválasztható lista (combo box), kapcsoló,  rádiógomb **








|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
||Adatfrissítés folyamatjelző|Adatfrissítés X másodperc múlva|progress bar|||||
|VK105782 Vonatszám|Vonatszám|Szűrés vonatszámra|szám beviteli mező (max. 5 karakter)|5||üres|-|

##### **Nyomógombok, ikonok **



|Felirat|Megnevezés|Súgó (ToolTip) szöveg Ikonok táblázatban található|Alapértelmezés [Kezelhető / Nem kezelhető]|
|---|---|---|---|
|Funkcióválasztó ikonok||||
||Alapfunkciók menü ikon|Alapfunkciók|Kezelhető|
||Szerkesztés menü ikon|Szerkesztés|Kezelhető|
|Méretezés ikonok||||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 228/526|









|Felirat|Megnevezés|Súgó (ToolTip) szöveg Ikonok táblázatban található|Alapértelmezés [Kezelhető / Nem kezelhető]|törölt: V|
|---|---|---|---|---|
||Idővonalra ugrás ikon|Idővonalra ugrás|Kezelhető Időhenger idő üzemmódban, Nem kezelhető Fix időszak idő üzemmódban||
||X és Y tengely kicsinyítése ikon|Kicsinyítés|Kezelhető||
||X és Y tengely nagyítása ikon|Nagyítás|Kezelhető||
||X tengely kicsinyítése ikon|X tengely kicsinyítése|Kezelhető||
||X tengely nagyítása ikon|X tengely nagyítása|Kezelhető||
||Y tengely kicsinyítése ikon|Y tengely kicsinyítése|Kezelhető||
||Y tengely nagyítása ikon|Y tengely nagyítása|Kezelhető||
||Alapértelmezett kamera nézet|-|Kezelhető||
|Alapfunkció menü ikonok|||||
||Eltérések megjelenítése ikon|Eltérések megjelenítése – {kapcs. állapot}|Kezelhető||
||Késések megjelenítése ikon|Késések megjelenítése – {kapcs. állapot}|Kezelhető||
||Kör jelölők megjelenítése ikon|Kör jelölők megjelenítése – {kapcs. állapot}|Kezelhető||
||- 88953 Tervezett 88953vége vágányzárak megjelenítése ikon|- 88953Tervezett88953vége vágányzárak megjelenítése – {kapcs. állapot}|||
||||Kezelhető||
|#88953|Teny vágányzárak megjelenítése ikon|Tény vágányzárak megjelenítése – {kapcs. állapot}|Kezelhető||
||RDE események megjelenítése ikon|RDE események megjelenítése – {kapcs. állapot}|Kezelhető||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 229/526|









|Felirat|Megnevezés|Súgó (ToolTip) szöveg Ikonok táblázatban található|Alapértelmezés [Kezelhető / Nem kezelhető]|Lejjebb helyezve [16]: törölt:|
|---|---|---|---|---|
||Páros viszonylat megjelenítése ikon|Páros viszonylat megjelenítése – {kapcs. állapot}|Kezelhető||
||Páratlan viszonylat megjelenítése ikon|Páratlan viszonylat megjelenítése – {kapcs. állapot}|Kezelhető||
||Közlekedő vonatok megjelenítése ikon|Közlekedő vonatok megjelenítése – {kapcs. állapot}|Kezelhető||
||Nem közlekedő vonatok megjelenítése ikon|Nem közlekedő vonatok megjelenítése – {kapcs. állapot}|Kezelhető||
||Feloszlatott vonatok megjelenítése ikon|Feloszlatott vonatok megjelenítése – {kapcs. állapot}|Kezelhető||
||Be és kilépő vonatok jelölése ikon|Be és kilépő vonatok jelölése – {kapcs. állapot}|Kezelhető||
||Foglalt vágányra bejárat jelölése ikon|Foglalt vágányra bejárat jelölése – {kapcs. állapot}|Kezelhető||
||MGM vágányok megjelenítése ikon|MGM vágányok megjelenítése - – {kapcs. állapot}|Kezelhető||
||Megállóhelyek megjelenítése ikon|Megállóhelyek megjelenítése – {kapcs. állapot}|Kezelhető||
||||||
||||||
|89001 vagy vagy|Szöveges megjegyzések megjelenítése lenyíló ikon|Szöveges megjegyzések megjelenítése - {A kiválasztott értéknek megfelelő állapot: Nincs/ Csak ikon/ Ikon és szöveg}|Nem kezelhető||
|#88980|Csatlakozásra várás megjelenítése ikon|Csatlakozásra várás megjelenítése – {kapcs. állapot}|Kezelhető||
|#89003|Kulcsfüggés feloldás megjelenítés ikon|Kulcsfüggés feloldás megjelenítése – {kapcs. állapot}|PV felhasználónál kezelhető||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 230/526|













|Felirat|Megnevezés|Súgó (ToolTip) szöveg Ikonok táblázatban található|Alapértelmezés [Kezelhető / Nem kezelhető]|törölt: #89003¶ ... Áthelyezve (beillesztéssel) [16] törölt: Méretezés ikonok ... törölt: törölt: törölt: ...|
|---|---|---|---|---|
|#89002|Menetengedély a szolgálati hely kijárati jelzőjéig megjelenítés ikon|Menetengedély kijárati jelzőig megjelenítése – {kapcs. állapot}|PV felhasználónál kezelhető||
|#89002|Menetengedély a szolgálati hely bejárati jelzőjéig megjelenítés ikon|Menetengedély bejárati jelzőig megjelenítése – {kapcs. állapot}|PV felhasználónál kezelhető||
||Nyomtatási kép megnyitása ikon|Nyomtatási kép megnyitása|Kezelhető||
||A_0151_02 – Út-idő diagram kiválasztás ablak megnyitása ikon|Út-idő diagram kiválasztás|Kezelhető||
||A_0151_03 – Megjelenítési beállítások ablak megnyitása ikon|Megjelenítési beállítások|Kezelhető||
||||||
||A_0151_05 – Adatok szűrése ablak megnyitása ikon|Adatok szűrése|Kezelhető||
||A_0151_04 – Stílusok és vonalak beállítása ablak megnyitása ikon|Stílusok és vonalak beállítása|Kezelhető||
|#88994|A_0151_06 – Ábra szintű információk ablak megnyitása ikon|Ábra szintű információk [Alt+5]|Kezelhető: Ábra esetén, PV felhasználóknak, minden idő üzemmódban.||
||Szolgálat befejezése|Szolgálat befejezése|Kezelhető||
|Szerkesztés menü ikonok|||||
|88953|Vágányzár szerkesztése ikon|Vágányzár szerkesztése|Nem kezelhető||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 231/526|




|Felirat|Megnevezés|Súgó (ToolTip) szöveg Ikonok táblázatban található|Alapértelmezés [Kezelhető / Nem kezelhető]|Áthelyezve (beillesztéssel) [17]|
|---|---|---|---|---|
|89001|Új szöveges megjegyzés rögzítése ikon|Új szöveges megjegyzés rögzítése|Nem kezelhető||
|89001|Szöveges megjegyzés szerkesztése ikon|Szöveges megjegyzés szerkesztése|Nem kezelhető||
||Adminisztratív feladatok megnyitása ikon|-|Nem kezelhető||
||Értesítések előrejelzés változásról ikon|-|Nem kezelhető||
||Új előrejelzés rögzítése ikon|-|Nem kezelhető||
||Előrejelzés módosítása ikon|-|Nem kezelhető||
||Rendkívüli megállás ikon|-|Nem kezelhető||
||Rendkívüli áthaladás ikon|-|Nem kezelhető||
||Tartózkodási idő módosítása ikon|-|Nem kezelhető||
|#88981|Irányítói feltartóztatás ikon|-|Nem kezelhető||
||Előztetés ikon|-|Nem kezelhető||
||Vonattalálkozás ikon|-|Nem kezelhető||
|#88980|Csatlakozásra várás szerkesztése ikon|Csatlakozásra várás szerkesztése|Nem kezelhető||
|88976|||||
||Másik pályán közlekedés ikon|--|Nem kezelhető||
||MRN vonat létrehozása ikon|MRN vonat létrehozása|Nem kezelhető||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 232/526|




|Felirat|Megnevezés|Súgó (ToolTip) szöveg Ikonok táblázatban található|Alapértelmezés [Kezelhető / Nem kezelhető]|Áthelyezve (beillesztéssel) [18] Feljebb helyezve [17]: 88976¶ törölt: Feljebb helyezve [18]: #89003¶ törölt: törölt:|
|---|---|---|---|---|
|88998|Egyéb sebességkorlátozás ikon|Egyéb sebességkorlátozás ikon|Nem kezelhető||
|88998|Teljesítménycsökkenés ikon|Teljesítménycsökkenés ikon|Nem kezelhető||
|#89003|||||
||Kulcsfüggés feloldás rögzítése ikon|Kulcsfüggés feloldás rögzítése|Nem kezelhető||
|#89003|Kulcsfüggés feloldás lezárása ikon|Kulcsfüggés feloldás lezárása|Nem kezelhető||
|#89002|Menetengedély a szolgálati hely kijárati jelzőjéig szerkesztés ikon|Menetengedély kijárati jelzőig szerkesztése|Nem kezelhető||
||||||
||||||
|#89002|Menetengedély a szolgálati hely bejárati jelzőjéig szerkesztés ikon|Menetengedély bejárati jelzőig szerkesztése|Nem kezelhető||
||||||
||||||
||||||
||||||
||Törlés ikon|Töröl|Nem kezelhető||
||A_0151_02 – Út-idő diagram kiválasztás ablak megnyitása ikon|Út-idő diagram kiválasztás|Kezelhető||
||A_0151_03 – Megjelenítési beállítások ablak megnyitása ikon|Megjelenítési beállítások|Kezelhető||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.03|Oldal: 233/526|









|Felirat|Megnevezés|Súgó (ToolTip) szöveg Ikonok táblázatban található|Alapértelmezés [Kezelhető / Nem kezelhető]|Áthelyezve (beillesztéssel) [22] Feljebb helyezve [22]: törölt: ...|
|---|---|---|---|---|
||A_0151_05 – Adatok szűrése ablak megnyitása ikon|Adatok szűrése|Kezelhető||
||A_0151_04 – Stílusok és vonalak beállítása ablak megnyitása ikon|Stílusok és vonalak beállítása|Kezelhető||
||||||
||||||
|#88994|A_0151_06 – Ábra szintű információk ablak megnyitása ikon|Ábra szintű információk [Alt+5]|Kezelhető: Ábra esetén, PV felhasználóknak, minden idő üzemmódban.||
||Szolgálat befejezése|Szolgálat befejezése|Irányítói üzemmódben kezelhető||
|Egyéb|||||
||DEL/DELETE billentyű|-|Kezelhető||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

MGM Részletterv




|Hívott szolgáltatások|Col2|Col3|
|---|---|---|
|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|Oldal betöltődés|-|Rendszerparaméterek kódtábla betöltése|
|Oldal betöltődés||S_0151_17 - Stílusok és vonalkészletek összerendelésének lekérdezése|
|Oldal betöltődés||S_0151_01 – Megjelenítési beállítások lekérdezése|
|Oldal betöltődéskor, ha az IÜR főmenüből nyílt meg az ablak|A_0151_02 – Út – idő diagram kiválasztó ablak||
|Oldal betöltődés||S_0151_02 – Út tengely adatok lekérdezése|
|Oldal betöltődés||S_0151_03 – Út tengely vágány adatok lekérdezése|
|Oldal betöltődéskor, szerkesztésből kilépéskor, VK105782 Vonatszám mező elhagyásakor, ill. a mezőben X vagy Enter használatakorVK105782vége ha a megjelenítési beállítások szerint meg kell jeleníteni a menetrendi adatokat||S_0151_04 – Menetrendi adatok lekérdezése|
|Oldal betöltődéskor, szerkesztésből kilépéskor, VK105782 Vonatszám mező elhagyásakor, ill. a mezőben X vagy Enter használatakorVK105782vége||S_0151_05 – Tényadatok lekérdezése|
|Oldal betöltődéskor, VK105782 Vonatszám mező elhagyásakor, ill. a mezőben X vagy Enter használatakor,VK105782vége szerkesztésből kilépés esetén, Fix időszaknál megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (S_0151_19) szerint meg kell jeleníteni az RDE adatokat||S_0151_19 – RDE adatok lekérdezése|
|Oldal betöltődéskor, VK105782 Vonatszám mező elhagyásakor, ill. a mezőben X vagy Enter használatakor,VK105782vége szerkesztésből kilépéskor, Fix időszaknál megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (S_0151_01) szerint meg kell jeleníteni a vágányzárakat||S_0151_06 – Vágányzárak lekérdezése|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 235/526|








|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|törölt: e|
|---|---|---|---|
|#89002 Oldal betöltődés, VK105782 Vonatszám mező elhagyásakor, ill. a mezőben X vagy Enter használatakor,VK105782vége menetengedély szerkesztésből kilépve PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig amennyiben a megjelenítési beállítások szerint ( S_0151_01) szükséges|--|S_0151_34 – Menetengedélyek lekérdezése||
|#89003 Oldal betöltődés, VK105782 Vonatszám mező elhagyásakor, ill. a mezőben X vagy Enter használatakor,VK105782vége kulcsfüggés feloldás szerkesztésből kilépve PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig amennyiben a megjelenítési beállítások szerint ( S_0151_01) szükséges|--|S_0151_46 – Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery)||
|89001 Oldal betöltődéskor, VK105782 Vonatszám mező elhagyásakor, ill. a mezőben X vagy Enter használatakor,VK105782vége szerkesztésből kilépéskor PV felhasználónál, ha rendelkezik megfelelő jogosultsággal (OP_0151_MGMIranyitoiSzovegMegteki nt), akkor Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig amennyiben a megjelenítési beállítások szerint (S_0151_01) szükséges|--|S_0151_32 – Szöveges megjegyzések lekérdezése||
|Oldal betöltődés, irányítói üzemmódban|--|S_0151_57 – Értesítésben||
|||érintett (pulzáló) menetvonalak lekérdezése (PulzaloMenetvonalakQuery)||
||A_0151_02 – Út-idő diagram kiválasztás ablak|||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 236/526|









|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
||A_0151_03 – Megjelenítés i beállítások ablak||
||A_0151_04 – Stílusok és vonalak beállítása ablak||
||A_0151_05 – Adatok szűrése ablak||
|#88994|A_0151_06 – Ábra szintű információk ablak|-|
|A_0151_02 – Út-idő diagram kiválasztás ablak <Megjelenít> nyomógombbal történő bezárásakor||S_0151_02 – Út tengely adatok lekérdezése S_0151_03 – Út tengely vágány adatok lekérdezése S_0151_05 – Tényadatok lekérdezése|
|A_0151_02 – Út-idő diagram kiválasztás ablak <Megjelenít> nyomógombbal történő bezárásakor, ha a megjelenítési beállítások szerint meg kell jeleníteni a menetrendi adatokat||S_0151_04 – Menetrendi adatok lekérdezése|
|A_0151_02 – Út-idő diagram kiválasztás ablak <Megjelenít> nyomógombbal történő bezárásakor, Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint meg kell jeleníteni az RDE adatokat||S_0151_19 – RDE adatok lekérdezése|
|A_0151_02 – Út-idő diagram kiválasztás ablak <Megjelenít> nyomógombbal történő bezárásakor, Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (a megjelenítést vezérlő ikonok) szerint meg kell jeleníteni a vágányzárakat||S_0151_06 – Vágányzárak lekérdezése|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 237/526|







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|#89002 A_0151_02 – Út-idő diagram kiválasztás ablak <Megjelenít> nyomógombbal történő bezárásakor PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha szükséges a menetengedélyek megjelenítése a grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint||S_0151_34 – Menetengedélyek lekérdezése|
|#89003 A_0151_02 – Út-idő diagram kiválasztás ablak <Megjelenít> nyomógombbal történő bezárásakor PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha szükséges a kulcsfüggés feloldás megjelenítése a grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint||S_0151_46 – Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery)|
|89001 A_0151_02 – Út-idő diagram kiválasztás ablak <Megjelenít> nyomógombbal történő bezárásakor PV felhasználónál, ha rendelkezik megfelelő jogosultsággal (OP_0151_MGMIranyitoiSzovegMegteki nt), akkor Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig amennyiben a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint szükséges||S_0151_32 – Szöveges megjegyzések lekérdezése|
|A_0151_03 – Megjelenítési beállítások ablak <Ment> nyomógombbal történő bezárásakor, ha a megjelenítési beállítások szerint meg kell jeleníteni a menetrendi adatokat||S_0151_04 – Menetrendi adatok lekérdezése|
|A_0151_03 – Megjelenítési beállítások ablak <Ment> nyomógombbal történő bezárásakor||S_0151_05 – Tényadatok lekérdezése|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 238/526|







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|A_0151_03 – Megjelenítési beállítások ablak <Ment> nyomógombbal történő bezárásakor, Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (S_0151_01) szerint meg kell jeleníteni az RDE adatokat||S_0151_19 – RDE adatok lekérdezése|
|A_0151_03 – Megjelenítési beállítások ablak <Ment> nyomógombbal történő bezárásakor, Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (S_0151_01) szerint meg kell jeleníteni a vágányzárakat||S_0151_06 – Vágányzárak lekérdezése|
|#89002 A_0151_03 – Megjelenítési beállítások ablak <Ment> nyomógombbal történő bezárásakor PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig amennyiben szükséges a menetengedélyek megjelenítése a grafikonon a megjelenítési beállítások ( S_0151_01) szerint||S_0151_34 – Menetengedélyek lekérdezése|
|#89003 A_0151_03 – Megjelenítési beállítások ablak <Ment> nyomógombbal történő bezárásakor PV felhasználónál, fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig amennyiben szükséges a kulcsfüggés feloldás megjelenítése a grafikonon a megjelenítési beállítások ( S_0151_01) szerint||S_0151_46 – Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery)|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 239/526|







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|89001 A_0151_03 – Megjelenítési beállítások ablak <Ment> nyomógombbal történő bezárásakor PV felhasználónál, ha rendelkezik megfelelő jogosultsággal (OP_0151_MGMIranyitoiSzovegMegteki nt), akkor Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig amennyiben a megjelenítési beállítások szerint (S_0151_01) szükséges||S_0151_32 – Szöveges megjegyzések lekérdezése|
|A_0151_04 – Stílusok és vonalak beállítása ablak <Alkalmaz> vagy <Profilba ment> nyomógombbal történő bezárásakor, ha a megjelenítési beállítások szerint meg kell jeleníteni a menetrendi adatokat||S_0151_04 – Menetrendi adatok lekérdezése|
|A_0151_04 – Stílusok és vonalak beállítása ablak <Alkalmaz> vagy <Profilba ment> nyomógombbal történő bezárásakor||S_0151_05 – Tényadatok lekérdezése|
|A_0151_04 – Stílusok és vonalak beállítása ablak <Alkalmaz> vagy <Profilba ment> nyomógombbal történő bezárásakor, ha a megjelenítési beállítások szerint meg kell jeleníteni a vágányzárakat||S_0151_06 – Vágányzárak lekérdezése|
|#89002 A_0151_04 – Stílusok és vonalak beállítása ablak <Alkalmaz> vagy <Profilba ment> nyomógombbal történő bezárásakor PV felhasználónál, Fix időszak időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint meg kell jeleníteni az menetengedély adatokat||S_0151_34 – Menetengedélyek lekérdezése|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 240/526|







|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|#89003 A_0151_04 – Stílusok és vonalak beállítása ablak <Alkalmaz> vagy <Profilba ment> nyomógombbal történő bezárásakor PV felhasználónál, Fix időszak időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint meg kell jeleníteni az kulcsfüggés feloldás adatokat||S_0151_46 – Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery)|
|A_0151_04 – Stílusok és vonalak beállítása ablak <Alkalmaz> vagy <Profilba ment> nyomógombbal történő bezárásakor Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint meg kell jeleníteni az RDE adatokat||S_0151_19 – RDE adatok lekérdezése|
|A_0151_05 – Adatok szűrése ablak <Alkalmaz> nyomógombbal történő bezárásakor, ha a megjelenítési beállítások szerint meg kell jeleníteni a menetrendi adatokat||S_0151_04 – Menetrendi adatok lekérdezése|
|A_0151_05 – Adatok szűrése ablak <Alkalmaz> nyomógombbal történő bezárásakor||S_0151_05 – Tényadatok lekérdezése|
|A_0151_05 – Adatok szűrése ablak <Alkalmaz> nyomógombbal történő bezárásakor Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha a megjelenítési beállítások (a megjelenítést vezérlő ikonok) szerint meg kell jeleníteni a vágányzárakat||S_0151_06 – Vágányzárak lekérdezése|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 241/526|










|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|---|---|---|
|#89002 A_0151_05 – Adatok szűrése ablak <Alkalmaz> nyomógombbal történő bezárásakor PV felhasználónál, Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig ha szükséges a menetengedélyek megjelenítése a grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint meg kell jeleníteni az menetengedély adatokat||S_0151_34 – Menetengedélyek lekérdezése|
|#89003 A_0151_05 – Adatok szűrése ablak <Alkalmaz> nyomógombbal történő bezárásakor PV felhasználónál, Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig, ha szükséges a menetengedélyek megjelenítése a grafikonon a megjelenítési beállítások (a megjelenítést vezérlő ikon) szerint meg kell jeleníteni az kulcsfüggés feloldás adatokat||S_0151_46 – Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery)|
|89001 A_0151_05 – Adatok szűrése ablak <Alkalmaz> nyomógombbal történő bezárásakor PV felhasználónál, ha rendelkezik megfelelő jogosultsággal (OP_0151_MGMIranyitoiSzovegMegteki nt), akkor Fix időszak esetén megjelenítési beállítástól függetlenül, Időhenger esetén pedig amennyiben a megjelenítési beállítások (a megjelenítést vezérlő ikon)szerint szükséges|--|S_0151_32 – Szöveges megjegyzések lekérdezése|
|#88980 Megjelenítő üzemmódban a grafikonon a csatlakozásra várást jelképező ikonra jobb egér gombbal kattintva|A_0151_10 - Csatlakozásr a várás|-|
|#88953 - Vágányzár szerkesztése ikon|-|S_0151_22 – Vágányzár szerkesztéshez adatok lekérdezése (VaganyzarSzerkeszteshezQuery )|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 242/526|















|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|törölt: rögzítése|
|---|---|---|---|
|88961 Új előrejelzés ikon|--|S_0151_48 - Új előrejelzés készítés ellenőrzése (UjEloreJelzesEllenorzesQuery||
|||S_0151_38 - MenetvForgSzabFoglalasComma nd (menetvonalak forgalomszabályozásra lefoglalása)||
|#88981 Irányítói feltartóztatás ikon|--|S_0151_38 - MenetvForgSzabFoglalasComma nd (menetvonalak forgalomszabályozásra lefoglalása)||
|#88980 Csatlakozásra várás szerkesztése ikon|A_0151_10 - Csatlakozásr a várás|-||
|#88998 - Egyéb sebességkorlátozás ikon||S_0151_38 - MenetvForgSzabFoglalasComma nd (Menetvonalak forgalomszabályozásra lefoglalása) S_0151_41 – Egyéb sebességkorlátozások lekérdezése S_0151_44 – Menetvonal szolgálati helyeinek lekérdezése||
|#88998 - Teljesítménycsökkenés ikon||S_0151_40 – Teljesítménycsökkenés szerkesztéséhez adatok lekérdezése S_0151_44 – Menetvonal szolgálati helyeinek lekérdezése||


**Rendszerüzenetek**








|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Típusa|
|---|---|---|---|---|
|Törölhető objektum kiválasztása után a Törlés ikon vagy a Del/Delete billentyű használatát klövetően.|Törli a kiválasztott {0} ? <Igen>/<Nem>|UC_01_51_CONF_TOR LES err_code = 151003|kliens|megerősítő|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 243/526|







|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Típusa|
|---|---|---|---|---|
|Új előrejelzés készítésekor, ha a kezdő ’szh_id’ nem szerepel az ’MGM_AbraUtvonal’ táblában.|Új előrejelzés nem hozható létre, a menetvonal kiindulási állomása nem az ábrán van!|UC_01_51_ERR_UJ_EL OREJELZES_HIBA Err kód: 151014|TE|hiba|
|VK105782A vonatszám|Nincs a keresési feltételeknek megfelelő adat!|UC_01_51_ERR_NINCS|Kliens|Figyelmeztet|
|mező elhagyásakor vagy||_MEGFELELO_ADAT||és|
|a mezőben Enter|||||
|használatakor, ha nem|||||
|üres a Vonatszám mező|||||
|és a grafikon frissítéséhez|||||
|meghívott szolgáltatások|||||
|közül sem az S_0151_05,|||||
|sem az S_0151_04|||||
|szolgáltatás nem adott|||||
|vissza adatokat|||||
||||||
||||||
||||||


|Kódtáblák, választási listák|Col2|
|---|---|
|Kódtábla / tábla megnevezése|Kódtábla / tábla azonosítója|
|||
|||
|||



|Rendszerparaméterek|Col2|
|---|---|
|Paraméter megnevezése|Paraméter azonosítója|
|MGM szolgálati helyek minimális távolsága (m)|mgm_szh_min_tav|
|88998MGM felhasználói aktivitás idő (másodperc)|mgm_aktivitas_ido|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 244/526|

##### **2.3 A_0151_02 – Út-idő diagram kiválasztása **

**Ablak/lap feladatai**

Az ablak üzemmódtól függően munkahely (és ezáltal ábra) foglalásra, az A_0151_01 út/idő
diagram ablak forrásának (vasútvonal vagy menetirányítói szakasz vagy ábra) és az azon
megjelenítendő szolgálati helyek, valamint a diagram idő üzemmódjának (időhenger vagy fix
időszak) megadására szolgál.

**Ablak/lap megjelenése**

**Irányítói üzemmód főmenüből megnyitás esetén:**

**MGM megjelenít üzemmód főmenüből megnyitás esetén:**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 245/526|


**Ablak/lap működése**

**2.3.3.1** **Ablak elérése, betöltése**

Az A_0151_02 ablak kizárólag az A_0151_01 ablakról nyitható meg. üzemmódtól függően
az alábbi módon jelennek meg az adatok az A_0151_02 ablakon:

**MGM megjelenít üzemmód esetén:**

  - **Az A_0151_01 ablak főmenüből való megnyitása Menetvonalak grafikus**

**megjelenítése menüpont használatával:**

Ebben az esetben automatikusan megnyílik az A_0151_02 ablak, melyen az
alapértelmezett beállításokkal jelennek meg a vezérlőelemek:

`o` Időhenger rádiógomb van kiválasztva

`o` Időhenger múlt időintervallum = -12, jövő időintervallum = +12

`o` Vasútvonal rádiógomb bekapcsolt

  - **Egy már adatokat megjelenítő megjelenít üzemmódú A_0151_01 ablakról**
**gomb nyomására** . Ebben az esetben a hívó ablak adatai alapján az A_0151_02
ablakon a diagram minden jellemző paraméterét kitölti a rendszer, azaz az alábbiakat:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 246/526|


`o` Idő üzemmód (Időhenger/fix időszak)

`o` Időhenger esetén múlt és jövő időintervallum

`o` Vasútvonal/Irányítói szakasz/Ábra

`o` Kiválasztott vonal vagy menetirányító szakasz vagy ábra legördülő értéke

`o` Szolgálati hely lista a korábban kiválasztott értékek megjelölésével

  - Az A_0151_01 ablakon a **be/kilépő vonat jelölőhöz tartozó információs területen a**

**kapcsolódó vasútvonal vagy menetirányítói szakasz vagy ábra linkre kattintva** .
Ebben az esetben megnyílik egy új A_0151_01 ablak példány, majd automatikusan
megnyílik az A_0151_02 ablak az alábbi beállításokkal:

`o` Idő üzemmód (Időhenger/fix időszak) – A hívó ablak adatai alapján

`o` Időhenger esetén múlt és jövő időintervallum – A hívó ablak adatai alapján

`o` Vasútvonal/Irányítói szakasz/Ábra – A hívó ablak adatai alapján

`o` Vasútvonal vagy Irányítói szakasz vagy Ábra legördülő lista – A hívó ablaktól

kapott id vagy kód alapján

**MGM irányítói üzemmód esetén:**

  - **Az A_0151_01 ablak főmenüből való megnyitásakor irányítói üzemmódban:**

Ebben az esetben is automatikusan megnyílik az A_0151_02 ablak,melyen az alábbiak
szerint jelennek meg az adatok:

`o` Időhenger múlt időintervallum = -12, jövő időintervallum = +12

`o` Munkahely legördülő listában nincs kiválasztott érték

`o` A megjelenítendő ábrák lista üres

  - **Egy már adatokat megjelenítő irányítói üzemmódú A_0151_01 ablakról külön**

**gombnyomásra** . Ebben az esetben a hívó ablaktól kapott adatok alapján az
A_0151_02 ablakon az alábbiakat állítja be a kliens:

`o` Időhenger esetén múlt és jövő időintervallum értékei

`o` Ábrához tartozó munkahely van kiválasztva

`o` Ábra lista, melyen az aktuálisan kiválasztott ábra van kijelölve

Ablak betöltésekor a kliens az alábbi szolgáltatásokat hívja meg:

**MGM megjelenít üzemmód esetén:**

  - Amennyiben az A_0151_01 ablak megnyitása megjelenít üzemmódban történt, akkor

a kliens az A_0151_02 ablak megnyitásakor meghívja az **S_0151_14** **–**
**Vasútvonalak, menetirányítói szakaszok és ábrák lekérdezése** szolgáltatást
**(VasutvonalEsMenetirSzakaszEsAbraQuery)** bemenő paraméter nélkül. A kliens
kapott adatok alapján tölti fel a vasútvonalak vagy menetirányítói szakaszok vagy
ábrák listáját megjelenítő legördülő listát attól függően, hogy a vasútvonal vagy
irányítói szakasz vagy ábra rádiógomb van kiválasztva.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 247/526|



  - Ezen kívül a kliens meghívja az **S_0151_16** **–** **Menetrendi időszakok lekérdezése**

szolgáltatást bemenő paraméter nélkül. Ez a szolgáltatás biztosítja az előző, aktuális és
követő menetrendi időszak érvényességi intervallumainak lekérdezését. A vég
dátumokat a kliens 23:59 perccel kezeli.

**MGM irányítói üzemmód esetén:**

  - Irányítói üzemmódban a kliens ablak betöltéskor meghívja az **S_0151_25** **–**

**Munkahelyek lekérdezése (MunkahelyekQuery)** szolgáltatást bemenő paraméter
nélkül. A visszakapott adatok alapján történik a Munkahely legördülő lista felöltése.

**2.3.3.2** **Üzemmódok szerinti felépítése/működése**

Az ablak modális popup formájában kerül kialakításra. Az ablak fejrészében az ablak
azonosítója, valamint megnevezése látható: *A_0151_02 – Út-Idő diagram kiválasztása* .
Irányítói üzemmód esetén az ablak megnevezése: *A_0151_02 – Út-Idő diagram kiválasztása*
*(Irányítói üzemmód)*

**MGM megjelenít üzemmód esetén**

Az A_0151_01 ablak megjelenít üzemmódú megnyitása esetén az A_0151_02 ablak az alábbi
szerkezettel rendelkezik és az alább leírt módon működik. Az ablak felső részében az út-idő
diagram idő üzemmódjának megadására szolgáló rádiógomb csoport található:

  - Időhenger (amennyiben a hívó ablak nem ad eltérő adatot, akkor ez az

alapértelmezetten kiválasztott érték). Időhenger rádiógomb kiválasztottsága esetén a
mellette található grafikus vezérlőelem (JqxRangeSelector ) engedélyezetté válik.

Az intervallum megadására szolgáló vezérlővel kapcsolatos információk:

`o` Intervallum kezdet: Alapértelmezett érték: -12 óra. Azt vezérli, hogy a

diagromon az idővonal felett, tehát a múltban mekkora időintervallum jelenjen

meg.

`o` Intervallum vége: Alapértelmezett érték: +12 óra. Azt vezérli, hogy a

diagramon az idővonal alatt, tehát a jövőben mekkora időintervallum jelenjen

meg.

Validációs feltételek:

`o` A múlt időintervallum -35 és -1 óra közötti érték lehet

`o` A jövő időintervallum +1 és +35 óra közötti érték lehet

`o` A múlt és jövő időintervallum együttesen maximum 36 óra lehet

  - Fix időszak. A Fix időszak rádiógomb kiválasztása esetén engedélyezetté válnak a Fix

időszak időintervallumának megadására szolgáló mezők.

Validációs feltételek:

`o` Az időszak kezdete és vége között maximum 36 óra különbség lehet

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 248/526|


`o` Az időszak kezdete nem lehet nagyobb az időszak végénél.

`o` Az időszak kezdete nem lehet kisebb, mint az előző menetrendi időszak

kezdete ( **S_0151_16** szolgáltatás által visszaadott érték, a menetrendi időszak
végdátumokat a kliens 23:59 perccel kezeli)

`o` Az időszak vége nem lehet nagyobb, mint a következő menetrendi időszak

vége ( **S_0151_16** szolgáltatás által visszaadott érték a menetrendi időszak
végdátumokat a kliens 23:59 perccel kezeli)

`o` Az időszak kezdete és vége egy menetrendi időszakba kell, hogy essen. A

menetrendi időszak végdátumokat a kliens 23:59 perccel kezeli.

A feltételeket a kliens az érvényes dátum idő érték beírása után ellenőrzi. Nem
egyezés esetén a vonatkozó hibaüzenet a dátum mezők alatt jelenik meg piros színnel.

További működésre vonatkozó információk:

`o` Amennyiben csak dátumot ad meg a felhasználó a kezdő és/vagy vég

mezőkben, akkor a kliens 00:00 percként értelmezi a megadott adatokat,
kivéve abban az esetben, ha a kezdő és végdátum megegyezik, mert ilyenkor a
végdátumhoz tartozó időt 23:59 percként kezeli a kliens.

`o` Amennyiben csak a kezdő időpontot adja meg a felhasználó, akkor a

kezdődátum + 24 órára vonatkozik a megadott időszak.

`o` Amennyiben csak a vég időpontot adja meg a felhasználó, akkor a végidőpont

        - 24 órára vonatkozik a megadott időszak.

Az időhenger és fix időszak üzemmódok közötti változtatás esetén megőrzi a kliens a
korábban kiválasztott vasútvonal vagy menetirányítói szakasz vagy ábra értékét a
vonatkozó legördülő listában, [#61423] ezen kívül, ha már volt kiválasztott szakasz vagy
vasútvonal, akkor frissíti a szolgálati helyek listáját az **S_0151_15** szolgáltatás
hívásával. A kliens ellenőrzi, hogy a korábban meglévő szolgálati hely lista
megegyezik-e az újonnan lekérttel. Amennyiben nem, akkor erről popup üzenetet ad
és az összes szolgálati helyet kijelöltté teszi. A popup üzenet szövege: "A szolgálati
hely lista adatok megváltoztak, ezért a rendszer minden szolgálati helyet kijelöltté
tett." [ #61423 VÉGE]

A következő rádiógomb csoportban az út tengely forrás meghatározására szolgáló
rádiógombok kapnak helyet:

  - Vasútvonal (amennyiben a hívó ablak nem ad eltérő adatot, akkor ez az

alapértelmezetten kiválasztott érték)

  - Irányítói szakasz

  - Ábra

Az ablakon ezután kap helyet a vasútvonalakat vagy menetirányítói szakaszokat vagy ábrákat
tartalmazó legördülő lista. A lista értékkészletét a kliens automatikusan változtatja a
Vasútvonal/Irányítói szakasz/Ábra rádiógombok értékének módosításakor az alábbiak szerint:

  - Vasútvonal rádiógomb kiválasztása esetén a lista forrását az **S_0151_14** szolgáltatás

által visszaadott azon rekordok szolgáltatják, melyeknél van vonal Id. A
megjelenítendő adatok TAKT név – Megnevezés

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 249/526|



  - Irányítói szakasz rádiógomb kiválasztása esetén a lista forrását az **S_0151_14**

szolgáltatás által visszaadott azon rekordok szolgáltatják, melyeknél van
menetirányítói szakasz kód. Ebben az esetben a megjelenítendő adatok Menetirányítói
szakasz kód – Megnevezés

  - Ábra rádiógomb kiválasztása esetén a lista forrását az **S_0151_14** szolgáltatás által

visszaadott azon rekordok szolgáltatják, melyeknél ki van töltve az ábra belső
azonosító (AbraId). Ebben az esetben a listában a Megnevezés paraméter értéke
jelenik meg.

Amennyiben a legördülő listára kerül a fókusz, vagy belekattint a felhasználó, akkor a lista
automatikusan lenyílik.

A legördülő listában kiválasztva egy vasútvonalat vagy menetirányítói szakaszt vagy ábrát a

**–**
kliens meghívja az **S_0151_15** **Szolgálati helyek lekérdezése vonal vagy menetirányítói**
**szakasz vagy ábra alapján (SzolgHelyByVonalVagyMenetirSzakaszvagyAbraQuery)**
szolgáltatást. A szolgáltatás bemenő paraméterei:

  - Vonal Id – Vasútvonal esetén a kiválasztott vasútvonalhoz tartozó vonal Id

(menetirányítói szakasz esetén üres)

  - Menetirányítói szakasz kód – Menetirányítói szakasz esetén a kiválasztott

menetirányítói szakaszhoz tartozó kód (vasútvonal esetén üres)

  - Ábra belső azonosító – Ábra esetén a kiválasztott ábra belső azonosítója

  - Érvényesség kezdet – Időhenger beállítás esetén az aktuális időpont, fix időszak

rádiógomb beállítás esetén az időszak kezdete

Az **S_0151_15** szolgáltatás hívás eredményeképpen kapott szolgálati hely listával feltölti a
kliens a felületen található szolgálati helyek listadobozt és automatikusan kijelöltté teszi az
összes szolgálati helyet. A megjelenítendő érték: Szolgálati hely megnevezés (statisztikai
szám + szolg. hely hosszú név formában)

Szolgálati helyek lista:

Többszörös kijelölésű **JqListbox**, melyben vonal vagy irányítói szakasz vagy ábra szerinti
sorrendben jelennek meg a szolgálati helyek (stat. szám + hosszú név formában). Célja, hogy
a felhasználó kijelölhesse az út-idő diagramon megjelenítendő szolgálati helyeket. Lehetőség
van szolgálati hely -tól -ig intervallum megadására vagy egyesével külön szolgálati helyek
kijelölésére. A shift billentyű segítségével bővíthető az intervallum, a ctrl gomb segítségével
pedig egyesével jelölhető ki külön tétel. Az út-idő diagram első szolgálati helye a legfelső
kijelölt elem, míg az utolsó a listában kijelölt legalsó elem lesz. A lista felett található
gomb megnyomásakor a kliens az összes szolgálati helyet kijelöli. Ábra kiválasztása esetén a
kijelölés nem módosítható, mindig minden sor kijelölt, továbbá nem jelenik meg a kijelölést
vezérlő gomb.

Az ablak alján az **<Alapértelmezett>** valamint a **<Megjelenít>** gomb kapott helyet.

Az **<Alapértelmezett>** gomb megnyomásakor az alábbi állapotra áll vissza a kliens:

  - Időhenger rádiógomb kerül kiválasztásra

  - A múlt időintervallumban -12 óra, a jövő időintervallumban +12 óra kerül beállításra

  - Vasútvonal rádiógomb kerül kiválasztásra

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 250/526|



  - A legördülő listában kiválasztott értékek törlődnek és a vasútvonalakat tölti fel a

rendszer a listát

  - A szolgálati hely lista tartalma törlődik

A **<Megjelenít>** gomb megnyomásakor a rendszer ellenőrzi, hogy van-e kijelölve legalább
két szolgálati hely a szolgálati helyek listadobozban. Amennyiben igen, akkor a gomb
megnyomásakor a rendszer visszatér az A_0151_01 ablakra, ahol a beállított paramétereknek
megfelelően megtörténik a diagram kirajzolása.

A felhasználó az ablak jobb felső sarkában található X segítségével is be tudja zárni az
ablakot, ebben az esetben a beállított értékek nem lépnek érvényre, az A_0151_01 ablak a 2es ablak megnyitása előtti állapotának megfelelő marad. Amennyiben nem volt korábban
betöltött grafikon az A_0151_01 ablakon, akkor a felület üres diagrammal jelenik meg és a
funkciógombok közül csak a gomb kezelhető.

**MGM irányítói üzemmód esetén**

Az A_0151_01 ablak irányítói üzemmódú megnyitása esetén az A_0151_02 ablak az alábbi
szerkezettel rendelkezik és az alább leírt módon működik:

Az ablak fejlécében a megnevezés: *A_0151_02 – Út-Idő diagram kiválasztása (Irányítói*
*üzemmód)*

Ezután a munkahely választására vonatkozó legördülő legördülő lista (jqxDropDownList)

**–**
található, melyet az ablak betöltésekor hívott **S_0151_25** **Munkahelyek lekérdezése**
**(MunkahelyekQuery)** szolgáltatás alapján tölt fel a kliens. A Munkahely név jelenik meg a
listában.

A legördülő listában egy munkahely kiválasztásakor a kliens meghívja az **S_0151_26** **–**
**Munkahelyhez tartozó ábrák lekérdezése (AbrakByMunkahelyQuery)** szolgáltatást a
munkahelyhez tartozó ábrák feltöltése miatt. A szolgáltatás hívása az alábbi paraméterrel
történik:

  - Munkahely belső azonosító (TerMunkahelyId)

Az **S_0151_26** szolgáltatás hívás eredményeképpen kapott ábra listával feltölti a kliens a
felületen található ábra listadobozt és automatikusan kijelöltté teszi a legfelső ábrát. A listában
az ábrák neve i jele nnek meg. Ebben az üzemmódban az ábrákhoz tartozó szolgálati helyek
nem jelennek meg az A_0151_02 ablakon, mivel mindig az ábra teljes terjedelmével jelenik
meg az A_0151_01 ablak.

Ábra lista:

munkahelyhez tartozó ábrák. Célja, hogy a felhasználó kijelölhesse a megnyitandó ábrát. A
lista felett nincs gomb, mivel csak az egyszeres kijelölés támogatott.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** z összes ábrát

**törölt:** Többszörös

**törölt:** ka

**törölt:** A shift billentyű segítségével bővíthető az intervallum, a ctrl
gomb segítségével pedig egyesével jelölhető ki külön sor.

**törölt:** található

**törölt:** megnyomásakor a kliens az összes ábrát kijelöli

**törölt:** .

**törölt:** valamint a

**törölt:** **/Foglalás**

**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 251/526|



  - Munkahely listában a kiválasztott érték törlődik

  - Az ábra lista tartalma törlődik

  - Munkahely belső azonosító (TerMunkahelyId) – kiválasztott munkahely alapján

  - Foglalás átvétel megerősítés jelző (FoglAtvMegerositJelzo) = False

A szolgáltatás ellenőrzi, hogy a munkahely foglalt-e. Amennyiben nem, akkor a foglalás
automatikusan megtörténik, ilyenkor a szolgáltatás üres listát ad vissza. Amennyiben a
munkahely foglalt, akkor a szolgáltatás visszaad egy Foglalási üzenetet (FoglUzenet),
melynek szövegét a kliens egy megerősítő üzenetben jeleníti meg. Pozitív megerősítés esetén

**–**
a kliens újból meghívja az **S_0151_27** **Munkahely szintű foglalás kezelése**
**(MunkahelyFoglKezCommand)** szolgáltatást az alábbi paraméterekkel:

  - Munkahely belső azonosító (TerMunkahelyId) – kiválasztott munkahely alapján

  - Foglalás átvétel megerősítés jelző (FoglAtvMegerositJelzo) = True

A szolgáltatás ebben az esetben a korábbi foglalást megszünteti és rögzíti az aktuális
felhasználó általi munkahely/ábra foglalását. Negatív megerősítés esetén az A_0151_02 ablak
nyitva marad. Sikeres foglalás után a kliens az alábbiakat végzi:

A_0151_01 ablakra, ahol a beállított paramétereknek megfelelően megtörténik a
diagram kirajzolása.

kliens egy ú j A_0151_01 ablak példányt nyit. Az ablak az alábbi adatokat kapj a meg:

`o` Múlt időintervallum órában

`o` Jövő időintervallum órában

**Egy irányítói üzemmódú A_0151_01 ablakról a** **gombnyomásra megnyitott**
**A_0151_02 ablak esetén az alábbi működésre vonatkozó megkötések vannak:**

  - Múlt és jövő időintervallum értékei a korábban kiválasztott érték alapján kerülnek

beállításra

  - Ábrához tartozó munkahely van kiválasztva és nem módosítható

  - Az ábra listában az aktuálisan kiválasztott ábra van kijelölve

  - Ebben az üzemmódban is e gyszerre csak egy ábra jelölhető ki

értékre (-12 óra és +12 óra közé), az ábra lista kiválasztása nem módosul.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** **/Foglalás**

**törölt:** legalább egy

**törölt:** ki van-e választva

**törölt:** Legalább egy á

**törölt:** A

**törölt:** egy ábra volt kijelölve,

**törölt:** **több ábra volt kijelölve**

**törölt:** az első esetén visszatér az A_0151_01 ablakra, ahol az
első ábra adatai alapján jelenik meg a diagram. Ezután a többi ábra
esetén

**törölt:** oka

**törölt:** ok

**törölt:** ák

**törölt:** Ábra esetén a

**törölt:** <#>A gomb nem jelenik meg az ablakon¶

**törölt:** **/Foglalás**

**törölt:** ekor


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 252/526|


**Munkahely szintű foglalás kezelése (MunkahelyFoglKezCommand)** az alábbi
adatokkal:

`o` Munkahely belső azonosító (TerMunkahelyId) – kiválasztott munkahely

alapján

`o` Foglalás átvétel megerősítés jelző (FoglAtvMegerositJelzo) = False

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** <#>Mivel egy ábra lehet kiválasztva, ezért nincs új
ablakpéldány nyitás a **<Megnyitás/Foglalás>** gomb
megnyomásakor, mindig az aktuális A_0151_01 ablakra tér vissza
a kliens és jeleníti meg a kiválasztott ábra alapján a diagram
adatokat.¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 253/526|

##### **Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztható lista (combo box), kapcsoló,  rádiógomb **

















|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Megjelenít üzemmód||||||||
|Időhenger|Időhenger|-|rádiógomb|||Bekapcsolt||
||Időhenger idő intervallum|-|JqxRangeSelector|||-12 óra - +12 óra||
|Fix időszak|Fix időszak|-|rádiógomb|||Kikapcsolt||
|-|Fix időszak kezdet|-|Idő beviteli mező kiválasztó funkcióval||éééé.hh.nn óó:pp|||
|-|Fix időszak vége|-|Idő beviteli mező kiválasztó funkcióval||éééé.hh.nn óó:pp|||
|Vasútvonal|Vasútvonal|-|rádiógomb|||Bekapcsolt||
|Irányítói szakasz|Irányítói szakasz|-|rádiógomb|||||
|Ábra|Ábra|-|rádiógomb|||||
|-|Vasútvonal vagy irányítói szakasz vagy ábra|-|Beviteli mező kiválasztás funkcióval (JqxComboBox)||||T_VV vagy T_MIS vagy MGM_Abra|
|-|Szolgálati helyek lista|-|Listadoboz (JqListBox)|||||
|Irányítói üzemmód||||||||
|Időhenger|Időhenger idő|-|JqxRangeSelector|||-12 óra - +12 óra||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 254/526|




|Col1|intervallum|Col3|Col4|Col5|Col6|Col7|Col8|
|---|---|---|---|---|---|---|---|
|Munkahely|Munkahely|-|Legördülő lista (JqxComboBox)|||||
|Megnyitható ábrák|Megnyitható ábrák|-|Listadoboz (JqListBox)|||||

##### Nincs

##### **Listadoboz oszlopai az alapértelmezett sorrendben **




|Nyomógombok|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Alapértelmezés [Kezelhető/Nem kezelhető]|Megváltozott a mezőkód|
||Mindent kijelöl|A listában található összes sor kijelölése|Kezelhető||
|Alapértelmezett|Alapértelmezett|-|Kezelhető||
|Megjelenít|Megjelenít|-|Kezelhető||
|Megnyitás|Megnyitás|-|Kezelhető||
|Megnyitás új ablakban|Megnyitás új ablakban|-|Kezelhető||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 255/526|







|Hívott szolgáltatások|Col2|Col3|
|---|---|---|
|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|Ablakbetöltés megjelenít üzemmódban|-|S_0151_14 – Vasútvonalak, menetirányítói szakaszok és ábrák lekérdezése S_0151_16 – Menetrendi időszakok lekérdezése|
|Ablakbetöltés megjelenít üzemmódban||S_0151_25 – Munkahelyek lekérdezése|
|Vasútvonal vagy menetirányítói szakasz listában egy új érték kiválasztása|-|S_0151_15 – Szolgálati helyek lekérdezése vonal vagy menetirányítói szakasz vagy ábra alapján|
|Munkahely kiválasztása||S_0151_26 – Munkahelyhez tartozó ábrák lekérdezése|
|<Alapértelmezett>|-|-|
|<Megjelenít>|A_0151_01|-|
|<Megnyitás>|A_0151_01|S_0151_27 – Munkahely szintű foglalás kezelése (MunkahelyFoglKezCommand)|
|<Megnyitás új ablakban>|A_0151_01 új ablak példányban|S_0151_27 – Munkahely szintű foglalás kezelése (MunkahelyFoglKezCommand)|











|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Üzenetet előállító réteg|Rendszerüzenet típusa|
|Az időszak kezdete és vége között nagyobb a különbség, mint 36 óra|Az időszak kezdete és vége között max. 36 óra lehet az eltérés.|Kliens||
|az időszak kezdete nagyobb, mint a vég időpont|Az időszak kezdete nem lehet későbbi az időszak végénél!|Kliens||
|az időszak kezdete kisebb, mint az előző menetrendi időszak kezdete|Az időszak kezdete nem lehet korábbi, mint az előző menetrendi időszak kezdete|Kliens||
|az időszak vége nagyobb, mint a következő menetrendi időszak vége|Az időszak vége nem lehet későbbi, mint a következő menetrendi időszak vége|Kliens||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 256/526|




|az időszak kezdete és vége nem esik egy menetrendi időszakba|Az időszak kezdete és vége egy menetrendi időszakba kell, hogy essen|Kliens|Col4|
|---|---|---|---|
|a múlt időintervallum nem esik -35 és -1 óra közé|A múlt időintervallum -35 és -1 óra közötti érték lehet|Kliens||
|a jövő időintervallum nem esik +1 és +35 óra közé|A jövő időintervallum +1 és +35 óra közötti érték lehet|Kliens||
|a múlt és jövő időintervallum együttesen maximum 36 óra lehet|A múlt és jövő időintervallum együttesen maximum 36 óra lehet|Kliens||
|a <Megjelenít> gomb megnyomásakor nincs kijelölve legalább két szolgálati hely|Legalább két szolgálati hely kitöltése kötelező!|Kliens||
|a <Megnyitás> vagy <Megnyitás új ablakban> gomb megnyomásakor nincs kijelölt ábra|„Ábra kijelölése kötelező!”|Kliens||
|A kiválasztott menetirányítói szakasz nem feszíthető ki az út tengelyre, tehát térben nem folytonos.|A kiválasztott menetirányítói szakasz térben nem folytonos, kérem vegye fel a kapcsolatot a rendszer üzemeltetőjével.|Tárolt eljárás|Hiba|
|#61423A szolgálati hely lista megváltozik a korábbi állapothoz képest.|A szolgálati hely lista adatok megváltoztak, ezért a rendszer minden szolgálati helyet kijelöltté tett|Kliens|Figyelmeztető|



|Kódtáblák, választási listák|Col2|
|---|---|
|Kódtábla / tábla megnevezése|Kódtábla / tábla azonosítója|
|||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 257/526|


**Rendszerparaméterek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 258/526|

##### **2.4 A_0151_03 – Megjelenítési beállítások PopUp ablak **

Az ablak/lap feladatai

Az ablak az út/idő diagramon alapértelmezetten megjelenő grafikus elemek és a
menetvonalakkal, illetve a korlátozásokkal kapcsolatos információk megjelenítési
beállításainak megadására és felhasználói szintű elmentésére szolgál.

Az ablak a következő megjelenítési beállítások megadását teszi lehetővé:

#91693

     - **Tengelyek beállításai**

`o` **Vízszintes tengely**

(Az út/idő (X/Y) tengelyek értékei, azaz a vízszintes és függőleges
tengelyen melyik adat jelenik meg.)

            - Út

            - Idő

`o` **Szolgálati helyek sorrendje**

(Az út tengely irányultsága.)

            - Kezdőpont

            - Végpont
`o` **Szolgálati helyek nevei**

(Felirat formálya.)

            - Betűkód

            - Rövidnév

     - **Megjelenítendő adatok**

`o` Grafikonra be/kilépés
`o` Be/kilépő eltérés
`o` Megállóhelyek

(Szolgálati helyek részletezettsége (megállóhelyek
nélkül/megállóhelyekkel)
`o` MGM vágányok
`o` Körjelölők
`o` Előrejelzés
`o` Eltérések

`o` Késések
`o` Foglaltra jár
`o` R DE események
`o` #88980 Csatlakozásra várás

     - **Menetrend**

`o` Nincs
`o` Összes
`o` Kijelölt és terv

     - **Vágányzárak**

`o` Tervezett

`o` Tény

     - 89001 **S** **zöveges megjegyzések**

`o` Nincs

`o` Csak ikon

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 259/526|


`o` Ikon és szöveg

     - **Adminisztratív feladatok (késésigazolás, vágányadat pótlás)**

`o` Késésigazolás
`o` Vágányadat pótlás

     - #89002/#89003 **MEFI/MERÁFI és** **K** **u** **lcsf** **üggés feloldás**

`o` Menetengedély kijárati jelzőig
`o` Menetengedély bejárati jelzőig
`o` Kulcsfüggés feloldás

#91693 vége

**Az ablak megjelenése**

88953, 89001, 88957, #89002, #91693, #89003, #88980

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 260/526|





-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 261/526|



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 262/526|












|Felirat {megnevezés}|Értelmezés/üzemmód szerinti speciális működés|Típus|Alapértelmezett „Rendszer” felhasználónak|
|---|---|---|---|
|Tengelyek beállításai|--|felirat||
|Vízszintes tengely|--|felirat|--|
|Út {VizszintesTengely_Ut}|A vízszintes tengelyen a szolgálati helyek jelennek meg. Irányítói üzemmódban mindig bekapcsolt és nem módosítható.|rádiógomb (radiobutton)|beállított|
|Idő {VizszintesTengely_Ido}|A vízszintes tengelyen az idő adatok jelennek meg. Irányítói üzemmódban mindig kikapcsolt és nem módosítható.|rádiógomb (radiobutton)|--|
|Szolgálati helyek sorrendje|A szolgálati helyek megjelenési sorrendje az út tengelyen|felirat|--|
|Kezdőpont {SzolgHelySorrend_K_Pont}|A szolgálati helyek a vonalszakasz kezdőpontja felől jelennek meg (bal oldal/felül)|rádiógomb (radiobutton)|beállított|
|Végpont {SzolgHelySorrend_Vegpont}|A szolgálati helyek a vonalszakasz kezdőpontja felől jelennek meg (jobb oldal/alul)|rádiógomb (radiobutton)|--|
|Szolgálati helyek nevei|Az út tengelyen megjelenő szolgálati hely neve|felirat|--|
|Betűkód {SzolgHelyNev_For}|A 4 karakteres Betűkód (FOR név) jelenik meg.|rádiógomb (radiobutton)|beállított|
|Rövidnév {SzolgHelyNev_Rovid}|A 12 karakteres PASS2 rövid neve jelenik meg.|rádiógomb (radiobutton)|--|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 263/526|


**„Megjelenítendő adatok” csoport**

A grafikus területen megjelenítendő részletes adatok beállításait lehetővé tevő vezérlők:











|Felirat {adatelem}|Értelmezés|Típus|Alapértelmezés „Rendszer” felhasználónak Lehetséges értékei|Col5|Col6|
|---|---|---|---|---|---|
|Megjelenítendő adatok|--|felirat|--|||
|Grafikonra be/kilépés {Grafikonra_Be_Kilepes}|A menetvonalnak a grafikonra belépését jelölő (nyilacska) megjelenítése.|jelölőnégyzet (checkbox)|bekapcsolt|||
|Be/kilépő eltérés {beKilepoVonatokKesese}|A grafikonra be/kilépő eseményekhez tartozó eltérések megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|||
|Megállóhelyek {Megallohelyek}|A megállóhelyek is megjelenjenek a grafikus területen és az út tengelyen.|jelölőnégyzet (checkbox)|bekapcsolt|||
|MGM vágányok {MGM_Vaganyok}|A grafikus területen a MGM vágányok megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|||
|Körjelölők {Korjelolok}|A szolgálati helyekre vonatkozó körjelölők megjelenítés|jelölőnégyzet (checkbox)|bekapcsolt|||
|Előrejelzés {Elorejelzes}|A menetvonal előrejelzett (becsült) adatainak megjelenítése a tényadatok folytatásaként 93974 . Irányítói üzemmódban mindig bekapcsolt és nem módosítható.|jelölőnégyzet (checkbox)|bekapcsolt|||
|Késések {Kesesek}|Csak a késések értékének megjelenítése a grafikus területen szolgálati helyenként|jelölőnégyzet (checkbox)|bekapcsolt|||
|Eltérések {Elteresek}|Az események menetrendtől való eltérési értékének megjelenítése a grafikus területen szolgálati helyenként|jelölőnégyzet (checkbox)|kikapcsolt|||
|Foglaltra jár {FoglaltraJar}|A foglalt vágányra történő érkezési események megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|||
|RDE események {RDE_Esemenyek}|Az RDE eseményeket megjelenítő területek megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|||
|#88980Csatlakozásra várás {CsatlakozasraVar}|Csatlakozásra várást jelölő ikonok megjelenítése a grafikonon|jelölőnégyzet (checkbox)|bekapcsolt|||
|Menetrend|A tényadatok mellett a menetrend szerinti adatokat is meg kell jeleníteni a megadott esetekben|felirat|--|||
|Nincs {Menetrend_Nincs}|A menetrendi adatok nem jelennek meg.|rádiógomb (radiobutton)|-- (0)|||
|Összes {Menetrend_Osszes}|A menetrendi adatok minden, egyébként megjelenő menetvonalak esetén megjelennek.|rádiógomb (radiobutton)|-- (1)|||
|vk54879 Kijelölt és terv {Menetrend_CsakKijelolt}|A menetrendi adatok csak a grafikonon kijelölt menetvonal esetén jelenik meg, illetve azok a menetrendek jelennek meg, amelyeknek nincs tény/előre jelzett adata (MenetvonalId alapján).|rádiógomb (radiobutton)|kiválasztott (2)|||
|88953 Vágányzárak|Vágányzárakat jelölő területek megjelenítés|felirat|--|||
|88953 Tervezett 88953vége {Vaganyzarak}|A 88953 tervezett 88953vége vágányzárakat|jelölőnégyzet|törölt: bekapcsolt|törölt:|Vágányzárak|
||jelölő területek megjelenítése|(checkbox)||||
|88953 Tény {TenyVaganyzarak}|A tény vágányzárakat jelölő területek megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 264/526|















|Felirat {adatelem}|Értelmezés|Típus|Alapértelmezés „Rendszer” felhasználónak Lehetséges értékei|
|---|---|---|---|
|89001 Szöveges megjegyzés|Szöveges megjegyzések megjelenítése|felirat|--|
|89001 Nincs {Szov_Megjegyzes_Nincs|Szöveges megjegyzések nem jelennek meg|rádiógomb (radiobutton)|94147--|
|89001 Csak ikon {Szov_Megjegyzes_CsakIkon}|Szöveges megjegyzések megjelenítése csak ikonnal.|rádiógomb (radiobutton)|--|
|89001 Ikon és szöveg {Szov_Megjegyzes_IkonSzoveg}|Szöveges megjegyzések megjelenítése ikonnal és szövegrészlettel|rádiógomb (radiobutton)|94147Kiválasztott|
|Adminisztratív feladatok|Az adminisztratív feladat jelölő megjelenítés|felirat|--|
|Késésigazolás {KesesIgazolas}|Késésigazolási feladat megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|
|Vágányadat pótlás {VgAdatPotlas}|Vágányadat pótlási feladat megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|
|#89002/#89003 MEFI/MERÁFI és Kulcsfüggés feloldás|MEFI/MERÁFI menetengedélyek és Kulcsfüggés feloldás megjelenítő jelölők megjelenítése|felirat|--|
|M.eng. kijárati jelzőig {MenetEngKijelzoig}|Menetengedélyek kijárati jelzőig megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|
|M.eng. bejárati jelzőig {MenetEngBejelzoig}|Menetengedélyek bejárati jelzőig megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|
|Kulcsfüggés feloldás {KulcsfuggesFeloldas}|Kulcsfüggés feloldás megjelenítése|jelölőnégyzet (checkbox)|bekapcsolt|


**2.4.3.3** **Nyomógombok**

  - <Alapértelmezett>

Mindig kezelhető.

  - <Ment>

Akkor kezelhető, ha a beállításokban változás történt az ablak megnyitása óta.

**2.4.3.4** **A vezérlők működése, összefüggések**

  - „ *Megjelenítendő adatok* ” csoport „ *Késések* ” és „ *Eltérések* ” kapcsolók:

`o` A két kapcsoló egyszerre nem lehet bekapcsolt.
`o` Ha a „ *Késések* ” bekapcsolásra kerül, az „ *Eltérések* ” kapcsoló kikapcsolódik, és

viszont.
`o` A két kapcsoló egyszerre lehet kikapcsolt.

  - Az „ *Adminisztratív feladatok* ” csoport csak PV felhasználónál jelenik meg és csak

akkor, ha a felhasználó rendelkezik az OP_0151_MGMIranyito operandussal.

  - 89001 A „ *Szöveges megjegyzések* ” rádiógomb csoport csak PV felhasználónál j elen i k
meg és csak akkor, ha rendelkezik OP_0151_MGMIranyitoiSzovegMegtekint
operandussal.

  - #89002, #89003, #91693 A „ *MEFI/MERÁFI és Kulcsfüggés feloldás* ” csoport csak PV
felhasználónál jelenik meg.

**Hívott szolgáltatások**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 265/526|





|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|törölt: Ablak megnyitás és|
|---|---|---|---|
|<Alapértelmezett> nyomógomb kezelése|--|S_0151_01 – Megjelenítési beállítások||
|||lekérdezése (MegjelenitesiBeallitasokQuery)||
|<Ment> nyomógomb kezelése|A_0151_01|S_0151_10 – Megjelenítési beállítások mentése (MegjelenitesiBeallitasokMenteseCommand)||


**Rendszerüzenetek**

Nincsenek.

**Kódtáblák, választási listák**

Nincsenek.

**Rendszerparaméterek**

Nincsenek.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 266/526|

##### **2.5 A_0151_04 – Stílusok és vonalkészletek {üzemmód} PopUp ablak **

**Az ablak/lap feladatai**

Az ablak az A_0151_01 - Út-idő diagram ablakban megjelenő grafikus elemek
(menetvonalak, korlátozások):

  - előre meghatározott, a kliens beállítási adatai között tárolt stílusok (héttérszín,

betűszínek) és vonalkészletek (menetvonalak vonalainak típusa {folytonosság, szín,
vastagság}) összerendelésére,

  - már meglévő összerendelések, megjelenítési stílusok kiválasztására és felhasználói

szintű elmentésére, a nyomtatási képhez tartozó beállítások megjelenítésére szolgál.

Az összerendelési funkció külön „OP_0151_StilusVonalOsszerendel” operandushoz van
rendelve.

**Az ablak megjelenése**

89001

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 267/526|


   
   
   
   
   
   
   


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 268/526|



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 269/526|




-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 270/526|


**2.5.4.2** **A beállítási terület vezérlői**

**„Stílusok” csoport**

A grafikon alaphálójának megjelenési adatait tartalmazó stílusok megnevezéseit és azok
mintáját tartalmazza.






|Felirat [megnevezés]|értelmezés|Típus|Alapértelmeze tt|
|---|---|---|---|
|Választható stílusok|--|választólista (DropDownList)||
|--|A kiválasztott stílust megjelenítő táblázat. Három oszlopot tartalmaz|--|--|
|Háttér|A grafikon háttérszíne. 1. cella a felirat: „Háttér”. 2. cella a stílus háttérszíne. 3. cella üres.|--|--|
|Idővonal [Idovonal]|A grafikon háttérszínével az idővonal stílusa. 1. cella a felirat: „Idővonal”. 2. cella a stílus háttérszíne. 3. cella üres.|--|--|
||A tengelyekre vonatkozó feliratok. 1. cella: üres 2. cella: „Vonalak” fix szöveg. 3. cella: „Feliratok” fix szöveg.|||
|Út tengely: [UtTengely_Vonal]|Az úttengely stílusa. 1. cella: felirat „Út tengely” 2. cella: a grafikon háttere és az úttengely vonalának a stílusa 3. cella: üres|||
|Állomás [UtTengely_Vonal_ Allomas]|A szolgálati hely vonal stílusa állomás esetén. 1. cella: felirat „Állomás” 2. cella: a grafikon háttere és az állomási vonal stílusa 3. cella: „Állomás név” fix felirat.|||
|Megállóhelyek [UtTengely_Vonal_ Megallohelyek]|A szolgálati hely vonal stílusa megállóhely esetén. 1. cella: felirat „Megállóhelyek” 2. cella: a grafikon háttere és a vonal stílusa 3. cella: „Megállóhely név”|||
|MGM vágányok [UtTengely_Vonal_|A szolgálati helyek vágányainak vonal stílusa|||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 271/526|







|Felirat [megnevezés]|értelmezés|Típus|Alapértelmeze tt|
|---|---|---|---|
|AllomasiVaganyok]|1. cella: felirat „MGM vágányok” 2. cella: a grafikon háttere és a vonal stílusa 3. cella: Üres|||
|Idő tengely: [IdoTengely_Vonal ]|Az idő tengely stílusa. 1. cella: felirat „Idő tengely” 2. cella: a grafikon háttere és a vonal stílusa 3. cella: üres|||
|órás [IdoTengely_Felira t_Oras]|Az órás idővonal stílusa. 1. cella: felirat „órás” 2. cella: a grafikon háttere és a vonal stílusa 3. cella: „12:00” fix felirat|||
|30 perces [IdoTengely_Felira t_30Perces]|Az órás idővonal stílusa. 1. cella: felirat „órás” 2. cella: a grafikon háttere és a vonal stílusa 3. cella: „12:30” fix felirat|||
|10 perces [IdoTengely_Felira t_10Perces]|Az órás idővonal stílusa. 1. cella: felirat „órás” 2. cella: a grafikon háttere és a vonal stílusa 3. cella: „12:10” fix felirat|||
|89001Szöveges megjegyzés [SzovegesMegj]|A grafikon háttérszínével a szöveg színe. 1. cella a felirat: „Szöveges megjegyzés”. 2. cella üres. 3. cella ”Szöveg” fix felirat.|--|--|


**„Vonalkészletek” csoport**

A grafikus területen megjelenítendő menetvonalak megnevezéseit és azok mintáját
tartalmazza, a rendszerben tárolt forgalmi vonatnemek szerinti bontásban (ezeket fixen
leprogramozva):





|Felirat [megnevezés]|értelmezés|Típus|Alapértelmezés Lehetséges értékei|
|---|---|---|---|
|Választható vonalak|--|választólista (DropDownList)|Csak összerendelés üzemmódban jelenik meg.|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 272/526|









|Felirat [megnevezés]|értelmezés|Típus|Alapértelmezés Lehetséges értékei|
|---|---|---|---|
|--|A kiválasztott vonalkészlethez tartozó vonalak megjelenítő táblázat. Három oszlopot tartalmaz. Az 1. oszlopnak nincs fejléce, a 2. oszlop fejléce „Tényadat”, a 3. oszlopé „Menetrend”|--|--|
||A grafikon háttérszíne. 1. cella a felirat: forgalmi vonatnem kódja és leírása. 2. cella a stílus háttérszíne és a tényadat vonal stílusa. 3. cella a stílus háttérszíne és a menetrendi vonal stílusa.|--|annyiszor ismétlődik, ahány forgalmi vonatnem van, plusz egy sor az „Idegen menetvonalk” jelölésére|


   
   


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 273/526|


A vonalkészlet jellemzőit megjelenítő táblázat nem jelenik meg, ha a kiválasztott
stílushoz nem tartozik vonalkészlet.

<Stílust ment> nyomógomb csak összerendelés üzemmódban jelenik meg, és csak
akkor kezelhető, ha a kijelölt stílushoz tartozik vonalkészlet és az nem azonos a
megnyitáskori összerendeléssel.







|Hívott szolgáltatások|Col2|Col3|
|---|---|---|
|Funkciógomb/link/vezérlőele m esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|Ablak megnyitás|--|S_0151_01 – Megjelenítési beállítások lekérdezése (MegjelenitesiBeallitasokQuery)|
|Ablak megnyitás, ablak frissítés más szolgáltatás lefutása után||S_0151_17 – Stílusok és vonalkészletek összerendelésének lekérdezése (StilusVonalkeszletQuery) szolgáltatást|
|<Stílust ment> nyomógomb||S_0151_18 – Stílus - vonalkészlet összerendelés mentése (StilusVonalOsszerendelCommand)|
|<Profilba ment> nyomógomb|A_0151_0 1|S_0151_10 – Megjelenítési beállítások mentése szolgáltatás (MegjelenitesiBeallitasokMenteseCommand )|









|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|törölt: Alkalmaz|
|Profilba mentés kezelésekor|Profilba kívánja menteni a kiválasztott stílust?|kliens|megerősítő||
|Az <Kipróbálás> és a <Profilba ment> nyomógomb kezelésekor, ha a választható vonalak üres|A kiválasztott|kliens|információs||
||stílushoz nincs hozzárendelt vonalkészlet.||||
|Stílusok és vonalak összerendelése üzemmódban, ha a Választható vonalak kijelölése változott|A(z) "Stílus #1" stílus összerendelése módosult. Menti a változásokat?|kliens|megerősítő||
|A <Stílust ment> kezelésekor|Valóban össze kívánja rendelni a(z) "Stílus #3" stílust a(z) "Vonalkészlet #1"|kliens|megerősítés||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 274/526|


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 275/526|



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 276/526|


**Az ablak működése**

**2.6.3.1** **Ablak megnyitása**

Az ablak az A_0151_01 - Út-idő diagram ablakon kezelt „Adatok szűrése” ikon kezelésével
érhető el. A hívó ablak átadja a lekérdezési időszak kezdő dátumát.

Az ablak betöltésekor a kliens program a következő szolgáltatásokat hívja meg:

1. S_0151_11 - Forgalmi vonatnemek letöltése (ForgNemQuery).

A „Forgalmi vonatnemek” választólista értékkészletét biztosítja.

Hívó paraméter: Érvényesség időpontja - Az A_0151_01 - Út-idő diagram ablak szerinti
időszak kezdete dátuma.

A szolgáltatás által visszaadott adatok alapján történik meg a „Forgalmi vonatnemek”
többszörös választólista (Combobox) értékkészletének beállítása (’Leiras’).

2. S_0151_12 - Késési forgalmi főkódok letöltése (KesesForgKodQuery).

A „Késési főkódok”, illetve az „UIC késési kódok” választólista értékkészletét biztosítja.

Hívó paraméter: Érvényesség időpontja - Az A_0151_01 - Út-idő diagram ablak szerinti
időszak kezdete dátuma.

A szolgáltatás által visszaadott adatok alapján történik meg a „Késési főkódok”, illetve az
„UIC késési kódok” (a felhasználó vvt_szerv_id-jától függően) többszörös választólisták
(Combobox) értékkészletének beállítása (’Leiras’).

3. S_0151_13 - Késési segédkódok letöltése (KesesSegedKodQuery). (Csak MÁV

felhasználó vvt_szev_id = 11 esetén kell meghívni.)

A „Késési segédkódok” többszörös választólista (Combobox) értékkészletét biztosítja.

Hívó paraméter: Érvényesség időpontja - Az A_0151_01 - Út-idő diagram ablak szerinti
időszak kezdete dátuma.

A szolgáltatás által visszaadott adatok alapján történik meg a „Segédkódok” többszörös
választólista értékkészletének beállítása (’Leiras’).

4. K_003 - Ügyfelek listázása (Használó, megrendelő, vasútvállalat).

A „Menetvonal tulajdonos” választólista értékkészletét biztosítja.

A kliens az Érvényesség időpontja - Az A_0151_01 - Út-idő diagram ablak szerinti
időszak kezdete dátuma bemenő paraméterre hívja meg a szolgáltatást, a repository
(szerviz) további, statikus értékekkel hívja meg a közös szolgáltatást (az értékek a
szolgáltatás leírásánál találhatók).

VK105782 –
Az ablak megnyitásakor az első vonatszám tartomány tól mezőjében megjelenik az
A_0151_01 ablak fejlécben megadott vonatszám, ami az A_0151_01 ablakon a vonatszám
mező elhagyásakor, ill. a mezőben X vagy Enter használatakor kerül átvezetésre az
A_0151_05 ablakon megadható szűrő paraméterek közé. A vonatszám átvezetésekor a szűrő
paraméterekben szereplő vonatszám tartományok többi mezője kiürül. [ VK105782vége]

Az ablak megnyitásakor a következő választó listák fix értékekkel kerülnek feltöltésre:

  - „Forgalmi vonatkategória”

Értékei:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 277/526|


`o` Szem.száll. és szerelvény
`o` Teher
`o` Egyéb
`o` MRN

  - „RDE okozó”

Lehetséges értékei:

`o` Vasútvállalat – „VV”
`o` Pályavasút – „PV”
`o` Külső – „K”
`o` Nincs – „N”
A kiválasztott értékekhez tartozó „kódokat” az A_0151_01 ablak használja, az
S_0151_19 szolgáltatás által visszaadott adatok kliens oldali szűrésére.

Az „RDE azonosító” listát az alábbi módon tölti fel a kliens:

Az ablak megnyitásakor a kliens az A_0151_01 ablakon „tárolt”, **S_0151_19** **–** **RDE**
**adatok** **lekérdezése** **(RdeAdatokQuery)** szolgáltatás által visszaadott lista
**kiterjesztett RDE azonosítóiból** (KiterjRdeAzon) kiszűri az ismétlődéseket (distinct)
és az így kapott értékeket alkalmazza a lista forrásaként.
Az A_0151_01 - Út-idő diagram ablakon tárolt RDE események és az őket érintő
menetvonalak szűrésére szolgál. A kiválasztott értékeket az A_0151_01 ablak
használja, az S_0151_19 szolgáltatás által visszaadott adatok kliens oldali szűrésére.

**2.6.3.2** **Adatok szűrése**

A beállítások csak az <Alkalmaz> nyomógomb kezelésére lesznek érvényesek az A_0151_01

- Út-idő diagram ablakon.

Az ablaknak nem az <Alkalmaz> nyomógombbal történő bezárásakor az A_0151_01 - Út-idő
diagram ablakon az addigi beállítások maradnak érvényesek.

**2.6.3.3** **Alapértelmezett értékek visszaállítása**

Az <Alapértelmezett> nyomógomb kezelésére szolgáltatás hívás nélkül az ablak szerkezeti
leírása fejezetben leírt alapértelmezett értékeket veszik fel az adatelemek, az ablak nyitva
marad.

**2.6.3.4** **Beállítások alkalmazása**

Az <Alkalmaz> nyomógomb kezelésére a beállítások átadásra kerülnek az A_0151_01 - Útidő diagram ablaknak, ahol az érintett adatok körétől függően új lekérdezés nélkül, vagy a
megfelelő tárolt eljárás hívásával megtörténik a vonatok (menetvonalak) és az RDE
események szűrése.

Az ablak bezáródik.

**Az ablak szerkezeti leírása**

Az ablak három részből álló popup ablak:

  - Fejléc.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 278/526|



  - Az ablak középső részén található a „beállítási” terület.

  - Nyomógombok.

**2.6.4.1** **Az ablak fejléce**

Az ablak fejlécében bal oldalon fixen megjelenik a „A_0151_05 - Adatok szűrése” felirat.

**2.6.4.2** **A beállítási terület vezérlői (Beviteli/megjelenítő mezők, kiválasztó lista (combo**

**box), kapcsoló, rádiógomb)**











|Felirat [megnevezés]|értelmezés|Típus|Alapértelmezés Lehetséges értékei|
|---|---|---|---|
|Viszonylat|A megjelenítendő menetvonal közlekedési iránya|felirat|--|
|Páros|A vonalszakasz kezdőpontja felöl közlekedő menetvonalak jelennek meg.|jelölőnégyzet (checkbox)|kikapcsolt|
|Páratlan|A vonalszakasz végpontja felöl közlekedő menetvonalak jelennek meg.|jelölőnégyzet (checkbox)|kikapcsolt|
|Közlekedő|Azok a menetvonalak jelennek meg, amelyeknek van tényadata rögzítve a meghatározott szakaszon. Ha már leközlekedett, vagy valamilyen módon feloszlatott, vagy nincs még nincs tény eseménye (beleértve a készrejelentés nélküli GPS adatot is) az adott szakaszon (ha csak előrejelzés eseménye van, akkor nem számít közlekedőnek), vagy már elhagyta az adott szakaszt, akkor nem számít közlekedőnek.|jelölőnégyzet (checkbox)|kikapcsolt|
|Nem közlekedő is|Azok a menetvonalak jelennek meg, amelyek nem számítanak kölekedőnek (lásd fent).|jelölőnégyzet (checkbox)|kikapcsolt|
|Menetrendszerinti közlekedés (-tól, - ig perc)|A megadott intervallumba eső perc eltéréssel közlekedő menetvonalak jelennek meg.|felirat|--|
|[perc -tól]||szám beviteli|üres|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 279/526|








|Felirat [megnevezés]|értelmezés|Típus|Alapértelmezés Lehetséges értékei|
|---|---|---|---|
|||mező (lehet negatív szám is) ()||
|[perc -ig]||szám beviteli mező (lehet negatív szám is) ()|üres|
|Vonatszám tartomány (-tól -ig)|A megadott vonatszám tartományba tartozó menetvonalak jelennek meg. Az irányszám nem lesz figyelembe véve|felirat|--|
|nincs felirat [Vonatszám tartomány (1) -tól]||szám beviteli mező (max. 5 karakter)|üres|
|nincs felirat [Vonatszám tartomány (1) -ig]||szám beviteli mező (max. 5 karakter)|üres|
|nincs felirat [Vonatszám tartomány (2) -tól]||szám beviteli mező (max. 5 karakter)|üres|
|nincs felirat [Vonatszám tartomány (2) -ig]||szám beviteli mező (max. 5 karakter)|üres|
|nincs felirat [Vonatszám tartomány (3) -tól]||szám beviteli mező (max. 5|üres|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 280/526|






|Felirat [megnevezés]|értelmezés|Típus|Alapértelmezés Lehetséges értékei|
|---|---|---|---|
|||karakter)||
|nincs felirat [Vonatszám tartomány (3) -ig]||szám beviteli mező (max. 5 karakter)|üres|
|Forgalmi vonatkategória|Azok menetvonalak jelennek meg, amelyek forgalmi vonatkategóriája a magadottaknak megfelelő. Üres esetén minden kategória megjelenik.|többszörös kiválasztási lista (Combobox, multiselect)|nincs kiválasztás Fix értékek:  „Szem.száll. és szerelvény”  „Teher”  „Egyéb”  „MRN”|
|Forgalmi vonatnemek|Azok menetvonalak jelennek meg, amelyek forgalmi vonatneme a magadottaknak megfelelő. Üres esetén minden vonatnem megjelenik.|többszörös kiválasztási lista (Combobox, multiselect)|nincs kiválasztás S_0151_11 által visszaadottak|
|Késési főkódok|A kiválasztott területen a kiválasztott főkódokkal igazolt menetvonalak jelennek meg.|Többszörös kiválasztási lista (Combobox, multiselect)|nincs kiválasztás S_0151_12 által visszaadottak (csak MÁV felhasználónak jelenik meg)|
|Segédkódok|A kiválasztott területen a kiválasztott segédkódokkal igazolt menetvonalak jelennek meg.|Többszörös kiválasztási lista (Combobox, multiselect)|nincs kiválasztás S_0151_13 által visszaadottak (csak MÁV felhasználónak jelenik meg)|
|UIC késési kódok|A kiválasztott területen a kiválasztott UIC kódokkal igazolt menetvonalak jelennek meg.|Többszörös kiválasztási lista (Combobox, multiselect)|nincs kiválasztás S_0151_12 által visszaadottak (csak nem MÁV felhasználónak|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 281/526|







|Felirat [megnevezés]|értelmezés|Típus|Alapértelmezés Lehetséges értékei|
|---|---|---|---|
||||jelenik meg)|
|Menetvonal tulajdonos|A kiválasztott menetvonal tulajdonosok menetvonalai jelennek meg.|Többszörös kiválasztási lista (Combobox, multiselect)|nincs kiválasztás K03 által visszaadottak|
|RDE adatok (nincs feliratozva)||||
|RDE okozó|Az RDE eseményhez tartozó főkód „okozó” csoportja|Többszörös kiválasztási lista (Combobox, multiselect)|nincs kiválasztás Fix értékek:  „Vasútvállalati ”  „Pályavasúti”  „Külső”  „Nincs”|
|RDE azonosító|A diagramon megjeleníthető RDE azonosítók listája|Többszörös kiválasztási lista (Combobox, multiselect)|nincs kiválasztás Az A_0151_01 ablakhoz letöltött kiterjesztett RDE azonosítók|


**2.6.4.3** **Nyomógombok**




|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Alapértelmezés [Kezelhető/Nem kezelhető]|
|---|---|---|---|
|<Alapértelmezett>|Az ablak vezérlőinek alaphelyzetbe állítása|--|mindig kezelhető|
|<Alkalmaz>|Az ablakon történt beállítások alkalmazás az A_0151_01 - Út- idő diagram ablakon|--|mindig kezelhető|


**2.6.4.4** **A vezérlők működése, összefüggések**

  - Viszonylat „Páros” „Páratlan” kapcsolók egymástól függetlenül kezelhetők.

Az ablak <Alkalmaz> nyomógombbal történő bezáráskor a kapcsolók értékét át kell
adni az A_0151_01 - Út-idő diagram ablaknak:
*’Paros’ és ’Paratlan’ = true/false*

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 282/526|


 *A „Páros” kapcsoló bekapcsolása esetén az A_0151_01 - Út-idő diagram ablakon azok a*

*menetvonalak jelennek meg, amelyeknek az adott területre van az adott irányra eseménye, azaz*
*a fejadatokban az „Irány” jelző 2-páros, vagy 0-Mindkettő.*
 *A „Páratlan” kapcsoló bekapcsolása esetén az A_0151_01 - Út-idő diagram ablakon azok a*

*menetvonalak jelennek meg, amelyeknek az adott területre van az adott irányra eseménye, azaz*
*a fejadatokban az „Irány” jelző 1-páratlan, vagy 0-Mindkettő.*
 *Ha egyik kapcsoló sincs bekapcsolva, nincs szűrés.*
 *Ha mind a kettő be van kapcsolva, akkornincs szűrés.*

 - „Közlekedő” és „Nem közlekedő” kapcsolók egymástól függetlenül kezelhetők.

Az ablak <Alkalmaz> nyomógombbal történő bezáráskor a kapcsolók értékét át kell
adni az A_0151_01 - Út-idő diagram ablaknak.
*’Kozlekedo’ = true/false és ’NemKozlekedo’ = tru/false*

 *Ha a „Közlekedő” be van kapcsolva, akkor az A_0151_01 - Út-idő diagram ablakon azok a*

*menetvonalak jelennek meg, amelyeknél a „Közlekedő jelző” TRUE.*
 *Ha a „Nem közlekedő” kapcsoló be van kapcsolva, akkor azoknak a menetvonalaknak a*

*menetrendi adatai jelennek meg (mivel nincs tényadata), amelyek „Közlekedő jelző” értéke*
*FALSE.*
 *Ha egyik kapcsoló sincs bekapcsolva, nincs szűrés.*
 *Ha mind a kettő be van kapcsolva, akkor nincs szűrés.*

 - „Eltérés a menetrendtől” -tól és -ig beviteli mezők:

`o` A -tól és az -ig mezők bármelyike lehet üres, a másik kitöltöttségétől

függetlenül.
`o` Ha a -tól ki van töltve, az -ig nem lehet attól kisebb.
`o` Ha az -ig ki van töltve, akkor a -tól nem lehet annál nagyobb.
Egyébként „Az -ig perc nem lehet kisebb. mint a -tól perc.” hibaüzenet a beviteli
mezők alatt.
Az ablak <Alkalmaz> nyomógombbal történő bezáráskor a beviteli mezők értékét át
kell adni az A_0151_01 - Út-idő diagram ablaknak. Az A_0151_01 ablak tárolt eljárást
hív.
’Elterestol’, ’Elteresig’

`o` NULL - Ha egyik sincs kitöltve.

 *Ha csak a „-tól” van megadva, akkor azok a menetvonalak jelennek meg, amelyeknek a*

*lekérdezett területen és időszakban van olyan eseménye, amelynél az eltérés a megadott idővel*
*azonos, vagy annál nagyobb.*
 *Ha csak a -tól van kitöltve és az = 0 (nulla), akkor a csak a pontos vonatok jelennek meg,*

*amelyeknek az időszakon belül nincs sem pozitív, sem negatív eltérésük.*
 *Ha csak az „-ig” van megadva, akkor azok a menetvonalak jelennek meg, amelyeknek a*

*lekérdezett területen és időszakban van olyan eseménye, amelynél az eltérés a megadott idővel*
*azonos, vagy annál kisebb.*
 *Ha mind a kettő ki van töltve, akkor azok a menetvonalak jelennek meg, amelyeknek a*

*lekérdezett területen és időszakban van olyan eseménye, amelynél az eltérés a megadott*
*időintervallumba esik, beleértve a -tól és az -ig perceket is.*
 *Ha mind a kettő üres, akkor nincs szűrés.*

 - Vonatszám tartomány -tól -ig:

`o` VK105782 Az ablak megnyitásakor az első vonatszám tartomány – tól mezőjében
megjelenik az A _ 0151 _ 01 ablak fejlécben megadott vonatszám, ami az
A _ 0151 _ 01 ablakon a vonatszám mező elhagyásakor, ill. a mezőben X vagy
Enter használatakor kerül átvezetésre az A _ 0151 _ 05 ablakon megadható szűrő
paraméterek közé. A vonatszám átvezetésekor a szűrő paraméterekben
szereplő vonatszám tartományok többi mezője kiürül. [ VK105782vége]

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 283/526|


`o` A három sor közül bármelyik lehet kitöltött, függetlenül a többi

kitöltöttségétől.
`o` A -tól és az -ig mezők bármelyike lehet üres, a másik kitöltöttségétől

függetlenül.
Az ablak <Alkalmaz> nyomógombbal történő bezáráskor a beviteli mezők értékét át
kell adni az A_0151_01 - Út-idő diagram ablaknak. Az üres mező értékének NULL-t
kell átadni.

Tömb elemei:

[’Vonatszamtol’,’Vonatszamig’]

 *Ha egy mező üres, akkor arra az egy vonatszámra kell szűrni.*
 *Ezek nem kizáró feltétekel.*
 *Ha ezek vannak megadva:*
 *Tartomány1: NULL - 60, akkor a 60-as vonatot kell kikeresni.*
 *Ha a Tartomány1: 20 - 45620, akkor a 20 és a 45620 közé eső vonatokat kell kikeresni,*

*beleértve a 20 és a 45620 vonatokat is.*
 *Ha a tartomány1, 60 és NULL, akkor az első eset áll fenn.*

 - „Forgalmi vonatkategória” és „Forgalmi vonatnemek” többszörös kiválasztású

választó listák.
A „Forgalmi vonatkategória” választólista 2 részből áll:

`o` Adat tag: a forgalmi vonatkategória belső azonosítója - ez nem jelenik meg.
`o` Megjelenítési (kiválasztáskori) adattag    - a forgalmi vonatkategória
megnevezése.
A „Forgalmi vonatnem” választólista adatelem 3 részből áll:

`o` Adat tag: a forgalmi vonatnemek belső azonosítója ’VForgNemKod’ - ez nem

jelenik meg.
`o` Megjelenítési (kiválasztáskori) adattag    - ’VForgnemKod’ és
’VForgNemLeiras’ összefűzve, „ - „ elválasztva.
`o` Bezárt/kiválasztott megjelenítési adattag - ’VForgnemKod’ - ez jelenik meg a

kiválasztás után a „chips”-ben.
A „Forgalmi vonatkategória” listában egy újabb sor hozzáadásakor:

`o` a „Forgalmi vonatnemek” választólistában a kiválasztott vonatkategóriákhoz

tartozó elemek jelennek meg. ’VForgkatId’

    - Személysz. és szerelvény esetén: 1,

    - Teher: 2

    - Egyéb: 3

    - MRN: 4.
Ha a „Forgalmi vonatkategória” lista „üres”, akkor a „Forgalmi vonatnemek”
választólistájában minden elem megjelenik, a korábbi kiválasztások törlődnek.
Az ablak <Alkalmaz> nyomógombbal történő bezáráskor:

`o` Ha a „Forgalmi vonatnemek” listájában van kijelölt elem, akkor csak a

Forgalmi vonatnemek listáját kell átadni az A_0151_01 - Út-idő diagram
ablaknak. Tömbben [’VForgNemKod]’
`o` Ha a Forgalmi vonatkategóriában van kiválasztott elem, de nincs Forgalmi

vonatnem kiválasztva, akkor csak a Forgalmi vonatkategóriát kell átadni az
A_0151_01 - Út-idő diagram ablaknak. - tömbben [’VForgkatId’]
`o` Ha egyikben sincs kiválasztott elem, akkor NULL (üres lista).

 *Az A_0151_01 - Út-idő diagram ablakon azok a menetvonalak jelennek meg, amelyek*

*vonatkategóriája a kiválasztott soroknak megfelelnek:*
*üres = minden*

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 284/526|


*„Szem.száll. és szerelvény” = 1*
*„Teher” = 2*
*„Egyéb” = 3*
*„MRN” = 4.*

 - „Késési főkódok” és „Segédkódok” többszörös kiválasztású választó listák. Csak

MÁV (vvt_szerv_id = 11) felhasználónak jelennek meg.
A „Késési főkódok” választólista adatelem 3 részből áll:

`o` Adat tag: a késési főkód belső azonosítója ’FoKodId’ - ez nem jelenik meg.
`o` Megjelenítési (kiválasztáskori) adattag - ’FoKod’ és ’FoKodLeiras’

összefűzve, „ - „ elválasztva.
`o` Bezárt/kiválasztott megjelenítési adattag - ’FoKod’ - ez jelenik meg a

kiválasztás után a „chips”-ben.
A „Segédkódok” választólista adatelem 3 részből áll:

`o` Adat tag: a késési segédkód belső azonosítója ’SKodId’ - ez nem jelenik meg.
`o` Megjelenítési (kiválasztáskori) adattag - ’SKod’ és ’SKodLeiras’ összefűzve,

„ - „ elválasztva.
`o` Bezárt/kiválasztott megjelenítési adattag - ’SKod’ - ez jelenik meg a

kiválasztás után a „chips”-ben.
A „Késési főkódok” listában egy újabb sor hozzáadásakor:

`o` a „Segédkódok” választólistában a kiválasztott főkódhoz tartozó elemek

jelennek meg.
A „Késési főkód” lista törlésekor a „Segédkód” választó listában minden segédkód
megjelenik.
A „Segédkód” listából önállóan is kiválaszthatók elemek.
Az ablak <Alkalmaz> nyomógombbal történő bezáráskor a Főkód és a Segédkód
listában kiválasztott kódokat (nem belső ID) át kell adni az A_0151_01 - Út-idő
diagram ablaknak.
A Fókód és a segédkód is lehet üres.
Kettő tömbben [’FoKodId’] és [’SKodId’].

 *Az A_0151_01 - Út-idő diagram ablakon azok a menetvonalak jelennek meg, amelyekhez*

*tartozik a kiválasztott főkóddal megigazolt vonatesemény a lekérdezett területen és időszakban.*

 - "UIC késési kódok" többszörös kiválasztású választó lista. Csak nem MÁV

(vvt_szer_id <> 11) felhasználónak jelenik meg.
Az „UIC késési főkódok” választólista adatelem 3 részből áll:

`o` Adat tag: a késési UIC kód azonosítója ’FoKodId’ - ez nem jelenik meg.
`o` Megjelenítési (kiválasztáskori) adattag - ’UicKod’ és az első talált elemhez

tartozó ’FoKodLeiras’ összefűzve, „ - „ elválasztva.
`o` Bezárt/kiválasztott megjelenítési adattag - ’UicKod’ - ez jelenik meg a

kiválasztás után a „chips”-ben.
Az UIC kód lehet üres is.
A listában egy UIC kódhoz csak egy sor, az első ’FoKodId’-hoz tartozó ’IucKod’ és
’FoKodLeiras’ jelenik meg.
Az a késési kód, amelyhez az S_0151_12-es szolgáltatás nem ad ’UicKod’ értéket
(NULL), az nem jelenik meg a listában.
Az <Alkalmaz> nyomógomb kezelésekor az A_0151_01 ablaknak minden a
kiválasztott UIC kódhoz tartozó főkód átadásra kerül.

 *Az A_0151_01 - Út-idő diagram ablakon azok a menetvonalak jelennek meg, amelyekhez*

*tartozik a kiválasztott UIC kóddal megigazolt vonatesemény a lekérdezett területen és*
*időszakban.*

 - „Menetvonal tulajdonos” többszörös kiválasztású választó lista.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 285/526|


A „Menetvonal tulajdonos” választólista 2 részből áll:

`o` Adat tag: a ’ÜgyfelAzonosito’ - ez nem jelenik meg.
`o` Megjelenítési (kiválasztáskori) adattag - a ’UgyfelRovidNeve’ megnevezése.
Tömb: [’MenetvTulId’] = ’UgyfelAzonosito’ (vvt_szerv_Id)

 *Azok a menetvonalak jelennek meg, amelyek megrendelője a kiválasztott sorokhoz tartozó*

*megrendelő.*
 *Üres sor esetén nincs szűrés, minden megrendelőhöz tartozó menetvonal megjelenik.*

 - „RDE okozó” és „RDE azonosító” többszörös kiválasztású választó listák.

Az „RDE okozó” listában egy újabb sor hozzáadásakor:

az „RDE azonosító” választólistában a kiválasztott okozóhoz tartozó elemek
jelennek meg.
Az „RDE okozó” lista törlésekor az „RDE azonosító” választó listában minden RDE
azonosító megjelenik.
Az „RDE azonosító ” listából önállóan is kiválaszthatók elemek.
Az ablak <Alkalmaz> nyomógombbal történő bezáráskor az az A_0151_01 - Út-idő
diagram ablakon a kliens a kiválasztott RDE okozó és RDE azonosítók alapján szűri
az S_0151_19 szolgáltatás által korábban lekért adatok körét.
A RDE azonosító lehet üres.








|Hívott szolgáltatások|Col2|Col3|
|---|---|---|
|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|Ablak megnyitás|--|S_0151_11 - Forgalmi vonatnemek letöltése (ForgNemQuery) (usp_0151_selForgVonNem) S_0151_12 - Késési forgalmi főkódok letöltése (KesesForgKodQuery). (usp_0151_selKesesForgKod) S_0151_13 - Késési segédkódok letöltése (KesesSegedKodQuery). (usp_0151_selKesesSegedKod) K_003 - Ügyfelek listázása (Használó, megrendelő, vasútvállalat) szolgáltatás|
|<Alapértelmezett> nyomógomb kezelése|--|--|
|<Alkalmaz> nyomógombkezelés|A_0151_01|--|


**Rendszerüzenetek**

Nincsenek.

**Kódtáblák, választási listák**

Nincsenek.

**Rendszerparaméterek**

Nincsenek.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 286/526|

##### 2.7 #88994 A_0151_06 – Ábra szintű információk modális PopUp ablak - (BÉ)

**Az ablak/lap feladatai**

Az ablak **PV** (pályavasúti) felhasználók számára **ábra** alapon megjelenített **diagram** idő
**üzemmódjának** (Időhenger / Fix időszak) **megfelelő** **főbb adatok** megjelenítésére szolgál.

**Az ablak megjelenése**

  - **Időhenger** üzemmód

Eltérés 89475

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 287/526|


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 288/526|



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 289/526|


A táblázat **rendezettsége** az ***Ábra neve*** oszlop szerint **növekvő** . A szolgáltatás az
***Ábra neve*** oszlop szerint **növekvő** és a ***Szerkesztés kezdő időpontja*** oszlop szerint
**csökkenő** sorrendben adja vissza a listát.

A táblázat **nem méretezhető**, sorai **nem átrendezhető** k, oszlopai nem
méretezhetők, nem áthelyezhetők. Ha nem férne ki az ablakon a **görgethető** vé
alakul.

Ha nincs érintett ábrája az ábrának, akkor az üres táblázat a „Nincs
megjeleníthető adat. ” üzenettel jelenik meg.

  - **Fix időszak** üzemmód esetén

Szerkesztők adatai (táblázat) a szolgáltatástól visszakapott **listából**

`o` *Szerkesztő neve* oszlop = Szerkesztő teljes neve ( **SzerkNev** )

`o` *Szerkesztés kezdő időpontja* oszlop = Szerkesztés kezdő időpontja

( **SzerkKezd** )

`o` *Szerkesztés vége időpontja* oszlop = Szerkesztés vég időpontja ( **SzerkVeg** )

A táblázat **rendezettsége** a ***Szerkesztés kezdő időpontja*** oszlop szerint **csökkenő** . A
szolgáltatás a ***Szerkesztés kezdő időpontja*** oszlop szerint **csökkenő** sorrendben adja
vissza a listát.

A táblázat **nem méretezhető**, sorai **nem átrendezhető** k, oszlopai nem méretezhetők,
nem áthelyezhetők. Ha nem férne ki az ablakon a **görgethető** vé alakul.

Ha nincs szerkesztője az ábrának, akkor az ablak megnyílik az üres táblázattal és a
„Nincs megjeleníthető adat. ” üzenettel.

**Az ablak szerkezeti leírása**

Az ablak három részből álló popup ablak:

  - Fejléc.

  - Az ablak középső részén találhatók az aktuálisan megjelenített ábrához kapcsolódó

információk.

  - Nyomógombok.

**2.7.4.1** **Az ablak fejléce**

Az ablak **Fejléce** tartalmazza:

     - Balra igazítva
`o` az „Ábra szintű információk ” ikont (Információs ikon, nincs funkciója.)
`o` az ablak azonosítóját
`o` az ablak nevét

     - Jobbra igazítva
`o` a „Bezár ” ikont. (Az ablak bezárására szolgál.)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 290/526|


**2.7.4.2** **Beviteli/megjelenítő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb**













































|Felirat|Megnevezés|Súgó (ToolTip ) szöveg|Kontrol típusa|Hoss z|Maszk|Alapértelmezett érték|Törzstábla / kódtábla|
|---|---|---|---|---|---|---|---|
|Időhenger üzemmód||||||||
|Aktuális ábraadatok|Aktuális ábraadatok|-|Adatcsoport címke|-|-|-|-|
|Szerkesztő neve|Szerkesztő neve|-|Szöveges megjelenítő|50 max. 300|-|-|-|
|Szerkesztés kezdő időpontja|Szerkesztés kezdő időpontja|-|Dátum, idő megjelenítő|19|éééé.hh.nn. óó:pp:mm|-|-|
|Korábbi szerkesztők adatai|Korábbi szerkesztők adatai|-|Adatcsoport címke|-|-|-|-|
|-|Szerkesztők|-|Táblázat|-|-|-|-|
|Szerkesztő neve|Szerkesztő neve|-|Oszlop|50 max. 300|-|-|-|
|Szerkesztés kezdő időpontja|Szerkesztés kezdő időpontja|-|Oszlop|19|éééé.hh.nn. óó:pp:mm|-|-|
|Szerkesztés vége időpontja|Szerkesztés vég időpontja|-|Oszlop|19|éééé.hh.nn. óó:pp:mm|-|-|
|Érintett ábrák adatai|Érintett ábrák adatai|-|Adatcsoport címke|-|-|-|-|
|-|Érintett ábrák|-|Táblázat|-|-|-|-|
|Ábra neve|Ábra neve|-|Oszlop|50 max. 128|-|-|-|
|Szerkesztő neve|Szerkesztő neve|-|Oszlop|50 max. 300|-|-|-|
|Szerkesztés kezdő időpontja|Szerkesztés kezdő időpontja|-|Oszlop|19|éééé.hh.nn. óó:pp:mm|-|-|
|Fix időszak üzemmód||||||||
|Szerkesztők adatai|Szerkesztők adatai|-|Adatcsoport címke|-|-|-|-|
|-|Szerkesztők|-|Táblázat|-|-|-|-|
|Szerkesztő neve|Szerkesztő neve|-|Oszlop|50 max. 300|-|-|-|
|Szerkesztés kezdő időpontja|Szerkesztés kezdő időpontja|-|Oszlop|19|éééé.hh.nn. óó:pp:mm|-|-|
|Szerkesztés vége időpontja|Szerkesztés vég időpontja|-|Oszlop|19|éééé.hh.nn. óó:pp:mm|-|-|


**2.7.4.3** **Nyomógombok**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 291/526|

|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Alapértelmezés [Kezelhető/Nem kezelhető]|
|---|---|---|---|
||Bezár ikon|-|Kezelhető|





|Hívott szolgáltatások|Col2|Col3|
|---|---|---|
|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|Ablakbetöltés|-|S_0151_21 – Ábra szintű információk lekérdezése (AbraInfokQuery)|
|„Bezár” ikon|A_0151_01||







|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|Ha a megadott feltételekkel nincs találat. Bug 98204|Nincs megjeleníthető adat.|Kliens|Információ (grid)|


**Kódtáblák, választási listák**

Nincs

**Rendszerparaméterek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 292/526|

##### **2.8 A_0151_07 – Munkahely adminisztratív feladatai (összefoglaló) ablak **

**Az ablak/lap feladatai**

Az ablakon lehet megtekinteni a felhasználó munkahelyét (az általa irányított vonalakat, a
munkahelyéhez tartozó ábrákat) érintő adminisztratív (késésigazolás és vágányadat pótlás)
feladatokat, innen lehet kezdeményezni ezek végrehajtását.

**Az ablak megjelenése**

**Az ablak működése**

**2.8.3.1** **Ablak megnyitása**

Az ablak az A_0151_01 - Út-idő diagram ablakon kezelt „Adminisztratív feladatok” **ikon**
kezelésével érhető el. Az ablak **modális** ablakként nyílik meg, használata közben a **grafikon**
automatikus **frissítése szünetel** .

A hívó ablak **átadja** a következő adatokat:

- **’MunkahelyId’** - munkahely belső azonosítója (az A_0151_01 grafikon kapja a
munkahely foglalásakor: ’TeruletMunkahely.ter_munkahely_id’).

- **'KesesIg’** - Késésigazolási feladat kell jelző. Az A_0151_01 ablaktól kapott adat = True,
ha a ’MegjelenitesiBeallitasokQuery. **KesesIg’** = True.

- **'VgAdat'** - Vágányadat pótlás feladat kell jelző. Az A_0151_01 ablaktól kapott adat. =
True, ha a MegjelenitesiBeallitasokQuery. **VgAdat** = True.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 293/526|


Az ablak **betöltésekor** a kliens program az S_015_24 - **MunkahelyAdminFeladatokQuery**
(Munkahelyi adminisztratív feladatok lekérdezése) szolgáltatást hívja meg.

- **Bemenő** adatok:
`o` **’MunkahelyId’**  - munkahely belső azonosítója.
`o` **’KesesIg’**  - Késésigazolási feladatokat kell keresni (1/0)
`o` **’VgAdat’**  - vágányadat pótlási feladatokat kell keresni (1/0).

- Visszakapott adatok:
`o` ’VonatAzon’

`o` ’VftId’

`o` ’MegrAzon’
`o` ’MegrRovidNev’
`o` ’KesesIg’
`o` ’VgAdat’
`o` MunkahelyId'
`o` 'AbraId'

- A visszakapott adatokkal feltölti a találati listát.

**2.8.3.2** **Az ablak szerkezeti leírása**

Az ablak kettő részből álló popup ablak:

  - Fejléc.

  - Az ablak középső részén található a munkaterület.

**Az ablak fejléce**

Az ablak fejlécében bal oldalon fixen megjelenik a „A_0151_07 - Munkahely adminisztratív
feladatai” felirat.

**Munkaterület**

A munkaterület felső részén megjelenik a munkahely megnevezése, alatta az adminisztratív
feladatok listája (jqxGrid).

**A listadoboz oszlopai az alapértelmezett sorrendben**





|Felirat (megnevezés)|Súgó a fejben cellában|Hossz|Típus Maszk|Forrás (S_0151_24 - AdminFeladatokQuery) Adatelem|
|---|---|---|---|---|
|Vonatazonosító (az érintett vonat azonosítója)|-- --|12|szöveg (link) --|’VonatAzon’|
|Megr. azonosító (a menetvonal azonosítója)|„Megrendelés VPE azonosítója” --|15|szöveg --|’MegrAzon’|
|Megrendelő (a menetvonal megrendelőjének rövid neve)|-- --|35|szöveg --|’MegrRovidNev’|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 294/526|





|Felirat (megnevezés)|Súgó a fejben cellában|Hossz|Típus Maszk|Forrás (S_0151_24 - AdminFeladatokQuery) Adatelem|
|---|---|---|---|---|
|K (késésigazolási feladat jelző)|„Késésigazolási feladat van” --|--|checkbox --|’KesesIg’|
|Vg (vágányadat pótlási feladat jelző)|„Vágányadat pótlási feladat van” --|--|checkbox --|’VgAdat’|


A grid **lapozható**, **egyszeres** kijelölésű, az oszlopok **nem** **áthelyezhetők**, nem **rendezhetők**,
**szélességük** nem módosíthatók, **de szűrőzhetők** .
A grid fölött megjelenik a „szűrés törlés” ikon.
A „K” és „Vg” oszlopok szűrője (lásd A_0105_01 ablak):

A lista alatt megjelenik a „lapozó sáv”. A „Mutatott sorok” alapértelmezett értéke 100.

**2.8.3.3** **Nyomógombok**

Nincsenek.

**2.8.3.4** **A vezérlők működése, összefüggések**

A gridben a „Vonatazonosító” linkre kattintva **külön ablakban** meghívásra kerül az
A_0151_ **08** - Menetvonal adminisztratív feladatai **ablak**, amelynek **átadásra** kerülnek a
következő adatok:

- **’vftId’** - a linkhez tartozó sor ’VftId’ adata. = ’MunkahelyAdminFeladatokQuery. **VftId’**
adat.

- ’munkahelyId’

- **’kesesIgazolas’** - a linkhez tartozó sor **’KesesIg’** adat.

- **’vgAdatPotlas’** - a linkhez tartozó sor **’VgAdat’** adat.

Az A_0151_08 ablakon kezelt < **Mentés** - nyomógomb kezelésekor **ez** az ablak is **frissül**,
meghívásra kerül az S_015_24 - MunkahelyAdminFeladatokQuery (Munkahelyi
adminisztratív feladatok lekérdezése) szolgáltatás.

**Hívott szolgáltatások, ablakok**




|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás azonosító|
|---|---|---|
|Ablak megnyitás|--|S_0151_24 - MunkahelyAdminFeladatokQuery|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 295/526|


„ Vonatszám” link A_0151_08 -
**Rendszerüzenetek**

Nincsenek.

**Kódtáblák, választási listák**

Tárolt eljárások adják vissza.

**Rendszerparaméterek**

Nincsenek.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 296/526|

##### **2.9 A_0151_08 - Menetvonal adminisztratív feladatai ablak **

**Az ablak/lap feladatai**

Egy menetvonalhoz a felhasználó munkahelye által meghatározott szolgálati helyekre eső
adinisztratív feladatok végrehajtása.

**Az ablak megjelenése**

**Az ablak működése**

Az ablak az **A_0151_01** ablakról (grafikon) egy menetvonal tényadat - szolgálati hely
metszéspontjában található adminnisztratív feladat jelölő (sárga háromszög), illetve az
**A_0151_07** ablakon egy vonatszám link kezelésével hívható.

- Az ablak **új lapon** (külön ablakban) nyílik meg, a hívó ablakra **visszatérés nincs**, viszont
az adatok **mentésekor** az ablak és a **hívó ablak is** (grafikon vagy A_0151_07 ablak)
**frissítésre** kerül.

- Az ablak a **hívó** ablaktól a következő adatokat **kapja** :
`o` **’munkahelyId’**  - a felhasználó által **irányítói szerkesztő** módban lefoglalt
munkehely belső azonosítója. Grafikonról és az A_0151_07 ablakról hívás esetén is
meg van adva.
`o` **’menetvonalId’**  - a kijelölt menetvonal **MGM belső** azonosítója a VPE-s
menetvonal azonosító és a vft adatainak megállapításához.
Csak **grafikonról** hívás esetén van megadva (’TenyadatokQuery.MenetvId’).
`o` **'vftId’**  - a kijelölt vonat **belső** azonosítója a VPE-s menetvonal azonosító és a vft
adatainak megállapításához.
Csak az **A_0151_07** **ablakról** hívás esetén
(’MunkahelyAdminFeladatokQuery.VftId’) van megadva.
`o` **’kesesIgazolas’**  - Késésigazolási feladatokat kell keresni (1/0).
      - **Grafikonról** hívás esetén a ’MegjelenitesiBeallitasokQuery.KesesIg’ adat.
      - Az **A_0151_07** **ablakról** hívás esetén a
’MunkahelyAdminFeladatokQuery.KesesIg’ adat
`o` **’vgAdatPotlas’**  - vágányadat pótlási feladatokat kell keresni (1/0).
      - **Grafikonról** hívás esetén a ’MegjelenitesiBeallitasokQuery’ ’VgAdat’ adat.
      - Az **A_0151_07** **ablakról** hívás esetén a
’MunkahelyAdminFeladatokQuery.VgAdat’ adat.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 297/526|



- Az ablak megnyitásakor **meghívásra** kerül az S_0151_28 **MenetvonalAdminFeladatokQuery** szolgáltatás
(core.usp_0151_selMenetvonalAdminFeladatok).
`o` Bemenő adatok:

      **’MgmMvId’**     - az érintett menetvonal belső MGM azonosítója, amely alapján az
eredeti menetvonal azonosító, vft és esemény adatok megállapíthatók.
**Grafikonról** hívás esetén.

      - **’VftId’**       - az érintett menetvonal vft azonosítója, amely alapján az eredeti
menetvonal azonosító és esemény adatok megállapíthatók.
**A_0151_07 ablakról** hívás esetén.

      **’MunkahelyId’**      - annak a munkahelynek a belső azonosítója, amelyet érintő
feladatokat keresni kell.

      **’KesesIg’**       - Késésigazolási feladatokat kell keresni (1/0).

      **’VgAdat’**      - vágányadat pótlási feladatokat kell keresni (1/0).
`o` A szolgáltatás **sikeres** lefutása után a visszakapott adatokkal feltöltésre kerülnek a
„ **Menetvonal adatok** ” megjelenítő csoport adatelemei és az „ **Adminisztratív**
**feladatok** ” találati lista (grid). Részletek a szerkezeti leírásnál.

- Az ablak megnyitásakor **meghívásra** kerül a K_007_lang - Általános nyelvesített
kódtábla betöltő (usp_K007_lang_selKodtabla) közös szolgáltatás
`o` Bemenő adatok:
      - ’KodTablaNev’ = ’T_VSZR ’ .

      **’Nyelv** = a beállított nyelv kódja.
      - **’Ervenyesseg’** = rendszerdátum.
`o` A szolgáltatás **sikeres** lefutása után a visszakaptt adatokkal feltöltésre kerül a
„Vonatazonosító” számozási rendszer (első) választólistája.

**2.9.3.1** **Az ablak szerkezeti leírása, az adatelemek működése**

Az ablak **három** részből áll:

- „ **Menetvonal alapadatai** ” megjelenítő csoport.

- **Adminisztratív feladatok** találati lista (grid) nincs feliratozva.

- „ **Feladat adatai** ” szerkesztő csoport.

**Fejléc**

Az ablak fejlécében fixen megjelenik az „IÜR - A_0151_08 - MENETVONAL
ADMINISZTRATÍV FALADATAI” szöveg.

**„Menetvonal alapadatai” megjelenítő csoport**

- A csoport a feladatban érintett menetvonal alapadatait tartalmazza a
„ **MenetvonalAdminFaladatokQuery’** { **menetvonal alapadatai** } tömb alapján:

"
`o` **Vonatazonosító** :”  - az adminisztratív faladatok grid első sorának a
vonatazonosítója.
`o` **„Megrendelés azon.:”**  - a menetvonal VPE azonosítója „2024/1234567/1234”
formátumban = **’MegrAzon’** .
`o` „ **Megrendelő** :” - A menetvonal megrendelőjének rövid neve = **’MegrRovidNev’** .
`o` „ **Menetrend típusa:** ” - A menetvonal menetrend típusának leírása = **’MtTipusNev’** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 298/526|


`o` „ **Forgalmi vonatnem** :” - A menetvonal által meghatározott forgalmi vonatnem
leírása = **’ForgVnemNev’** .

- A csoport nem összecsukható.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 299/526|

##### **Adminisztratív feladatok (nincs feliratozva) grid ** A g rid oszlo p ai ala pé rt e lm e z e tt so rr e n dbe n :




























|Felirat|Megnevezés|Súgó feljléc cella|Hossz|Maszk/Típus|Adatelem az S_0151_28 - MenetvonalAdminFeladatokQuery szolgáltatás {Esemény} tömbben|
|---|---|---|---|---|---|
|K|Késésigazolási feladat van|-- --|--|-- védett checkbox|’Feladat’ Akkor bekapcsolt, ha a ’Feladat’ = 1 VAGY 3.|
|Vg|Vágányadat pótlási feladat van|-- --|--|-- védett checkbox|’Feladat’ Akkor bekapcsolt, ha a ’Feladat’ = 2 VAGY 3.|
|Vonatazonosító|Vonatazonosító a számozási rendszerrel és az irányszámmal|-- --|20|56 99999-2 24/09/09 szöveg|’VonatAzon’|
|--|A vonat belső azonosítója az RDE események lekérdezéséhez|-- --|--|rejtett oszlop|’VftId’|
|--|Az esemény szolgálati helyének sorszáma a vft-n belül|-- --|--|rejtett oszlop|’SzhIndex’|
|--|A szolgálati hely statisztikai száma|--|--|rejtett oszlop|’SzhKod’|
|--|A szolgálati hely rövid neve|--|--|rejtett oszlop|’SzhRovidNev’|
|Szolgálati hely|A szolgálati hely statisztikai száma és rövid neve|-- --|20|10025 Ferencváros szöveg|’SzhKod” és ’SzhRovidNev’ összefűzve szóközzel elválasztva|
|Vg.azon|Az esemény vágányának leírása|„Az esemény vágányának leírása” --|20|-- szöveg|’VgMellekKod’|
|--|Az esemény vágányának belső azonosítója|-- --|--|-- rejtett oszlop|’VgId’|
|Esem|Az esemény kódja|„Esemény” --|5|-- szöveg|’EsemKod’|
|--|Az esemény belső azonosítója a|--|--|--|’EsemId’|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 300/526|

















|Felirat|Megnevezés|Súgó feljléc cella|Hossz|Maszk/Típus|Adatelem az S_0151_28 - MenetvonalAdminFeladatokQuery szolgáltatás {Esemény} tömbben|
|---|---|---|---|---|---|
||mentéshez|--||rejtett oszlop||
|--|Az esemény foglalt vágányra/ról történt jelző (0/1)|-- --|--|-- rejtett oszlop|'FoglaltVagany'|
|--|Az esemény helytelen vágányra/ról történt jelző (0/1)|-- --|--|-- rejtett oszlop|'HelytelenVagany'|
|Mri. dátum|Az esemény menetrend szerinti dátuma|„Menetrend szerinti dátum” --|25|2024.09.09. date|’MriIdo’ dátum része|
|Mri. idő|Az esemény menetrend szerinti ideje|„Menetrend szerinti idő” --|5|23:59 time|’MriIdo’ idő része|
|Tény dátum|Az esemény rögzített dátuma|„Rögzített dátum” --|12|2024.09.09 date|’TenyIdo’ dátum része|
|Tény idő|Az esemény rögzített ideje|„Rögzített idő” --|5|23:59 time|’TenyIdo’ idő része|
|Eltérés [p]|Eltérés a menetrendszerinti időtől|„Eltérés a menetrendszerinti időtől” --|5|-- szám|’Elteres’|
|Ig.késés [p]|Igazolt késési perc|„Igazolt késési perc” --|5|-- szám|’IgazolandoKeses’|
|--|Főkód leírása a súgóhoz|-- --|--|-- rejtett oszlop|lásd lentebb|
|Főkód|Késési főkód, ha több van, akkor a legnagyobb perc értékű főkód kódja|-- lásd lentebb|3|„2S” szöveg|lásd lentebb|
|--|Főkódok és leírásuk a súgóhoz|--|--|--|lásd lentebb|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 301/526|

















|Felirat|Megnevezés|Súgó feljléc cella|Hossz|Maszk/Típus|Adatelem az S_0151_28 - MenetvonalAdminFeladatokQuery szolgáltatás {Esemény} tömbben|
|---|---|---|---|---|---|
|||--||rejtett oszlop||
|T|Több főkód van|-- lásd lentebb|1|„X” szöveg|lásd lentebb|
|--|A segédkód leírása a súgóhoz|-- --|--|-- rejtett oszlop|lásd lentebb|
|S. kód|A főkódhoz megadott segédkód|Segédkód lásd lentebb|3|„2S” szöveg|lásd lentebb|
|--|RDE azonosítók a súgóhoz|-- --|--|-- rejtett oszlop|lásd lentebb|
|RDE|A késéshez RDE van|„A késéshez RDE esemény tartozik” lásd lentebb|1|„X” szöveg|lásd lentebb|
|Indoklás|A főkódhoz megadott Indoklás --|-- --|25|szöveg|lásd lentebb|
|Rögzítő|Az esemény rögzítőjének PASS2 azonosítója|-- --|25|-- szöveg|’Rogzito’|

##### A grid fölött található a „Szűrés törlése” és a „Frissít” ikon ( ).

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 302/526|

##### Az S_0151_28 - MenetvonalAdminFeladatokQuery szolgáltatás {Esemény} tömb ’Igazolás’ eleméből származó késésigazolási adatelemek meghatározása:  A „ Főkód ” annál a sornál, ahol az {események} tömb „igazolások” listában több rekord is van, annak a rekordnak a ’FoKod’ értékét tartalmazza, ahol a ’IgKeses’ érték a legnagyobb . A cella súgóban a hozzá tartozó ’FoKodLeir’ van.  A „ T ” annál a sornál, ahol az {események} tömb „igazolások” listában több rekord is van egy „X” értéket tartalmaz, egyébként üres. A cella súgója az „igazolások” lista rekordajainak ’FoKod’ értékei összefűzve, pontosvesszővel és szóközzel elválasztva . Pl.: 10; 12; 28  Az „ S. kód ” annál a sornál, ahol az {események} tömb „igazolások” listában több rekord is van, annak a rekordnak a ’SegedKod’ értékét tartalmazza, amely megjelenik a „ Főkód ” cellában. A cella súgóban a hozzá tartozó ’SKodLeir’ van.  „ RDE ” annál a sornál, ahol az {események} tömb „igazolások” listában az ’RdeAzon’ ki van töltve, egy „ X ” jelenik meg. A cella súgóban az ’RdeAzon’ értékek jelennek meg összefűzve, pontosvesszővel és szóközzel elválasztva . Pl.: 20240604- 00 03; 20240604- 00 10 [#99774]  Az „ Indoklás ” annál a sornál, ahol az {események} tömb „igazolások” listában több rekord is van, annak a rekordnak a ’Indoklas’ értékét tartalmazza, amelynek a ’FoKod’ értéke megjelnítésre került. **„Feladat adatai” szerkesztő csoport ** **Beviteli/megjelenítő mezők, kiválasztó lista **













|Felirat|Kontrol típusa|Hossz|Maszk Típus|Adatelem forrása az „Adminisztratív feladatok” grid kiválasztott sor alapján|
|---|---|---|---|---|
|Szolgálati hely|Megjelenítő mező (jqx-input)|20|szöveg|’SzhKod” és ’SzhRovidNev’ összefűzve, szóközzel tagolva|
|Esemény|Megjelenítő mező (jqx-input)|5|szöveg|’EsemKod’|
|Vágány|Egyszeres kijelölésű választólista (jqxDropDownList)|--||S_0160_19 - SzolgHelyVaganyAdatQuery szolgáltatás által visszaadott adatok|
|Mr. sz-i idő|Megjelenítő mező (jqx-input)|--|szöveg|’MriIdo’|
|Tény idő|Megjelenítő mező (jqx-input)|--|szöveg|’TenyIdo’|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 303/526|















|Felirat|Kontrol típusa|Hossz|Maszk Típus|Adatelem forrása az „Adminisztratív feladatok” grid kiválasztott sor alapján|
|---|---|---|---|---|
|Eltérés|Megjelenítő mező (jqx-input)|--|szám|’Elteres’|
|Perc|szám beviteli mező (jqxNumberInput)|5|szám|üres|
|Főkód|Egyszeres kijelölésű választólista (jqxDropDownList)|--||S_0103_02 - KesesiKodokQuery szolgáltatás Főkódok tömb|
|Segéd kód|Egyszeres kijelölésű választólista (jqxDropDownList)|--||S_0103_02 - KesesiKodokQuery szolgáltatás segédkódok tömb a főkód függvényében|
|Vonat azonosító|Felirat|--|--|--|
|--|Választólista (jqxDropDownList)|--||K_007 - T_VSZR|
|--|Szöveges beviteli mező|5||--|
|--|Dátum kiválasztó|--|ÉÉÉÉ.HH.NN dátum|--|
|RDE azonosító|Választólista (jqxDropDownList)|--||S_0151_29 - ’EsemRdeAdatokQuery’ szolgáltatás|
|Választható indoklás|Választólista (jqxDropDownList)|--||S_0151_30 - ’KesesIndoklasQuery’ szolgáltatás|
|Indoklás|Szöveg beviteli mező (jqx-input)|250|szöveg|--|

##### **Nyomógombok a késésigazolás adatai grid fölött (jobb oldal) **  <Hozzáad>  <Módosít>  <Töröl> **Késésigazolás adatai grid **

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 304/526|

##### A grid fölött bal oldalon megjelenik az „Igazolandó késés” megjelenítő mező (’IgazolandoKeses’) és az „ Igazolt percek ” megjelenítő mező, ami a késésigazolások grid „Perc” oszlopában szereplő értékek ( ’IgKeses’ ) összegét jeleníti meg. **A grid oszlopai alapértelmezett sorrendben: **


















|Felirat|Megnevezés|Súgó feljléc cella|Hossz|Maszk/Típus|Adatelem az S_0151_28 - MenetvonalAdminFeladatokQuery szolgáltatás {Esemény} tömb ’Igazolás’ alapján|
|---|---|---|---|---|---|
|--|hiányos jelző|--|--|színezett cella|’HianyosJel’|
|Perc|Az iagzolt perc|-- --|5|99999 szám|’Igkeses’|
|Ok kód|Az igazolás fő és segéd kódja összefűzve|-- --|8|FF - SS szöveg|’Fokod’ és ’Segedkod’ összefűzve, kötőjellel elválasztva|
|Vonatazonosító|Vonatazonosító a számozási rendszerrel és az irányszámmal|-- --|20|56 99999-2 24/09/09 szöveg|’OkVonat’|
|RDE azonosító|A szolgálati hely statisztikai száma és rövid neve|-- --|20|ééééhhnn-xxx (pl.: 20200317-030) szöveg|’RdeAzono’|
|Indoklás|Az esemény leírása a súgóhoz|-- --|--|-- szöveg|’Indoklas’|
|Felhasználó|A késésigazolást rögzítő neve|-- --|20|-- szöveg|’Nev’|
|Módosítás ideje|A késésigazolás utolsó módosításának ideje|-- --|20|ÉÉÉ-HH-NN óó:pp:mm szöveg|’RogzIdo’|

##### **Nyomógomb ** <Mentés>




MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

MGM Részletterv

**2.9.3.2** **A vezérlők működése, összefüggések**

**Adminisztratív feladatok (nincs feliratozva) grid:**

- A grid **nem lapozható**, az oszlopok **szűrőzhető**, **rendezhetők**, szélességük és sorrendjük
**nem változtathatók** .

- A lista fölött a **„Szűrés törlése”** és a „ **Frissít** ” ikon jelenik meg.

- A grid „K” és „V” oszlopának szűrője:

- Ha egy olyan **sor** kerül **kiválasztásra**, ahol a **’Feladat’ = 1** (késésigazolás) **VAGY 3**
(késésigazolás és vágányadat pótlás):
`o` **Meghívásra** kerül az S_0103_02 - **KesesiKodokQuery** (Késési kódok lekérdezése)
(core.usp_0103_selT_KFKandT_KSK) szolgáltatás a kiválasztott sor adataival.
      - Bemenő adatok:

      - **’IdoszakKezdete’**       - az érvényességi időszak kezdete (DateTime) =
’MenetvonalAdminFeladatokQuery’ {esemény} tömb **’TenyIdo’**

      - **’IdoszakVege’**       - az érvényességi időszak vége (DateTime) =
’MenetvonalAdminFeladatokQuery’ {esemény} tömb **’TenyIdo’**
      - A visszakapott adatok alapján **feltöltésre** kerül a „Feladat adatai” csoport:

      - „ **Főkód** ” választólista a visszakapott { **főkód** } tömb ’MavKod’ és ’Nev’
adatelemeivel, szóközzel **elválasztva** és egy üres sorral, ahol a ’ UicKod ’ <>

’ ’ ”
NULL ÉS a MavKod <> „V0 .

      „ **Segédkód** ” választólista a visszakapott { **segédkód** } tömb ’Kod’ és ’Nev’
adatelemeivel és egy üres sorral.
`o` **Meghívásra** kerül a K_007_lang - Kódtábla lekérdezés (Vonatszámozási rendszerek

      - **VonatszamozasiRendszerkodokQuery** ). A „Vonatazonosító” számozási rendszer
(első) legördülőjének értékkészletét biztosítja.
      - Bemenő adatok:

      - ’KodTablaNev’ - Kódtábla neve = ’T_VSZR’

      - **’Ervenyesseg’**       - az érvényesség ideje =
’MenetvonalAdminFeladatokQuery’ {esemény} tömb ’ **TenyIdo’** (az
esemény ideje).
      - A visszakapott adatok alapján **feltöltésre** kerül a „Feladat adatai” csoport
„Vonatazonosító” csoport **számozási rendszer** választólistája a visszakapott
’k_kod’ adataival és egy **üres** sorral.
`o` **Meghívásra** kerül az S_0151_29 - **EsemRdeAdatokQuery** (eseményhez tartozó
RDE adatok lekérdezése), (usp_0202_selRDEAdatok) szolgáltatás.
      - **Bemenő** adatok:

      - **’JelentoPontId’** = ’MenetvonalAdminFeladatokQuery’ {esemény} tömb
**’SzhId’**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 306/526|



      - **’JelentoPontIndex’** = ’MenetvonalAdminFeladatokQuery’ {esemény}
tömb **’SzhIndex’**

      - **’VonatId’** = ’MenetvonalAdminFeladatokQuery’ {esemény} tömb **’VftId’**

      - **’RogzEsemId’** = ’MenetvonalAdminFeladatokQuery’ {esemény} tömb
**’EsemId’**

      - **’RogzEsemDatumIdo’** = ’MenetvonalAdminFeladatokQuery’ {esemény}
tömb **’TenyIdo’**
      - A **visszakapott** adatok alapján **feltöltésre** kerül a „Feladat adatai” csoport
„ **RDE azonosító** ” választólista a visszakapott ’RDEAzonosito’, ’RDEErvKezd’,
’RDEErvVeg’, ’ObjektumTipus’, ’KesesFokod’ és ’KesesSegedkod’
**összefűzött** és szóközzel **elválasztott** datelemeivel és egy **üres** sorral.

5 darab fix szélességű rész kerül összefűzésre, összesen 94 karakteren:

      - ’RDEAzonosito’ első 8 karaktere, utána egy kötőjel majd az utolsó 3
karakter, fix 15 karakteren.
Például: 20200606002 azonosítóból: ez lesz 20200606-002

      - ’RDEErvKezd’ dátum időből csak a „MM.dd. HH:MM” rész és egy kötőjel,
fix 15 karakteren

Például: 2020-06-06 00:01:00.000 dátum időből: „06-06 00:01 - ”
Ha üres, akkor is 15 karakter szélesen jelenik meg, üresen.

      - ’RDEErvVeg’ dátum időből csak a „MM.dd. HH:MM” rész, fix 15
karakteren

Például: 2020-06-06 00:01:00.000 dátum időből: „06-06 00:01”
Ha üres, akkor is 15 karakter szélesen jelenik meg, üresen.

      - ’ObjektumTipus’ fix 42 karakteren.
Ha üres, akkor is 42 karakter szélesen jelenik meg, üresen.

      - ’KesesFokod’ fix 5 karakteren.
Ha üres, akkor is 5 karakter szélesen jelenik meg, üresen.

      - ’KesesSegedkod’ fix 2 karakteren.
Ha üres, akkor is 5 karakter szélesen jelenik meg, üresen.

- Ha egy olyan **sor** kerül **kiválasztásra**, ahol a **’Feladat’ = 2** (vágányadat pótlás) **VAGY 3**
(késésésigazolás és vágányadat pótlás):
`o` **Meghívásra** kerül az S_0160_19 - **SzolgHelyVaganyAdatQuery** (szolgálati hely
vágányainak lekérdezése) (core.usp_0160_selSzolghelyVaganyLista)
      - **Bemenő** adatok:

      - **’SzolgHelyId’** = ’MenetvonalAdminFeladatokQuery’ {esemény} tömb
**’SzhId’**

      - **’Ervenyesseg’** ’MenetvonalAdminFeladatokQuery’ {esemény} tömb
**’TenyIdo’**

      Visszakapott adatok:

      - **’VaganyId’**       - a vágány belső azonosítója

      - **’VaganyMellekkod’**       - a vágány megnevezése.
      - A visszakapott adatok alapján **feltöltésre** kerül a „Feladat adatai” csoport
„ **Vágány** ” választólista a **’VaganyMellekkod’** adatokkal és egy **üres** sorral.

- **Sorkiválasztás** után **kitöltésre** kerülnek a „ **Feladat adatai** ” csoport adatelemei a
kiválasztott sor adataival:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 307/526|


`o` **„Szolgálati hely”** megjelenítő mező = ’SzhKod’ ÉS ’SzhRovidNev’ összefűzve,
szóközzel elválasztva.
`o` „ **Esemény** ” megjelenítő mező = ’EsemKod’
`o` „ **Vágány** ” választólistában a ’VgId’ = ’VaganyId’ sora a kiválasztott.
`o` „ **Mr.sz-i idő** ” megjelenítő mező = ’MriIdo’
`o` „ **Tény idő** ” megjelenítő mező = ’TenyIdo’
`o` „ **Eltérés** ” megjelenítő mező = ’Elteres’
`o` „ **Ig. késés** ” megjelenítő mező = ’IgKeses’
`o` „ **Perc** ” szám beviteli mező = üres
`o` „ **Főkód** ” választólista = üres sor a kiválasztott.
`o` „ **Segéd kód** ” választólista = üres sor a kiválsztott.
`o` „ **RDE azonosító** ” választólista = üres sor a kiválasztott.
`o` „ **Választható indoklás** ” választólista = üres a választólista.
`o` „ **Indoklás** ” szöveg beviteli mező= üres.
`o` „ **Igazolt percek** ” megjelenítő mező = a késésigazolások grid „Perc” (’IgKeses’)
értékeinek **összege** .
`o` A **késésigazolások** grid az ’Igazolas’ lista adatokkal. A gridben **nincs kiválasztott**

sor.

- Egy **új sor** kiválasztásakor, ha a „Feladat adatai” csoportban változás **történt**, akkor
**megerősítő** üzenetet ad:
ERR_02_17_DATA_LOST_CONFIRM „217032: A nem mentett adatok elvesznek.
Folytatja?”
`o` <Igen> esetén az adatok mentése nélkül frissül a „Feladat adatai” csoport az új
adatokkal.
`o` <Nem> esetén az előzőleg kiválasztott sorra kerül vissza a felső gridben a fókusz, a
„Feladat adatai” csoportban megadott adatok megmaradnak.

- A „ **Frissít** ” ikon kezelésére megerősítő üzenetet ad (függetlenül a „Fealadat adatai”
csoport elemeinek állapotától):
„217032: A nem mentett adatok elvesznek. Folytatja?”
`o` **Igen** esetén a hívó ablaktól kapott adatokkal meghívásra kerül a
**MenetvonalAdminFeladatokQuery** szolgáltatás (lásd „Ablak megnyitása” fejezet)
és a grid frissül, a "Feladat adatai" csoport beviteli mezői üresek lesznek (mint az
ablak megnyitásakor).
`o` **Nem** esetén nincs művelet, a fókusz marad az ablakon.

**„Feladat adatai” szerkesztő csoport**

- Az **adatelemek** a fent leírtak szerint vannak **kitöltve** .

- Az adatelemek jellemzői, összefüggéseik és működésük a ’Feladat’ típuástól függően.
`o` „ **Vágány** ” választólista:
      - Akkor **kezelhető**, ha a **’Feladat’** = **2** VAGY **3** . (A „Vg” oszlopban a kapcsoló
bekapcsolt.)

      - Ha **kezelhető** és a választólistának csak **egy** nem üres eleme van, akkor az a
**kiválasztott** .

      - Ha az **üres** sor a kiválasztott, akkor alatta „Kitöltése kötelező” **üzenet**
jelenik meg.

      - Ha a **’Feladat’** **= 2**, akkor **kitöltésekor** kezelhető lesz a < **Mentés**       nyomógomb.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 308/526|



     - Ha a **’Feladat’** **= 3 ÉS** a késésigazolások **grid** **tartalmaz** adatot, akkor
kezelhető lesz a < **Mentés**        - nyomógomb.
    - Ha a **’Feladat’ = 1**, akkor nem kezelhető, **readonly** .
`o` „ **Perc** ” pozitív, egész szám **beviteli** mező:
    - Akkor **kezelhető**, ha a **’Feladat’** = **1** VAGY **3** . (A „K” oszlopban a kapcsoló
bekapcsolt.)

    Ha a késésigazolások **grid üres**, akkor üres és **kötelező,** alatta „Kitöltése
**kötelező** ” üzenet jelenik meg.
    - Ha a késésigazolások grid nem üres **ÉS** az „Igazolandó késés” = „Igazolt perc”
ÉS nincs kijelölt sor, akkor nem kötelező, alatta nincs üzenet.
    - Ha a késésigazolások gridben **nincs kijelölt sor**, akkor **üres** és **kezelhető** .

    Ha a késésigazolások gridben **van kijelölt sor**, akkor a kijelölt sor „Perc”
( **’IgKeses’** ) értékkel kitöltött.
Ha a gridben a kijelölt **sornál** ez **üres**, akkor alatta „Kitöltése **kötelező** ” üzenet
jelenik meg, ha ez is üres.
`o` „ **Főkód** ” választólista:
    - Akkor **kezelhető**, ha a **’Feladat’** = **1** VAGY **3** . (A „K” oszlopban a kapcsoló
bekapcsolt.)
    - Ha a késésigazolások gridben **nincs kijelölt sor**, akkor az **üres** sor a kiválasztott.
Ha a „ **Perc** ” kitöltött, akkor alatta „Kitöltése **kötelező** ” üzenet jelenik meg.
    - Ha a késésigazolások gridben **van kijelölt sor**, akkor a kijelölt sor **’FoKodId’**
által meghatározott sor a kiválasztott.
    - Ha az „ **RDE azonosító** ” kitöltött, akkor az RDE rekordhoz tartozó
**’KesesFokod’** = **’FoKod’** sor a kiválasztott **ÉS** **nem** **módosítható** .

    - **Törlésekor** (üres sor kiválasztásakor) a **segédkód** **választólista** is **üres** értéket
vesz fel.

    - **Módosításakor**, megadásakor:

     - **Meghívásra** kerül az S_0151_30     - Késésindoklás lekérdezése
( **KesesIndoklasQuery** ) szolgáltatás.
 **Bemenő** adat a ’KesesKod’ = **’FoKod’**
 A **visszakapott** adatokkal feltöltésre kerül a **„Választható indoklás** ”

választólista (’Indoklas’) és egy **üres** sor.

     - A „ **Segédkód** ” választólista értékkészlete a kiválasztott **főkódhoz** tartozó
**’KesesiKodokQuery.KesesiSegedKodIdLista** ’ szerint kerül beállításra.

     - Ha a kiválasztott **főkód** **’FelelosCsoport’** = ’V’, akkor a „ **Segédkód** ”
választólistában az a sor lesz a kiválasztott, ahol **’Id’** = **’MegrSegedKod’** .

     - Ha az **’IndoklasJelzo’** = **1**, akkor az „ **Indoklás** ” mező kitöltése **kötelező**,
alatta „Kitöltése kötelező” üzenet jelenik meg.

     - Ha a kiválasztott **főkód ’VonatszamJelzo’ = 1,** akkor a **„Vonatszám** ”
adatcsoport kitöltése **kötelező**, alatta „Kitöltése kötelező” üzenet jelenik

meg **.**
`o` „ **Segédkód** ” választólista:
Akkor **kezelhető**, ha a választólista nem **üres** .
    - Ha a késésigazolások gridben **van kijelölt sor**, akkor a kijelölt sor **’SKodId’**
által meghatározott sor a kiválasztott.
    - Ha az „ **RDE azonosító** ” kitöltött, akkor az RDE rekordhoz tartozó
**’KesesSegedkod’** = **’SKodId’** sor a kiválasztott **ÉS** **nem** **módosítható** . Ha az

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 309/526|


RDE-hez nem tartozik segédkód, de a főkód ki van töltve, akkor üres és a főkód
szerint adható meg.
    - A „ **Főkód** ” kitöltésekor, módosításakor a kiválasztott **főkódhoz** tartozó
**’KesesiKodokQuery.KesesiSegedKodIdLista** ” szerint kerül beállításra az
**értékkészlete** .
    - Ha a „Főkód” „ **Segédkód** ” választólistája nem üres, akkor **kötelező** .
    - Ha a „Főkód” **’FelelosCsoport’** = ’V’, **ÉS** nincs kitöltve az RDE azonosító,
vagy ha ki van töltve, de nem tartozik hozzá segédkód, akkor a „ **Segédkód** ”
választólistában az a sor lesz a kiválasztott, ahol **’Id’** = **’MegrSegedKod’** .
`o` „Vonatazonosító” csoport
Akkor **kezelhető**, ha a **’Feladat’** = **1** VAGY **3** (a „K” oszlopban a kapcsoló
bekapcsolt) **ÉS** ha a „ **Főkód** ” mezőben olyan sor van kijelölve, ahol a
**’VonatszamJelzo’ = 1.** Ebben az esetben **kötelező**, ha üres, akkor alatta „Kitöltése
**kötelező** ” üzenet jelenik meg **.**
    - **Három** részből áll:

     - Számozási rendszer választólista:
Az értékkészlete **K_007_lang - T_VSZR**        - Vonatszámozási rendszerek
lekérdezése közös szolgáltatás által visszaadott ’Kod’. Nem kötelező.

     - **Vonatszám** szám beviteli mező:
Ha a többi adatelemből bármelyik meg van adva, akkor kötelező, alatta
„Kitöltése **kötelező** ” üzenet jelenik meg.

     - Vonatindulás **dátuma** dátumválasztó:
Ha a többi adatelemből bármelyik meg van adva, akkor kötelező, alatta
„Kitöltése **kötelező** ” üzenet jelenik meg.
    - Ha a késésigazolások gridben olyan sor van kiválasztva, ahol a
„Vonatazonosító” ki van töltve, akkor „Vonatazonosító” adatcsoport az ehhez
tartozó adatokkal kerül kitöltésre és módosíthatók:

     - számozási rendszer választólista = ’KesesVonatOrszagID’ által
meghatározott sor a kiválasztott.

     - vonatszám = ’KesesVonatSzam’

     - dátum = ’KesesVonatDatum’.

`o` " **RDE azonosító** ” választólista

Akkor **kezelhető**, ha a választólista nem **üres** .
    - Ha a késésigazolások gridben **van kijelölt sor**, akkor a kijelölt sor **’RdeAzon’** =
**’RDEAzonosito’** által meghatározott sor a kiválasztott. Módosítható.

    Kezelésekor a „Főkód” és a „Segédkód” választólistákban a kiválasztott
**’RDEAzonosito’** rekordhoz tartozó főkód ( **’KesesFokod’** ) és segédkód
( **’KesesSegedkod’** ) kerül beállításra.
    - Ha az **üres sor** kerül kiválasztásra, a „ **Főkód** ” és a „ **Segédkód** ” értéke nem
módosul, de **kezelhetővé** válnak.
`o` „Választható indoklás” választólista
    - Akkor **kezelhető**, ha a választólista nem **üres** .

    Ha a listában csak egy sor van, akkor az a kiválasztott és az „Indoklás” beviteli
mezőben is megjelenik.
`o` " **Indoklás** „ szöveges beviteli mező
    - Ha a „ **Főkód** ” meg van adva, akkor **kezelhető** .
    - Ha a kiválasztott „Főkód” sornál az **’IndoklasJelzo’** = TRUE (1), akkor
**kötelező** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 310/526|


`o` < **Hozzáad** - nyomógomb
    - Akkor **kezelhető**, ha a **’Feladat’** = **1** **VAGY** **3** (a „K” oszlopban a kapcsoló
bekapcsolt) **ÉS** a **kötelező** adatelemek (a **perc** ÉS a **főkód** és az összefüggések
szerinti további kötelező elemek) meg vannak **adva** (függetlenül attól, hogy
azok újak, vagy már a késésigazolások gridben kiválasztott sor alapján adottak
voltak).
    - **Kezelésekor** ellenőrzésre kerül, hogy az igazolt késési perc (’IgKeses’ a grid
sorainak összege) <= **’IgazolandoKeses’** .

     - Ha a **feltétel** **nem** **igaz**, akkor
’ERR_FOR00_0202_REG_DLY_MIN_TOO_MUCH’ „2011: Nem
igazolhat több percet, mint az igazolandó késés értéke” üzenetet ad pop-up
**hiba** üzenetben.

     - Ha a **feltétel igaz**, akkor a megadott adatok új sorban felvételre kerülnek a
gridbe, az „Igazolt perc” értéke **nő** a megadott „Perc” értékével. A
„Felhasználó” és a „Módosítás ideje” üres marad.
`o` < **Módosít** - nyomógomb
    - Akkor **kezelhető**, ha a ’Feladat’ = **1** VAGY **3** (a „K” oszlopban a kapcsoló
bekapcsolt) **ÉS** a **kötelező** adatelemek meg vannak **adva ÉS** a késésigazolások
gridben van **kiválasztott sor** .

    Ha a kiválasztott sornál minden adat pótolva lett, akkor az első cella színezése
megszűnik.
    - **Kezelésekor** ellenőrzésre kerül, hogy az igazolt késési perc (’IgKeses’ a grid
sorainak összege) <= **’IgazolandoKeses’** .

     - Ha a **feltétel** **nem** **igaz**, akkor mnemonik =
’ERR_FOR00_0202_REG_DLY_MIN_TOO_MUCH’ „2011: Nem
igazolhat több percet, mint az igazolandó késés értéke” üzenetet ad pop-up
**hiba** üzenetben.

     - Ha a **feltétel igaz**, akkor a kijelölt sor adatai módosulnak a gridben, az
„Igazolt perc” értéke **is módosul** a megadott „Perc” értékének megfelelően,
a sor ’HianyosJel’ = FALSE lesz, az első cella színezése megszűnik. A
„Felhasználó” és a „Módosítás ideje” nem módosul.
`o` < **Töröl** - nyomógomb
    - Akkor **kezelhető**, ha a ’Feladat’ = **1** **VAGY** **3** (a „K” oszlopban a kapcsoló
bekapcsolt).
    - **Kezelésére** a kijelölt sor és adatai **törlésre** kerülnek, **újra** hozzá nem adhatók,
csak **új adatbevitellel** . Az „Igazolt perc” értéke újraszámításra kerül. A törlésre
**figyelmeztetést nem** adunk.
`o` A késésigazolások grid **első cellája** sárga hátterű, ha a **’HianyosJel’** = True.
`o` **<Mentés>** nyomógomb
    - Akkor **kezelhető**, ha 2 és 3 feladat esetén a „ **Vágány** ” választólistában **változás**
történt.

    - **Kezelésére** ellenőrzésre kerül, hogy:

     - Minden igazolandó késés **megigazolt** -e: ’IgazolandoKeses’ = ’IgKeses’ (a
grid perc értékeinek összege).
Ha **nem**, akkor ’ERR_FOR00_0202_DLY_MIN_MUST_REG’ „2007: Az
állomási késés minden percét meg kell igazolni” hibaüzenetet ad.

     - 1 és 3 feladat esetén minden késésigazolás pótlási feladat teljeskörűen
megtörtént-e, azaz a grid minden sorában a ’HianyosJel’ = FALSE, akkor
megtörtént.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 311/526|


Ha **nem**, akkor „Hiányos késésigazolás nem lehet, pótolja!” hibaüzenetet ad.
    - **Meghívásra** kerül az S_0151_36 - **’MenetvonalAdminFeladatokCommand’**
(usp_0202_setVonat) szolgáltatás.
**Bemenő adatok:**

     - ’JelentoPontID’ = ’SzhId’

     - ’JelentoPontIndex’ = ’SzhIndex’

     - ’VonatID’ = ’VftId’

     - ’AktualisEsemenyID’ = ’EsemId’

     - ’UtolsoEsemenyID’ = NULL

     - ’RIDJel’ = 0

     - ’RkJel’ = 0

     - ’RogzEsemID’ = NULL

     - ’RogzEsemVaganyID’ = ’VgId’ ha van, adja mindig 2 és 3 feladat esetén
feltétlenül adja.

     - ’RogzEsemDatumIdo’ = NULL

     - ’RogzEsemElteres’ = ’Elteres’

     - ’RogzEsemIgKeses’ = ’IgazoltKeses’ - a késések gridben levő igazolt
percek összege. 2 és 3 feladat esetben is, ha van.

     - ’FoglaltVagany’ = ’FoglaltVagany’ (0/1)

     - ’HelytelenVagany’ = ’HelytelenVagany’ (0 /1)

     - ’MasPalyaudvar’ = 0

     - ’MasPalyaudvarKapcs’ = 0

     - ’MasPalya’ = 0

     - ’ElteroEsemOkID’ = NULL

     - ’ElteroIndoklas’ = N’ ’

     - ’KeszreJelTorles’ = 0

     - ’KeszreJelentTorlesMod’ = 0

     - ’OsszeallitasID’ = NULL.

     - ’FelhAzon’ = a felhasználó PASS2 azonosítója.

     - ’HivasMod’
 Ha a ’KesesIg’ = 1 **ÉS** a ’VgAdat’ = 0, akkor ’K’
 Ha a ’KesesIg’ = 0 **ÉS** a ’VgAdat’ = 1, akkor ’T’
 Ha a ’KesesIg’ = 1 **ÉS** a ’VgAdat’ = 1, akkor ’P’

     - ’VarhatoKeses’ = NULL

     - ’ElmaradtReszVegeID’ = NULL

     - ’UtolsoModDatumIdo’ = rendszeridő

     - ’VJNelkul’ = 0

     - ’SzemNelkul’ = 0

     - ’KesesiAdatok’ {xml} = a késésigazolások grid sorai:
Példa:

{KesesPerc="1" KesesFoKod="19" KesesFoKodID="103"
KesesAlKod="1F" KesesAlKodID="12" KesesIndoklas="teszt"

KesesSorIndex="0"}
Elemei:
 KesesPerc - kötelező. = Az igazoláshoz megadott perc értéke.
 KesesFoKod - kötelező. = Az igazolás ’MavKod’ értéke.
 KesesFoKodID - kötelező. = Az igazolás ’Id’ értéke.
 KesesAlKod - ha nincs, akkor üres string, kötelező. = Az igazolás

segédkód ’Kod’ értéke.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 312/526|


 KesesAlKodID - nem kötelező. = Az igazolás segédkód ’Id’ értéke.
 KesesIndoklas - nem kötelező. = Az igazoláshoz megadott szöveges

„Indiklás”.
 KesesVonatOrszagID - nem kötelező. = Az igazoláshoz megadott

vonatazonosító országkód ’Id’ értéke. Ha az okozó vonatszám nem üres
és a számozási rendszer választólistában üres sor a kiválasztott, akkor
’1’ érték, egyébként a választólista ’BelsoAzonosito’ adata.
 KesesVonatSzam - nem kötelező. = Az igazoláshoz megadott

vonatazonosító „Vonatszám” értéke.
 KesesVonatDatum - nem kötelező. = Az igazoláshoz megadott

vonatazonosító dátum értéke.
 KesesRdeAzon - nem kötelező. = Az igazoláshoz megadott

’RDEAzonosíto’ értéke.

 KesesSorIndex - kötelező = 0.

      - ’epaiParamXmlDoc’
     - A szolgáltatás **sikeres** lefutása után:

      - ’Adatok mentése sikeres!’ pop-up információs üzenetet ad.

      - Az üzenet lekezelése után az **ablak frissül**, azaz meghívásra kerül a
’MenetvonalAdminFeladatokQuery’ szolgáltatás, a vezérlés **marad** az
ablakon. A hívó ablaknak értesítés kerül átadásra, hogy ott is frissíteni kell
az adatokat.

      - Ha ’MenetvonalAdminFeladatokQuery’ szolgáltatás az esemény tömbben
nem ad vissza adatot az ablak bezáródik.

**Hívott szolgáltatások, ablakok**







|Vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás azonosító rövid leírása|
|---|---|---|
|Ablak megnyitás és a Frissít ikon kezelése|--|S_0151_28 - MenetvonalAdminFeladatokQuery Menetvonal szintű adminisztrációs feladatok lekérdezése|
|Ablak megnyitás|--|K_007_lang - T_VSZR Vonatszámozási rendszerek lekérdezése|
|Adminisztratív feladatok grid sorválasztás|--|S_0160_19 - SzolgHelyVaganyAdatQuery Szolgálati hely vágányainak lekérdezése|
|Adminisztratív feladatok grid sorválasztás|--|S_0151_29 - EsemRdeAdatokQuery Eseményhez tartozó RDE adatok lekérdezése|
|Adminisztratív feladatok grid sorválasztás|--|S_0103_02 - KesesiKodokQuery Késési kódok listája lekérdezése|
|Feladat adatai csoportban „Főkód” választás|--|S_0151_30 - KesesIndoklasQuery Késésindoklás lekérdezése|
|<Mentés> nyomógomb|--|S_0151_36 - VonatEsemenyCommand Vonatesemény mentése (0202_setVonat)|


**Rendszerüzenetek**




|Ellenőrzések leírása (HA)|Üzenet (AKKOR) Mnemonik Szöveg|Forrás|Üzenet típusa|
|---|---|---|---|
|<Ment> kezelés|'ERR_FOR00_0202_RESOURCE_LOCKED'|TE|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 313/526|









|Ellenőrzések leírása (HA)|Üzenet (AKKOR) Mnemonik Szöveg|Forrás|Üzenet típusa|
|---|---|---|---|
|A vonat adatok megváltoztak|„2032. Az adatokat más felhasználó módosítja.”|||
|<Ment> kezelés Az ’fn_mod_ido’ paraméterrel korábbi a menetvonal utolsó eseményideje|'ERR_FOR00_0202_TRN_EVT_CANNOT_ BE_DELETED' „2213: Adatmódosítási határidő lejárt!”|TE|Hiba|
|<Ment> kezelés Az okozó vonat nem létezik.|'ERR_FOR00_0202_DLY_TRN_NOT_EXIS TS' „2225: A késésigazoláshoz megadott vonatazonosító nem létezik”|TE|Hiba|
|<Ment> kezelés A megadott segédkód nem a főkódhoz tartozik.|'ERR_FOR00_0202_INVALID_DELAY_CO DE_SUBCODE' „2235: Ehhez a főkódhoz ez a segédkód nem adható meg”|TE|Hiba|
|<Ment> kezelés A felhasználó V0 kódot adott meg, vagy azt nem módosította.|'UC_01_03_ERR_DATA_V0' "13018 V0 késési ok kód felhasználó által nem rögzíthető.”|TE|Hiba|
|Egy új sor kiválasztásakor, ha a „Feladat adatai” csoportban változás történt A frissít ikon kezelésekor|’ERR_02_17_DATA_LOST_CONFIRM’ „217032: A nem mentett adatok elvesznek. Folytatja?”|Kliens|Megerősítő|


**Kódtáblák, választási listák**

Tárolt eljárások adják vissza.

**Rendszerparaméterek**

Nincsenek.
##### 2.10 [#88980 ] A_0151_10 – Csatlakozásra várás ablak

**Ablak/lap feladatai**

A kiválasztott szolgálati helyen csatlakozó, egymásra váró vonatok kapcsolatának és
várakozási idejének a beállítására, illetve megjelenítésére szolgál.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 314/526|


**Ablak/lap megjelenése**

**Ablak/lap működése**

**2.10.3.1** **Ablak elérése, betöltése**

Az ablak minden esetben új lapon (külön ablakban) nyílik meg, a hívó ablakra visszatérés
nincs, viszont az adatok mentésekor az ablak bezárása után az Akerül. _ 0151_01 ablak frissítésre

Az A _ 0151 _ 01 ablaktól minden működési módban és esetben a következő adatokat kapja a
kliens program:

- Ábra belső azonosítója (AbraId)

- A kiválasztott szolgálati hely vagy a már meglévő csatlakozás helyének belső azonosítója

(SzhId)

- A kiválasztott szolgálati hely vagy a már meglévő csatlakozás helyének hosszú neve

(SzhHosszuNev)

- A kiválasztott csatlakozás belső azonosítója (CsatlakozasId) (Már meglévő csatlakozás

kiválasztásakor kitöltött, egyébként NULL)

Az ablak elérése a következő helyekről és módon lehetséges:

**gombbal kattintva**, majd a **Csatlakozásra várás szerkesztése ikont ha** **s** **z** **ná** **l** **v** **a**
**szerkesztés üzemmódban** nyílik meg.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 315/526|


Irányítói üzemmódban, ha az ábrát a f elha s ználó szerkesztésre lefoglalta (ami csak
időhenger üzemmódban lehetséges) és a C satlak ozásra várás megjelenítése ikon
bekapcsolt állapotú, akkor egy szolgálati hel y nevére bal egér gombbal kattintva
feléled az Csatlakozásra várás szerk es zt ése i k on.
Az ikon használatakor szerkesztés mvárás ablak, ahol ilyenkor a felhasználóna ódban k ny l ehe ílitő k meg az Asége van a kiválasztott szolgálati _ 0151 _ 10 – Csatlakozásra
helyhez új csatlakozásra várás rögzí tésér e.
Ebben az esetben az ablak nyitásakor a k liens pr ogram a következő műveleteket végzi:

    - A ’ menetv_ervv_utk ’ kóddal és az aktuális idővel meghívja a

**Rendszerparaméter értékek kiolvasását végző szolgáltatást**
**(RendszerParamErtekekQuery)** .

    - Az A _ 0151 _ 01 ablaktól kapott szolgálati hely belső azonosítójával meghívja

az **S_0151_51** **–** **Csatlakozó vonatok keresése** (CsatlakozoVonatokQuer y )
szolgáltatást.
A kliens a szolgáltatástól kapott vonatok közül azokkal, amelyeknél az
Előrejelzett érkezési esemény mgm       - es belső azonosítója (ErkEsemId) k i t ö l t ö t t
feltölti a Bevárandó vonatoknál a Vonatazonosító (autocomplete) bevit eli
mező értékkészletét. Azokkal a vonatokkal pedig, amelyeknél az Előrej elzet t
indulási esemény mgm      - es belső azonosítója (IndEsemId) kitöltött, feltöl t i a
Várakozó vonatoknál a Vonatazonosító (autocomplete) beviteli mező
értékkészletét. (Lehetnek olyan vonatok, amelyek mindkét Vonatazono sí t ó
értékkészletébe bekerülnek).

    - Az A _ 0151 _ 01 ablaktól kapott szolgálati hely hosszú nevét, mint Csatlakozó

állomást megjeleniti az ablakon

    - A Vonatazonosító beviteli mezőket és a grideket üresen hagyja.

    - A Csatlakozás típusásánál az Utas kapcsolót bekapcsolja

    - A Csatlakozási idő beviteli mezőben 5 percet kínál fel.

**csatlakozásra várást jelképező** **ikonra bal vagy jobb egér gomb** **ba** **l** **k** **a** **t** **ti** **nt** v a,
majd a **Csatlakozásra várás szerkesztése ikont használva,** **szerkeszt** **és**
**üzemmódban** nyílik meg.
Irányítói üzemmódban, ha az ábrát a f elha s ználó szerkesztésre lefoglalta (ami csak
időhenger üzemmódban lehetséges) és a C satlak ozásra várás megjelenítése ikon
bekapcsolt állapotú, akkor a grafiko non m eg jelenő egy csatlakozásra várást jelképező

ikonra bal vagy jobb egér gom bbal kat tintv a, feléled az Csatlakozásra várás
szerkesztése ikon.
A Csatlakozásra várás szerkesztése ikon használatakor szerkesztés módban ny í l i k m eg
az A_0151_10 – Csatlakozásra várás ablak, ahol ilyenkor a felhasználónak l eh et ő s é g e
van a kiválasztott csatlakozás szerkesztésére.
Ebben az esetben az ablak nyitásakor a k liens pr ogram a következő műveleteketket
végzi:

    - A ’ menetv_ervv_utk ’ kóddal és az aktuális idővel meghívja a

**Rendszerparaméter értékek kiolvasását végző szolgáltatást**
**(RendszerParamErtekekQuery)** .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 316/526|



     - Az A _ 0151 _ 01 ablaktól kapott Csatlakozás belső azonosítóval (CsatlakozasId)

meghívja az **S_0151_50** **–** **Csatlakozás adatainak lekérdezése**
(CsatlakozasAdatokQuery) szolgáltatást.
A kliens a szolgáltatástól kapott Csatlakozó menetvonalak listából azokn ak a
vonatoknak az adataival, amelyeknél a Várakozás típusa ’ B ’ – Beváran d ó
vonat, feltölti a Bevárandó vonatok gridet, amelyeknél pedig a Várakoz ás
típusa ’ V ’ – Várakozó vonat, feltölti a Várakozó vonatok gridet.

     - Az A_0151_01 ablaktól kapott szolgálati hely belső azonosítójával meghívja

az **S_0151_51** **–** **Csatlakozó vonatok keresése** (CsatlakozoVonatokQuer y )
szolgáltatást.
A kliens a szolgáltatástól kapott vonatok közül azokkal, amelyeknél az
Előrejelzett érkezési esemény mgm        - es belső azonosítója (ErkEsemId) k i t ö l t ö t t
feltölti a Bevárandó vonatoknál a Vonatazonosító (autocomplete) bevit eli
mező értékkészletét. Azokkal a vonatokkal pedig, amelyeknél az Előrej elzet t
indulási esemény mgm       - es belső azonosítója (IndEsemId) kitöltött, feltöl t i a
Várakozó vonatoknál a Vonatazonosító (autocomplete) beviteli mező
értékkészletét. (Lehetnek olyan vonatok, amelyek mindkét Vonatazono sí t ó
értékkészletébe bekerülnek).

     - Az A _ 0151 _ 01 ablaktól kapott szolgálati hely hosszú nevét, mint Csatlakozó

állomást megjeleniti az ablakon

     - A Vonatazonosító beviteli mezőket üresen hagyja.

     - A Csatlakozás típusásánál az Utas kapcsolót bekapcsolja.

     - A Csatlakozási idő beviteli mezőben 5 percet kínál fel.

3. **Az A_0151_01 ablakon megjelenítő üzem módban** a grafikonon m eg j ele n ő

**csatlakozásra várást jelképező** **ikonra jobb egér gombbal kattin** **tv** **a** **,**
**megjelenítés üzemmódban** nyílik meg.
Megjelenítő üzemmódban az A _ 0151 _ 01 ablakon, ha a Csatlakozásra várás
megjelenítése ikon bekapcsolt állapotú, akkor a grafikonon megjelenő e g y

csatlakozásra várást jelképező ikonra jobb egér gombbal kattintva, a k i v álaszto t t
csatlakozás adataival megjelenítés üzemmódban nyílik meg az AEbben az esetben az ablak nyitásakor a kliens program a következő műv _ 0151 _elete 1 0 abk laet v k . ég zi:

     - Az A _ 0151 _ 01 ablaktól kapott Csatlakozás belső azonosítóval (CsatlakozasId)

meghívja az **S_0151_50** **–** **Csatlakozás adatainak lekérdezése**
(CsatlakozasAdatokQuery) szolgáltatást.
A kliens a szolgáltatástól kapott Csatlakozó menetvonalak listából azok n ak a
vonatoknak az adataival, amelyeknél a Várakozás típusa ’ B ’ – Beváran d ó
vonat, feltölti a Bevárandó vonatok gridet, amelyeknél pedig a Várakoz ás
típusa ’ V ’ – Várakozó vonat, feltölti a Várakozó vonatok gridet.

     - Az A _ 0151 _ 01 ablaktól kapott szolgálati hely hosszú nevét, mint Csatlakozó

állomást megjeleniti az ablakon

     - A beviteli mezőket, kapcsolókat üresen hagyja az ablakon.

**2.10.3.2** **Ablak felépítése/működése**

***Fejléc***

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 317/526|


Az ablak fejlécében fixen megjelenik az „IÜR - A_0151_10 – CSATLAKOZÁSRA VÁRÁS ”
szöveg és mögötte az üzemmódnak megfelelő „MEGJELENÍTÉS ” vagy „SZERKESZTÉS ”
felirat.

pl: „IÜR - A_0151_10 – CSATLAKOZÁSRA VÁRÁS - MEGJELENÍTÉS ”

***Csatlakozás fejadatai***

Az ablak felső részén találhatók a Csatlakozásra várás fejadatai:

- **Csatlakozó állomás** : Az adott csatlakozásra várás helyének hosszú nevét megjelenítő

mező, amiben az A _ 0151 _ 10 ablaktól kapott szolgálati hely h o s s zú nev ét
(SzhHosszuNev) jeleníti meg a program minden műkődési módban.

***Bevárandó vonatok***

Az ablak bal oldalán található a Bevárandó vonatok csoport, ami a csatlakozás során
bevárandó vonatok megjelenítésére, kezelésére szolgál.

A Bevárandó vonatok csoportban található elemek:

- **Vonatazonosító** : beviteli mező kiválasztás funkcióval (JqxComboBox).

A mezőben egy karakter begépelése után válik láthatóvá a lista, m ely b en a m eg ad o tt
karaktereket tartalmazó vonatazonosítók jelennek meg. A mezőben a z ab l ak ny i t ásak or
meghívott **S_0151_51** **–** **Csatlakozó vonatok keresése (Csatlako** **zo** **V** **ona** **tok** **Q** **uery** **)**
szolgáltatás által visszaadott, azon vonatok vonatazonosítói (Vona tAzo n ) (S zámozási
rendszer kódja (55   - t nem kell kiírni)+ ’ ’ +Vonatszám irányszámmal + ’ / ’ +v o n at i n d u l ási
dátuma (éééé.hh.nn)) között lehet keresni, amelyeknél az Előrejelzett érk ezési es em én y

      mgm es belső azonosítója (ErkEsemId) kitöltött.

Megjelenítés üzemmódban nem írható a mező.

- **<Hozzáad> nyomógomb**, amivel bevárandó vonatot lehet hozzáadni a csatlakozáshoz.

A nyomógomb csak Szerkesztés üzemmódban kezelhető.

A nyomógomb használatakor a következőket ellenőrzéseket végzi a prog ram:

`o` Ha a felette lévő Vonatazonosító mező üres, akkor a mező alat t a k l i en s pr o g r a m

hibaüzenetet ad.

`o` Ha a felette lévő Vonatazonosító mezőben megadott adat nem szerep el a m ező

értékkészletében, akkor a mező alatt a kliens program hibaüzenetet ad.

`o` Ha a felette lévő Vonatazonosító mezőben megadott vonat már szer ep el a Bev ár an d ó

vagy a Várakozó vonatok gridben, akkor hibát ad.

Ha nem volt hiba, akkor a megadott vonatnál, az S _ 0151 _ 51 sz o l g ált atást ó l k ap o t t
Előrejelzett érkezési esemény mgm  - es belső azonosítójával (ErkEsem Id ) és a Vo n at
azonosítójával (VonatAzon), meghívja a **S0151_52** **–** **Csatlakozó** **v** **o** **na** **t** **ese** **mény**
**adatainak lekérdezése (CsatlakozoVonatEsemenyQuery)** szolgáltatá st .

Ha az S _ 0151 _ 52 szolgáltatás hibát adott, akkor azt megjeleníti.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 318/526|


Ha az S _ 0151 _ 52 szolgáltatás nem adott vissza hibát, akkor a sz o lg ált atást ó l k ap o t t
adatokkal a kliens program elhelyezi a vonatot a Bevárandó vo nato k g r i d b e és a
Vonatazonosító beviteli mezőt kiüríti.

- **Bevárandó vonatok grid**

Nem lapozható grid, ami a csatlakozás során bevárandó vonatokat tarta lm azza.
A grid magassága maximum 10 sor lehet, ennél több sor esetén megjele n ik a f üg g ő l eg es
gördítő sáv.
A gridben a sorok átrendezhetők, de az oszlopok nem. Alapértelmezett en a Várh ató
érkezési idő szerinti sorrendben szerepelnek benne a vonatok.
A gridben csak egy sor jelölhető ki. Egy sor kiválasztásakor az adott sor b an l évő v o nat
azonosítója a grid feletti Vonatazonosító mezőbe kerül. A sor kijelölésé n ek
megszüntetésekor a Vonatazonosító mező kiürül.
Az ablak betöltésekor a klien s program, az **S_0151_50** **–** **Csatlakozás** **a** **dat** **a** **i** **nak**
**lekérdezése** (CsatlakozasAdatokQuery) szolgáltatástól, kapott adatok a lapj án tö l t i f el a
gridet. A kapott Csatlakozó menetvonalak közül azokat helyezi a gridb e, am ely ek nél a
Várakozás típusa ’ B ’ – Bevárandó vonat.
A Várható érkezési idő oszlopban az adatokat a következő módon színezi:

    - Azoknál a soroknál, amelyeknél az S_0151_50 – Csatlakozás adata in a k

lekérdezése (CsatlakozasAdatokQuery) szolgáltatástól, kapott Szín (Sz in ) mező
értéke ’ T ’- Tény, félkövér módon, nappali üzemmód esetén fekete, éjsz ak ai
üzemmód esetén pedig fehér színnel írja ki az érkezési időt

    - A többi sorban pedig dőlt módon kék színnel írja ki az érkezési időt .

Szerkesztés üzemmódban a sorok elején található ikon megnyomásá v al l eh et v o nato t

eltávolítani gridből. A ikon csak azoknál a soroknál jelenik meg, am ely ek nél S zín
(Szin) mező értéke üres.

A ikon használatakor a program megerősítést kér a folytatáshoz.
A megerősítő üzenetre adott igenlő válasz esetén törli a vonatot a Bevár an d ó v o n atok
gridből.

Megjelenítés üzemmódban a ikonok nem láthatók.

***Várakozó vonatok***

Az ablak jobb oldalán található a Várakozó vonatok csoport, ami egy csatlakozáson belül a
várakozó vonatok megjelenítésére, kezelésére szolgál.

A Várakozó vonatok csoportban található elemek:

- **Vonatazonosító** : beviteli mező kiválasztás funkcióval (JqxComboBox).

A mezőben egy karakter begépelése után válik láthatóvá a lista, m ely b en a m eg ad o tt
karaktereket tartalmazó vonatazonosítók jelennek meg. A mezőben a z ab l ak ny i t ásak or
meghívott **S_0151_51** **–** **Csatlakozó vonatok keresése (Csatlako** **zo** **V** **ona** **tok** **Q** **uery** **)**
szolgáltatás által visszaadott, azon vonatok vonatazonosítói (Vona tAzo n ) (S zámozási
rendszer kódja (55   - t nem kell kiírni)+ ’ ’ +Vonatszám irányszámmal + ’ / ’ +v o n at i n d u l ási

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 319/526|


dátuma (éééé.hh.nn)) között lehet keresni, amelyeknél az Előrejelzet t i n d u l ási esem ény

      mgm es belső azonosítója (IndEsemId) kitöltött.

Megjelenítés üzemmódban nem írható a mező.

- **Csatlakozás típusa:** a következő kapcsolókból áll

    - **Utas**

    - **Jármű**

    - **Vonatszemélyzet**

Szerkesztés üzemmódban mindhárom kapcsoló, minden várakozó v o nat n ál, szabad o n
állítható. Egy vonatnál egyszerre több kapcsoló is bekapcsolható. Ala p ért elmezés szer i n t
az Utas kapcsoló bekapcsolt és a többi kapcsoló kikapcsolt. Az abl a k ny i t ásak or és a
gridhez egy sor hozzáadása után az alapértelmezett értékeket állítja be a p r o g ram.

Megjelenítés üzemmódban a kapcsolók nem kezelhetők.

- **Csatlakozási idő:** Várakozó vonatonként a csatlakozási idő megadására szolgáló beviteli

mező.

Szerkesztő üzemmódban írható. Alapértelmezett érték a mezőben 5 perc. Az ab la k
nyitásakor és a gridhez egy sor hozzáadása után az alapértelmezett ért ék et f elk í n álj a a
program. A felkínált érték szabadon módosítható. 0   - nál kisebb érték n em ad h ató m eg a
mezőben.

Megjelenítés üzemmódban nem írható a mező.

- **<Hozzáad> nyomógomb**, amivel várakozó vonatot lehet hozzáadni a csatlakozáshoz.

A nyomógomb csak Szerkesztés üzemmódban kezelhető.

A nyomógomb használatakor a következő ellenörzéseket végzi a program :

`o` Ha a felette lévő Vonatazonosító mező üres, akkor a mező alat t a k l i en s pr o g r a m

hibaüzenetet ad.

`o` Ha a felette lévő Vonatazonosító mezőben megadott adat nem szerep el a m ező

értékkészletében, akkor a mező alatt a kliens program hibaüzenetet ad.

`o` Ha a felette lévő Vonatazonosító mezőben megadott vonat már szer ep el a Bev ár an d ó

vagy a Várakozó vonatok gridben, akkor hibát ad.

`o` Ha a csatlakozás típusánál minden kapcsoló kikapcsolt, akkor hibát j elez .

`o` Ha a csatlakozási idő beviteli mező üres, vagy értéke 0  - nál kisebb, v ag y nag y o b b mi n t

a Menetvonal érvényesség vége útközbeni vonatnál (óra) (men etv _ erv v _ u t k)
rendszerparaméter értéke percbe átszámolva, akkor a kliens program hibát j elez.

A hibaüzenetben {0}: a Menetvo nal ér vény esség vége útközbeni vonatnál (óra)
(menetv_ervv_utk) rendszerparamét er ér ték e percbe átszámolva.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 320/526|


Ha nem volt hiba, akkor a megadott vonatnál, az S _ 0151 _ 51 sz o l g ált atást ó l k ap o t t
Előrejelzett indulási esemény mgm  - es belső azonosítójával (IndEs em I d) és a Vo n at
azonosítójával (VonatAzon), meghívja a _ **S0151_52** **–** **Csatlakozó** **v** **o** **na** **t** **es** **e** **mény**
**adatainak lekérdezése (CsatlakozoVonatEsemenyQuery)** szolgáltatá st .

Ha az S _ 0151 _ 52 szolgáltatás hibát adott, akkor azt megjeleníti.

Ha az S _ 0151 _ 52 szolgáltatás nem adott vissza hibát, akkor a k l i en s pr og r am a
következőket végzi:

    - A vonatot a megadott adatokkal és a szolgáltatástól kapott adat o k k al eg y ü t t

elhelyezi a Várakozó vonatok gridbe.

A csatlakozás típusánál a bekapcsolt kapcsolókhoz tartozó értékeket öszzef ű zv e
helyezi a Típus oszlopba. Pl. : „UJV ”, ha az összes kapcsoló bekapcsol t .

” – ” – ” –
(„U Utas, „J Jármű, „V Vonatszemélyzet)

    - A beviteli mezőknél alapértelmezett értékeket állít be:

       - A Vonatazonosító beviteli mezőt kiüríti

       - A Csatlakozás tipusánál az Utas kapcsolót bekapcsolja, a többi kapcsolót

kikapcsolja

       - A Csatlakozási idő beviteli mezőbe 5 percet kínál fel.

- **<Módosít> nyomógomb**

A <Módosít> nyomógomb akkor használható, ha van kiválasztott sor a g r i d b en és a
panelen változott a Csatlakozás típusa vagy a Csatlakozási idő.
A nyomógomb használatakor a következőket ellenőrzéseket végzi a kli en s pr o g r am

`o` Ha a felette lévő Vonatazonosító mező üres, akkor a mező alat t a k l i en s pr o g r a m

hibaüzenetet ad.

`o` Ha a felette lévő Vonatazonosító mezőben lévő azonosító nem eg y ezik m eg a

kiválasztott sorban lévő Vonatazonosítóval, akkor a kliens program hib át ad .

`o` Ha a csatlakozás típusánál minden kapcsoló kikapcsolt, akkor hibát j elez .

`o` Ha a csatlakozási idő beviteli mező üres, vagy értéke 0  - nál kisebb, v ag y nag y o b b mi n t

a Menetvonal érvényesség vége útközbeni vonatnál (óra) (men etv _ erv v _ u t k)
rendszerparaméter értéke percbe átszámolva, akkor a kliens program hibát j elez .

A hibaüzenetben {0}: a Menetvo nal ér vény esség vége útközbeni vonatnál (óra)
(menetv_ervv_utk) rendszerparamét er ér ték e percbe átszámolva.

Ha nem volt hiba, akkor a kliens program a megadott adatokkal felülírj a a v o n at ad at ait a
Várakozó vonatok gridben. A csatlakozás típusánál a bekapcsolt ka p csol ó k h o z t art o zó
értékeket öszzefűzve helyezi a Típus oszlopba. Pl. : „UJV ”, ha a z ös s zes k ap cso l ó

” – ” – ” –
bekapcsolt. („U Utas, „J Jármű, „V Vonatszemélyzet)

- **Várakozó vonatok grid**

Nem lapozható grid, ami a csatlakozásnál várakozó vonatokat tartalmazza.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 321/526|


A grid magassága maximum 10 sor lehet, ennél több sor esetén megjele n ik a f üg g ő l eg es
gördítő sáv.
A gridben a sorok átrendezhetők, de az oszlopok nem. Alapértelmezett en a In d u l ási i d ő
szerinti sorrendben szerepelnek benne a vonatok.
A gridben csak egy sor jelölhető ki. Egy sor kiválasztásakor az adott sor b an l évő v o nat
adatai a grid feletti beviteli mezőkbe kerülnek.
Egy sor kijelölésének megszüntetésekor a grid feletti mezőket alapértelm ezet t ál l ap o t b a
helyezi a kliens program :

    - A Vonatazonosító beviteli mezőt kiüríti

    - A Csatlakozás tipusánál az Utas kapcsolót bekapcsolja, a tö b b i k ap cso l ó t

kikapcsolja

    - A Csatlakozási idő beviteli mezőbe 5 percet kínál fel.

Az ablak betöltésekor a klien s program, az **S_0151_50** **–** **Csatlakozás** **a** **dat** **a** **i** **nak**
**lekérdezése** (CsatlakozasAdatokQuery) szolgáltatástól, kapott adatok a lapj án tö l t i f el a
gridet. A kapott Csatlakozó menetvonalak közül azokat helyezi a gridb e, am ely ek nél a
Várakozás típusa ’ V ’ – Várakozó vonat.
Az Indulási idő oszlopban az adatokat a következő módon színezi:

    - Azoknál a soroknál, amelyeknél az Slekérdezése (CsatlakozasAdatokQuery) szolgáltatástól, kapott Szín (Sz _ 0151 _ 50 – Csatlakozás adata in a k in ) mező

értéke ’ T ’- Tény, félkövér módon, nappali üzemmód esetén fekete, éjszak ai
üzemmód esetén pedig fehér színnel írja ki az indulási időt

    - A többi sorban pedig dőlt módon kék színnel írja ki az indulási időt .

Szerkesztés üzemmódban a sorok elején található található ikon me g ny omás áv al l eh et

vonatot eltávolítani gridből. A ikon csak azoknál a soroknál jelenik m eg, am ely ek nél a
Szín (Szin) mező értéke üres.

A ikon használatakor a program megerősítést kér a folytatáshoz.
A megerősítő üzenetre adott igenlő válasz esetén törli a vonatot a Várak o zó v o n atok
gridből.

Megjelenítés üzemmódban a ikonok nem láthatók.

***<Ment> nyomógomb***

A <Ment> nyomógomb csak szerkesztés üzemmódban kezelhető, ha az ablak megnyitása óta
változás történt valamelyik grid adataiban.

A nyomógomb használatakor a kliens program a következő ellenőrzéseket végzi:

  - Ha a Bevárandó vonatok grid üres, akkor hibát ad.

  - Ha a Várakozó vonatok grid üres, akkor hibát ad.

Ha az ellenőrzések során nem talált hibát, akkor meghívja az **S_0151_53** **–** **Csatlakozás**
**mentése (CsatlakozasMentesCommand)** szolgáltatást a következő adatokkal:

  - Ábra belső azonosítója (AbraId): A felhasználó által szerkesztésre l ef og l alt áb ra bels ő

azonosítója

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 322/526|



 - Bejelentkezett felhasználó azonosítója (Pass2UserId)

 - Csatlakozás belső azonosító (CsatlakozasId): S_0151_50 szolgáltat á s ált al v i s s zaad o tt

azonosító. Új csatlakozásnál NULL

 - Csatlakozás utolsó módosításának ideje (UtolsoModIdo): S_01 5 1 _ 5 0 szo lg ált atás

által visszaadott. Új csatlakozásnál NULL

 - Csatlakozó állomás belső azonosítója (CsatlSzhId): A(SzhId) _ 0151 _ 01 ab la k t ó l k ap o t t

 - Csatlakozó menetvonalak lista (A bevárandó és a várakozó vonato k g r i d ben s ze rep l ő

menetvonalak adatait is elhelyezi a listában)

`o` Működési mód (MukodesiMod) ( ’ U ’- Új, ’ M ’- Módosítás, ’ T ’- Törlés, ’ ’- Nincs

változás ):

        - ” –        „U Új Az ablak megnyitása óta a gridekbe újonnan felvett soroknál

(Ezeknél a Csatlakozó vonat belső azonosítója (CsatlVonId) még üres)

        - „M ” – Módosítás        - Azoknál a soroknál, amelyeknek a tartalma

változott az ablak megnyitása óta

        - „T ” – Törlés        - Azoknál a törölt soroknál, amelyek az ablak

megnyitásakor léteztek

        - ’ ’- Nincs változás        - Azoknál a soroknál, amelyeknél nem történt

változás az ablak megnyitása óta

`o` Csatlakozó vonat belső azonosító (CsatlVonId): S_0151_50 szolgáltatás által

visszaadott azonosító. Újonnan felv ett v o natnál NULL

`o` Menetvonal id (MenetvId): Korábban felvett vonatoknál az Sszolgáltatás által visszaadott, újonnan felvett vonatoknál az S_0151_51 _ 0151 _ 50

szolgáltatástól kapott (MenetvId)

`o` Előrejelzett vonatesemény mgm    - es belső azonosítója (EsemId):

        - Korábban felvett vonatoknál az S _ 0151 _ 50 szolgáltatás által

                                         visszaadott Előrejelzett vonatesemény mgm es belső azonosítója
(EsemId).

        Újonnan felvett Bevárandó vonatoknál az S_0151_51 szolgáltatástól

                                         kapott Előrejelzett érkezési esemény mgm es belső azonosítója
(ErkEsemId),

        - Újonnan felvett Várakozó vonatoknál az S _ 0151 _ 51 szolgáltatástól

                                         kapott Előrejelzett indulási esemény mgm es belső azonosítója
(IndEsemId)

`o` Vonatazonosító (VonatAzon):

        - Korábban felvett vonatoknál az S _ 0151 _ 50 szolgáltatás által

visszaadott Vonatazonosító (VonatAzon).

        - Újonnan felvett vonatoknál az S _ 0151 _ 51 szolgáltatástól kapott

Vonatazonosító (VonatAzon)

`o` Várakozás típusa (VarakozasTipus): ’ B ’ – Bevárandó vonatnál, ’ V ’ –

Várakozó vonatnál

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 323/526|


`o` Csatlakozás típusa (CsatlTipus): Bevárandó vonatoknál üres, Várakozó

vonatoknál a gridben szereplő érték

`o` Csatlakozás ideje (CsatlIdo): Bevárandó vonatoknál üres, Várakozó

vonatoknál a gridben szereplő érték

Ha a szolgáltatás hibát jelez, akkor azt megjeleníti a kliens program és nem zárja be az
ablakot.

Ha a szolgáltatás rendben lefutott, akkor bezárja az ablakot és értesítést ad az A_0151_01
ablaknak, hogy frissíteni kell az adatokat a grafikonon.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 324/526|

##### **Az ablak szerkezeti leírása ** **Beviteli/megjelenítő mezők, kiválasztható lista (combo box), kapcsoló,  rádiógomb **













|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Kontrol típusa|Hossz|Maszk|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|---|
|Csatlakozó állomás|Csatlakozó állomás|-|Megjelenítő mező||||T_SHJ A_0151_01 ablaktól SzhHosszuNev|
|Bevárandó vonatok (panel)||||||||
|Vonatazonosító|Vonatazonosító|-|Beviteli mező kiválasztás funkcióval JqxComboBox||||S_0151_51-től a feltételeknek megfelelő VonatAzon|
|Várakozó vonatok (panel)||||||||
|Vonatazonosító|Vonatazonosító|-|Beviteli mező kiválasztás funkcióval JqxComboBox||||S_0151_51-től a feltételeknek megfelelő VonatAzon|
|Csatlakozás típusa|Csatlakozás típusa||felirat|||||
|Utas|Utas||Kapcsoló|||Bekapcsolt||
|Jármű|Jármű||Kapcsoló|||Kikapcsolt||
|Vonatszemélyzet|Vonatszemélyzet||Kapcsoló|||Kikapcsolt||
|Csatlakozási idő|Csatlakozási idő||Beviteli mező|4|Numerikus 0 vagy pozitív egész szám|5||
|perc|perc||felirat|||||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 325/526|

##### **Listadoboz oszlopai az alapértelmezett sorrendben ** **Bevárandó vonatok listadoboz oszlopai az alapértelmezett sorrendben**










|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Hossz|Maszk/Típus|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|
||Szinezés||||||
||Törlés ikon||||||
|Vonatazonosító|Vonatazonosító|Vonatazonosító|22|99 99999-9 / éééé.hh.nn|||
|Várható érkezési idő|Várható érkezési idő|Várható érkezési idő|20|éééé.hh.nn óó:pp|||
|Érkező vágány|Érkező vágány|Érkező vágány|12|||T_SHF|

##### **Várakozó vonatok listadoboz oszlopai az alapértelmezett sorrendben **








|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Hossz|Maszk/Típus|Alapértelmezett érték|Törzstábla/kódtábla|
|---|---|---|---|---|---|---|
||Szinezés||||||
||Törlés ikon||||||
|Vonatazonosító|Vonatazonosító|Vonatazonosító|22|99 99999-9 / éééé.hh.nn|||
|Indulási idő|Indulási idő|Indulási idő|16|éééé.hh.nn óó:pp|||
|Induló vágány|Induló vágány|Induló vágány|12|||T_SHF|
|Típus|Csatlakozás típusa|Csatlakozás típusa|5||||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat:1.0|Oldal: 326/526|

##### Csatlakozási idő

##### Csatlakozási idő

##### Csatlakozási idő

##### 4










|Nyomógombok|Col2|Col3|Col4|
|---|---|---|---|
|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Alapértelmezés [Kezelhető/Nem kezelhető]|
|Hozzáad|Hozzáad (Bevárandó vonatok)|Hozzáadás|Szerkesztés üzemmódban kezelhető Megjelenítés üzemmódban nem kezelhető|
||Törlés ikon (Bevárandó vonatok)|Törlés|Kezelhető|
|Hozzáad|Hozzáad (Várakozó vonatok)|Hozzáadás|Szerkesztés üzemmódban kezelhető Megjelenítés üzemmódban nem kezelhető|
|Módosít|Módosít|Módosítás|Nem kezelhető|
||Törlés ikon (Várakozó vonatok)|Törlés|Kezelhető|
|Ment|Ment|Mentés|Nem kezelhető|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 327/526|









|Hívott szolgáltatások|Col2|Col3|
|---|---|---|
|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|Ablakbetöltés, már létező csatlakozás kiválasztása után megjelenítés és szerkesztés üzemmódban|-|S_0151_50 – Csatlakozás adatainak lekérdezése (CsatlakozasAdatokQuery)|
|Ablakbetöltés szerkesztés üzemmódban|-|Rendszerparaméter értékek kiolvasását végző szolgáltatást (RendszerParamErtekekQuery)|
|Ablakbetöltés szerkesztés üzemmódban|-|S_0151_51 – Csatlakozó vonatok keresése (CsatlakozoVonatokQuery)|
|<Hozzáad> Bevárandó vonatoknál|-|S0151_52 – Csatlakozó vonat esemény adatainak lekérdezése (CsatlakozoVonatEsemenyQuery)|
|<Hozzáad> Várakozó vonatoknál|-|S0151_52 – Csatlakozó vonat esemény adatainak lekérdezése (CsatlakozoVonatEsemenyQuery)|
|<Ment>|A_0151_01|S_0151_53 – Csatlakozás mentése (CsatlakozasMentesCommand)|








|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Mnemonik|Üzenet et előállít ó réteg|Rendsze rüzenet típusa|
|Bármelyik <Hozzáad> nyomógomb vagy a <Módosít> nyomógomb használatakor, ha a felette levő Vonatazonosító mező üres.|Kitöltése kötelező|UC_01_51_ERR_KITO LT_KOTELEZO err_code = 151024|Kliens|Hiba|
|Bármelyik <Hozzáad> nyomógomb használatakor, ha a felette levő Vonatazonosító olyan azonosítót tartalmaz, ami nem szerepel a mező értékkészletében.|Nem megfelelő vonat|UC_01_51_NEM_MEG FELELO_VON|Kliens|Hiba|
|Bármelyik <Hozzáad> nyomógomb használatakor, ha a Vonatazonosító mezőben megadott vonat már|A vonat már szerepel a csatlakozásban.|UC_01_50_ERR_CSAT LBAN_LEVO_VON|Kliens|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 328/526|









|szerepel a Bevárandó vagy a Várakozó vonatok gridben|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Bevárandó vonatoknál <Hozzáad> nyomógomb használatakor, ha a Vonatazonosító mezőben megadott vonat már megérkezett a csatlakozás helyére|A {0} vonat már megérkezett a csatlakozás helyére.|UC_01_51_ERR_VONAT_M EGERKEZETT|Tárolt eljárás|Hiba|
|<Módosít> nyomógomb használatakor, ha a felette lévő Vonatazonosító mezőben lévő azonosító nem egyezik meg a kiválasztott sorban lévő Vonatazonosítóval.|A kiválasztott vonattól eltérő azonosító.|UC_01_51_ERR_ELTERO_V ONAT|Kliens|Hiba|
|Várakozó vonatoknál a <Hozzáad> vagy a <Módosít> nyomógomb használatakor, ha a csatlakozás típusánál minden kapcsoló kikapcsolt.|A csatakozás típusát kötelező megadni.|UC_01_51_ERR_CSATL_TI P_KOTELEZO|Kliens|Hiba|
|Várakozó vonatoknál a <Hozzáad> vagy a <Módosít> nyomógomb használatakor, ha a csatlakozási idő beviteli mező üres, vagy értéke 0- nál kisebb, vagy nagyobb, mint a Menetvonal érvényesség vége útközbeni vonatnál (óra) (menetv_ervv_utk) rendszerparaméter értéke percbe átszámolva.|A csatlakozási idő értéke 0 – tól {0} – ig lehet.|UC_01_51_ERR_CSATL_ID O_ERTEK|Kliens|Hiba|
|Várakozó vonatoknál <Hozzáad> nyomógomb használatakor, ha a Vonatazonosító mezőben megadott vonat már elindult a csatlakozás helyéről|A {0} vonat már elindult a csatlakozás helyéről.|UC_01_51_ERR_VONAT_E LINDULT|Tárolt eljárás|Hiba|
|Bármelyik <Hozzáad> nyomógomb használatakor, ha a bemenő adatokban kapott|A {0} vonat előrejelzése megszűnt a szolgálati helyen.|UC_01_51_ERR_VONAT_E LOREJEZES_MEGSZUNT|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 329/526|









|esemény már nem létezik az MGM_TenyEsem táblában, vagy létezik,de az esemény ideje üres.|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Bármelyik <Hozzáad> nyomógomb használatakor, ha a bemenő adatokban kapott esemény már szerepel 1 – Folyamatban vagy 2- Teljesült állapotú csatlakozásban.|A {0} vonathoz már tartozik csatlakozás a szolgálati helyen.|UC_01_51_ERR_VONAT_M AR_CSATLAKOZASBAN|Tárolt eljárás|Hiba|
|A Bevárandó vagy Várakozó vonatok gridben a ikon használatakor|Biztos hogy törli a kiválasztott tételt?|UC_01_51_CONF_TETEL_T ORL|Kliens|Megerősí tő|
|<Ment> nyomógomb használatakor, ha a Bevárandó vonatok grid üres|Nincs bevárandó vonat a csatlakozásban.|UC_01_51_ERR_NINCS_BE VARANDO_VONAT|Kliens|Hiba|
|<Ment> nyomógomb használatakor, ha a Várakozó vonatok grid üres|Nincs Várakozó vonat a csatlakozásban.|UC_01_51_ERR_NINCS_VA RAKOZO_VONAT|Kliens|Hiba|
|<Ment> nyomógomb használatakor, ha az uf_checkMunkahelyFogl függvény false értéket ad vissza, vagyis már nem a szerkesztést végző felhasználó foglalja az ábrát|Érvénytelen munkahely foglalás, az adatok mentése sikertelen!|UC_01_51_ERR_ERVENYT ELEN_FOGLALAS|Tárolt eljárás|Hiba|
|<Ment> nyomógomb használatakor, már létező csatlakozásnál, ha az adatbázisban lévő MGM_Csatlkozas.utolso_ mod_ido nagyobb, mint az ablak nyitásakor kiolvasott Csatlakozás utolsó módosításának ideje (UtolsoModIdo)|Az adatokat más felhasználó módosította!|UC_01_00_ERR_ADATOKA T_MAS_FELH_MODOSITO TTA|Tárolt eljárás|Hiba|
|<Ment> nyomógomb használatakor, ha a csatlakozó menetvonalak listában kapott események közül, azoknál, amelyeknél a Működési mód (MukodesiMod) ’U’-|A {0} vonat előrejelzése megszűnt a szolgálati helyen.|UC_01_51_ERR_VONAT_E LOREJEZES_MEGSZUNT|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 330/526|






|Új vagy ’M’-Módosítás és az Előrejelzett vonatesemény mgm-es belső azonosítójának (EsemId) megfelelő esemény nem létezik az MGM_TenyEsem táblában, vagy létezik,de az esemény ideje üres|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|<Ment> nyomógomb használatakor, ha a csatlakozó menetvonalak listában kapott események közül, azoknál, amelyeknél a Működési mód (MukodesiMod) ’U’- Új vagy ’M’-Módosítás és az eseményhez tartozó vonat állapota nem „vft-be bevezetve” (P_VFT.k_vnall_id <> 3)|A {0} vonat már nem közlekedik.|UC_01_51_ERR_VONAT_N EM_KOZLEKEDIK|Tárolt eljárás|Hiba|
|<Ment> nyomógomb használatakor, ha az adott esemény érkezés (MGM_TenyEsem.esem_i d=1), a Működési mód az eseménynél (MukodesiMod) ’U’-Új vagy ’M’-Módosítás vagy ’T’-Törlés és az esemény már nem előrejelzés (MGM_TenyEsem.esem_t ipus nem 'B').|A {0} vonat már megérkezett a csatlakozás helyére.|UC_01_51_ERR_VONAT_M EGERKEZETT|Tárolt eljárás|Hiba|
|<Ment> nyomógomb használatakor, ha az adott esemény indulás (MGM_TenyEsem.esem_i d=2), a Működési mód az eseménynél (MukodesiMod) ’U’-Új vagy ’M’-Módosítás vagy ’T’-Törlés és az esemény már nem előrejelzés (MGM_TenyEsem.esem_t ipus nem 'B').|A {0} vonat már elindult a csatlakozás helyéről.|UC_01_51_ERR_VONAT_E LINDULT|Tárolt eljárás|Hiba|
|<Ment> nyomógomb használatakor, ha a csatlakozó menetvonalak|A {0} vonathoz már tartozik csatlakozás a szolgálati helyen.|UC_01_51_ERR_VONAT_M AR_CSATLAKOZASBAN|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 331/526|



|listában kapott események közül, azoknál, amelyeknél a Működési mód (MukodesiMod) ’U’- Új és a kapott esemény már szerepel 1 – Folyamatban vagy 2- Teljesült állapotú csatlakozásban.|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|<Ment> nyomógomb használatakor, ha valamelyik Bevárandó vonatnál (VarakozasTipus=’B’) az előrejelzett esemény ideje (MGM_TenyEsem. esem_ido) nagyobb, mint az aktuális idő + 12óra|A {0} vonat várható érkezési ideje {1} későbbi, mint a grafikonon kezelt időszak vége.|UC_01_51_ERR_KESON_E RKEZO_VONAT|Tárolt eljárás|Hiba|
|<Ment> nyomógomb használatakor, ha valamelyik Várakozó vonatnál (VarakozasTipus=’V’) az előrejelzett esemény ideje (MGM_TenyEsem. esem_ido) nagyobb, mint az aktuális idő + 12óra|A {0} vonat várható indulási ideje {1} későbbi, mint a grafikonon kezelt időszak vége.|UC_01_51_ERR_KESON_IN DULO_VONAT|Tárolt eljárás|Hiba|
||||||


**törölt:**  





|Kódtáblák, választási listák|Col2|
|---|---|
|Kódtábla / tábla megnevezése|Kódtábla / tábla azonosítója|
|||
|||


|Rendszerparaméterek|Col2|
|---|---|
|Paraméter megnevezése|Paraméter azonosítója|
|Menetvonal érvényesség vége útközbeni vonatnál (óra)|menetv_ervv_utk|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 332/526|

##### 2.11 [#88996] A_01 51 _11 – Értesítés előrejelzés változásról

**Az ablak/lap feladatai**

Az ablak célja, h o gy az adott ábrán található, aktív, előrejelzés változásban érintett
menetvonalakat táblázatos formában megjelenítse, valamint lehetőséget biztosítson az
értesítés tudomásu l vételére (ezzel megszüntetve a menetvonal pulzálását a grafikonon).

**Az ablak megjelenése**

**Az ablak működése**

Jelen modális abla k az „A_0151_01 – Út - idő diagram ” ablakon kezelt „Értesítések előrejelzés

automatikus frissít ése szünetel.

Az ablak betölté sek or a kliens meghívja az **S_0151_58** **–** **Előrejelzés változásról szóló**
**értesítések lekérd** **e** **zése (EloreJelzesValtAdatokQuery)** szolgáltatást átadva neki a
kiválasztott ábra b el ső azonosítóját.

A szolgáltatástól vis s zakapott adatok alapján feltölti az ablakon található grid - et:

  - Menetvonal azonosító (MenetvAzon)

  - Vonatazonosítók (VonatAzon) – T öbb ér in tett vonatazonosító is lehet, ezek

pontosvesszővel elválasztva kerülne k át adá sr a

  - Kiváltó ok (KivaltoOk):

  - Kiváltó vonatazonosító (KivaltoVonat Azon)

  - Létrehozás ideje (LetrehozIdo)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**Megváltozott a mezőkód**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 333/526|


Az ablakon találha t ó jqxGrid control működése:

  - Nem lapozható

  - Nincs automatikus frissítés (c s a k abla k betöltéskor és a tudomásul vétel gomb

kezelésekor frissül)

  - Többszörös sorkijelölés (minden sor k ijelölése f unkcióval a grdi felett

  - Rendezhető

  - Szűrhető

  - Oszlop sorrend módosítható

  - Nincs excel export

  - Egyszerre max 7 sor jelenik meg, ennél na gy obb tételszám esetén scrollozható

A grid alatt találhat ó <Tudomásul vétel> gomb működése:

  - A gomb csak akkor éled, ha van leg al ább e gy k ijelölt sor a listában.

  - Megnyomásakor a kliens megh í v ja az **S_0151_59** **–** **Előrejelzés változás tudomásul**

**vétel (EloreJelzesValtTudomasu** **l** **v** **et** **elC** **om** **m** **a** **nd)** szolgáltatást bemenő adatként
átadva neki a grafikonon kiválasz tott ábr a belső azonosítóját (AbraId), valamint a
kijelölt sorokhoz tartozó menetvon al bel ső az onosítókat pontos vesszővel elválasztva
(MenetvIdLista).

  - Sikeres mentés esetén a rendsze r bezá r j a a m odá lis ablakot (nincs külön popup üzenet

a sikeres mentésről) és frissíti a g r afi k us felület adatait a vonatkozó szolgáltatások
hívásával, ezáltal a tudomásul véte lben ér intett menetvonalak pulzálása megszűnik a
grafikonon.

Az ablak a jobb fe l s ő sarokban található ’ X ’ segítségével is bezárható be, ilyen esetben nincs
automatikus azonn al i diagramfrissítés.

**Az ablak szerkezeti leírása**


**Beviteli/megjelení** **t** **ő mezők, kiválasztó lista (combo box), kapcsoló, rádiógomb**
Nincs

**Listadoboz oszlopai az alapértelmezett sorrendben**












|Felirat|Megnevezés|Súgó (ToolTi p)|Hossz|Maszk/Típu s|Alapértel mezett érték|Törzstábla/ kódtábla|
|---|---|---|---|---|---|---|
|Menetvonal azonosító|Menetvonal azonosító|-|||||
|Vonatazonosí tó(k)|Vonatazonosí tó(k)|-|22|99 99999-9 / éééé.hh.nn|||
|Kiváltó ok|Kiváltó ok|-|30||||
|Kiváltó vonatazon.|Kiváltó vonat azonosítója|Kiváltó vonat azonosít ója|22||||
|Létrehozás|Létrehozás|-|23|éééé.hh.nn|||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 334/526|

|Nyomógombok|Col2|Col3|Col4|
|---|---|---|---|
|Felirat|Megnevezés|Súgó (ToolTip) szöveg|Alapértelmezés [Kezelhető/Nem kezelhető]|
||Bezár ikon|-|Kezelhető|
|Tudomásul vétel|Tudomásul vétel|-|Nem kezelhető, csak legalább egy kijelölt sor esetén|




|Hívott szolgáltatások|Col2|Col3|
|---|---|---|
|Funkciógomb/link/vezérlőelem esemény|Hívott ablak|Hívott szolgáltatás rövid megnevezése (azonosító)|
|Ablakbetöltés|-|S_0151_21 – Ábra szintű információk lekérdezése (AbraInfokQuery)|
|<Tudomásul vétel>|-|S_0151_59 – Előrejelzés változás tudomásul vétel (EloreJelzesValtTudomasulvetelCommand)|
|„Bezár” ikon|A_0151_01|Automatikus frissítés történik az A_0151_01 ablakon|


**Rendszerüzenetek**

Nincs

**Kódtáblák, választási listák**

Nincs

**Rendszerparaméterek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 335/526|

#### **3 A használati eset szolgáltatásai **



|Szolgáltatás rövid megnevezése (azonosító)|Szolgáltatás rövid leírása|
|---|---|
|S_0151_01 – Megjelenítési beállítások lekérdezése (MegjelenitesiBeallitasokQuery)|Az út-idő diagramon megjelenő grafikus elemek/információk adatbázisban elmentett megjelenítési beállításainak lekérdezése|
|S_0151_02 – Út tengely adatok lekérdezése (UttengelySzolgalatiHelyAdatokQuery )|Az út-idő diagram út tengelyének kirajzolásához és az út tengelyen megjelenő információkhoz szükséges adatok lekérdezése.|
|S_0151_03 – Út tengely vágány adatok lekérdezése (UttengelyVaganyAdatokQuery)|Az út-idő diagram út tengelyén megjelenő szolgálati helyek vágányainak a lekérdezése|
|S_0151_04 – Menetrendi adatok lekérdezése (MenetrendiAdatokQuery)|Az út-idő diagramon megjelenő menetvonalak menetrendi adatainak a lekérdezése|
|S_0151_05 – Tényadatok lekérdezése (TenyadatokQuery)|Az út-idő diagramon megjelenő menetvonalak tény és előrejelzés adatainak a lekérdezése.|
|S_0151_06 – Vágányzárak lekérdezése (VaganyzarakQuery)|A bemenő paraméterben kapott időszakban, a kapott vonalra, menetirányítói szakaszra, szolgálati helyekre tervezett vágányzárak adatainak a lekérdezése.|
|S_0151_07 – Vágányzár információs területhez adatok lekérdezése (VaganyzarInfoTerQuery)|Vágányzárnál megjelenő információs területhez adatok lekérdezése.|
|S_0151_08 – Menetvonal információs területhez adatok lekérdezése szolgáltatás (MenetvAdatInfoTerQuery)|A menetvonalnál (de nem a menetvonal és a szolgálati hely találkozásánál) megjelenő információs területhez szükséges adatok lekérdezése.|
|S_0151_09 – Menetvonal/Szolgálati hely információs területhez adatok lekérdezése (MenetvSzhelyInfoTerQuery)|A menetvonal és szolgálati hely találkozásánál megjelenő információs területhez szükséges adatok lekérdezése.|
|S_0151_10 – Megjelenítési beállítások mentése szolgáltatás (MegjelenitesiBeallitasokMenteseCom mand)|Az A_0151_03 ablakon megadott, az út-idő diagramon megjelenő grafikus elemek/információk adatbázisba történő elmentése az adott PASS2 azonosítóhoz.|
|S_0151_11 – Forgalmi vonatnemek letöltése (ForgNemQuery)|Az A_0151_05 ablakon a „Forgalmi vonatnemek” választólista értékkészletének feltöltése.|
|S_0151_12 – Késési forgalmi főkódok letöltése (KesesForgKodQuery)|Az A_0151_05 ablakon a „Forgalmi késési főkódok” választólista értékkészletének feltöltése.|
|S_0151_13 – Késési segédkódok letöltése (KesesSegedKodQuery)|Az A_0151_05 ablakon a „Segédkódok” választólista értékkészletének feltöltése.|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 336/526|





|Szolgáltatás rövid megnevezése (azonosító)|Szolgáltatás rövid leírása|törölt: és törölt: VasutvonalEsMenetirSzakaszQuery|
|---|---|---|
|S_0151_14 – Vasútvonalak,|A PASS2 adatbázisában tárolt vasútvonalak és menetirányítói szakaszok listájának lekérdezése.||
|menetirányítói szakaszok és ábrák lekérdezése (VasutvonalEsMenetirSzakaszEsAbra Query)|||
|S_0151_15 – Szolgálati helyek lekérdezése vonal vagy menetirányítói szakasz vagy ábra alapján (SzolgHelyByVonalVagyMenetirSzak aszvagyAbraQuery)|A bemenő paraméterben kapott vonal vagy menetirányítói szakaszhoz tartozó szolgálati helyek listájának lekérdezése.||
|S_0151_16 – Menetrendi időszakok lekérdezése (MenetrendiIdoszakQuery)|Az előző, aktuális és követő menetrendi időszak kezdetének és végének lekérdezésére szolgál.||
|S_0151_17 – Stílusok és vonalkészletek összerendelésének lekérdezése (StilusVonalkeszletQuery)|Az előre definiált grafikon stílusok és vonalkészletek összerendelésének lekérdezése||
|S_0151_18 – Stílus - vonalkészlet összerendelés mentése (StilusVonalOsszerendelCommand)|Az előre definiált grafikon stílusok és vonalkészletek összerendelésének mentése||
|S_0151_19 – RDE adatok lekérdezése (RdeAdatokQuery)|A bemenő paraméterben kapott vonal vagy menetirányítói szakasz megadott szolgálati helyeire és megadott időszakára vonatkozó RDE esemény adatok lekérdezése.||
|S_0151_20 – RDE információs terület adatok lekérdezése (RdeInfoTerQuery)|Az RDE-nél megjelenő információs területhez adatok lekérdezése.||
|#88994 S_0151_21 – Ábra szintű információk lekérdezése (AbraInfokQuery)|Idő üzemmódtól függő ábra szintű információk lekérdezése.||
|88953 S_0151_22 – Vágányzár szerkesztéshez adatok lekérdezése (VaganyzarSzerkeszteshezQuery|Vágányzárnál megjelenő beúszó szerkesztő panelhez adatok lekérdezése||
|88953 S_0151_23 – Vágányzári tény adatok mentése (VaganyzarTenyMentesCommand)|A megadott vágányzári tény adatok mentése||
|K_003 - Ügyfelek listázása (Használó, megrendelő, vasútvállalat) szolgáltatás|Ügyfél adatok lekérdezése||
|S_0151_24 - Munkahelyi adminisztratív feladatok lekérdezése (MunkahelyAdminFeladatokQuery)|Egy munkahelyet érintő adminisztratív feladatok lekérdezése||
|S_0151_25 – Munkahelyek|Munkahelyek lekérdezése||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 337/526|



|Szolgáltatás rövid megnevezése (azonosító)|Szolgáltatás rövid leírása|
|---|---|
|lekérdezése (MunkahelyekQuery) (usp_0151_selMunkahelyek)||
|S_0151_26 – Munkahelyhez tartozó ábrák lekérdezése (AbrakByMunkahelyQuery) (usp_0151_selAbrakByMunkahelyId)|Egy munkahelyhez tartozó ábrák lekérdezése|
|S_0151_27 – Munkahely szintű foglalás kezelése (MunkahelyFoglKezCommand) (usp_0151_setMunkahelyFogl)|Munkahely szintű foglalás adatok lekérdezés, valamint munkahely foglalás|
|S_0151_28 - MenetvonalAdminFeladatokQuery szolgáltatás (co- re.usp_0151_selMunkahelyAdminFela datok)|Egy menetvonalnak egy munkahelyre eső adminisztratív feladatainak lekérdezése.|
|S_0103_02 - Késési kódok listája (KesesiKodokQuery), (core.usp_0103_selT_KFKandT_KSK|Késési főkódok és segédkódok, azok összerendelésének lekérdezése|
|S_0151_29 - Eseményhez tartozó RDE adatok lekérdezése (EsemRdeAdatokQuery), (usp_0202_selRDEAdatok)|Egy vonatesemény által érintett RDE események lekérdezése|
|S_0151_30 - Késésindoklás lekérdezése (KesesIndoklasQuery), (usp_0202_selKesesIndoklas)|Egy késési főkódhoz tartozó lehetséges indoklások lekérdezése|
|S_0151_31 – Munkahely szintű foglalás megszüntetése (MunkahelyFoglMegszuntCommand) (usp_0151_setMunkahelyFoglMegszu nt)|Munkahely foglalás megszüntetése|
|S_0160_19 - Szolgálati hely vágányainak lekérdezése (usp_0160_selSzolghelyVaganyLista)|Szolgálati hely vágányainak lekérdezése|
|89001 S_0151_32 – Szöveges megjegyzések lekérdezése (SzovMegjegyzesekQuery)|Szöveges megjegyzések lekérdezése|
|88958 BS_0151_33 –Adminisztrációs feladat darabszámok karbantartása|A munkahely szintű adminisztrációs feladatok darabszámának karbantartása, mely db szám az adminisztrációs feladatok elérhetőségét vezérli|
|#89002 S_0151_34 – Menetengedélyek lekérdezése (MenetengedelyekQuery)|Menetengedélyek lekérdezése.|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 338/526|



|Szolgáltatás rövid megnevezése (azonosító)|Szolgáltatás rövid leírása|
|---|---|
|#89002 S_0151_35 – Menetengedély mentése (MenetengedelyMentesCommand)|A megadott menetengedély mentése, törlése.|
|S_0151_36 - MenetvonalAdminFeladatokCommand (Menetvonal ad-minisztratív feladat adatok rögzítése; usp_0202_setVonat hívás)|Menetvonalhoz tartozó admnisztratív feladatok mentése|
|89001 S_0151_37 – Szöveges megjegyzés adatainak a karbantartása (SzovMegjegyzesKarbantartCommand )|Szöveges megjegyzés adatainak mentése, módosítása, törlése|
|88961 S_0151_38 - MenetvForgSzabFoglalasCommand (menetvonalak forgalomszabályozásra lefoglalása; core.usp_0151_setMenetvForgSzabFo glalas)|Ellenőrizni, hogy a menetvonal az ábráról indul (figyelembe véve a belépő vonatokat is), nincs lefoglalva fogalomszabályozásra és a menetvonalhoz más ábrához sincs tényadat rögzítve, sikeres ellenőrzés után bejegyzi a foglalást, illetve törli lefoglalást.|
|S_0151_39 – Munkahely foglalás ellenőrzése (uf_checkMunkahelyFogl)#90436|Adatbázis függvény, mely a felhasználó munkahely szintű foglalását ellenőrzi.|
|88998 S_0151_40 – Teljesítménycsökkenés szerkesztéséhez adatok lekérdezése (TeljesitmenycsokkQuery) (usp_0151_selTeljesitmenycsokk)|Teljesítménycsökkenés rögzítéséhez, módosításához adatok lekérdezése|
|88998 S_0151_41 – Egyéb sebességkorlátozások lekérdezése (EgyebSebKorlQuery) (core.usp_0151_selEgyebSebKorl)|Az adott menetvonalhoz rögzített egyéb sebességkorlátozások lekérdezése|
|88961 S_0151_42 ForgSzabMuveletElokeszitesComman d (core.usp_0151_updForgalomSzabMu veletek)|Forgalom szabályozási műveletek mentésének előkészítése egy menetvonal esetén|
|88998 S_0151_43 – Teljesítménycsökkenés mentése (TeljesitmenycsokkMentesCommand)|Teljesítménycsökkenés mentése.|
|88998 S_0151_44 – Menetvonal szolgálati helyeinek lekérdezése szolgáltatás (MenetvonalSzolgHelyekQuery)|Egy menetvonal szolgálati helyeinek lekérdezése|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 339/526|





|Szolgáltatás rövid megnevezése (azonosító)|Szolgáltatás rövid leírása|törölt: 0|
|---|---|---|
|88998 S_0151_45 – Egyéb sebességkorlátozások mentése (EgyebSebKorlMentesCommand)|Egyéb sebességkorlátozás mentése||
|#89003 S_0151_46 – Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery)|Kulcsfüggés feloldás lekérdezése.||
|#89003 S_0151_47 – Kulcsfüggés feloldás mentése (KulcsfuggesMentesCommand)|A megadott kulcsfüggés feloldás mentése (létrehozása, lezárása), törlése.||
|88961 S_0151_48 - Új előrejelzés készítés ellenőrzése (UjEloreJelzesEllenorzesQuery, core.usp_0151_checkUjEloreJelzes)|Ellenőrzi, hogy a kijelölt menetrendi vonal mentvonalának első MÁV eseménye az ábrára esik-e.||
|88962 S_0151_49 - ForgSzabMuveletEllenorzesQuery (Forgalomszabályozási művelet ellenőrzése, core.usp_0151_checkForgSzabMuvele t )|Ellenőrzi, hogy a vonatnál a vonat kategóriája szerint adott szolgálati helyen rögzíthető-e az adott forgalomszabályozási művelet.||
|#88980 S_0151_50 – Csatlakozás adatainak lekérdezése (CsatlakozasAdatokQuery)|Csatlakozás adatainak lekérdezése||
|#88980 S0151_51 – Csatlakozó vonatok keresése (CsatlakozoVonatokQuery)|Az adott szolgálati helyen, csatlakozáshoz vonatok keresése||
|#88980 S_0151_52 – Csatlakozó vonat esemény adatainak lekérdezése (CsatlakozoVonatEsemenyQuery)|Vonatesemény ellenőrzése és adatainak a lekérdezése||
|#88980 S_0151_53 – Csatlakozás mentése (CsatlakozasMentesCommand)|Csatlakozás mentése||
|96901 S_0151_54 - UjEloreJelzesMenetrendQuery|Adott menetvonalhoz az adott ábrát érintő menetrendi adatok keresése új előrejelzéshez||
|#88980 S_0151_55 – Csatlakozás törlése (CsatlakozasTorlesCommand)|Csatlakozás törlése||
|S_0151_56 -|Vonat előztetés és találkozás tervezése||
|VonatEloztetesTalalkozasCommand|||
|#88995 S_0151_57 – Értesítésben érintett (pulzáló) menetvonalak lekérdezése (PulzaloMenetvonalakQuery)|Pulzáló menetvonalak lekérdezése a grafikus megjelenítéshez||
|#88996 S_0151_58 – Előrejelzés|Előrejelzés változásról szóló értesítések adatainak||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 340/526|



|Szolgáltatás rövid megnevezése (azonosító)|Szolgáltatás rövid leírása|
|---|---|
|változásról szóló értesítések lekérdezése (EloreJelzesValtAdatokQuery)|lekérdezése|
|#88996 S_0151_59 – Előrejelzés változás tudomásul vétel (EloreJelzesValtTudomasulvetelComm and)|Előrejelzés változásról szóló értesítések tudomásul vétele|
|88976 - S_0151_60 - Másik pályán közlekedés rögzítése (MasPalyaMgmCommand) (usp_0151_setMasPalyaMgm)|Másik pályán közlekedés adatainak rögzítése|

##### **(MegjelenitesiBeallitasokQuery) (usp_0000_selLBProfil) **

**Szolgáltatás feladatai**

Az út-idő diagramon megjelenő grafikus elemek/információk adatbázisban elmentett
megjelenítési beállításainak lekérdezése.

**Bemenő adatok**

  - ’Pass2UserID’ = Felhasználó azonosító

  - ’ablak_id’ = ’A_0151’

  - ’lb_id’ = NULL

  - ’profil_nev’ = NULL.

**Működés**

A megjelenítési beállításokat lekérdező szerviz a bemenő adatokban kapott paraméterekkel
meghívja az usp_0000_selLBProfil tárolt eljárást. Amennyiben a tárolt eljárás nem ad vissza
adatot akkor „Rendszer” felhasználóval és a többi bemenő paraméterrel, alapértelmezett
értékek kereséséhez, újra meghívja az eljárást. Ha az eljárás így sem ad vissza adatot, akkor a
szerviz hibaüzenet ad. Ha az eljárás ad vissza adatokat, akkor azokat a szerviz tovább adja a
hívó programnak. A kapott json fájlból objektumot képez.

Az usp_0000_selLBProfil eljárás megnézi, hogy a bemenő adatokban kapott felhasználó
azonosítóval, ablak id-val, listadoboz id-val, profil névvel van-e elmentett megjelentési
beállítás az LBProfil táblában. Ha talál, akkor visszaadja az elmentett értékeket.

**Kimenő adatok**

  - ’AblakId’ - Ablak azonosító = „A_0151”

  - ’LbId’ - Listadoboz azonosító = NULL

  - ’ProfilNev’ - Profil név = NULL

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 

-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 341/526|



 - ’LBAdat’ - A megjelenítési beállításokat tartalmazó adatok a lista:

`o` 'VizszintesTengely_Ut’ = true/false,

`o` ’VizszintesTengely_Ido’ = true/false,

`o` ’SzolgHelySorrend_K_Pont’ = true/false,

`o` ’SzolgHelySorrend_Vegpont’ = true/false,

`o` ’SzolgHelyNev_For’ = true/false,

`o` ’SzolgHelyNev_Rovid’ = true/false,

`o` ’Grafikonra_Be_Kilepes’ = true/false,

`o` ’Megallohelyek’ = true/false,

`o` ’MGM_Vaganyok’ = true/false,

`o` ’Korjelolok’ = true/false,

`o` ’Menetrend_Nincs’ = true/false,

`o` ’Menetrend_Osszes’ = true/false,

`o` ’Menetrend_CsakKijelolt’ = true/false,

`o` ’Elorejelzes’ = true/false,

`o` ’Kesesek’ = true/false,

`o` ’BeKilepoVonatokKesese’ = true/false,

`o` ’Elteresek’ = true/false,

`o` ’Foglaltra_Jar’ = true/false,

`o` ’Vaganyzarak’ = true/false,

`o` 88953 ’ Teny_Vaganyzarak ’ = true/false,

`o` ’RDE_Esemenyek’ = true/false,

`o` 89001 ’ Szov _ Megjegyzes_Nincs ’= true/false,

`o` ’ Szov _ Megjegyzes _ CsakIkon ’= true/false,

`o` ’ Szov _ Megjegyzes _ IkonSzoveg ’= true/false, [89001vége]

`o` 88957 ’ VgAdat ’ = true/false,

`o` #89002 ’ MenetEngKijelzoig ’ = true/false,

`o` #89002 ’ MenetEngBejelzoig ’ = true/false,

`o` #89003 ’ KulcsfuggesFeloldas ’ = true/false,

`o` #88980 ’ CsatlakozasraVar ’ = true/false

**Interfészek**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** Json fájlhoz

**törölt:** [72236]

**törölt:** null


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 342/526|


Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs





|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|Ha „Rendszer” felhasználóval meghívva sem ad vissza adatot az usp_0000_selLBProfil eljárás|Alapértelmezett beállítások hiányoznak.|Szerviz|Hiba|


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|LBProfil|Profil adatok|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**
##### **3.2 S_0151_02 – Út tengely adatok lekérdezése szolgáltatás ** **(UttengelySzolgalatiHelyAdatokQuery) (usp_0151_selUttengelyAdatok) **

**Szolgáltatás feladatai**

Az út-idő diagram, út tengelyének kirajzolásához és az út tengelyen megjelenő
információkhoz szükséges adatok lekérdezése.

**Bemenő adatok**

  - Menetirányítói szakasz kód

  - Vonal id

  - Ábra belső azonosító (AbraId) [ #88952]

  - Szolgálati helytől id – Ábra esetén nincs kitöltve

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 343/526|



  - Szolgálati helyig id – Ábra esetén nincs kitöltve

  - Lekérdezési időszak kezdete

**Működés**

A út tengely adatokat lekérdező szerviz a szükséges adatok kiolvasásához, a bemenő
adatokban kapott paraméterekkel, meghívja az usp_0151_selUttengelyAdatok tárolt eljárást.

Az eljárás, ha a bemenő adatokban a menetirányítói szakasz kód kitöltött, akkor az adott
menetirányítói szakaszhoz, ha a menetirányítói szakasz kód nincs kitöltve, akkor a bemenő
adatokban kapott vonalhoz (vagy a menetirányítói szakasz kód vagy a vonal id kitöltött a
bemenő adatokban) tartozó, de csak a bemenő adatokban kapott két szolgálati hely közötti,
következő típusú elemi szolgálati helyeket kérdezi le a T_PPJ és Pályaszakaszfej táblákat
használva:

  - 1 - állomás

  - 2 - megállóhely

  - 3 - elágazás

  - 4 - forgalmi kitérő

  - 5 - megálló-rakodóhely

  - 6 - országhatár

  - 8 - iparvágány kiágazás

  - 9 - rakodóhely

  - 10 - kiágazás

  - 11 - megálló-elágazó hely

  - 12 - megállóhely-iparvágány kiágazás

  - 13 - iparvágány

  - 14 - vágányfonódás-elágazás

  - 15 - pályavasúti határpont

#88952 Amennyibe n ábra belső azonosító alapján történt a hívás, akkor az eljárás az
MGM _ AbraUtvonal táblából olvassa ki az ábrához tartozó szolgálati helyek kimenő
adatoknál definiált adatait. [ #88952 VÉGE]

A megkeresett elemi szolgálati helyeket sorszámozza a bemenő adatokban kapott szolgálati
helytől kezdve (ez mindig páros irány, a T_PPJ táblában is ilyen irányban szerepelnek a
szolgálati helyek). A szolgálati helyeket és a szolgálati helyek kimenő adatokban
meghatározott adatait érvényességkezelten (a bemenő adatokban kapott lekérdezési időszak
kezdetekor érvényes értékekkel) olvassa ki a megfelelő táblákból (T_PPJ, T_SHJ, T_SHE,
PalyaSzakaszfej) és adja vissza a hívó modulnak.

**Kimenő adatok**

{S zolgálati hely adatok list a}

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 344/526|



  - Szolgálati hely sorszá m (SzhSorszam)

  - Szolgálati hely i d (SzhId)

  - Szolgálati hely Betűkód (FOR név ) (SzhForNev)

  - Szolgálati hely rövid név (SzhRovidNev)

  - Szolgálati hely teljes né v (SzhHosszuNev)

  - Szolgálati hely típus kó d (SzhTipusKod)

  - Távolság a következő visszaadott szolgálati helyig (Tavolsag)

  - Vonali vágány db szám (az adott és a következő visszaadott szolgálati hely között)

(VonaliVgDbSzam)

  - Telefonszám C B (CbSzam)

  - Telefonszám Mobil (MobilSzam)

  - Vonalirányító telefonszám CB – T_MIS.vonalir_tel_szam_CB (VonalirCbSzam)

  - V onalirányító telefonszám Mobil – Amennyiben kitöltött, akkor a
T_MIS.vonalir_tel_szam_GSMR, amennyiben nem, akkor a T_MIS.vonalir_tel_szam
érték e (VonalirMobilSzam)

  - Üzemeltető belső azonosító (Szh U ze m I d)

  - Pályavasúti portál link (PvPortalLin k ) [#89004]

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|T_PPJ|Pályapont jellemzők|
|T_SHJ|Szolgálati hely jellemzők|
|PalyaSzakaszFej|Pályaszakasz fej adatok|
|T_SHE|Szolgálati hely elérhetőség|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 345/526|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**
##### **3.3 S_0151_03 – Út tengely vágány adatok lekérdezése szolgáltatás ** **(UttengelyVaganyAdatokQuery) (usp_0151_selUttengelyVaganyAdatok) **

**Szolgáltatás feladatai**

Az út-idő diagram út tengelyén megjelenő szolgálati helyek vágányainak a lekérdezése.

**Bemenő adatok**

  - Lekérdezési időszak kezdete

  - Szolgálati helyek listája

  - Szolgálati hely id

**Működés**

A szerviz az út tengelyen megjelenő szolgálati helyek vágányainak a lekérdezéséhez a
bemenő adatokban kapott paraméterekkel meghívja az usp_0151_selUttengelyVaganyAdatok
tárolt eljárást.

Az eljárás a bemenő adatokban kapott szolgálati helyeknek, a bemenő adatokban kapott
lekérdezési időszak kezdetekor érvényes MGM vágányait (amelyeknél az MGM jelző true)
keresi meg a T_VGJ táblából és adja vissza a hívó modulnak.

**Kimenő adatok**

  - Vágányok lista

  - Szolgálati hely id

  - Vágány id

  - Vágány sorszám

**Interfészek**

Nincs

**Jelentések**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 346/526|


**Email küldés**

Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|T_VGJ|Vágány jellemzők|
|T_SHF|Szolgálati hely fejadatok|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**
##### **3.4 S_0151_04 – Menetrendi adatok lekérdezése szolgáltatás ** **(MenetrendiAdatokQuery) (usp_0151_selMenetrendiAdatok) **

**Szolgáltatás feladatai**

Az út-idő diagramon megjelenő menetvonalak menetrendi adatainak a lekérdezése.

**Bemenő adatok**

   - Menetirányítói szakasz kód (MisKod)

   - Vonal id (VonalId)

   - Ábra belső azonosító (AbraId) [ #88993]

   - Lekérdezési időszak vége (IdoszakVeg)

   - Szolgálati helyek listája

`o` Szolgálati hely id (SzhId)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** <#>¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 347/526|



  - Forgalmi vonatkategóriák listája

`o` Forgalmi vonatkategória id (’1’ - Személysz. és szerelvény, ’2’ – Teher, ’3’

– Egyéb, ’4’ - MRN) (VForgkatId)

  - Forgalmi vonatnemek listája

`o` Forgalmi vonatnem kód (VForgNemKod)

  - Menetvonal tulajdonosok listája

`o` Menetvonal tulajdonos id (MenetvTulId)

  - Vonatszám tartományok listája

`o` Vonatszámtól (Vonatszamtol)

`o` Vonatszámig (Vonatszamig)

  - Eltéréstől (perc) (Elterestol)

  - Eltérésig (perc) (Elteresig)

  - Késési főkódok listája (FoKodArray)

`o` Késési főkód id

  - Késési segédkódok listája (SKodArray)

`o` Késési segédkód id

  - Időhenger jelző (Idohenger)

  - Felhasználó vasútvállalata id (FelhasznVvId)

**Működés**

A menetrendi adatokat lekérdező szerviz a szükséges adatok kiolvasásához, a bemenő
adatokban kapott paraméterekkel, meghívja az usp_0151_selMenetrendiAdatok tárolt
eljárást.

Az eljárás a következő feltételeknek megfelelő menetvonalakat keresi:

    - A bemenő adatokban kapott lekérdezési időszakban legyen tervezett eseménye

a menetvonalnak, vagy a lekérdezett időszakban a bemenő adatokban kapott
szolgálati helyek valamelyikén legyen tervezett tartózkodása.

    - A bemenő adatokban kapott szolgálati helyek közül legalább egynek

szerepelnie kell a menetvonal útvonalán. Ábra esetén az ábra belső azonosító
alapján olvassa ki az eljárás az ábra s zol g álati helyeit az **MGM_AbraUtvonal**
táblából.

    - Ha a bemenő adatokban a forgalmi vonatkategóriák listája nem üres, akkor PV

felhasználó esetén, a menetvonal forgalmi vonatkategóriája a kapott forgalmi
vonatkategóriák valamelyikével egyező legyen. VV-i felhasználónál csak
azoknál a menetvonalaknál kell teljesülnie a feltételnek, ahol a menetvonal
megrendelője vagy üzemeltetője a felhasználó vasútvállalata (a többi
menetvonalat a forgalmi vonatkategóriájától függetlenül átadja az eljárás).

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 348/526|



    - Ha a bemenő adatokban a forgalmi vonatnemek listája nem üres, akkor PV

felhasználó esetén, a menetvonal forgalmi vonatneme a kapott forgalmi
vonatnemek valamelyikével egyező legyen. VV-i felhasználónál csak azoknál a
menetvonalaknál kell teljesülnie a feltételnek, ahol a menetvonal megrendelője
vagy üzemeltetője a felhasználó vasútvállalata (a többi menetvonalat a forgalmi
vonatnemétől függetlenül átadja az eljárás).

    - Ha a bemenő adatokban a menetvonal tulajdonosok listája nem üres, akkor a

menetvonal tulajdonosa (megrendelője) a kapott menetvonal tulajdonosok
valamelyikével egyező legyen, továbbá VV-i felhasználó esetén, ha a MÁV
szerepel a menetvonal tulajdonosok listájában, akkor a menetvonal
üzemeltetője a felhasználó vasútvállalata legyen.

    - Ha a bemenő adatokban a vonatszám tartományok listája nem üres, akkor PV

felhasználó esetén, a menetvonalhoz tartozó vonatok közül, legalább az egyikre
teljesülnie kell annak, hogy a bemenő adatokban kapott szolgálati helyek közül
legalább egy szerepel a vonat útvonalán és a vonat száma a kapott vonatszám
tartományok valamelyikébe beleesik. (Ha egy tartományban csak a
vonatszámtól vagy csak a vonatszámig van kitöltve, akkor azt a tartományt úgy
kell kezelni, mintha csak abból az egy vonatszámból állna.) VV-i
felhasználónál csak azoknál a menetvonalaknál kell teljesülnie a feltételnek,
ahol a menetvonal megrendelője vagy üzemeltetője a felhasználó vasútvállalata
(a többi menetvonalat a vonat számától függetlenül átadja az eljárás).

    - Ha a bemenő adatokban a forgalmi késési főkódok listája nem üres, akkor PV

felhasználó esetén, a menetvonal tény adataiban a bemenő adatokban kapott
szolgálati helyeken, a lekérdezett időszakban, a bemenő adatokban kapott
főkódokkal (a kapott főkódok közül valamelyikkel) igazolt késése legyen. VV-i
felhasználónál csak azoknál a menetvonalaknál kell teljesülnie a feltételnek,
ahol a menetvonal megrendelője vagy üzemeltetője a felhasználó vasútvállalata
(a többi menetvonalat e szűrés nélkül átadja az eljárás).

    - Ha a bemenő adatokban a késési segédkódok listája nem üres, akkor PV

felhasználó esetén, a menetvonal tény adataiban a bemenő adatokban kapott
szolgálati helyeken, a lekérdezett időszakban, a bemenő adatokban kapott
segédkódokkal (a kapott segédkódok közül valamelyikkel) igazolt késése
legyen. VV-i felhasználónál csak azoknál a menetvonalaknál kell teljesülnie a
feltételnek, ahol a menetvonal megrendelője vagy üzemeltetője a felhasználó
vasútvállalata (a többi menetvonalat e szűrés nélkül átadja az eljárás).

    - Ha a bemenő adatokban az Eltéréstől kitöltött, akkor PV felhasználó esetén, a

menetvonal tény adataiban a bemenő adatokban kapott szolgálati helyeken,
olyan eseménye legyen, amelynél az eltérés megegyezik, vagy nagyobb, mint
az Eltéréstől mezőben kapott érték. Ha az Eltéréstől értéke 0 és az Eltérésig
nincs kitöltve, akkor a menetvonal tény adataiban a bemenő adatokban kapott
szolgálati helyeken, nem lehet sem pozitív sem negatív eltérése (pontosnak kell
lennie). VV-i felhasználónál csak azoknál a menetvonalaknál kell teljesülnie a
feltételnek, ahol a menetvonal megrendelője vagy üzemeltetője a felhasználó
vasútvállalata (a többi menetvonalat e szűrés nélkül átadja az eljárás).

Ha a bemenő adatokban az Eltérésig kitöltött, akkor PV felhasználó esetén, a
menetvonal tény adataiban a bemenő adatokban kapott szolgálati helyeken, olyan

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 349/526|


eseménye legyen, amelynél az eltérés megegyezik, vagy kisebb, mint az Eltérésig
mezőben kapott érték. VV-i felhasználónál csak azoknál a menetvonalaknál kell
teljesülnie a feltételnek, ahol a menetvonal megrendelője vagy üzemeltetője a
felhasználó vasútvállalata (a többi menetvonalat e szűrés nélkül átadja az eljárás).

Az eljárás a keresési feltételeknek megfelelő menetvonalaknak, a kimenő adatokban
meghatározott menetrendi adatait olvassa ki (az MGM_Menetvonal,
MGM_TervEsem, V_IGF táblákból) a következőket figyelembe véve:

    - Ha a bemenő adatokban az Időhenger jelző értéke true, akkor a kimenő

adatokban közlekedőnek jelöli az olyan menetvonalat, amely aktuálisan a
bemenő adatokban kapott szolgálati helyek által meghatározott szakaszon
közlekedik. Ha már leközlekedett, vagy valamilyen módon feloszlatott, vagy
nincs még nincs tény eseménye az adott szakaszon (ha csak előrejelzés
eseménye van, akkor nem számít közlekedőnek), vagy már elhagyta az adott
szakaszt, akkor nem számít közlekedőnek.

    - A kimenő adatokban PV-i felhasználó esetén feloszlatottnak jelöli az olyan

menetvonalat, amelynek a bemenő adatokban kapott szolgálati helyeken, a
lekérdezett időszakban van Rfo eseménye, vagy a lekérdezett időszak előtt, de
a lekérdezett időszak kezdetén még Rfo állapotban van (még nincs másik tény
eseménye, sem készrejelentése). VV-i felhasználónál az előző feltételek
teljesülése esetén, csak akkor jelöli feloszlatottnak a menetvonalat, ha a
menetvonal megrendelője vagy üzemeltetője a felhasználó vasútvállalata.

    - Az eljárás, a menetvonalaknak a bemenő adatokban kapott szolgálati helyekre

a lekérdezett időszakban tervezett érkezési, indulási és áthaladás eseményeit
gyűjti össze és adja vissza. Továbbá, ha a lekérdezett időszakban nincs
tervezett érkezési, indulási és áthaladás eseménye a menetvonalnak, de
tervezetten valamelyik kapott szolgálati helyen tartózkodik, akkor azt
tartózkodási eseményként adja át.

    - A menetvonalaknak, a bemenő adatokban kapott vonalra vagy menetirányítói

szakaszr a vagy ábrára (csak az egyik kitöltött a bemenő adatokban) történő be
vagy kilépéseit a visszaadott eseményeknél a következő módon jelzi az eljárás
az Esemény be/kilépés jelző értékével:

`o` ’1’ – „Belépés”- a kapott vonalra/menetirányítói szakaszra belépő

eseménynél (annál az eseménynél, amely előtt olyan eseménye van a
menetvonalnak, aminek a szolgálati helye egy másik
vonalhoz/menetirányítói szakaszhoz tartozik.)

`o` ’2’ – „Kilépés” - vonalról/menetirányítói szakaszról kilépésnél (annál

az eseménynél, amely után olyan eseménye a menetvonalnak, aminek a
szolgálati helye egy másik vonalhoz/menetirányítói szakaszhoz
tartozik.)

`o` ’3’ – „Be és kilépés” - vonalra/menetirányítói szakaszra belépő és

egyben kilépő eseménynél (annál az eseménynél, amely előtt és után is
olyan eseménye a menetvonalnak, aminek a szolgálati helye egy másik
vonalhoz/menetirányítói szakaszhoz tartozik.)

`o` NULL – egyéb esetben

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 350/526|



    - Ábra esetén a belépés és kilépés események, valamint az AbrarolId és AbraraId

meghatározása a manuálisan karbantar t ott **MGM_AbraKiBe** tábla alapján
történik, melyben adott ábra adott p ontján ak be és kilépő ábrái találhatók. [#88993]

eljárás a következő eseményeknél állítja true értékre, a többi eseménynél pedig
false-ra:

`o` Egy adott menetvonal egymást követő, egy szolgálati helyre eső

eseményeinél, ha ezek közül

          - az első eseménynél az Esemény be/kilépés jelző értéke ’1’ –

„Belépés” vagy a Menetvonal indító/cél jelző értéke „i”

          - és az utolsó eseménynél pedig az Esemény be/kilépés jelző

értéke ’2’ – „Kilépés” vagy a Menetvonal indító/cél jelző értéke
„c”

`o` Ha egy eseménynél az Esemény be/kilépés jelző értéke ’3’ – „Be és

kilépés” [VK74827vége]

    - Menetvonal indító/cél jelzőt (MenetvIndCelJel) a következők szerint állítja:

`o` NULL – közbenső eseménynél

`o` „i” – „indulás az indító állomásról” - a menetvonal kiindulási

állomásáról történő indulási eseménynél

`o` „c” – „érkezés a célállomásra” – a menetvonal célállomására történő

érkezési eseménynél

    - A menetvonalakhoz visszaadott eseményeknél az eljárás a Körjelölő mezőben

jelzi, hogy szükség van-e körjelölőre az adott eseménynél a grafikonon,
valamint azt is, hogy milyen okból szükséges. VV-i felhasználó esetén csak
olyan menetvonalaknál jelzi a körjelölő szükségességét, amelyeknél a
felhasználó VV-a a menetvonal megrendelője vagy üzemeltetője (a többinél
NULL-t ad). A körjelölő szükségességének megállapítása a következő
sorrendben történik (Ha egy eseménynél több körjelölőre vonatkozó feltétel is
teljesülne, akkor a következő sorrend szerint mindig az utolsó teljesülő
feltételnek megfelelő érték kerül a mezőbe.):

`o` NULL- Nincs szükség körjelölőre

`o` „0”- 0 perc tartózkodás miatt szükséges körjelölő. Fél percnél kisebb

tartózkodás 0 perces tartózkodásnak számít, de az áthaladás nem jelent
0 perces tartózkodást.

`o` „T”- tervezett készre jelentés miatt szükséges körjelölő

    - Állomás kezdő/végpontja felöli esemény jelzőt (EsemAllVegpont) a

következők szerint állítja. (Áthaladás eseménynél az indulásra vonatkozó
értéket állítja be. ) [#89000] Ábra szerinti lekérdezés esetén, a más irányultsággal
rendelkező vonalról be      - vagy k il é pő vonatok eseményeinek megfelelő
megjelenítése miatt az eljárás az esemény szintű kezdő/végpont felőli
(MGM_TervEsem) jelzőt megf or dítja (Akkor van fordítás, ha az

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 351/526|


MGM_AbraKiBe.szh_kezdopont_f or dit = True). Ez alapján a lehetséges
értékek: [#89000 VÉGE]

`o` „k” – a szolgálati hely kezdő pontja felöli esemény esetén .

`o` „v” – a szolgálati hely végpontja felöli esemény esetén

    - VV-i felhasználó esetén a következő adatokat csak olyan menetvonalaknál adja

át az eljárás, amelyeknél a felhasználó VV-a a menetvonal megrendelője vagy
üzemeltetője (a többinél menetvonalnál NULL-t ad a mezőkben):

`o` Forgalmi vonatnem kód (VForgNemKod)

`o` Vonatszám irányszámmal (VonatszamIrszam)

`o` Foglalt vágány jelző (FoglVagany)

`o` Körjelölő (Korjelolo)

eljárás által visszaadott **Esemenyek** mezőben kapott json string et f eld o l g ozo tt,
objektum szintű adatként adja vissza a kliensnek (ld. Kimenő adatok).

**Kimenő adatok**

  - Menetrendi adatok lista:

`o` Forgalmi vonatnem kód (VForgNemKod)

`o` Menetvonal azonosító (VPE szám + VPE dátum)(MenetvAzon)

`o` Vonat tervezés típusa id (K_VNTT)(VNTTId)

`o` Megrendelő vasútvállalat id (MenetvTulId)

`o` Üzemeltető vasútvállalat id (UzemeltVvId)

`o` Közlekedő jelző (Kozlekedo)

`o` Viszonylat (Menetvonal közlekedési iránya: 0-mindkettő, 1-páratlan, 2
páros) (Viszonylat)

`o` Menetvonal id (MenetvId)

`o` Feloszlatott jelző (Feloszlatott)

`o` Esemény adatok lista (Json formában):

         - V onatszám irányszámmal (VonatszamIrszam)

         - Megrendelt dátum (IndDatum) – date formában [#103703] . A
megrendelés szintű megrendelt dátum (MGM_Menetvonal táblából)

         - Szolg hely id (SzhId)

         - Szolgálati hely index (SzhIndex)

         - Esemény ideje (EsemIdo)

         - Időköz a menetvonal előző és adott eseménye között másodpercben

(ElozoEsemIdokoz) (A menetvonal visszaadott eseményei közötti
időt tartalmazza. Az első visszaadott eseménynél 0.)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 

-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 352/526|



         - I dőköz a menetvonal adott és következő eseménye között

másodpercben (KovEsemIdokoz) (A menetvonal visszaadott
eseményei közötti időt tartalmazza. Az utolsó visszaadott
eseménynél 0)

         - Esemény sorszáma (EsemSorszam)

         - Esemény típus id (0-tartózkodás, 1-érkezés, 2- indulás, 6-áthaladás)

(EsemTipId)

         - Esemény be/kilépés jelző (Menetírányítói szakaszra/Vonalra
be/kilépés) (NULL- közbenső esemény, 1-belépés, 2- kilépés, 3 – be
és kilépés) (SzakaszBeKiJel)

         - Menetvonal indító/cél jelző (MenetvIndCelJel) (NULL – közbenső

esemény, „i” - indulás az indító állomásról, „c” – érkezés a
célállomásra)

         - Esemény terv vágánya id (TervVaganyId)

         - Helytelen vágányra ind. jelző (szolgálati helyek között értelmezett

(HelytVaganyraInd)

         - 93048 Nyíltvonali vágány jele, amelyre a menetvonal indul az

’ ’
MGM _ TervEsem.mgm _ helyt _ vag _ ind adatelem alapján: NULL       
                               -                                érkezési esemény esetén, 0 helyes vágány, 1 helytelen vágány, 3

              harmadik (helytelen) vágány. (MGMHelytVaganyraInd)

         - Foglalt vágány jelző (FoglVagany)

         - Körjelölő („T”- tervezett készre jelentés, „0”- 0 perc tartózkodás,

NULL- Nincs szükség körjelölőre,) (Korjelolo)

         Állomás kezdő/végpontja felöli esemény jelző („k” – a szolgálati

hely kezdő pontja felöli esemény, „v” – a szolgálati hely végpontja
felöli esemény) (EsemAllVegpont)

         - Menetirányítói szakaszról kód (MisrolKod) (1-belépés vagy 3 – be

és kilépés esetén annak a menetirányítói szakasznak a kódja,
ahonnan a belépés történik.)

         - V onalról id (VonalrolId) (1-belépés vagy 3 – be és kilépés esetén

annak a vonalnak a belső azonosítója, ahonnan a belépés történik.)

         -         - –
Ábráról Id (AbrarolId) (1 belépés vagy 3 be és kilépés esetén

annak az ábrának a belső azonosítója, ahonnan a belépés történik.
Több ábra esetén is csak egy érték szerepelhet) [#88993]

         - Menetirányítói szakaszra kód (MisraKod) (2-kilépés vagy 3 – be és

kilépés esetén annak a menetirányítói szakasznak a kódja, ahova a
kilépés történik.)

         - Vonalra id (VonalraId) (2-kilépés vagy 3 – be és kilépés esetén

annak a vonalnak a belső azonosítója, ahova a kilépés történik.)

         -         - –
Ábrára Id (AbraraId) (2 kilépés vagy 3 be és kilépés esetén annak

az ábrának a belső azonosítója, ahova a kilépés történik. Több ábra
esetén is csak egy érték szerepelhet) [ #88993]

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 353/526|



         - Irány (A közlekedés iránya: 0- páros, 1-páratlan) (Irany)

         - VK74827 Be és kilépéshez kapcsolódó esemény jelző
(BeKiKapcsEsemJel) [ VK74827vége]

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Menetvonal|Menetvonalak fej adatai|
|MGM_TervEsem|Menetvonalak tervezett eseményei|
|MGM_TenyEsem|Menetvonalak tény eseményei|
|V_IGF|Igénylés fejadatok|
|V_VSVG||
|V_VFK|Vonatok késési adatai|
|T_KFK|Késési okokat tartalmazó törzstábla|
|K_KSK|Késési segéd kódok|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 354/526|


**Batch modulok egyéb adatai**
##### **3.5 S_0151_05 – Tényadatok lekérdezése szolgáltatás (TenyadatokQuery) ** **(usp_0151_selTenyadatok) **

**Szolgáltatás feladatai**

Az út-idő diagramon megjelenő menetvonalak tény és előrejelzés adatainak a
lekérdezése.

**Bemenő adatok**

   - Menetirányítói szakasz kód (MisKod)

   - Vonal id (VonalId)

   - 88957 Ábra belső azonosító (AbraId)

   - Lekérdezési időszak kezdete (IdoszakKezd)

   - Lekérdezési időszak vége (IdoszakVeg)

   - Szolgálati helyek listája

`o` Szolgálati hely id (SzhIdArray)

   - Forgalmi vonatkategóriák listája

`o` Forgalmi vonatkategória id (’1’ - Személysz. és szerelvény, ’2’ – Teher, ’3’

– Egyéb, ’4’ - MRN) (VForgkatIdArray)

   - Forgalmi vonatnemek listája

`o` Forgalmi vonatnem kód (VForgNemKodArray)

   - Menetvonal tulajdonosok listája

`o` Menetvonal tulajdonos id (MenetvTulIdArray)

   - Vonatszám tartományok listája (VonatszamArray)

`o` Vonatszámtól (Vonatszamtol)

`o` Vonatszámig (Vonatszamig)

   - Eltéréstől (perc) (Elterestol)

   - Eltérésig (perc) (Elteresig)

   - Késési főkódok listája (FoKodArray)

`o` Késési főkód id

   - Késési segédkódok listája (SKodArray)

`o` Késési segédkód id

   - Időhenger jelző (Idohenger)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 355/526|



  - Előrejelzés jelző (Elorejelzes)

  - Felhasználó vasútvállalata id (FelhasznVvId)

  - 88957 ’ KesesFeladat ’ output változó = NULL (kliens nem adja)

  - 88957 ’ VgAdatFeladat ’ output változó = NULL (kliens nem adja)

**Működés**

A tény és előrejelzés adatokat lekérdező szerviz a szükséges adatok kiolvasásához, a
bemenő adatokban kapott paraméterekkel, meghívja az usp_0151_selTenyadatok tárolt
eljárást.

Az eljárás a következő feltételeknek megfelelő menetvonalakat keresi:

    - A bemenő adatokban kapott lekérdezési időszakban legyen tény vagy előre

jelzett eseménye a menetvonalnak, vagy a lekérdezett időszakban a bemenő
adatokban kapott szolgálati helyek valamelyikén tartózkodjon ténylegesen
vagy az előre jelzetten. Az előre jelzett eseményeket vagy az előre jelzett
tartózkodást, csak akkor veszi figyelembe, ha a bemenő adatok szerint az előre
jelzett adatokat is vissza kell adni (Elorejelzes értéke true), valamint VV-i
felhasználó esetén csak azoknál a menetvonalaknál veszi figyelembe,
amelyeknél a felhasználó VV-a a menetvonal megrendelője vagy üzemeltetője.

    - A bemenő adatokban kapott szolgálati helyek közül legalább egynek

szerepelnie kell a menetvonal útvonalán . [ #88992] [#88981 ] ~~MRN~~ ~~vonat~~ ~~esetén~~ ~~a~~
~~munkavégzés~~ ~~helye~~ Illetve a szolgálati helyek közötti események esetén az
esemény [#88981vége ] előtti és utáni szol g ál at i helynek is szerepelnie kell a kapott
szolgálati helyek között. [ #88992vége] Ábra esetén az ábra belső azonosító alapján
olvassa ki az eljárás az ábra s zol gálati helyeit az **MGM_AbraUtvonal**
táblából.

    - Ha a bemenő adatokban a forgalmi vonatkategóriák listája nem üres, akkor PV

felhasználó esetén, a menetvonal forgalmi vonatkategóriája a kapott forgalmi
vonatkategóriák valamelyikével egyező legyen. VV-i felhasználónál csak
azoknál a menetvonalaknál kell teljesülnie a feltételnek, ahol a menetvonal
megrendelője vagy üzemeltetője a felhasználó vasútvállalata (A többi
menetvonalat a forgalmi vonatkategóriájától függetlenül átadja az eljárás).

    - Ha a bemenő adatokban a forgalmi vonatnemek listája nem üres, akkor PV

felhasználó esetén, a menetvonal forgalmi vonatneme a kapott forgalmi
vonatnemek valamelyikével egyező legyen. VV-i felhasználónál csak azoknál a
menetvonalaknál kell teljesülnie a feltételnek, ahol a menetvonal megrendelője
vagy üzemeltetője a felhasználó vasútvállalata (a többi menetvonalat e szűrés
nélkül átadja az eljárás).

    - Ha a bemenő adatokban a menetvonal tulajdonosok listája nem üres, akkor a

menetvonal tulajdonosa (megrendelője) a kapott menetvonal tulajdonosok
valamelyikével egyező legyen, továbbá. VV-i felhasználó esetén, ha a MÁV
szerepel a menetvonal tulajdonosok listájában, akkor a menetvonal
üzemeltetője a felhasználó vasútvállalata legyen.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 356/526|



    - Ha a bemenő adatokban a vonatszám tartományok listája nem üres, akkor PV

felhasználó esetén, a menetvonalhoz tartozó vonatok közül, legalább az egyikre
teljesülnie kell annak, hogy a bemenő adatokban kapott szolgálati helyek közül
legalább egy szerepel a vonat útvonalán és a vonat száma a kapott vonatszám
tartományok valamelyikébe beleesik. (Ha egy tartományban csak a
vonatszámtól vagy csak a vonatszámig van kitöltve, akkor azt a tartományt úgy
kell kezelni, mintha csak abból az egy vonatszámból állna.) VV-i
felhasználónál csak azoknál a menetvonalaknál kell teljesülnie a feltételnek,
ahol a menetvonal megrendelője vagy üzemeltetője a felhasználó vasútvállalata
(a többi menetvonalat e szűrés nélkül átadja az eljárás).

    - Ha a bemenő adatokban a forgalmi késési főkódok listája nem üres, akkor PV

felhasználó esetén, a menetvonalnak a bemenő adatokban kapott szolgálati
helyeken, a lekérdezett időszakban, a bemenő adatokban kapott főkódokkal (a
kapott főkódok közül valamelyikkel) igazolt késése legyen. VV-i
felhasználónál csak azoknál a menetvonalaknál kell teljesülnie a feltételnek,
ahol a menetvonal megrendelője vagy üzemeltetője a felhasználó vasútvállalata
(a többi menetvonalat e szűrés nélkül átadja az eljárás)

    - Ha a bemenő adatokban a késési segédkódok listája nem üres, akkor PV

felhasználó esetén, a menetvonalnak a bemenő adatokban kapott szolgálati
helyeken, a lekérdezett időszakban, a bemenő adatokban kapott segédkódokkal
(a kapott segédkódok közül valamelyikkel) igazolt késése legyen. VV-i
felhasználónál csak azoknál a menetvonalaknál kell teljesülnie a feltételnek,
ahol a menetvonal megrendelője vagy üzemeltetője a felhasználó vasútvállalata
(a többi menetvonalat e szűrés nélkül átadja az eljárás)

    - Ha a bemenő adatokban az Eltéréstől kitöltött, akkor PV felhasználó esetén, a

menetvonalnak a bemenő adatokban kapott szolgálati helyeken, a lekérdezett
időszakban olyan eseménye legyen, amelynél az eltérés megegyezik, vagy
nagyobb, mint az Eltéréstől mezőben kapott érték. Ha az Eltéréstől értéke 0 és
az Eltérésig nincs kitöltve, akkor a menetvonalnak a bemenő adatokban kapott
szolgálati helyeken, a lekérdezett időszakban nem lehet sem pozitív sem
negatív eltérése (pontosnak kell lennie). VV-i felhasználónál csak azoknál a
menetvonalaknál kell teljesülnie a feltételnek, ahol a menetvonal megrendelője
vagy üzemeltetője a felhasználó vasútvállalata (a többi menetvonalat e szűrés
nélkül átadja az eljárás)

    - Ha a bemenő adatokban az Eltérésig kitöltött, akkor PV felhasználó esetén, a

menetvonalnak a bemenő adatokban kapott szolgálati helyeken, a lekérdezett
időszakban olyan eseménye legyen, amelynél az eltérés megegyezik, vagy
kisebb, mint az Eltérésig mezőben kapott érték. VV-i felhasználónál csak
azoknál a menetvonalaknál kell teljesülnie a feltételnek, ahol a menetvonal
megrendelője vagy üzemeltetője a felhasználó vasútvállalata (a többi
menetvonalat e szűrés nélkül átadja az eljárás)

Az eljárás a keresési feltételeknek megfelelő menetvonalaknak, a kimenő adatokban
meghatározott tény és előrejelzés (becsült) adatait olvassa ki a következőket
figyelembe véve:

    - Az előrejelzés adatokat csak akkor olvassa ki, ha a bemenő adatokban az

Elorejelzes értéke true), valamint VV-i felhasználó esetén csak azoknál a

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 357/526|


menetvonalaknál, amelyeknél a felhasználó VV-a a menetvonal megrendelője
vagy üzemeltetője.

    - Ha a bemenő adatokban az Időhenger jelző értéke true, akkor a kimenő

adatokban közlekedőnek jelöli az olyan menetvonalat, amely aktuálisan a
bemenő adatokban kapott szolgálati helyek által meghatározott szakaszon
közlekedik. Ha már leközlekedett, vagy valamilyen módon feloszlatott, vagy
nincs még nincs tény eseménye az adott szakaszon (ha csak előrejelzés
eseménye van, akkor nem számít közlekedőnek), vagy már elhagyta az adott
szakaszt, akkor nem számít közlekedőnek.

    - A kimenő adatokban PV-i felhasználó esetén feloszlatottnak jelöli az olyan

menetvonalat, amelynek a bemenő adatokban kapott szolgálati helyeken, a
lekérdezett időszakban van Rfo eseménye, vagy a lekérdezett időszak előtt, de
a lekérdezett időszak kezdetén még Rfo állapotban van (még nincs másik tény
eseménye, sem készrejelentése). VV-i felhasználónál az előző feltételek
teljesülése esetén, csak akkor jelöli feloszlatottnak a menetvonalat, ha a
menetvonal megrendelője vagy üzemeltetője a felhasználó vasútvállalata.

    - 88997 A kimenő adatokban PV    - i felhasználó esetén a következők szerint jelzi,
hogy az adott menetvonalnál a kiírt v onatszámokat be kell       - e keretezni.

Ha a bemenő adatokban az Időhenger jelző értéke igaz, akkor abban az esetben
kell keretezni a menetvonalnál kiírt vonatszámokat, [VK95023 ] ha a menetvonalhoz
tartozó aktuális vonatösszeállításban lévő járművekhez tartozik korlátozás
(járműsebességkorlátozás, vagy mozdony szintű menetdinamikai csoport
azonosító alapján rosszabb mozdony, vagy teljesítménycsökkenés) vagy a
menetvonahoz tartozik egyéb sebességkorlátozás. (Ha az adott menetvonalnál
az MGM_Menetvonal. vszam_keret_jelzo értéke ’ M ', vagy ' V ', vagy ' X ' ).

VK95023vége

Ha a bemenő adatokban az Időhenger jelző értéke hamis, akkor a következő
esetben kell keretezni a menetvonalnál kiírt vonatszámokat:

`o` VK95023 Ha a menetvonahoz tartozik egyéb sebességkorlátozás. (Ha az
MGM_Menetvonal. vszam_keret_jelzo értéke ’ M ', vagy ' X ' )

`o` Ha nincs egyéb sebességkorlátozás, de a megjelenített szakaszo n a

menetvonalhoz tartozó utolsó érvényes vonatösszeállításban lévő
járművekhez tartozik korlátozás (járműsebességkorlátozás, vag y
mozdony szintű menetdinamikai csoport azonosító alapján rosszabb
mozdony, vagy teljesítménycsökkenés). (Ha az MGM_Menetvonal.
vszam_keret_jelzo értéke ’ V ', vagy ' L ', akkor az eljárás megkeresi a
megjelenített szakaszon érvényes utolsó vonatösszeállítást és a
vonatösszeálításban szereplő járművekre, az uf_getMGMKorlVoss z
függvényt használatával ellenőrzi, hogy tartozik          - e hozzá korlátozás) .

VK95023vége

VV    - i felhasználónál az előzőeket figyelembe véve, csak akkor jelzi az eljárás,
hogy az adott menetvonalnál a kiírt vonatszámokat be kell e keretezni, ha a
menetvonal megrendelője vagy üzemeltetője a felhasználó
vasútvállalata. [88997vége]

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 358/526|



    - Az eljárás, a menetvonalaknak a bemenő adatokban kapott időszakban a

bemenő adatokban kapott szolgálati helyekre rögzített, a feltételeknek
megfelelő, tényleges és előre jelzett (becsült) eseményeit, valamint a tényleges
és előre jelzett tartózkodásait, illetve az adminisztratív feladatait, a következők
szerint adja át:

`o` Az egyes eseményeknél az esemény jellegében jelzi, hogy az adott

esemény tény vagy előre jelzett esemény.

`o` Az eseményeknél, PV felhasználó esetén mindig átadja a vonatszámát a

vonat irányszámával, valamint ha a vonat rendkívüli küldeményt
továbbít, akkor az „Rk” jelöléssel (vonatszám+vonat
irányszáma+”Rk”). VV-i felhasználó esetén csak akkor adja át, ha a
felhasználó VV-a a menetvonal megrendelője vagy üzemeltetője.

`o` Ha a lekérdezett időszakban nincs sem tényleges sem előre jelzett

eseménye a menetvonalnak, de valamelyik kapott szolgálati helyen
tartózkodik ténylegesen vagy előrejelzés szerint, akkor 0-tartózkodás
eseményt ad az adott szolgálati helyre, és az esemény jellegében jelzi,
hogy ez tényleges vagy előre jelzett tartózkodás. (Előre jelzett
tartózkodást természetesen csak akkor ad, ha előre jelzést is át kell
adni.)

`o` Az érkezés, indulás és áthaladás eseményeket átalakítás nélkül adja át

(az MGM _ TenyEsem táblából), mind tény mind becsült értékek esetén.

`o` A készrejelentést, ha a készrejelentés ideje az állomási tartózkodáson

belülre esik, vagy a menetvonal indító állomásán történő
készrejelentést, vagy az elmaradt közlekedés utáni készrejelentést, a
készrejelentés idejét tartalmazó 0-tartózkodás eseménnyel adja át úgy,
hogy a Körjelölőben is jelzi a készrejelentést. Ha a bemenő adatokban
az Időhenger jelző értéke true és a vonat már elindult a készre jelentés
helyéről, akkor csak az elmaradt közlekedés utáni készrejelentést adja át
körjelölő nélkül. VV-i felhasználó esetén olyan menetvonalaknál,
amelyeknél a felhasználó VV-a nem a menetvonal megrendelője vagy
üzemeltetője a készrejelentést Körjelölő nélkül adja át.

`o` A Busz érkezés eseményt nem adja át.

`o` A Busz indulás eseményt tény 2-indulás eseményként adja át, de az

eseménynél a Busz esemény jelzőt (Busz) true-ra és az Esemény
be/kilépés jelzőt ’2’ – „Kilépés”-re állítja. VV-i felhasználó esetén
olyan menetvonalaknál, amelyeknél a felhasználó VV-a nem a
menetvonal megrendelője vagy üzemeltetője a Busz esemény jelzőt
(Busz) nem állítja true-ra.

`o` Az Elmaradt indulás eseményt 0-tartózkodás eseményként adja át és a

Menetvonal indító/cél jelzőt (MenetvIndCelJel) „c” értékre állítja a
menetvonal megszakítása miatt.

`o` Az Elmaradt érkezés eseményt nem adja át.

`o` Rfo - Vonat feloszlatása útközben és Ivv – Indulás visszavonás

eseményeket is 0-tartózkodás eseményként adja át úgy, hogy a

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 359/526|


Körjelölőbe az „R” (Feloszlatott (RFO) vonat vagy IVV esemény a
tartózkodási állomáson) értéket helyezi. VV-i felhasználó esetén, ha a
felhasználó VV-a nem a menetvonal megrendelője vagy üzemeltetője,
akkor a tartózkodás eseményt körjelölő nélkül adja át.

`o` U tk, Lem és Nkt eseményeket is 0-tartózkodás eseményként adja át, és

a Menetvonal indító/cél jelzőt (MenetvIndCelJel) „c” értékre állítja a
menetvonal vége miatt.

`o` #88981 Feltartóztatott menetvonalaknál (masod _ jelolo =’ F ’ ), ha a
feltartóztatás egy szolgálati hely előtt (két szolgálati hely között)
történik, akkor a feltartóztatás helyére érkezés eseményt ad át ( az
MGM_NyiltVonalEsem táblából):

          - Ennél az eseménynél, a Szolg hely id (SzhId), a Szolgálati hely

index (SzhIndex), Irány (Irany) mezőkben a feltartóztatás helye
előtti szolgálati helynél lévő értékek szerepelnek. Az Állomás
kezdő/végpontja felöli esemény jelző (EsemAllVegpont)

                                                       mezőbe az előtte lévő eseménynél lévő érték ellentéte kerül (k

                    >v, v >k)

          - Ez olyan közbenső esemény, amelynél nincs körjelölő,

ki/belépés jelző, vágányra vonatkozó adat, eltérés,
adminisztrációs feladat, csatlakozás, forgalmi szabályozási
művelet miatti módosítás.

          - A Szolgálati hely felé belső azonosítója (SzhIdIg) mező, annak

az elemi szakasznak a vég szolgálati helyét tartalmazza, amire
az esemény esik.

          - Az Eltolás (SzhIdEltolas) mezőben az esemény előtti szolgálati

                                               helytől való távolsága szerepel méterben (100m re kerekítve).
#88981vége

`o` #88992 MRN      - es menetvonalakná l a munkavégzés helyére érkezés és
indulás eseményeket ad át ( az MGM_NyiltVonalEsem táblából):

          - Ezeknél az eseményeknél, a Szolg hely id (SzhId), a Szolgálati

hely index (SzhIndex), Irány (Irany) mezőkben a munkavégzés
helye előtti szolgálati helynél lévő értékek szerepelnek. Az
Állomás kezdő/végpontja felöli esemény jelző
(EsemAllVegpont) mezőbe

              - érkezésnél az előtte lévő eseménynél lévő érték ellentéte

                          -                          kerül (k >v, v >k)

              - indulás eseménynél, ha nem visszatérő a vonat, akkor a

munkavégzés helye előtti szolgálati helyről történő
indulás eseménynél lévő érték kerül, visszatérő vonatnál
pedig az ellentéte.

          - Ezek olyan közbenső események, amelyeknél nincs körjelölő,

ki/belépés jelző, vágányra vonatkozó adat, eltérés,
adminisztrációs feladat, csatlakozás, forgalmi szabályozási
művelet miatti módosítás.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 360/526|



          - A Szolgálati hely felé belső azonosítója (SzhIdIg) mező a vonat

munkavégzés helye utáni szolgálati helyének a belső
azonosítóját tartalmazza. (Ez a mező MRN vonat esetén csak a
munkavégzés helyéhez tartozó eseményeknél kitöltött)

          - Az Eltolás (SzhIdEltolas) mezőben a munkavégzés helyének az

előző szolgálati helytől való távolsága szerepel méterben (100m

                re kerekítve). (Ez a mező MRN vonat esetén csak a
munkavégzés helyéhez tartozó eseményeknél kitöltött). [ #88992vége]

    - A menetvonalaknak, a bemenő adatokban kapott vonalra vagy menetirányítói

szakaszra vagy ábrára ( csak az egyik kitöltött a bemenő adatokban) történő be
vagy kilépéseit, valamint a Busz indulás eseményeit a visszaadott
eseményeknél a következő módon jelzi az eljárás az Esemény be/kilépés jelző
értékével:

`o` ’1’ – „Belépés”- vonalra/menetirányítói szakaszra belépő eseménynél

(annál az eseménynél, amely előtt olyan eseménye van a
menetvonalnak, aminek a szolgálati helye egy másik
vonalhoz/menetirányítói szakaszhoz tartozik.)

`o` ’2’ – „Kilépés” - vonalról/menetirányítói szakaszról kilépésnél (annál

az eseménynél, amely után olyan eseménye a menetvonalnak, aminek a
szolgálati helye egy másik vonalhoz/menetirányítói szakaszhoz
tartozik.) valamint Busz indulás eseménynél.

`o` ’3’ – „Be és kilépés” - vonalra/menetirányítói szakaszra belépő és

egyben kilépő eseménynél (annál az eseménynél, amely előtt és után is
olyan eseménye a menetvonalnak, aminek a szolgálati helye egy másik
vonalhoz/menetirányítói szakaszhoz tartozik.)

`o` NULL – egyéb esetben

    - Ábra esetén a belépés és kilépés események, valamint az AbrarolId és AbraraId

meghatározása a manuálisan karbantar t ott **MGM_AbraKiBe** tábla alapján
történik, melyben adott ábra adott p ontján ak be és kilépő ábrái találhatók. [#88993]

    - Menetvonal indító/cél jelzőt (MenetvIndCelJel) a következők szerint állítja:

`o` NULL – közbenső eseménynél

`o` „i” – az első eseménynél, a menetvonal indításakor az indító állomáson

vagy a megszakítás utáni újra indításakor az újra indítás szolgálati
helyén

`o` „c” – az utolsó eseménynél, a menetvonal befejezésekor a célállomáson

vagy a menetvonal megszakításakor a megszakítás szolgálati helyén.

    - VK74827 A be és kilépéshez kapcsolódó esemény jelzőt (BeKiKapcsEsemJel) az
eljárás a következő eseményeknél állítja true értékre, a többi eseménynél pedig
false-ra:

`o` Egy adott menetvonal egymást követő, egy szolgálati helyre eső

eseményeinél (tény és előrejezés eseményeknél is), ha ezek közül

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 361/526|



          - az első eseménynél az Esemény be/kilépés jelző értéke ’1’ –

„Belépés” vagy a Menetvonal indító/cél jelző értéke „i”

          - és az utolsó eseménynél pedig az Esemény be/kilépés jelző

értéke ’2’ – „Kilépés” vagy a Menetvonal indító/cél jelző értéke
„c” és a Busz esemény jelző (Busz) értéke false.

`o` Ha egy (tény vagy előrejezés) eseménynél az Esemény be/kilépés jelző

értéke ’3’ – „Be és kilépés” [VK74827vége]

    - A menetvonalakhoz visszaadott eseményeknél az eljárás a Körjelölő mezőben

jelzi, hogy szükség van-e körjelölőre az adott eseménynél a grafikonon,
valamint azt is, hogy milyen okból szükséges. VV-i felhasználó esetén csak
olyan menetvonalaknál jelzi a körjelölő szükségességét, amelyeknél a
felhasználó VV-a a menetvonal megrendelője vagy üzemeltetője (A többinél
NULL-t ad). A körjelölő szükségességének megállapítása a következő
sorrendben történik (Ha egy eseménynél több körjelölőre vonatkozó feltétel is
teljesülne, akkor a következő sorrend szerint mindig az első teljesülő
feltételnek megfelelő érték kerül a mezőbe.):

`o` „K” - Készrejelentetés vagy előzetes készrejelentés miatt szükséges

körjelölő. Az előzetes készrejelentést a készrejelentésig az érkezési
eseménynél jelzi, ha van érkezési esemény az adott szolgálati helynél
(ha nincs, akkor az indulási eseménynél). A készrejelentést, ha a
készrejelentés ideje az állomási tartózkodáson belülre esik, vagy a
menetvonal indító állomásán történő készrejelentést, vagy az elmaradt
közlekedés utáni készrejelentést, a készrejelentés idejét tartalmazó
tartózkodás eseménynél jelzi. Ha a bemenő adatokban az Időhenger
jelző true, és a vonat már elindult a készre jelentés helyéről, akkor nem
ad át körjelölőt a készrejelentéshez. Ha át kell adni a körjelölőt a
készrejelentéshez, de a készrejelentés ideje korábbi, mint a szolgálati
helyre érkezés, akkor az érkezés eseménynél jelzi. Ha át kell adni a
körjelölőt a készrejelentéshez, de a készrejelentés ideje későbbi, mint a
szolgálati helyre érkezés, akkor az indulás eseménynél jelzi.

`o` „R” - RFO vagy IVV miatt szükséges körjelölő. Az Rfo vagy Ivv

eseményeknél átadott tartózkodási eseménynél jelzi.

`o` „T” - tervezett készre jelentés miatt szükséges körjelölő. Az előzetes

készrejelentésig vagy készrejelentésig jelzi az érkezési eseménynél, ha
van érkezési esemény az adott szolgálati helynél (ha nincs, akkor az
indulási eseménynél)

`o` „0” - 0 perc tartózkodás miatt szükséges körjelölő. Fél percnél kisebb

tartózkodás 0 perces tartózkodásnak számít, de az áthaladás nem jelent
0 perces tartózkodást. Az indulási eseménynél jelzi.

`o` NULL- Nincs szükség körjelölőre

    - Ha a bemenő adatokban az Időhenger jelző értéke true, akkor az eseményeknél

az eljárás visszaadja a vonat aktuális állapotához tartozó körjelölőt is az
AktKorjelolo mezőben. VV-i felhasználó esetén csak olyan menetvonalaknál
adja vissza, amelyeknél a felhasználó VV-a a menetvonal megrendelője vagy

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 362/526|


üzemeltetője (A többinél NULL-t ad). Ha szükséges, akkor a következőképpen
tölt i ki a mezőt:

`o` „K” – Ha az aktuális helyén előzetesen készrejelentetett vagy

készrejelentett a vonat és még nem indult el.

`o` „R” – Ha RFO vagy IVV az utolsó eseménye és még nincs újra

készrejelentve, [ #97445 ] vagy ha előrejelzés törlése miatt van szükség új
készrejelentésre [#97445vége] ~~továbbá~~ ~~ha~~ ~~egy~~ ~~közbenső~~ ~~(tartózkodási)~~
~~állomáson~~ ~~Befejezett~~ ~~vonatösszeállítása~~ ~~van~~ ~~a~~ ~~vonatnak~~ .

`o` NULL- Egyéb esetben

    - #88981 Ha a bemenő adatokban az Időhenger jelző értéke true, akkor az
eseményeknél az eljárás visszaadja a v on at aktuális állapotához tartozó másod
jelölőt is (MGM_Menetvonal.mas od_jel olo) a MasodJelolo mezőben. VV      - i
felhasználó esetén csak olyan mene t v o nalaknál adja vissza, amelyeknél a
felhasználó VV      - a a menetvonal meg r endelője vagy üzemeltetője (A többinél
NULL    - t ad). A következő értékek lehetnek a mezőben:

`o` „F ” – Ha a vonathoz irányítói feltartóztatást rögzítettek.

`o` NULL      - Egyéb esetben [#88981vége]

    - Állomás kezdő/végpontja felöli esemény jelzőt (EsemAllVegpont) a

következők szerint állítja. (Áthaladás eseménynél az indulásra vonatkozó
értéket állítja be.)

`o` „k” – a szolgálati hely kezdő pontja felöli esemény esetén

`o` „v” – a szolgálati hely végpontja felöli esemény esetén

    - A menetvonal azon a tény indulás eseményeinél, amelyeknél változik a

menetrendi eltérés, kitölti az Elteres mezőt a menetrendi eltéréssel. Ha egy
szolgálati helynél nincs tény indulás, de van a tény érkezés, akkor a tény
érkezés eseménynél, ha nincs tény érkezés esemény sem, de van tény áthaladás,
akkor az áthaladás eseménynél kezeli a menetrendi eltérést és változás esetén
kitölti az Elteres mezőt. VV-i felhasználó esetén csak olyan menetvonalaknál
tölti ki, amelyeknél a felhasználó VV-a a menetvonal megrendelője vagy
üzemeltetője.

    - Az indulás, érkezés és áthaladás eseményeknél az abszolút eltérés mezőben a

menetrendtől eltérést jelzi. VV-i felhasználó esetén csak olyan
menetvonalaknál jelzi, amelyeknél a felhasználó VV-a a menetvonal
megrendelője vagy üzemeltetője.

    - VV-i felhasználó esetén a következő adatokat csak olyan menetvonalaknál adja

át az eljárás, amelyeknél a felhasználó VV-a a menetvonal tulajdonosa vagy
üzemeltetője (a többinél menetvonalnál NULL-t ad a mezőkben):

`o` Forgalmi vonatnem kód (VForgNemKod)

`o` Vonatszám irányszámmal, „Rk” jelöléssel (VonatszamIrszam)

`o` Aktuális körjelölő (AktKorjelolo)

`o` Foglalt vágány jelző (FoglVagany)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 363/526|


`o` Körjelölő (Korjelolo

`o` Eltérés (Elteres)

`o` Abszolút eltérés (AbszElteres)

`o` Busz esemény jelző (Busz)

    - Ha a bemenő adatokban az ’Idohenger’ = true, akkor a kimenő adatokban

visszaadja az eseményekhez tartozó ’AdminFeladat’ adatelemet, ahol az
’MGM_AbraUtvonal’ táblában az ’abra_id’ és ’szh_id’ által meghatározott
rekordban az ’admin_feladat’ = True (az ábrán a feladat engedélyezett).

89957 Külön struktúrában:

    - Ha a ’MunkahelyId’ (’MGM_Abra.abra_id’  ’ter_munkahely_id’) alapján a

’TeruletMunkahely.keses_ig’ <> NULL és > 0, akkor a ’KesesFeladat’ output
változó értékét True értékre állítja.

    - Ha a ’MunkahelyId’ alapján (’MGM_Abra.abra_id’  ’ter_munkahely_id’) a

’TeruletMunkahely.vagany_adat’ <> NULL és > 0, akkor a ’VgAdatFeladat’
output változó értékét True értékre állítja.

    - #88980 Ha az adott eseményhez tartozik ol yan csatlakozás az MGM _ CsatlVonat
táblában, aminek az állapota 1 – F ol y amatban, vagy 2 – Teljesült, akkor
visszaadja a csatlakozás belső azonosítóját (CsatlakozasId). Továbbá, ha az
MGM _ CsatlVonat táblában az adott eseménynél a várakozás típusa
(varakozas_tipus) ’ V ’ – Várakozó v onat és az adott csatlakozásnál a várakozó
vonatok közül ennek az eseménynek az ideje a legnagyobb, akkor a kimenő
adatokban a Csatlakozás ikon jel ző ( C satlakozasIkonJel) értékét is True      - ra
állítja. [ #88980vége]

Az eljárás az összegyűjtött adatokat átadja a hívó programnak. A szerviz réteg az
eljárás által visszaadott **Esemenyek** mezőben kapott json string et f eld o l g ozo tt,
objektum szintű adatként adja vissza a kliensnek (ld. Kimenő adatok).

**Kimenő adatok**

  - Tény és előrejelzés adatok lista:

`o` Forgalmi vonatnem kód (VForgNemKod)

`o` Menetvonal azonosító (VPE szám + VPE dátum)(MenetvAzon)

`o` Vonat tervezés típusa id (K_VNTT)(VNTTId)

`o` Megrendelő vasútvállalat id (MenetvTulId)

`o` Üzemeltető vasútvállalat id (UzemeltVvId)

`o` Közlekedő jelző (Kozlekedo)

`o` Viszonylat (Menetvonal közlekedési iránya: 0-mindkettő, 1-páratlan, 2
páros) (Viszonylat)

`o` Menetvonal id (MenetvId)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 364/526|


`o` F eloszlatott jelző (Feloszlatott)

`o` 88997 Vonatszám keretezés jelző (Von a tszamKeret) 88997vége

`o` Esemény adatok lista (Json formában):

         - V onatszám irányszámmal, „Rk” jelöléssel (VonatszamIrszam)

         - Vonat indulási dátum (IndDatum) – date formában [#103703]

         - A ktuális körjelölő („K” – készrejelentett, előzetesen készrejelentett,

de el nem indult, „R” – Feloszlatott (RFO) vonat vagy IVV
eseménynél a tartózkodási állomáson #97445 vagy ha új
készrejelentésre van szükség előrejelzés törlése miatt [#97445vége],
NULL- Nincs szükség körjelölőre,) (AktKorjelolo)

         - #88981 Másod jelölő („F ” Feltartóztatás, NULL – Nincs szükség
jelölésre) (MasodJelolo)

         - Szolg hely id (SzhId) [#88982 ] Olyan eseménynél. ami két szolgálati

hely közé esik, az esemény előtti szolgálati helyet
tartalmazza [#88982vége]

         - Szolgálati hely index (SzhIndex)

         - Esemény ideje (EsemIdo)

         - Időköz a menetvonal előző és adott eseménye között másodpercben

(ElozoEsemIdokoz) (A menetvonal visszaadott eseményei közötti
időt tartalmazza. Az első visszaadott eseménynél 0.)

         - Időköz a menetvonal adott és következő eseménye között

másodpercben (KovEsemIdokoz) (A menetvonal visszaadott
eseményei közötti időt tartalmazza. Az utolsó visszaadott
eseménynél 0)

         - Esemény sorszáma (EsemSorszam)

         - Esemény típus id (0-tartózkodás, 1-érkezés, 2-indulás, 6-áthaladás

(EsemTipId)

         - Esemény be/kilépés jelző (Menetirányítói szakaszra/Vonalra
be/kilépés) (NULL- közbenső esemény, 1-belépés, 2- kilépés)
(SzakaszBeKiJel)

         - Menetvonal indító/cél jelző (MenetvIndCelJel) (NULL – közbenső

esemény, „i” – az első eseménynél, a menetvonal indításakor az
indító állomáson vagy a megszakítás utáni újra indításakor az újra
indítás szolgálati helyén, „c” – az utolsó eseménynél, a menetvonal
befejezésekor a célállomáson vagy a menetvonal megszakításakor a
megszakítás szolgálati helyén)

         - Esemény vágánya id (VaganyId) (PASS2-ben naplózott tény

vágány. Amíg nincs PASS2-es naplózott adat, előrejelzés vagy GPS
adat esetén, a tervezett vágány.)

         - Helytelen vágányra ind. jelző (szolgálati helyek között értelmezett)

(HelytVaganyraInd)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 365/526|



         - 93048 Nyíltvonali vágány jele, amelyre a menetvonal indul az

’ ’
MGM _ TenyEsem.mgm_helyt _ vag _ ind adatelem alapján: NULL       
                               -                                érkezési esemény esetén, 0 helyes vágány, 1 helytelen vágány, 3

              harmadik (helytelen) vágány. (MGMHelytVaganyraInd)

         - Foglalt vágány jelző (FoglVagany)

         - Körjelölő („K” – készrejelentett, előzetesen készrejelentett, de el

nem indult, „R” – Feloszlatott (RFO) vonat vagy IVV eseménynél a
tartózkodási állomáson, „0”- 0 perc tartózkodás, „T”- tervezett
készre jelentés, NULL- Nincs szükség körjelölőre,) (Korjelolo)

         - Busz esemény jelző (Busz)

         - Esemény jelleg („T”- Tény, „E” - Előrejelzés) (EsemJelleg)

         - Eltérés (Elteres)

         - Abszolút eltérés (AbszElteres)

         - Á llomás kezdő/végpontja felöli esemény jelző (EsemAllVegpont )         
#89000 Ábra szerinti lekérdezés esetén, a más irányultsággal
rendelkező vonalról be           - vagy kilépő vonatok eseményeinek
megfelelő megjelenítése miatt az eljárás az esemény szintű
kezdő/végpont felőli (MGM _ TervEsem) jelzőt megfordítja (Akkor
van fordítás, ha az MGM_AbsraKiBe.szh_kezdopont_fordit =
True). Ez alapján a lehetséges értékek: [#89000 VÉGE] Lehetséges
értékei:

            - „k ” – a szolgálati hely kezdő pontja felöli esemény esetén

            - „v ” – a szolgálati hely végpontja felöli esemény esetén

         - Menetirányítói szakaszról kód (MisrolKod) (1-belépés vagy 3 – be

és kilépés esetén annak a menetirányítói szakasznak a kódja,
ahonnan a belépés történik.)

         - V onalról id (VonalrolId) (1-belépés vagy 3 – be és kilépés esetén

annak a vonalnak a belső azonosítója, ahonnan a belépés történik.)

         -         - –
Ábráról Id (AbrarolId) (1 belépés vagy 3 be és kilépés esetén

annak az ábrának a belső azonosítója, ahonnan a belépés történik.
Több ábra esetén is csak egy érték szerepelhet) [#88993]

kilépés esetén annak a menetirányítói szakasznak a kódja, ahova a
kilépés történik.)

         - V onalra id (VonalraId) (2-kilépés vagy 3 – be és kilépés esetén

annak a vonalnak a belső azonosítója, ahova a kilépés történik.)

         -         - –
Ábrára Id (AbraraId) (2 kilépés vagy 3 be és kilépés esetén annak

az ábrának a belső azonosítója, ahova a kilépés történik. Több ábra
esetén is csak egy érték szerepelhet) [ #88993]

         - Irány (A közlekedés iránya: 0- páros, 1-páratlan) (Irany)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** („k” – a szolgálati hely kezdő pontja felöli
esemény, „v” – a szolgálati hely végpontja felöli esemény)

**törölt:** <#>¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 366/526|



         - VK74827 Be és kilépéshez kapcsolódó esemény jelző
(BeKiKapcsEsemJel) [ VK74827vége]

         - Adminisztrációs feladat kódja (’AdminFeladat’)

         - #88980 Csatlakozás belső azonosító (CsatlakozasId)

         - #88980 Csatlakozás ikon jelző (CsatlakozasIkonJel)

         - #88992 Szolgálati hely felé belső azonosítója (SzhIdIg) (Lehet NULL)
(Ez a mező csak [#88981 ] ~~MRN~~ ~~vonatoknál~~ ~~a~~ ~~munkavégzés~~ ~~helyéhez~~
~~generált~~ ~~eseményeknél~~ ~~kitöltött~~ . ~~Annak~~ ~~az~~ ~~elemi~~ ~~szakasznak~~ ~~a~~ ~~vég~~
~~szolgálati~~ ~~helyét~~ ~~tartalmazza~~, ~~amire~~ ~~a~~ ~~munkavégzés~~ ~~helye~~ ~~esik~~ .
olyan eseményeknél kitöltött, amelyek két szolgálati hely közé
esnek. Annak az elemi szakasznak a vég szolgálati helyét
tartalmazza, amire az esemény esik [#88981vége] )

         - #88992         Eltolás méterben (100m re kerekítve) Annak az elemi
szakasznak a kezdő szolgálati helyétől, amire a [#88981 ] ~~munkavégzés~~
~~helye~~ két szolgálati hely közötti esemény [#88981vége] esik.
(SzhIdEltolas) (Lehet NULL) (Ez a mező csak [#88981 ] ~~MRN~~
~~vonatoknál~~ ~~a~~ ~~munkavégzés~~ ~~helyéhez~~ ~~generált~~ ~~eseményeknél~~ ~~kitöltött~~
olyan eseményeknél kitöltött, amelyek két szolgálati hely közé
esnek. [#88981vége] )

         - Forgalmi szabályozási művelet miatti módosítás ok kódja

(FszModOk) = [107248] ' MGM_TenyEsem.fsz_mod_ok ' .

         - ' FszModLeiras ' ha az esemény „E ” előrejelzés, akkor következő

értékek lehetnek az FszModOk értékétől függően:

 1      - „Új előrejelzés kiindulási állomástól ”
 2      - „Új előrejelzés közbenső állomástól ”
 3      - „Előrejelzett eseményidő módosítása ”
 4      - „Rendkívüli áthaladás ”
 5      - „Menetrendtől eltérő megállás ”
 6      - „Tartózkodási idő módosítás ”
 21      - „Előztetés (előreküldendő) ”
 22      - „Előztetés (előrzendő) ”
 31      - „Vonattalálkozás (bevárandó) ”
 32      - „Vonattalálkozás (várakozó) ”

A 10, 11, 12 és 13 kódokhoz nem kell ' FszModLeiras ', annak értéke
NULL legyen. [107248 vége]

  - Külön struktúrában:

`o` ’KesesFeladat’ output változó.

`o` ’VgAdatFeladat’ output változó.

**Interfészek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 367/526|


**Jelentések**

Nincs

**Email küldés**

Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**












|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Menetvonal|Menetvonalak fej adatai|
|MGM_TenyEsem|Menetvonalak tény eseményei|
|V_IGF|Igénylés fejadatok|
|V_VFK|Vonatok késési adatai|
|T_KFK|Késési okokat tartalmazó törzstábla|
|K_KSK|Késési segéd kódok|
|88997MGM_Korlatoz asok|MGM korlátozások|
|VK95023MenetvVonO sszeallitas|Menetvonalak vonatösszeállításai|
|VK95023 Vonatosszeallitas|Vonatösszeállítások|
|VK95023Vonatosszealli tasJarmu|Vonatösszeállítások járművei|
|VK95023Jarmu|Járművek|
|VK95023JarmuAdatla p|Járművek adatai|
|VK95023T_VOJ|Vontatójárművek adatai|
|VK95023P_VTS|Vonatforgalmi terv szolgálati helyei|
|#88992MGM_NyiltVo|Nyílt vonali események|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 368/526|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**

Nincs
##### **3.6 S_0151_06 – Vágányzárak lekérdezése (VaganyzarakQuery) ** **(usp_0151_selVaganyzarak) **

**Szolgáltatás feladatai**

vágányzárak adatainak a lekérdezésére szolgál

**Bemenő adatok**

  - Vonal id (VonalId)

  - M enetirányítói szakasz kódja (MisKod)

  - Időszak kezdet (IdoszakKezd)

  - Időszak vége (IdoszakVeg)

**Működés**

A szerviz a bemenő paraméterben kapott adatokkal meghívja az **usp_0151_selVaganyzarak**
eljárást, mely lekérdezi a megjelenítendő vágányzárak adatait az adatbázisból.

Az eljárás a következő feltételeknek megfelelő vágányzárakat, a vágányzáraknak az
aktuálisan érvényes verzióját (V_KKF.erv_jelzo=true) keresi meg:

   - A tervezett vágányzár aktuálisan érvényes verziója kiutalt („KESZ” állapotú)

legyen

bemenő adatokban kapott időszakba . [#88955 ] A tényadatoknál nem veszi figyelembe
a logikailag törölt (V_KKF_TENY.torolt_jelzo = True) rekordokat [#88955vége]

   - A vágányzár vagy tartalmazzon olyan vonali kizárást, ami a bemenő adatokban

kapott szolgálati helyek közötti részre vonatkozik, vagy tartalmazzon olyan

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** vonal vagy menetirányítói szakasz megadott

**törölt:** ire

**törölt:**  
**törölt:**

**törölt:** tervezett

**törölt:** z


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 369/526|


állomási kizárást, ami a bemenő adatokban kapott szolgálati helyek valamelyikére
vonatkozik.

Az eljárás az érintett vágányzár verziók adatait a V_KKF, [88953] V_KKF_TENY, [ 88953vége]
V_KKVK és V_KKAK táblákból kérdezi le. Az érintett vágányzáraknak azokat a vonali
kizárásait adja át, amelyek a bemenő adatokban kapott szolgálati helyek közötti részekre
vonatkoznak, valamint azokat az állomási kizárásokat, amelyek a bemenő adatokban kapott
szolgálati helyekre vonatkoznak. Az érintett vonali és állomási kizárásokat egy listában adja
át.

Ha egy vágányzár ugyanarra a vonalra, ugyanazzal a kezdő és vég szolgálati hellyel több
vonali kizárást is tartalmaz, azt egy vonali kizárásként kezeli. Az egyként kezelt vonali
kizárásokhoz tartozó belső azonosítókat, pontosvesszővel elválasztva egyben adja át. Az
egyként kezelt vonali kizárásokhoz tartozó vágányokat csoportosítja a szerint, hogy a
vágányokra vonatkozó korlátozások tartalmaznak-e pályakizárást vagy sem:

  - Ha vannak olyan vágányok, az egyként kezelt vonali kizárások között, amelyekre

pályakizárás vonatkozik, akkor azokat ”Kiz:” előtaggal, vesszővel elválasztva egyben

  - Ha vannak pályakizárás nélküli vágányok, az egyként kezelt vonali kizárások

között,akkor azokat ”Korl:” előtaggal és vesszővel elválasztva egyben adja át. (Pl:
„Korl: bal, jobb”)

A vonali kizárásoknak csak azt a részét adja át, amelyek a bemenő adatokban kapott szolgálati
helyek közötti részekre vonatkoznak

Ha egy vágányzár ugyanarra a szolgálati helyre több állomási kizárást is tartalmaz, akkor a
teljes állomási kizárásokat (ahol a k_kkottip_id=1) összevonva egy állomási kizárásként
kezeli, valamint a nem teljes állomási kizárásokat is (ahol a k_kkottip_id >1) összevonva egy
állomási kizárásként kezeli. Az egyként kezelt állomási kizárásokhoz tartozó belső
azonosítókat, vesszővel elválasztva egyben adja át.

A korlátozások felületen való megjelenítéséhez igazodva az alábbi Megjelenítés típusokat
alkalmazza az eljárás:

  - **”v” – vágány:** Állomási kizárás esetén, amennyiben az érintett objektum típusa nem

„1- teljes állomás” (ahol a k_kkottip_id>1). Ebben az esetben a kliens a szolgálati
hely fiktív vágányára rajzolja a korlátozást.

  - **”s” – szolgálati hely** (kis téglalap): Állomási kizárás esetén, amennyiben az érintett

objektum típusa „1- teljes állomás” (ahol a k_kkottip_id=1). Ebben az esetben a
szolgálati hely-tól és szolgálati hely- ig értékekben is ugyanaz a szolgálati hely érték
szerepel. Ebben az esetben a kliens a szolgálati helyre rajzolja a korlátozást.

  - **”t” – szolgálati helyek között** (téglalap): Vonali kizárás esetén, amennyiben

tartalmaz pályakizárást is. Ebben az esetben a kliens a két szolgálati hely közé, de a
két szolgálati helyet nem érintve rajzolja a korlátozást.

  - **”k” – szolgálati helyek között a geometriai középvonalnál** (szűk téglalap): Vonali

kizárás esetén, amennyiben nem tartalmaz pályakizárást. Ebben az esetben a kliens a
két szolgálati hely között a geometriai középvonalon egy szűk téglalappal ábrázolja a
korlátozást.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:**


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 370/526|


88953 Ha egy v á gányzárhoz létezik olyan #88955 logikailag nem törölt
(V_KKF_TENY.to ro lt_jelzo = False) [#88955vége ] rekord a V _ KKF _ TENY táblában, amelynél az
elmaradt jelző ért ék e false, akkor a vágányzár tény adatait a következők szerint adja át a
kliensnek:

  - Annyi tény rekordot képez egy v ág ány zár hoz, ahány terv rekordot. Az Érvényesség

kezdetét, végét, és a Tény adat jelzőt kivéve, ugyanazokat az adatokat adja át a tény
rekordoknál.

  - Az Érvényesség kezdetébe és v ég ébe a tény ér vényességet helyezi a V_KKF_TENY

táblából.

  - A Tény adat jelzőbe igaz érték et hel y ez ( a terv rekordoknál false érték kerül a

mezőbe).

Ha egy vágányzárhoz olyan [#88955 ] log ikailag nem tör ölt (V _ KKF _ TENY.torolt _ jelzo = False)
#88955vége rekord tartozik a V _ KKF _ TEN Y tábláb an, amelynél az elmaradt jelző értéke igaz,
akkor nem képez külön tény rekordok at a k i m enő ada t okban, hanem az adott vágányzárhoz
tartozó terv rekordoknál jelzi az elm ar adást . [ 88953vége]

**Kimenő adatok**

  - Korlátozások lista

`o` Vágányzár belső azonosító (VgzId)

`o` Vágányzár azonosító (VgzAzon)

`o` Korlátozás belső azonosító lista (KorlIdArray) – Pontos vesszővel

elválasztott korlátozás belső azonosítók (Lehet NULL, ha csak fejrekord
tartozik a vágányzárhoz)

`o` Megjelenítés típusa: (MegjTipus). Lehetséges értékei:

          - ”v” – vágány (Kis téglalap a szolgálati hely fiktív vágányán

állomási kizárás esetén, ha nincs kizárva a teljes állomás.)

          - ”s” – szolgálati hely (Kis téglalap szolgálati helyen, teljes állomás

kizárása esetén)

          - ”t” – szolgálati helyek között (Téglalap szolgálati helyek között,

pályakizárást is tartalmazó vonali kizárás esetén)

          - ”k” – szolgálati helyek között (Szűk téglalap a szolgálati helyek

között a geometriai középvonalnál, pályakizárást nem tartalmazó
vonali kizárás esetén)

`o` Érvényesség kezdete (ErvKezdet)

`o` Érvényesség vége (ErvVeg)

`o` Szolgálati hely -tól (SzhTol)

`o` S zolgálati hely -ig (SzhIg)

`o` 88953 Teny adat jelző (Teny)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 371/526|


`o` Elmaradás (Elmaradas) [88953vége]

`o` Vágánylista (Csak vonali kizárás esetén tartalmaz adatot)

          - Vágány (Vagany) (Az egyként kezelt vonali kizárásokhoz tartozó

vágány adatok, pályakizárás léte vagy nem léte szerint
csoportosítva, előtaggal ellátva és egy csoporton belül vesszővel
elválasztva)(Pl: „Kiz: jobb, bal”)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**




|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|V_KKF|Kapacitás korlátozás fejadatok|
|V_KKVK|Vonali kizárások|
|V_KKAK|Állomási kizárások|
|T_PPJ|Pályapont jellemzők|
|PalyaSzakaszFej|Pályaszakasz fejadatok|
|88953V_KKF_TENY|Vágányzári tény adatok|


**Rendszerparaméterek**

Nincs

**Batch modulok egyéb adatai**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 372/526|

##### **3.7 S_0151_07 – Vágányzár információs területhez adatok lekérdezése ** **szolgáltatás (VaganyzarInfoTerQuery) (usp_0151_selVaganyzarInfoTer) **

**Szolgáltatás feladatai**

Vágányzárnál megjelenő információs területhez adatok lekérdezése.

**Bemenő adatok**

  - Vágányzár belső azonosító (VgzId)

  - Korlátozás belső azonosító lista (KorlIdArray) – Pontos vesszővel elválasztott

korlátozás belső azonosítók (Lehet NULL, ha csak fejrekord tartozik a vágányzárhoz)

  - Megjelenítés típusa: (MegjTipus). Lehetséges értékei:

`o` ”v” – vágány

`o` ”s” – szolgálati hely

`o` ”t” – szolgálati helyek között

`o` ”k” – szolgálati helyek között a geometriai középvonalnál

**Működés**

A szerviz a vágányzáraknál megjelenő információs területhez szükséges adatok
lekérdezéséhez, meghívja az usp_0151_selVaganyzarInfoTer tárolt eljárást, a bemenő
adatokban kapott paraméterekkel.

Az eljárás a bemenő adatokban kapott vágányzár azonosítóhoz tartozó vágányzár kimenő
adatokban meghatározott adatait keresi meg és adja át a hívó modulnak.

A vágányzár fejadatait a V_KKF táblából, [88954 ] a tény adatokat pedig a V_KKF_TENY
táblából [ 88954vége] olvassa ki. [#88955 ] A tényadatoknál nem veszi figyelembe a logikailag törölt
(V_KKF_TENY.to ro lt_jelzo = True) rekordokat [#88955vége] Ha a bemenő adatokban a korlátozás
belső azonosítókat tartalmazó lista üres, akkor a V_KKF táblában lévő vonal, szolgálati
helytől, szolgálati helyig adatokat is átadja, amennyiben kitöltöttek.

Amennyiben a bemenő adatokban kapott megjelenítés típusa „v” – „vágány” vagy „s” –
„szolgálati hely”, akkor a korlátozás belső azonosító lista (ha nem üres) állomási kizárások
belső azonosítóit tartalmazza és az eljárás az azonosítók alapján a V_KKAK táblából olvassa
ki az állomási kizárások adatait.

Amennyiben a bemenő adatokban kapott megjelenítés típusa „t” – „szolgálati helyek között”
vagy ”k” – „szolgálati helyek között a geometriai középvonalnál”, akkor a korlátozás belső
azonosító lista (ha nem üres) vonali kizárások belső azonosítóit tartalmazza és az eljárás az
azonosítók alapján a V_KKVK táblából olvassa ki a vonali kizárások adatait.

**Kimenő adatok**

  - Vágányzár azonosító (VgzAzon)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 373/526|



 - Érvényesség kezdete (ErvKezdet)

 - Érvényesség vége (ErvVeg)

 - Vágányzár okának megnevezése (VgzOkNev)

 - V ágányzár típusának megnevezése (VgzTipNev)

 - 88954 Tény érvényesség kezdete (Ten y Er v Kez det) (lehet NULL)

 - Tény érvényesség vége (TenyEr v Veg) ( lehet N U LL)

 - Elmaradás (Elmaradas)

 - Elrendelő távirat (Tavirat)

 - Tény megjegyzés (TenyMegj) [88954vége]

 - Vonal Takt kódja (VonalTaktKod) (Csak vonali kizárás esetén kitöltött)

 - Szolgálati helytől (SzhtolNev) (Állomási kizárás esetén a kizárás szolgálati helyének

hosszú neve, vonali kizárás esetén a kizárás kezdő szolgálati helyének hosszú neve)

 - Szolgálati helyig (SzhigNev) (Csak vonali kizárás esetén kitöltött. A kizárás vég

szolgálati helyének hosszú neve)

 - Állomási kizárások lista (Csak állomási kizárás esetén tartalmaz adatot)

`o` Állomási biztosító berendezés kikapcsolása szükséges jelző (AllBiztBerKi)

`o` Dízel kitoló szükséges jelző (DizelKitolo)

`o` Kizárandó objektum típusának neve (KizObjTipusNev)

`o` Kizárandó objektum (KizObj)

`o` Megjegyzés (Megj) (Ha nem üres az állomási kizárások lista, akkor csak a

vágányzár fej szintű megjegyzése kerül a lista első rekordjához. A
kizárásokhoz tartozó megjegyzések nem kerülnek átadásra.)

 - Vonali kizárások lista (Csak vonali kizárás esetén tartalmaz adatot)

`o` Pálya kizárása jelző (PalyaKiz)

`o` Vágány (Vagany)

`o` Vonali biztosító berendezés kizárása jelző (VonaliBiztKiz)

`o` Felsővezeték kizárása jelző (FelsovezKiz)

`o` Lassú menet értéke (LassuMenErtek)(V_KKVK.lassumenet_erteke+’ km/ó’)

`o` Lassú menet szelvények (LassuMenSzelv)
(V_KKVK.lassumenet_kezd_szelv+’ – ’+ V_KKVK.lassumenet_veg_szelv+’
szlv. között’)

`o` Megjegyzés (Megj) (Ha nem üres a vonali kizárások lista, akkor csak a

vágányzár fej szintű megjegyzése kerül a lista első rekordjához. A
kizárásokhoz tartozó megjegyzések nem kerülnek átadásra.)

**Interfészek**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 374/526|


Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|V_KKF|Kapacitás korlátozás fejadatok|
|V_KKVK|Vonali kizárások|
|V_KKAK|Állomási kizárások|
|K_KKO|Kapacitás korlátozás okok|
|K_KKT|Kapacitás korlátozás típusok|
|T_VV|Vasútvonalak|
|K_KKOT|Kapacitás korlátozás objektum típusok|
|88954V_KKF_TENY|Kapacitás korlátozás tény adatok|
|||


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 375/526|

##### **3.8 S_0151_08 – Menetvonal adatok információs területhez adatok lekérdezése ** **szolgáltatás (MenetvAdatInfoTerQuery) (usp_0151_selMenetvAdatInfoTer) **

**Szolgáltatás feladatai**

A menetvonalnál (de nem a menetvonal és a szolgálati hely találkozásánál) megjelenő
információs területhez szükséges adatok lekérdezése.

**Bemenő adatok**

  - Menetvonal id (MenetvId)

  - Szolgálati helyek listája

`o` Szolgálati hely id (SzhIdArray)

**Működés**

A szerviz a menetvonalnál (de nem a menetvonal és a szolgálati hely találkozásánál)
megjelenő információs területhez szükséges adatok lekérdezéséhez meghívja az
**usp_0151_selMenetvAdatInfoTer** tárolt eljárást a bemenő adatokban kapott paraméterekkel.

Az eljárás a bemenő adatokban kapott menetvonalnak, a kimenő adatokban meghatározott
adatait olvassa ki és adja át a hívó modulnak.

Ha a bemenő adatokban kapott szolgálati helyek által meghatározott szakaszon (a lekérdezett
szakaszon) a kiválasztott menetvonalon vonatszám váltás történik, akkor a vonatszám váltás
előtti és utáni vonatszámot is átadja.

A menetvonal utolsó tény eseményét a bemenő adatokban kapott lekérdezett szakaszhoz
határozza meg, a következők szerint:

  - A menetvonal utolsó tény eseményét veszi, ha a menetvonalhoz tartozó vonat

aktuálisan a lekérdezett szakasz előtt vagy a lekérdezett szakaszon fut.

  - Ha a menetvonalhoz tartozó vonat a bemenő adatokban kapott lekérdezett szakaszon

már túlfutott, akkor a menetvonalnak a lekérdezett szakaszon található utolsó tény
eseményét veszi.

A jármű adatokat, vontatójármű és a fejadatokat a lekérdezett szakaszon érvényes utolsó
vonatösszeállításból veszi. Először a Készrejelentett és Befejezett állapotú vonatösszeállítások
között keres. Ha ilyen állapotút nem talál, akkor Előzetesen befejezett vagy Előzetesen
készrejelentett vonatösszeállítást keres. Ha a lekérdezett szakaszon nincs érvényes
vonatösszeállítás, akkor a lekérdezett szakasz előtti utolsó vonatösszeállítást keresi.

88997 Ha a megtal ál t vonatösszeállításban a menetdinamikai csoport azonosító szerint a
tervezettnél rossz ab b vontatójármű szerepel (Vonatosszeallitas.menetdin_csop_elteres_jelzo
értéke true), akk o r meghatározza, hogy a vonatösszeállításban szereplő vontatójárművek
közül melyek ezek (amelyeknél a jármű sorozatához tartozó menetdinamikai csoport
azonosító/JarmuSjárműveknél a k oim rozatok táblából/ nagyobb a tervezetnél /Penő adatokban a járműazonosító végére _ VTS táblából/). Az érintett ’ *’- ot helyez, a többi
járműazonosító vé g ére pedig ’ ’- t.

Ha a megtalált v onatösszeállításban szereplő valamelyik vontatójárműhöz és az adott
menetvonalhoz rög z ítettek teljesítménycsökkenést (mgm_korl_fajta =’ 1 ’ ) az MGM - ben (az

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 376/526|


MGM _ Korlatozaso k táblába), akkor a teljesítménycsökkenés adatait is átadja az adott
vontatójárműnél a k i menő adatokban leírt formában.
Amennyiben a menetvonalhoz egyéb korlátozást (mgm_korl_fajta =’ 2 ’ ) is rögzítettek az
MGM _ Korlatozaso k táblába, akkor azok adatait egy külön listában adja át az eljárás. [88997vége]

#88956 A menetrendi ad atok kiolvasási logikája:

  - Az adatok kiolvasása a bemenő par am éter ben k apott MenetvId alapján történik.

  - A terv adatokat az MGM m ene t r endi ada tokból (MGM_TervEsem), míg a

tényadatokat az MGM tényadatokbó l ( M GM _T enyEsem) olvassa ki az eljárás.

  - A lekérdezés a menetrendi ad a tok on alap s zi k és ahhoz párosítja a tényadatokat.

Amennyiben egy terv adathoz nincs tény adat (pl. más pályaudvaros közlekedés),
akkor a tényadatot nem adja vissza a z eljár ás.

  - Esemény idő formátum meghatá r ozási log i ka :

`o` Első és utolsó szolgálati hely e s et ébe n m indig ÉÉ/HH/NN ÓÓ:PP formátumú

(pl. ’ 23/05/17 14:00 ’ )
`o` Közbenső szolgálati helyeknél Ó Ó :P P formátumú, kivéve, ha:

        adott terv eseménynél történik napváltás, ekkor ÉÉ/HH/NN ÓÓ:PP

formátumú (pl. ’ 23/05/17 14:00 ’ ) mind a terv mind a tényesemény

vagy

        adott tény eseménynél történik napváltás, ekkor ÉÉ/HH/NN ÓÓ:PP

formátumú a tényesemény

        - Ha a terv esemény dátuma eltér a tény esemény dátumától, akkor a tény

esemény formátuma ÉÉ/HH/NN ÓÓ:PP [#88956 VÉGE]

**Kimenő adatok**

  - Vonatazonosító lista (VonatLista)

`o` Vonatazonosító (Vonatszám +’ / ’+vonat indulási dátuma (éééé.hh.nn))

(VonatAzon)

  - Utolsó esemény helyének teljes neve (UtEsemHely)

  - Utolsó esemény (Esemény ideje (éééé.hh.nn óó:pp)+’ ’+ Esemény fajtájának

kódja(K_VEF.k_kod)+GPS alapján rögzített esemény esetén (Ha MGM_TenyEsem.
esem_tipus=’G’) akkor ’ (GPS)’) (UtEsem))

  - Eltérés (Eltérés az utolsó eseménynél+’ perc’) (UtElteres)

  - Vontatójármű azonosító (Több vontatójármű esetén a legelső azonosítója (xx xx xxxx

xxx-x)) (VontatojarmuAzon)

  - Vontatójármű vontatási neme (A vontatójármű vontatási neme szövegesen)

(VontatojarmuVontNem)

  - Mozdonyvezető neve (MozdVezNev)

  - Mozdonyvezető telefonszáma (MozdVezTel)

  - Vonatkisérő telefonszáma (VonKiseroTel)

  - VK93679 Vonatkisérő neve (VonK is er oNev )

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 377/526|



 - Legmagasabb értékű alapsebe s s ég ( A kapott szolgálati helyeken a legmagasabb

értékű P_VTS.terv_vn_sebesseg+ ’ km /h’ ) ( L egmErtAlapSeb)

 - Legmagasabb értékű legnagy obb s ebes s ég (A kapott szolgálati helyeken a

legmagasabb értékű P_VTS.vn_legn_ sebess e g + ’ km/h ’ ) (LegmErtLegnSeb) [VK93679vége]

 - Megrendelő VV rövid neve (Megrendelo)

 - Forgalmi vonatnem (Forgalmi vonatnem rövid neve (T_VMF2.vmf2_nev_v0)+’

’+Forgalmi vonatnem teljes neve (T_VMF2.vmf2_nev_hosszu)) (ForgVnem)

 - Menetvonal kiindulási állomásának teljes neve (IndAll)

 - Menetvonal végállomásának teljes neve (VegAll)

 - Megrendelés azonosító (Igénylés éve+’/’+iktatószám+’/’+verziószám) (MegrAzon)

 - Készrejelentés rögzítési ideje (éééé.hh.nn óó:pp) (KeszreJelRogzIdo)

 - Fejadatok (vontatott jármű db+’db / ’+teljes hossz+’m / ’+teljes tömeg+’t’) (Fejadat}

 - RID (’Igen’- ha tartalmaz veszélyes árut a vonatösszeállítás, egyébként NULL) (Rid)

 - Rk adatok list a (RkLista) - Json formában

`o` Rk kód (RkKod+’ tip’)
`o` Rk engedély szám (xxxxx/éééé) (RkEng)

 - 88997 Vonat maximáli s műszaki sebessége
(Vonatosszeallitas.train_max_speed+ ’ km /h’ ) (VonMaxMuszakiSeb) [88997vége]

 - Vonatösszeállítás szolgálati helytől (A szolgálati hely teljes neve)(VosszSzhtol)

 - Vonatösszeállítás szolgálati helyig (A szolgálati hely teljes neve) (VosszSzhig)

 - Jármű adatok list a (JarmuLista) - Json formában

`o` Sorszám (Ssz)

az utolsó két karakter a menetdinamikai csoportazonosító miatti r os szab b
mozdony jelölésére szolgál. Az utolsó két karakter ’ ’ vagy ’ *’ lehet. ) [ 88997vége]
(JarmuAzon)

`o` Alkalmazás (Alk)

`o` Rk engedélyszám (xxxxx/éééé) (RkEngSzam)

`o` R k kisorozó állomás rövid neve (KisorozoAll)
`o` 88997 Sebességkorlátozás ((VonatosszeallitasJarmu.sebesseg_korlato zas, h a n em
üres vagy a jármű maximális sebessége, ha az kisebb, mint a vonat se b es s ég e.
Mindkettő teljesülése esetén a kisebb)+ ’ km/h ’ ) (SebKorl)

`o` Teljesítménycsökkenés (MGM_Korlatozasok.mertek+ ’ % ’ +Korlá to zás k ezd ő

szolgálati helyének rövid neve+ ’ – ’ +Korlátozás vég szolgálati helyének rö v i d
neve) (TeljCsokk)

 - Egyéb korlátozások lista (EgyebKorlLista) - Json formában

`o` Korlátozás kezdő szolgálati helyének rövid neve (KorlKezdSzh)

`o` Korlátozás vég szolgálati helyének rövid neve (KorlVegSzh)

`o` Mérték (Mertek)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** (xx xx xxxx xxx-x)


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 378/526|


`o` Megjegyzés (Megjegyzes) [ 88997vége]

 - #88956 Menetrendi adatok lista (MenetrendLista) – Json formában

`o` Terv érkezési idő (TervErk)

`o` Terv indulási idő (TervInd)

`o` Tény érkezés idő (TenyErk)

`o` Tény indulás idő (TenyInd)

`o` Várható (előrejelzett) érkezés idő ( Var hat oErk)

`o` Várható (előrejelzett) indulás id ő ( Var hatoInd)
`o` Érkezési adat típus jelző (ErkAd at Jel zo), Lehetséges értékei: [ #108050]

       - N        - naplózott,

       - T        - számított (tény),

       - B        - becsült(interpolált),

       - S        - SZIR,

       - E        - eltérő esemény (nem tervezett),

       - O        - naplózott Busz,

       - P        - naplózott Elmaradt,

       - U        - számított Busz,

       - V        - számított Elmaradt

`o` Indulási adat típus jelző (IndAda t Jelzo), Lehetséges értékei: [ #108050]

       - N        - naplózott,

       - T        - számított (tény),

       - B        - becsült(interpolált),

       - S        - SZIR,

       - E        - eltérő esemény (nem tervezett),

       - O        - naplózott Busz,

       - P        - naplózott Elmaradt,

       - U        - számított Busz,

       - V        - számított Elmaradt
`o` Érkező vágány (ErkVagany) – am enny iben van tényesemény, akkor a tény

vágány, egyéb esetben a terv

`o` Induló vágány (IndVagany)    - am enny i ben van tényesemény, akkor a tény

vágány, egyéb esetben a terv

`o` Helytelen vágányra érkezés (ErkHel y tVagany) – Lehetséges értékei:

       - Kétvágányú pálya esetén:

           - ’ ’ – helyes vágány

           - X           - helytelen

       - Háromvágányú pálya esetén:

           - ’ B ’ – bal vágány

           - ’ J ’ – jobb vágány

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 

-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 379/526|



            - ’ A ’ – A vágány (3. vágány)

            - ’ L ’ – lokál vágány (3. vágány)

`o` Helytelen vágányra indulás (IndHel y tVagany) – Lehetséges értékei:

        - Kétvágányú pálya esetén:

            - ’ ’ – helyes vágány

            - X            - helytelen

        - Háromvágányú pálya esetén:

            - ’ B ’ – bal vágány

            - ’ J ’ – jobb vágány

            - ’ A ’ – A vágány (3. vágány)

            - ’ L ’ – lokál vágány (3. vágány)
`o` Érkezési késés adatok (ErkKesesAdatok) {Tömb}:

        - Késés perc (Keses)

        - Késés főkód (FoKod)

        - Késés főkód megnevezés (FoKodNev)

~~~~ ~~Késés~~ ~~segédkód~~ ~~(SegedKod)~~

~~~~ ~~Késés~~ ~~segédkód~~ ~~megnevezés~~ ~~(SegedKodNev)~~

        - Késés UIC kód (UicKod)

        - Késés indoklás (Indoklas)

        - HUBA azonosító (HubaAzon) – V_VFK.RDE_azon átalakítva

ééééhhnn          - vvvv formára [#106597]

`o` Indulási késés adatok (IndKesesAdatok) {Tömb}:

        - Késés perc (Keses)

        - Késés főkód (FoKod)

        - Késés főkód megnevezés (FoKodNev)

~~~~ ~~Késés~~ ~~segédkód~~ ~~(SegedKod)~~

~~~~ ~~Késés~~ ~~segédkód~~ ~~megnevezés~~ ~~(SegedKodNev)~~

        - Késés UIC kód (UicKod)

        - Késés indoklás (Indoklas) [ #88956 VÉGE]

        - HUBA azonosító (HubaAzon) – V_VFK.RDE_azon átalakítva

ééééhhnn          - vvvv formára [#106597]

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 380/526|


Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**











|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Menetvonal|Menetvonalak fej adatai|
|MGM_TenyEsem|Menetvonalak tény eseményei|
|MGM_TervEsem||
|V_IGF|Igénylés fejadatok|
|P_VFT|Vonatforgalmi terv fej|
|P_VTS|Vonatforgalmi terv szolgálati helyei|
|MenetvVonOsszealli tas|Menetvonalak vonatösszeállításai|
|V_VE|Vonatesemények|
|T_VOJ|Vontatójárművek|
|T_VMF2|Forgalmi vonatnemek|
|T_SHJ|Szolgálati helyek jellemző adatai|
|T_VVUJ|Vasútvállalatok jellemző adatai|
|Vonatosszeallitas|Vonatöszzeállítások|
|VonatosszeallitasJar mu|Vonatösszeállítások járművei|
|88997JarmuSorozato k|Jármű sorozatok|
|88997MGM_Korlatoz asok|MGM Korlátozások|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 381/526|


**Batch modulok egyéb adatai**
##### **3.9 S_0151_09 – Menetvonal/Szolgálati hely információs területhez adatok ** **lekérdezése szolgáltatás (MenetvSzhelyInfoTerQuery) ** **(usp_0151_selMenetvSzhelyInfoTer) **

**Szolgáltatás feladatai**

A menetvonal és szolgálati hely találkozásánál megjelenő információs területhez szükséges
adatok lekérdezése.

**Bemenő adatok**

  - Menetvonal id (MenetvId)

  - Szolgálati hely id (SzhId)

  - Szolgálati hely index (SzhIndex)

**Működés**

A szerviz a menetvonal és a szolgálati hely találkozásánál megjelenő információs területhez
szükséges adatok lekérdezéséhez meghívja az usp_0151_selMenetvSzhelyInfoTer tárolt
eljárást a bemenő adatokban kapott paraméterekkel.

Az eljárás a bemenő adatokban kapott menetvonalnak, a bemenő adatokban kapott szolgálati
helyen, a kimenő adatokban meghatározott adatait olvassa ki és adja át a hívó modulnak. A
vontatójárművet és a fejadatokat az adott szolgálati hely induló vonatösszeállításból veszi.
Csak az Előzetesen befejezett, Befejezett, Előzetesen készrejelentett, Készrejelentett és Lezárt
állapotú vonatösszeállításokat veszi figyelembe.

**Kimenő adatok**

  - Vonatazonosító (Vonatszám irányszámmal (az indulási eseményhez tartozó

irányszám)+’ / ’+vonat indulási dátuma (éééé.hh.nn)) (VonatAzon)

  - Vontatójármű (A legelső vontatójármű azonosítója+’ ’+ A legelső vontatójármű

vontatási neme szövegesen) (Vontatojarmu)(Annak a járműnek az azonosítója,
amelyben a mozdonyvezető tartózkodik )

  - Vonat fejadatok (vontatott jármű db+’db / ’+teljes hossz+’m / ’+teljes tömeg+’t’)

(VonatFejadat}

  - Megrendelő VV rövid neve (Megrendelo)

  - Forgalmi vonatnem (Forgalmi vonatnem rövid neve (T_VMF2.vmf2_nev_v0)+’

’+Forgalmi vonatnem teljes neve (T_VMF2.vmf2_nev_hosszu)) (ForgVnem)

  - Kiindulási állomás teljes neve (IndAll)

  - Végállomás teljes neve (VegAll)

  - Megrendelés azonosító (Igénylés éve+’/’+iktatószám+’/’+verziószám) (MegrAzon)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 382/526|



  - Tény érkezési idő (óó:pp) (ErkIdo)

  - Menetrendtől eltérés percben érkezéskor (ErkElteres)

  - Érkezéskori késési adatok lista VK61618 (98-as főkódhoz tartozó adatokat nem
tartalmazza) [VK61618vége]

  - Érkezéskor egy késési okhoz tartozó késés percben (ErkKeses)

  - Érkezéskori késési ok főkód (ErkKesesFokod)

  - Érkezéskori késési ok segédkód (ErkKesesSegedkod)

  - Érkezéskori késési ok UIC kód (ErkKesesUIC)

  - Tény indulási idő (óó:pp) (IndIdo) (Több indulási esemény esetén az utolsó ideje)

  - Menetrendtől eltérés percben induláskor (IndElteres) (Több indulási esemény esetén

az utolsóhoz tartozó)

  - Induláskori késési adatok lista (Több indulási esemény esetén az összeshez tartozó

késési adatok) [VK61618] (98-as főkódhoz tartozó adatokat nem tartalmazza) [VK61618vége]

  - Induláskori késési okhoz tartozó késés percben (IndKeses)

  - Induláskori késési ok főkód (IndKesesFokod)

  - Induláskori késési ok segédkód (IndKesesSegedkod)

  - Induláskori késési ok UICkód (IndKesesUIC)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Menetvonal|Menetvonalak fej adatai|
|MGM_TenyEsem|Menetvonalak tény eseményei|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 383/526|






|MGM_TervEsem|Col2|
|---|---|
|V_IGF|Igénylés fejadatok|
|P_VFT|Vonatforgalmi terv fej|
|P_VTS|Vonatforgalmi terv szolgálati helyei|
|MenetvVonOsszealli tas|Menetvonalak vonatösszeállításai|
|V_VE|Vonatesemények|
|V_VFK|Vonatok késési adatai|
|T_KFK|Késési okokat tartalmazó törzstábla|
|T_VOJ|Vontatójárművek|
|T_VMF2|Forgalmi vonatnemek|
|K_KSK|Késési segéd kódok|
|T_SHJ|Szolgálati helyek jellemző adatai|
|T_VVUJ|Vasútvállalatok jellemző adatai|
|Vonatosszeallitas|Vonatöszzeállítások|
|VonatosszeallitasJar mu|Vonatösszeállítások járművei|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**
##### **3.10 S_0151_10 – Megjelenítési beállítások mentése szolgáltatás ** **(MegjelenitesiBeallitasokMenteseCommand) (usp_0000_insLBProfil) **

**Szolgáltatás feladatai**

Az A_0151_03 ablakon megadott, az út-idő diagramon megjelenő grafikus
elemek/információaz adott PASS2 azonosítóhoz. k és az A _ 0151 _ 4 ablakon kiválasztott stílus adatbázisba történő elmentése

A szolgáltatás a klienstől kapott bemenő adatok „listadoboz” adatokból Json fájlt készít.

**Bemenő adatok**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 384/526|



 - ’Pass2UserID’ - Felhasználó azonosító = a felhasználó PASS2 azonosítója

 - ’ablak_id’ - Ablak azonosító = „A_0151”

 - ’lb_id’ - Listadoboz azonosító = NULL

 - ’profil_nev’ - Profil név = NULL

 - ’lb_adat’ - A megjelenítési beállításokat tartalmazó adatok a Json fájlhoz:

`o` 'VizszintesTengely_Ut’ = true/false,

`o` ’VizszintesTengely_Ido’ = true/false,

`o` ’SzolgHelySorrend_K_Pont’ = true/false,

`o` ’SzolgHelySorrend_Vegpont’ = true/false,

`o` ’SzolgHelyNev_For’ = true/false,

`o` ’SzolgHelyNev_Rovid’ = true/false,

`o` ’Grafikonra_Be_Kilepes’ = true/false,

`o` ’Megallohelyek’ = true/false,

`o` ’MGM_Vaganyok’ = true/false,

`o` ’Korjelolok’ = true/false,

`o` ’Menetrend_Nincs’ = true/false,

`o` ’Menetrend_Osszes’ = true/false,

`o` ’Menetrend_CsakKijelolt’ = true/false,

`o` ’Elorejelzes’ = true/false,

`o` ’Kesesek’ = true/false,

`o` ’BeKilepoVonatokKesese’ = true/false,

`o` ’Elteresek’ = true/false,

`o` ’Foglaltra_Jar’ = true/false,

`o` ’Vaganyzarak’ = true/false,

`o` 88953 ’ Teny_Vaganyzarak ’ = true/false,

`o` ’RDE_Esemenyek’ = true/false,

`o` 89001 ’ Szov _ Megjegyzes _ Nincs ’= true/false,

`o` ’ Szov _ Megjegyzes _ CsakIkon ’= true/false,

`o` ’ Szov _ Megjegyzes _ IkonSzoveg ’= true/false, [ 89001vége]

`o` 88957 ’ KesesIg ’ = true/false,

`o` 88957 ’ VgAdat ’ = true/false,

`o` #89002 ’ MenetEngKijelzoig ’ = true/false,

`o` #89002 ’ MenetEngBejelzoig ’ = true/false,

`o` #89003 ’ KulcsfuggesFeloldas ’ = true/false,

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 385/526|


**Működés**

A megjelenítési beállításokat mentő szerviz a bemenő adatokban kapott megjelenítési
beállításokat Json fájllá alakítja és meghívja az usp_0000_insLBProfil tárolt eljárást.

Az usp_0000_insLBProfil eljárás a bemenő adatokban kapott felhasználó azonosítóval, ablak
id-val, listadoboz id-val, profil névvel elmenti a megjelentési beállításokat az LBProfil
táblába.

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**


**törölt:** null



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|LBProfil|Profil adatok|


Nincs


**Rendszerparaméterek**

**Batch modulok egyéb adatai**

##### **3.11 S_0151_11 - Forgalmi vonatnemek letöltése (ForgNemQuery) ** **(usp_0151_selForgVonNem) **

**Szolgáltatás feladatai**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 386/526|


Az A_0151_05 - Adatok szűrése ablak „Forgalmi vonatnemek” választólista értékkészletének
lekérdezése.

**Bemenő adatok**

  - Érvényesség kezdete ’ErvKezdet’ az A_0151_01 ablakon kiválasztott időszak

kezdete.

**Működés**

A lekérdező szerviz a bemenő adatokban kapott paraméterrel meghívja az
usp_0151_selForgVonNem tárolt eljárást. A tárolt eljárás által visszaadott adatokat a
kliensnek változatlanul adja vissza.

Az usp_0151_selForgVonNem tárolt eljárás a T_VMF2 táblából kiolvassa azokat a forgalmi
vonatnem adatokat, amelyek a megadott érvényesség kezdet napján érvényesek és a T_VMU
táblából kikeresi a forgalmi vonatnemhez tartozó vonatkategóriát.

Ha a T_VMU táblában több, eltérő vonatkategóriát talál, akkor annyi sorban adja vissza a
forgalmi vonatnemet.

**Kimenő adatok**

  - Kód - ’VForgNemKod’ A forgalmi vonatnem kód.

  - Leírás - ’VForgNemLeiras’ A forgalmi vonatnem leírása.

  - Vonat kategória - ’VForgkatId’ A forgalmi vonatnemhez tartozó vonat kategória

belső azonosítója.

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|T_VMF2|Forgalmi vonatnem|
|T_VMU|Vonatnem|



MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 387/526|


**Rendszerparaméterek**

Nincs

**Batch modulok egyéb adatai**

Nincs
##### **3.12 S_0151_12 - Késési forgalmi főkódok letöltése (KesesForgKodQuery) ** **(usp_0151_selKesesForgKod) **

**Szolgáltatás feladatai**

Az A_0151_05 - Adatok szűrése ablak „Késési főkódok” választólista értékkészletének
lekérdezése.

**Bemenő adatok**

  - Érvényesség kezdete ’ErvKezdet’ az A_0151_01 ablakon kiválasztott időszak

kezdete.

**Működés**

A lekérdező szerviz a bemenő adatokban kapott paraméterrel meghívja az
usp_0151_selKesesForgKod tárolt eljárást. A tárolt eljárás által visszaadott adatokat a
kliensnek változatlanul adja vissza.

Az usp_0151_selKesesForgKod tárolt eljárás a T_KFK1 táblából kiolvassa azokat a forgalmi
késési főkód adatokat, amelyek a megadott érvényesség kezdet napján érvényesek és a
T_KFK.kfk_keses_jelzo <> 0.

**Kimenő adatok**

  - Azonosító - ’FoKodId’ A forgalmi késési főkód belső azonosítója (T_KFK.kfk_id).

  - Kód - ’FoKod’ A forgalmi késési főkód kódja (T_KFK.kfk_kod).

  - Leírás - ’FoKodLeiras’ A forgalmi késési főkód leírása (T_KFK.kfk_megnevezes).

  - UIC kód - ’UicKod’ a forgalmi főkód IUC kódja (T_KFK.kfk_uic_kod).

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 388/526|


Nincs

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|T_KFK1|Forgalmi vonatnem|



**Rendszerparaméterek**

Nincs

**Batch modulok egyéb adatai**

Nincs
##### **3.13 S_0151_13 - Késési segédkódok letöltése (KesesSegedKodQuery) ** **(usp_0151_selKesesSegedKod) **

**Szolgáltatás feladatai**

Az A_0151_05 - Adatok szűrése ablak „Segédkódok” választólista értékkészletének
lekérdezése.

**Bemenő adatok**

  - Érvényesség kezdete ’ErvKezdet’. Az A_0151_01 ablakon kiválasztott időszak

kezdete.

**Működés**

A lekérdező szerviz a bemenő adatokban kapott paraméterrel meghívja az
usp_0151_selKesesSegedKod tárolt eljárást. A tárolt eljárás által visszaadott adatokat a
kliensnek változatlanul adja vissza.

Az usp_0151_selKesesSegedKod tárolt eljárás a K_KSK táblából kiolvassa azokat a forgalmi
késési segédkód adatokat, amelyek a megadott érvényesség kezdet napján érvényesek.

A segédkódokhoz kikeresi a hozzájuk tartozó főkódot a T_KEO táblából.

A segédkódhoz visszaadásra kerül minden főkód, amihez a segédkód tartozik.

**Kimenő adatok**

  - Azonosító - ’SKodId’ A forgalmi segédkód belső azonosítója.

  - Segédkód - ’SKod’ A forgalmo segédkód kódja.

  - Leírás - ’SKodLeiras’ A forgalmi késési segédkód leírása.

  - Főkódok belső azonosítója ’FoKodId’ a T_KEO-ból főkód belső azonosítója.

**Interfészek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 389/526|


**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|K_KSK||
|T_KEO||



**Rendszerparaméterek**

Nincs

**Batch modulok egyéb adatai**

Nincs
##### **3.14 K_003 - Ügyfelek listázása (Használó, megrendelő, vasútvállalat) ** **(MegrendeloUgyfelekQuery) szolgáltatás **

**Szolgáltatás feladatai**

A Megrendelő választólista értékkészletének feltöltésére szolgál.

**Rendszerüzenetek**

Nincs

**Bemenő adatok**

  - Érvényesség kezdete ’ErvKezdet’. Az A_0151_01 ablakon kiválasztott időszak

kezdete.

**Működés**

A repository az alábbi paraméterekkel hívja meg a PTB_Services-ben megvalósított **K_003**
közös szolgáltatást:

  - Bejelentkezett felhasználó azonosítója

  - Érvényesség időpontja = ’ErvKezdet’

  - Lenyíló jelzője = ’M’ (megrendelő)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 390/526|



  - Csak hálózati hozzáféréssel rendelkező vasúti társaságok jelző = False

  - Csak a PGV szerződéssel rendelkező vasúti társaságok jelző = False

  - PV jelző = 0

A közös szolgáltatást megvalósító eljárás a kapott bemenő paramétereknek megfelelő
ügyfelek listáját adja vissza. Vasútvállalati felhasználó esetén csak a MÁV-ot és a felhasználó
vasútvállalatát adja vissza az eljárás.

**Kimenő adatok**

  - Ügyfél belső azonosítója (vvt_szerv_id)

  - Ügyfél vasútvállalati kódja (vvt_szir_ugyfkod)

  - Ügyfél rövid neve (vvt_szervj_rov_nev)

  - Ügyfél hosszú neve (vvt_szervj_telj_nev)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|T_VVU|Ügyfelek|
|T_VVUJ|Vasútvállalat jellemzők|



**Rendszerparaméterek**

Nincs

**Batch modulok egyéb adatai**

Nincs.
##### **3.15 S_0151_14 – Vasútvonalak, menetirányítói szakaszok és ábrák lekérdezése ** **(VasutvonalEsMenetirSzakaszEsAbraQuery) ** **(usp_0151_selVasutvonalEsMenetirSzakaszEsAbra) **

**Szolgáltatás feladatai**

A PASS2 adatbázisában tárolt vasútvonalak, menetirányítói szakaszok és ábrák listájának
lekérdezése.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 391/526|


**Bemenő adatok**

  - Nincs

**Működés**

A vasútvonalak és menetirányítói szakaszok listáját lekérdező szerviz bemenő paraméter
nélkül meghívja az **usp_0151_selVasutvonalEsMenetirSzakaszEsAbra** eljárást.

Az eljárás az alábbi módon gyűjti ki az adatokat:

  - A T_VV táblából olvassa ki a MÁV-os vonalak adatai. Rendezési logika:

1. T_VV tábla kategoria_MGM szerint (1-es értéktől kezdve)

2. Adott kategórián belül a „normál” vasútvonalak természetes rendezés szerinti

sorrendben TAKT_nev szerint

Ezek után:

3. Tisztán GYSEV-es vonalak természetes rendezés szerinti sorrendben

4. Keskeny nyomtávú vonalak természetes rendezés szerinti sorrendben

  - A menetirányítói szakaszokat a T_MIS táblából olvassa ki és kizárólag az aktuális

időpontban érvényes tételeket kérdezi le. Rendezési logika:

1. T_MIS tábla kategoria_MGM szerint (1-es érték legelől)

2. Adott kategórián belül a rendezés kód (MIS_kod_mgm) szerint történik.

  - Az érvényes ábrákat az MGM_Abra táblából olvassa ki az eljárás. Rendezési logika:

1. Megnevezés szerint ABC sorrendben

**Kimenő adatok**

  - {Vonal és menetirányítói szakasz lista}

  - Vonal Id (VonalId)- csak vasútvonal esetén kitöltött

  - Menetirányítói szakasz kód (MisKod)- csak a menetirányítói szakasz esetén kitöltött,

20 karakteres kód

  - Ábra belső azonosító (AbraId) – csak ábra esetén kitöltött [#88952]

  - Rövid menetirányítói szakasz kód (MisKodRovid) - csak a menetirányítói szakasz

esetén kitöltött, 10 karakteres kód

  - TAKT név (TaktNev) - csak vasútvonal esetén kitöltött

  - Megnevezés (Megnevezes)

**Interfészek**

Nincs

**Jelentések**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 392/526|


**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**




|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|T_VV|Vasútvonalak|
|T_MIS|Menetirányítói szakaszok|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**

Nincs
##### **3.16 S_0151_15 – Szolgálati helyek lekérdezése vonal vagy menetirányítói ** **szakasz vagy ábra alapján ** **(SzolgHelyByVonalVagyMenetirSzakaszvagyAbraQuery) ** **(usp_0151_selSzolgHelyByVonalVagyMenetirSzakaszvagyAbra) **

**Szolgáltatás feladatai**

A bemenő paraméterben kapott vonalhoz vagy menetirányítói szakaszhoz vagy ábrához
tartozó szolgálati helyek listájának lekérdezése.

**Bemenő adatok**

  - Vonal Id

  - Menetirányítói szakasz kód

  - Ábra belső azonosító [#88952]

  - Érvényesség kezdete

**Működés**

A szerviz a bemenő paraméterben kapott adatokkal meghívja az
**usp_0151_selSzolgHelyByVonalVagyMenetirSzakaszvagyAbra** eljárást, mely a bemenő
paraméterben kapott vonal id vagy menetirányítói szakasz kód vagy ábra belső azonosító és

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 393/526|


érvényesség kezdet alapján kérdezi le az érvényes szolgálati helyek listáját. Az eljárás az
alábbi típusú szolgálati helyeket gyűjti ki:

  - 1 - állomás

  - 2 - megállóhely

  - 3 - elágazás

  - 5 - megálló-rakodóhely

  - 9 - rakodóhely

  - 6 -országhatár

  - 4 - forgalmi kitérő

  - 8 - iparvágány kiágazás

  - 11 - megálló-elágazóhely

  - 15 - pályavasúti határpont

  - 14 - vágányfonódás-elágazás

  - 12 - megállóhely-iparvágány kiágazás

  - 13 - -iparvágány

  - 10 - kiágazás

A forrás adatok a T_PPJ, PalyaSzakaszFej és T_SHJ táblákból származnak. A szolgálati
helyek listája páros irány szerinti sorrendben tartalmazza a szolgálati helyeket.

Az eljárás menetirányítói szakaszhoz tartozó szolgálati helyek lekérdezés esetén ellenőrzi,
hogy a szakasz térben folytonos módon felépíthető-e. Amennyiben nem, akkor sql exception
formában hibát ad vissza és nem ad vissza szolgálati hely listát.

Ábra szolgálati helyek lekérdezése esetén az eljárás az **MGM_AbraUtvonal** táblából olvassa
ki az ábrához tartozó szolgálati helyeket. Ebben az esetben nincs érvényesség figyelés.

**Kimenő adatok**

  - {Szolgálati hely lista}

  - Szolgálati hely belső azonosító - szh_id

  - Szolgálati hely megnevezés (stat. szám + ’-’ + szolg. hely hosszú név formában)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 394/526|


Nincs






|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|A kiválasztott menetirányítói szakasz nem feszíthető ki az út tengelyre, tehát térben nem folytonos.|A kiválasztott menetirányítói szakasz térben nem folytonos, kérem vegye fel a kapcsolatot a rendszer üzemeltetőjével.|Tárolt eljárás|Hiba|


**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|T_PPJ|Pályapont jellemzők|
|PalyaSzakaszFej|Pályaszakasz fejadatok|
|T_SHJ|Szolgálati hely jellemzők|


Nincs

Nincs


**Rendszerparaméterek**

**Batch modulok egyéb adatai**

##### **3.17 S_0151_16 – Menetrendi időszakok lekérdezése (MenetrendiIdoszakQuery) ** **(usp_0000_selMenetrendiIdoszakok) **

**Szolgáltatás feladatai**

Az előző, aktuális és követő menetrendi időszak kezdetének és végének lekérdezésére szolgál.

**Bemenő adatok**

  - Nincs

**Működés**

A szerviz bemenő paraméter nélkül hívja meg az **usp_0000_selMenetrendiIdoszakok**
eljárást. Az eljárástól kapott listából kiveszi az előző, aktuális és következő menetrendi

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 395/526|


időszakot (technikailag az aktuális évet tartalmazó menetrendi időszakokat gyűjti ki, valamint
az azt megelőző rekordot) majd visszaadja a kliensnek az így kapott rekordok kimenő
paraméterben definiált adatait.

**Kimenő adatok**

  - {Menetrendi időszak lista}

  - Menetrendi időszak neve

  - Menetrendi időszak kezdete

  - Menetrendi időszak vége

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|T_MRI|Menetrendi időszakok|


Nincs

Nincs


**Rendszerparaméterek**

**Batch modulok egyéb adatai**

##### **3.18 S_0151_17 - Stílusok és vonalkészletek összerendelésének lekérdezése ** **(StilusVonalkeszletQuery) (usp_0151_selStilusVonalkeszlet) **

**Szolgáltatás feladatai**

Az A_0151_04 ablak „Stílusok” csoport „Választható stílusok” választólistájában megjelenő
stílusokhoz rendelt vonalkészletek lekérdezése.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 396/526|


**Bemenő adatok**

Nincs.

**Működés**

A szerviz a paraméter nélkül meghívja az usp_0151_selStilusVonalkeszlet tárolt eljárást. A
tárolt eljárás által visszaadott adatokat a kliensnek változatlanul adja vissza.

Az usp_0151_selStilusVonalkeszlet tárolt eljárás a MGMStilusVonalai táblából kiolvassa az
adatokat.

**Kimenő adatok**

Egy tömbben:

’StilusId’ és a hozzátartozó ’VonalKeszletId’.

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGMStilusVonalai|Grafikon stílusa és vonalkészlet összerendelése|



**Rendszerparaméterek**

Nincs

**Batch modulok egyéb adatai**

Nincs
##### **3.19 S_0151_18 - Stílus - vonalkészlet összerendelés mentése ** **(StilusVonalOsszerendelCommand) (usp_0151_setStilusVonalOsszerendel) **

**Szolgáltatás feladatai**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 397/526|


Az A_0151_04 - Stílusok és vonalkészletek ablakon beállított grafikon stílus és vonalkészlet
összerendelés mentése a MGMStilusVonalai adattáblába.

**Bemenő adatok**

  - ’StilusId’

  - ’VonalKeszletId’

**Működés**

A szerviz a bemenő adatokban kapott paraméterekkel meghívja az
usp_0151_setStilusVonalOsszerendel tárolt eljárást.

A tárolt eljárás, ha a megadott ’StilusId’-val talál rekordot, azt felülírja, ha nem talál, akkor új
rekordot hoz létre.

**Kimenő adatok**

Nincs.

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGMStilusVonalai|Grafikon stílusa és vonalkészlet összerendelése|
|||



**Batch modulok egyéb adatai**

Nincs

**Rendszerparaméterek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 398/526|

##### **3.20 S_0151_19 – RDE adatok lekérdezése (RdeAdatokQuery) ** **(usp_0151_selRdeAdatok) **

**Szolgáltatás feladatai**

A bemenő paraméterben kapott vonal vagy menetirányítói szakasz megadott szolgálati
helyeire és megadott időszakra vonatkozó RDE adatok lekérdezésére szolgál.

**Bemenő adatok**

  - Vonal id (VonalId)

  - Menetirányítói szakasz kódja (MisKod)

  - Szolgálati hely lista (SzhIdArray) – Pontos vesszővel elválasztott szh_id-k

  - Időszak kezdet (IdoszakKezd)

  - Időszak vége (IdoszakVeg)

**Működés**

A szerviz a bemenő paraméterben kapott adatokat kiegészíti a felhasználó vasútvállalatának
belső azonosítójával (vvt_szerv_id), majd ezekkel meghívja az **usp_0151_selRdeAdatok**
eljárást, mely lekérdezi a megjelenítendő RDE adatokat az adatbázisból. Az eljárás az
**RDE_Fej** és **RDE_Objektum** táblákból kérdezi le az adatokat. Mivel a PASS2 adatbázisban
jelenleg csak az érvényes RDE adatok tároljuk, ezért RDE azonosító esetén csak az aktuális
(legutolsó) verzió adatainak lekérdezhetősége biztosított.

Az eljárás ellenőrzi, hogy a kapott szolgálati helyekre és időszakra mely RDE azonosítók
érvényesek, a lekérdezés során az alábbi szűréseket alkalmazza az eljárás:

  - Kiszűri a [#99774] NETWORK, R EGIO N, NODE, MAIN_STATION és TRAIN [#99774 ]

VÉGE típusú RDE adatokat (ezeket nem kell megjeleníteni a felületen)

  - Kiszűri a StatusName (statusz_nev) = N/A státuszú RDE azonosítókat

  - Ha az aktuális idő korábbi vagy megegyezik a lekérdezett időszak kezdetével, akkor

kiszűri azokat az RDE eseményeket, amelyeknél az érvényesség vége nincs kitöltve.

Az eljárás tehát az alábbi típusú RDE adatokat jeleníti meg:

  - L INE (Vonal)

  - O PEN_LINE_TRACK (Nyílt vonal)

alkalmazza az eljárás:

  - **”v” – vágány:** Amennyiben az RDE típusa: STATION_TRACK. Ebben az esetben a

kimenő paraméterek között szerepel a VaganyId is, a kliens az adott vágányra rajzolja
az RDE objektumot. (HUBA esetén már nem értelmezhető)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** <#>¶
<#>CONTROL_AREA (Irányítási körzet)¶

**törölt:** <#>STATION_TRACK (Vágány)  állomás szintre
vetíti az eljárás¶
<#>SWITCH (Váltó)  állomás szintre vetíti az eljárás¶
<#>OBJECT és 22-es mellékkód típus (Sorompó)  állomás
szintre vetíti az eljárás¶
<#>OBJECT (Egyéb)  állomás szintre vetíti az eljárás¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 399/526|



  - **”s” – szolgálati hely** (kis téglalap): Amennyiben az RDE típusa: STATION_AREA,

szolgálati hely- ig értékekben is ugyanaz a szolgálati hely érték szerepel.

  - **”t” – szolgálati helyek között** (téglalap): Amennyiben az RDE típusa: LINE,

OPEN_LINE_TRACK és az RDE kevesebb mint három állomás típusú szolgálati
helyet érint folytatólagosan.

  - **”l” – vonal** (line): Amennyiben az RDE típusa: LINE, OPEN_LINE_TRACK és az

RDE legalább három állomás típusú szolgálati helyet érint folytatólagosan. A kliens
oldali megjelenítés ebben az esetben nem téglalap formájában történik.

Az eljárás által végzett további műveletek:

  - OPEN_LINE_TRACK esetén, amennyiben több RDE rekordból áll összes egy

folytatólagos szakasz, akkor az eljárás azokat összefűzi és egy rekordként adja vissza
a kimenő paraméterek között.

  - VK61509 Egy RDE-hez tartozó több objektum esetén, ha szolgálati helyekre vonatkozó
kis téglalapok „s” és a szolgálati helyek közötti téglalapok „t” fedik egymást (egyik
teljesen elfedi a másikat), akkor azokat összevonja az eljárás. Csak a nagyobbat
(egyezőség esetén csak az egyiket) tartja meg. [ VK61509vége]

A tárolt eljárás a **„Kiterjesztett RDE azonosító megjegyzéssel” (KiterjRdeAzon)** kimenő
paramétert az alábbi módon állítja össze:

{RDE azonosító} + ’ ’ +{Érvényesség kezdet} +’ - ’+ {Érvényesség vége} + ’ ’ {Első RDE
szöveg}

Amennyiben az Érvényesség vége 2100.12.31, akkor 10 szóközt ad vissza az eljárás a
vonatkozó elemben

*pl.: 20191223-* *00* *43 2021.05.17 – 2021.05.28 Bátaszék-Pörböly állomások között AS 941*
*fénysorompó használhatatlan. INKA:3/208411* [#99774]

A kimenő paraméterben adott és **RDE okozó belső azonosító (RdeOkozoId)** és RDE okozó
(RdeOkozo) értékét az alábbi logika alapján állapítja meg az eljárás:

  - 1 - „VV” – vasútvállalati – T_KFK. [kfk_felel_csop] = „VV”

  - 2 - „PV” – pályavasút -– T_KFK. [kfk_felel_csop] = „PV”

  - 3 - „K” – Külső - – T_KFK. [kfk_felel_csop] = „K”

  - 4 - „M” – Másodlagos - T_KFK. [kfk_felel_csop] = „M” vagy NULL

Az **Információs terület megnyitható jelző (InfoTerMegnyithato)** értékét az alábbi módon
állapítja meg az eljárás:

  - Amennyiben a bejelentkezett felhasználó vasútvállalata MÁV (vvt_szerv_id = 11),

akkor InfoTerMegnyithato = 1

  - Amennyiben a bejelentkezett felhasználó vasútvállalata nem MÁV (vvt_szerv_id <>

11), akkorAmennyiben az RDE eseményhez [#99774] tartozó főkód felelős csoport
besorolása (T _ KFK.kfk _ felel _ csop) = „PV” vagy „K ” vagy „M ”, akkor
InfoTerMegnyithato = 1, ettől eltérő érték esetén InfoTerMegnyithato = 0

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** SWITCH, OBJECT

**törölt:** CONTROL_AREA,

**törölt:** CONTROL_AREA,

**törölt:** CONTROL_AREA,

**törölt:** a


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 400/526|


kimanő paraméterben található adatok szerint distinct-eli a találati listát.

**Kimenő adatok**

{RDE adatok lista}

  - RDE azonosító (RdeAzon): Formátuma: ééééhhnn-xx xx pl.: 20200317-0 0 30

  - RDE verzió (RdeVerzio)

  - Megjelenítés típusa: (MegjTipus). Lehetséges értékei:

`o` ”v” – vágány

`o` ”s” – szolgálati hely (kis téglalap)

`o` ”t” – szolgálati helyek között (téglalap)

`o` ”l” – vonal (line)

  - Érvényesség kezdete (ErvKezdet)

  - Érvényesség vége (ErvVeg)

  - Szolgálati hely -tól (SzhTol)

  - Szolgálati hely -ig (SzhIg)

  - Vágány id (VaganyId)

  - Késési forgalmi főkód (FoKod)

  - Késési UIC kód (UicKod)

  - Kiterjesztett RDE azonosító (KiterjRdeAzon)

  - RDE okozó (RdeOkozo). Lehetséges értékei:

`o` „VV” – vasútvállalati

`o` „PV” – pályavasút

`o` „K” – Külső

`o` „M” – Másodlagos

  - RDE okozó belső azonosító (RdeOkozoId). Lehetséges értékei:

`o` 1 - „VV” – vasútvállalati

`o` 2 - „PV” – pályavasút

`o` 3 - „K” – Külső

`o` 4 - „M” – Másodlagos

  - Információs terület megnyitható jelző (InfoTerMegnyithato). Lehetséges értékei:

`o` „0” – Az RDE eseményhez tartozó információs terület nem nyitható meg

`o` „1” – Az RDE eseményhez tartozó információs terület megnyitható

  - RDE kapcsán érintett menetvonal belső azonosítók (ErintettMenetvIds):

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** <#>Amennyiben az RDE eseményhez tartozó
segédkód a bejelentkezett felhasználó vasútvállalatához
tartozik, akkor az InfoTerMegnyithato = 1¶
<#>Amennyiben az RDE eseményhez tartozó segédkód nem a
bejelentkezett felhasználó vasútvállalatához tartozik és:¶

<#>ha a segédkódra vonatkozó K_KSK_MGM táblabeli
jelző = 1, akkor InfoTerMegnyithato = 1¶
<#>ha a segédkódra vonatkozó K_KSK_MGM táblabeli
jelző = 0, akkor InfoTerMegnyithato = 0¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 401/526|


 Json formában az adott időszakban és adott szolgálati helyeket érintő

vonatesemények alapján az érintett menetvonalak MGM-ben használt belső
azonosítói (MGM_Menetvonal.mgm_mv_id)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|RDE_Fej|RDE fejadatok|
|RDE_Objektum|RDE objektum adatok|
|T_KFK|Késési főkódok|
|T_PPJ|Pályapont jellemzők|
|PalyaSzakaszFej|Pályaszakasz fejadatok|
|K_KSK_MGM|Késési segédkód MGM vezérlő adatok|


Nincs

Nincs


**Rendszerparaméterek**

**Batch modulok egyéb adatai**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 402/526|

##### **3.21 S_0151_20 – RDE információs terület adatok lekérdezése ** **(RdeInfoTerQuery) (usp_0151_selRdeInfoTer) **

**Szolgáltatás feladatai**

A bemenő paraméterben kapott RDE azonosítóhoz tartozó, RDE információs területen
megjelenítendő adatok lekérdezésére szolgál.

**Bemenő adatok**

  - RDE azonosító (RdeAzon): Formátuma: ééééhhnn-xxx x pl.: 20200317- 0 030

**Működés**

A szerviz a bemenő paraméterben kapott RDE azonosítóval meghívja az
**usp_0151_selRdeInfoTer** eljárást, mely a maszkolt érték átalakítása után az **RDE_Fej**
táblából lekérdezi a kimenő paramétereknél definiált adatokat. Mivel a PASS2 adatbázisban
jelenleg csak az érvényes RDE adatok tároljuk, ezért RDE azonosító esetén csak az aktuális
(legutolsó) verzió adatainak lekérdezhetősége biztosított.

**Kimenő adatok**

  - Érvényesség kezdete (ErvKezdet)

  - Érvényesség vége (ErvVeg) - Amennyiben az RDE érvényesség vége 2100.12.31,

akkor az eljárás NULL-t ad vissza az ErvVeg paraméterben

  - Késési forgalmi főkód (FoKod) – Pályavasúti (belső) felhasználónak megjelenítendő

  - Késési segédkód (SegedKod) - – Pályavasúti (belső) felhasználónak megjelenítendő

  - Késési UIC kód (UicKod) – Vasútvállalati (külső) felhasználónak megjelenítendő

  - R DE tárgy ( Targy ) – RDE_fej.RDE_szoveg értéke [#105445]

  - RDE leírás (Leiras) – RDE_fej.beje gy zes_leir a s értéke [#105445]

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 403/526|


**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|RDE_Fej|RDE fejadatok|
|T_KFK|Késési főkódok|
|K_KSK|Késési segédkódok|


Nincs

Nincs


**Rendszerparaméterek**

**Batch modulok egyéb adatai**

##### 3.22 [#88994] S_0151 _ 21 – Ábra szintű információk lekérdezése (AbraInfokQuery) **-** **(usp_0151_selAbraInfok)  (BÉ)**

**Szolgáltatás feladatai**

A bemenő paramét er ben kapott ábra azonosítóhoz tartozó, idő üzemmódtól függő ábra szintű
információk lekér d ezésére szolgál.

**Bemenő adatok**

  - Ábra belső azonosító ( **AbraId** )

  - Időszak ( **Idoszak** )

`o` Időszak kezdete ( **IdoszakKezd** ) – (Időhenger esetén az időhenger kezd et e! )

`o` Időszak vége ( **IdoszakVeg** ) – (Időhenger esetén **NULL** !)

**Működés**

A **szerviz meghív** **j** **a** az „ **usp_0151_selAbraInfok** ” tárolt eljárást a *Bemenő adatok* ban kapott
paraméterekkel.

A **tárolt eljárás** a ka pott paraméterek alapján kiolvassa egy adott ábra információit.

Tartalomtól függő en 4 féle listasor létezik





|Col1|AbraI d|AbraNev|SzerkNev|SzerkKez d|SzerkVeg|
|---|---|---|---|---|---|
|Időhenger - Szerkesztő adatai (Aktuális) – 0-1 db sor|A|A|A|A|-|
|Eltérés 89475 Időhenger - Korábbi szerkesztők (Korábbi) – 0-n db sor|K|K|K|K|K|
|Időhenger - Érintett ábrák (Érintett) – 0-n db sor|É|É|É|É|-|
|Fix időszak - Szerkesztők (Szerkesztők) – 0-n db sor|S|S|S|S|S|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 404/526|



 - **Időhenger** üzemmód

Eltérés 89475

Csak az *Ábra belső azonosító* ( **AbraI** **d** ) és az *Időszak kezdete* ( **IdoszakKezd** )
kitöltött. (Az *Időszak vége* ( **Idoszak** **Veg** ) = **N** **U** **LL** .) Az aktuális ábra adatai, a korábbi
szerkesztők listája és a kapcsolódó á br ák listája.

Az *Időszak vége* ( **IdoszakVeg** ) legy en = a z **ak** **t** **u** **ális idő** vel.

Eltérés 89475 vége

**Aktuális ábraadatok**

Kiolvassa az ábra aktuális adatait és a k iol v asott adatokból „ **Aktuális** ” típusú **listasor** t
képez:

`o` Ábra belső azonosító ( **AbraId** ) = MGM_Abra. **abra_id**

`o` Ábra neve ( **AbraNev** ) = MGM_Abra. **abra_nev**

`o` Szerkesztő teljes neve ( **SzerkNev** ) = MGM_Abra.ter_munkahely_i d 

TeruletMunkahely.foglalo_PASS2UserId alapján
Pass2UserProfile. **Pass2FullName**

`o` Szerkesztés kezdő időpontja ( **SzerkKezd** ) = MGM_Abra.ter_munkah el y _i d

 TeruletMunkahely. **fogl_kezd_ido**

`o` Szerkesztés vég időpontja ( **SzerkVeg** ) = **NULL**

Eltérés 89475

**Korábbi szerkesztők listája**

A *Bemenő adatok* ban kapott *Ábra bels* *ő azo* *nosító* ( **AbraId** ) és *Időszak kezdete*
( **IdoszakKezd** ) valamint az aktuáli s időv el f eltöltött *Időszak vége* ( **IdoszakVeg** )
adatoknak megfelelően kell a lente bb szer eplő **Fix időszak üzemmódnál** alkalmazott
lekérdezést itt is elvégezni.

Eltérés 89475 vége

**Érintett ábrák adatai**

Az aktuális ábra szolgálati helyei al apján m eg határozza az „ **Érintett** ” ábrák **listá** ját.

Azok az érintett ábrák, amelyek tartal m az zá k valamelyik szolgálati helyét az aktuális
ábrának és az adott pillanatban még **érv** **ényes** **e** **k** .

A **rendezettség** az *Ábra neve* ( **Ab** **ra** **Nev** ) s ze rint **növekvő** és a *Szerkesztés kezdő*
*időpontja* ( **SzerkKezd** ) szerint **csökk** **enő** les z.

`o` Ábra belső azonosító ( **AbraId** ) = MGM_Abra.abra_id 

MGM_AbraUtvonal.szh_id  MGM_AbraUtvonal. **abra_id**

`o` Ábra neve ( **AbraNev** ) = MGM_AbraUtvonal. **abra_id**  MGM_A b r a . ab r a_ id

 MGM_Abra. **abra_nev**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 405/526|


`o` Szerkesztő teljes neve ( **SzerkNev** ) = MGM_Abra.ter_munkahely_i d 

TeruletMunkahely.foglalo_PASS2UserId alapján
Pass2UserProfile. **Pass2FullName**

`o` Szerkesztés kezdő időpontja ( **SzerkKezd** ) = MGM_Abra.ter_munkah el y _i d

 TeruletMunkahely. **fogl_kezd_ido**

`o` Szerkesztés vég időpontja ( **SzerkVeg** ) = **NULL**

  - **Fix időszak** üzemmód

**Szerkesztők / Korábbi szerkesztők** **li** **st** **áj** **a**

A *Bemenő adatok* ban az *Ábra be* *l* *ső* *azonosít* *ó* ( **AbraId** ) és az *Időszak* ( **Idoszak** )
egyaránt kitöltött. Az aktuális ábra szer k es ztőine k listája.

Az aktuális ábra eseményei alap ján m eg határozza az „ **Szerkesztők** ” /„ **Korábbi**
**szerkesztők** ” **listá** ját a kapott **idős** **zak** **ban** . ( A kapott időszakban azok a szerkesztők
jelennek meg, akiknek a szerkeszt ési idejéne k akár egy másodperce is beleesik a
figyelt időszakba.)

A **rendezettség** az *Ábra neve* ( **Ab** **ra** **Nev** ) s ze rint **növekvő** és a *Szerkesztés kezdő*
*időpontja* ( **SzerkKezd** ) szerint **csökk** **enő** les z.

`o` Ábra belső azonosító ( **AbraId** ) = MGM_Abra. **abra_id**

`o` Ábra neve ( **AbraNev** ) = MGM_Abra. **abra_nev**

`o` Szerkesztő teljes neve **(SzerkNev** ) = MGM_Abra.ter_munkahely_i d 

MGM_MunkahelyFoglEsem.PASS2UserId alapján
Pass2UserProfile **.Pass2FullName** (A Szerkesztés kezdő időpontjában
érvényes PASS2 felhasználói név jelenik meg.)

`o` Szerkesztés kezdő időpontja ( **SzerkKezd** ) = MGM_Abra.ter_munk ah el y _i d

 MGM_MunkahelyFoglEsem. **fogl_kezd_ido**

`o` Szerkesztés vég időpontja ( **SzerkVeg** ) = MGM_Abra.ter_munkahe l y _ i d 

MGM_MunkahelyFoglEsem. **fogl_veg_ido**

A **szerviz** a tárolt el járástól kapott *Kimenő adatok* at **továbbítja** a kliensnek.

**Kimenő adatok**

{Ábra szintű információk **lista** }

  - Ábra belső azonosító ( **AbraId** )

  - Ábra neve ( **AbraNev** )

  - Szerkesztő teljes neve ( **SzerkNe** **v** )

  - Szerkesztés kezdő időpontja ( **Sz** **e** **r** **k** **K** **ez** **d** )

  - Szerkesztés vég időpontja ( **Szer** **kVeg** )

**Interfészek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 406/526|


**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Abra|MGM-ben használt ábrák alapadatai|
|MGM_AbraUtvonal|Ábra útvonala|
|MGM_MunkahelyFoglEse m|Munkahely foglalás eseményei|
|TeruletMunkahely|Területekhez tartozó munkahelyek|


Nincs

Nincs


**Rendszerparaméterek**

**Batch modulok egyéb adatai**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 407/526|

##### **3.23 [88953] S_0151_22 – Vágányzár szerkesztéshez adatok lekérdezése ** **(VaganyzarSzerkeszteshezQuer y) (u s p_01 5 1_selVaganyzarSzerkeszteshez)**

**Szolgáltatás feladatai**

Vágányzárnál megjelenő beúszó szerkesztő panelhez adatok lekérdezése.

**Bemenő adatok**

  - Vágányzár belső azonosító (Vgz I d)

**Működés**

A szerviz a vágányzáraknál megjelenő beúszó szerkesztő panelhez szükséges adatok
lekérdezéséhez, m eg hívja az usp_0151_selVaganyzarSzerkeszteshez tárolt eljárást, a bemenő
adatokban kapott p ar améterekkel.

Az eljárás a bem en ő adatokban kapott vágányzár azonosítóhoz tartozó vágányzár kimenő
adatokban meghatár o zott adatait keresi meg és adja át a hívó modulnak.

A vágányzár fejad a tait a V _ KKF, a tény adatokat a V _ KKF _ TENY, a vonali kizárásokat a
V_KKVK az állo m ási kizárásokat pedig a V _ KKAK táblából olvassa ki. [#88955 ] A
V _ KKF _ TENY táb l ában csak a logikailag nem törölt (V _ KKF _ TENY.torolt _ jelzo = False)
rekordokat veszi f ig yelembe. [#88955vége]

A terület listában a vágányzárhoz tartozó vonali kizárások és állomási kizárások területét
sorolja fel a követ k ezők szerint:

  - Ha a vágányzárhoz sem vonal i, sem állom ási kizárás nem tartozik, de a V_KKF

táblában lévő vonal (vnl_id), szolg álati hel ytől (szh_id_tol), szolgálati helyig
(szh_id_ig) adatok közül valamelyi k k itöltött, a kkor az ezek alapján képzett terület
rekordot adja át.

Terület: vonal takt neve+ ’ ’ +szolgálati helytől hosszú neve+ ’    - ’ +szolgálati helyig
hosszú neve. A vonal takt nevét a T _ VV, a szolgálati helyek hosszú nevét pedig a
T _ SHJ táblából veszi.

  - Vonali kizárásokhoz annyi terül et r ek or dot k épez, a vonal takt nevét és a kezdő és vég

szolgálati helyek hosszú nevét ös s ze f űzve, amennyi vonali kizárást talál a
vágányzárhoz a V _ KKVK táblában, de az az ono sakat csak egyszer adja át.

’ ’ ’
Terület: vonal takt neve+ + vonali kizárás kezdő szolgálati helyének hosszú neve+    ’ + vonali kizárás vég szolgálati helyének hosszú neve)

  - Az állomási kizárásokhoz is ann y i t er ület r ek or dot képez a kizárás szolgálati helyének

hosszú nevével, amennyi állomási k izár ást talál a V _ KKAK táblában, de az
azonosakat csak egyszer adja át.

Terület: kizárás szolgálati helyének hosszú neve

**Kimenő adatok**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 408/526|



  - Vágányzár VPE azonosítója (VgzAzon)

  - Vágányzár okának megnevezése ( VgzO k Nev ) ( V _KKF.k_kkotip_id   - >K_KKO)

  - Vágányzár típusának megnevezés e ( VgzT ipN ev ) (V_KKF.k_kkttip_id   - >K_KKT)

  - Elmaradás (Elmaradas)

  - Tény érvényesség kezdete (TenyEr v K ezde t) ( l eh et NULL)

  - Tény érvényesség vége (TenyEr v Veg) ( lehet N U LL)

  - Tervezett érvényesség kezdete (Terv E r vK ezdet)

  - Tervezett érvényesség vége (Ter v Er v Veg)

  - Elrendelő távirat (Tavirat)

  - Megjegyzés (Megj) (Tény megj egy zés )

  - Utolsó módosítás ideje (Utolso Mod) ( V_K K F_ TENY táblából. Ha a vágányzárhoz

nincs [#88955] logikailag nem törölt [#88955vége] t ény ada t, akkor NULL)

  - Terület lista

`o` Terület (Terulet)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|V_KKF|Kapacitás korlátozás fejadatok|
|V_KKF_TENY|Kapacitás korlátozás tény adatok|
|V_KKVK|Vonali kizárások|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 409/526|


|V_KKAK|Állomási kizárások|
|---|---|
|K_KKO|Kapacitás korlátozás okok|
|K_KKT|Kapacitás korlátozás típusok|
|T_VV|Vasútvonalak|
|T_SHJ|Szolgálati hely jellemzői|


**Rendszerparaméterek**

Nincs
##### **3.24 S_0151_23 – Vágányzári tény adatok mentése** **(VaganyzarTenyMentesComma n d) (u s p _0 1 51_VaganyzarTenyMentes)**

**Szolgáltatás feladatai**

A megadott vágány z ári tény adatok mentése

**Bemenő adatok**

  - Ábra belső azonosító (AbraId)

  - Vágányzár belső azonosító (Vgz I d)

  - Elmaradás (Elmaradas)

  - Tény érvényesség kezdete (TenyEr v K ezde t) ( l eh et NULL)

  - Tény érvényesség vége (TenyEr v Veg) ( lehet N U LL)

  - Elrendelő távirat (Tavirat)

  - Megjegyzés (Megj) (Tény megj egy zés )

  - Utolsó módosítás ideje (UtolsoM od)

**Működés**

A szerviz a vágányzárak tény adatainak a mentéséhez meghívja
usp_0151_VaganyzarTenyMentes tárolt eljárást, a bemenő adatokban kapott paraméterekkel.

Az eljárás a követ k ező ellenőrzéseket végzi:

  - Az S_0151_39 – Munkahely fog lalá s ellenőr zés (uf _ checkMunkahelyFogl), függvény

hívásával ellenőrzi, hogy a bemenő ada tok ban k apott ábrát még a szerkesztést végző
felhasználó foglalja     - e. A függvény t a bem enő adatokban kapott felhasználó
azonosítójával (epaiParamXmlDoc    - ból) és az ábra belső azonosítójával hívja meg.
Amennyiben a függvény false érték et ad v i s s za, vagyis már nem a felhasználó foglalja
az ábrát, akkor hibát ad.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 410/526|



  - Ha a bemenő adatokban az U tolsó m ódosítás ideje kitöltött és a V_KKF_TENY

táblában nem létezik [#88955] logikailag nem törölt (V_KKF_TENY.torolt_jelzo = False)
#88955vége adat a vágányzárhoz, vagy lét ez i k, de az adatbázisban az utolsó módosítás
ideje nagyobb, mint a bemenő adato k ban kapott, akkor hibát ad.

  - Ha a bemenő adatokban az U tolsó m ód osítás ideje nincs kitöltve, de a

V _ KKF _ TENY táblában létezi k #88955 logikailag nem törölt
(V_KKF_TENY.torolt_jelzo = False ) [#88955vége] adat a vágányzárhoz, akkor hibát ad.

#88955 ~~Ha~~ ~~az~~ ~~ellen~~ ~~ő~~ ~~rzések~~ ~~során~~ ~~nem~~ ~~talált~~ ~~hibát~~ ~~az~~ ~~eljárás~~ ~~és~~ ~~a~~ ~~bemenő~~ ~~adatokban~~ ~~a~~ ~~Tény~~
~~érvényesség~~ ~~kezdet~~ e ~~(TenyErvKezdet)~~ ~~és~~ ~~Tény~~ ~~érvényesség~~ ~~vége~~ ~~(TenyErvVeg)~~ ~~NULL~~,
~~valamint~~ ~~nem~~ ~~történ~~ t ~~elmaradás~~ ~~(Elmaradás~~ ~~=~~ ~~False)~~, ~~akkor~~ ~~a~~ ~~V~~ _ ~~KKF~~ _ ~~TENY~~ ~~táblából~~ ~~törli~~ ~~a~~
~~vágányzárhoz~~ ~~tarto~~ zó ~~tényadatot~~ .

~~Egyébként~~ ~~pedig~~, h ~~a~~ ~~az~~ ~~ellenőrzések~~ ~~során~~ ~~nem~~ ~~talált~~ ~~hibát~~, ~~akkor~~ ~~a~~ ~~kapott~~ ~~tény~~ ~~adatokat~~
~~elmenti~~ ~~a~~ ~~vágányzárhoz~~ ~~a~~ ~~V~~ _ ~~KKF~~ _ ~~TENY~~ ~~táblába~~, ~~úgy~~ ~~hogy~~ ~~az~~ ~~utolsó~~ ~~módosítás~~ ~~idejébe~~ ~~az~~
~~aktuális~~ ~~időt~~ ~~írja~~ . H ~~a~~ ~~már~~ ~~létezik~~ ~~tényadat~~ ~~a~~ ~~vágányzárhoz~~, ~~akkor~~ ~~azt~~ ~~felülírja~~ . ~~Ha~~ ~~nem~~ ~~létezik~~
~~tényadat~~, ~~akkor~~ ~~új~~ rek ~~ordot~~ ~~hoz~~ ~~létre~~ .

Ha az ellenőrzések s orán nem talált hibát az eljárás és a vágányzárhoz tartozik logikailag nem
törölt tény rekord a Vkapott adatoktól, ak k or a következőket végzi az eljárás: _ KKF _ TENY táblában és ennek a tartalma eltér a bemenő adatokban

  - A V _ KKF _ TENY táblából logikailag törli a vágányzárhoz tartozó tényadatot.

Logikai törlés során a következő mezőket írja:

`o` utolso _ mod: aktuális idő

`o` mod _ felh _ id: a felhasználó PASS2 azonosítója

`o` torolt_jelzo:True

  - Ha a kapott adatokban a Tény érvényesség kezdete (TenyErvKezdet) és a Tény

érvényesség vége (TenyErvVeg) kitöltött, vagy elmaradás rögzítése történt
(Elmaradás = True), akkor a kapott adatokkal új rekordot hoz létre a V _ KKF _ TENY
táblába:

`o` kapkorl_id: Vágányzár belső azonosító (VgzId)

`o` teny_kezd_ido: Tény érvényesség kezdete (TenyErvKezdet)

`o` teny_veg_ido: Tény érvényesség vége (TenyErvVeg)

`o` tavirat: Elrendelő távirat (Tavirat)

`o` elmaradas: Elmaradás (Elmaradas)

`o` megjegyzes: Megjegyzés (Megj)

`o` utolso _ mod: aktuális idő

`o` mod_felh_id: a felhasználó PASS2 azonosítója

`o` rogz _ ido: aktuális idő

`o` rogz_felh_id: a felhasználó PASS2 azonosítója

`o` torolt_jelzo: False

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 411/526|


Ha az ellenőrzése k során nem talált hibát az eljárás és a vágányzárhoz nem tartozik tény adat
a V _ KKF _ TENY t á blában (a logikailag törölt adatokat nem vesszük figyelembe), akkor a
kapott adatokkal új r ekordot hoz létre a V _ KKF _ TENY táblába az előző bekezdésben leírtak
szerint.

A V _ KKF _ TENY t á blából az újonnan létrehozott és módosított rekordokat a PBI - nak történő
átadáshoz a követk ez ő módon regisztrálja a PbiReg táblába:

    - pbi_tipus: ” KapKorlTeny ”

    - pbi_query_param1: V_KKF_TENY.kapkorl_id

    - pbi_query_param2: V_KKF_TENY.rogz_ido

    - pbi_kuldes_szamlalo: NULL

    - pbi _ create _ timestamp: Aktuális idő

#88955vége

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs












|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüz enet típusa|
|Ha az uf_checkMunkahelyFogl függvény false értéket ad vissza, vagyis már nem a szerkesztést végző felhasználó foglalja az ábrát|Érvénytelen munkahely foglalás, az adatok mentése sikertelen!”|UC_01_51_ERR_ERVENYT ELEN_FOGLALAS|Tárolt eljárás|Hiba|
|Ha a bemenő adatokban az Utolsó módosítás ideje kitöltött és a V_KKF_TENY táblában nem létezik #88955logikailag nem törölt #88955vége adat a vágányzárhoz,|Az adatokat más felhasználó módosította!|UC_01_00_ERR_ADATOKA T_MAS_FELH_MODOSITO TTA|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 412/526|






|vagy létezik, de az adatbázisban az utolsó módosítás ideje nagyobb, mint a benemő adatokban kapott|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ha a bemenő adatokban az Utolsó módosítás ideje nincs kitöltve, de a V_KKF_TENY táblában létezik #88955logikailag nem törölt #88955vége adat a vágányzárhoz|Az adatokat más felhasználó módosította!|UC_01_00_ERR_ADATOKA T_MAS_FELH_MODOSITO TTA|Tárolt eljárás|Hiba|


**Érintett adattáblák/kódtáblák**




|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|V_KKF_TENY|Kapacitás korlátozás tény adatok|
|#88955PbiReg|Regisztrációs tábla PBI-nak adatátadáshoz|


**Rendszerparaméterek**

Nincs [88953vége]
##### **3.25 S_0151_24 - Munkahelyi adminisztratív feladatok lekérdezése ** **(MunkahelyAdminFeladatokQuery; ** **usp_0151_selMunkahelyAdminFeladatok) **

**Szolgáltatás feladatai**

Egy munkahelyet érintő adminisztratív feladatok (összesítő) lekérdezése.

**Bemenő adatok**

  - **’MunkahelyId’**   - az érintett munkahely belső azonosítója, amelyet érintő feladatokat

ki kell keresni.

  - **’KesesIg’**   - Késésigazolási feladatokat kell keresni (1/0)

  - **’VgAdat’**   - vágányadat pótlási feladatokat kell keresni (1/0).

**Működés**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 413/526|


A szerviz a munkahelyet érintő feladatok kikereséséhez meghívja
usp_0151_selMunkahelyAdminFeladatok tárolt eljárást, a bemenő adatokban kapott
paraméterekkel.

**Az eljárás a következőket végzi:**

- **Kikeresi** a munkahely szolgálati helyeit érintő késésigazolási és vágányadat pótlási
**feladatokat** .
`o` Az érvényes ’Mgm_Abra.abra_id’ alapján az ’MGM_AbraUtvonal’ táblából kikeresi
azt az ’szh_id’ adatot, ahol az ’admin_feladat’ = True.
`o` ’VgAdat’ = True:
Ha az ’szh_id’ alapján a ’VaganyHiany.utk_jelzo’ = True, akkor beállítja a **’VgAdat’**
értékét True-ra és a ’ve_id’ alapján a ’V_VE’ táblából kikeresi ’vft_id’ adatot.
`o` ’KesesIg’ = True
A ’V_VFK’ táblából kikeresi azoknak a rekordoknak a ’ve_id’ adatát, ahol a
’vk_hianyos’ = True ÉS ’vk_torolt_jelzo’ = False. A ’ve_id’ alapján kikeresi azokat
az eseményeket a ’V_VE’ táblából, ahol az esemény szolgálati helye megegyezik a
munkahely szolgálati helyével (’szh_id’) ÉS a ’vft_id’  ’P_VFT.vft_szla_jelzo’ =
0. Ezeknél beállítja a **’KesesIg’** értékét True-ra.

- Ezek után a **kimenő adatokat** megállapítja:
`o` **’VonatAzon’**  - megjelenítésre „56 99999 24/05/15” formátumban. A ’vft_id’ alapján
a ’P_VFT’ táblából egy függvény alapján.
`o` **’VftId’**  - nem jelenik meg, az A_0151_08 ablaknak kerül majd átadásra.
`o` **’MegrAzon’** a ’P_VFT.vft_igenyles_id’ alapján ’V_IGF.igenyles_id’ szerinti
’V_IGF.vpe_igeny_id’ - megjelenítésre „2024/1234567/1234” formátumban.
`o` **’MegrRovidNev’**  - megjelenítésre. ’V_IGF.vvt_szerv_id’ a ’K_TABL.k_tab_id’
alapján, ahol a ’T_VVUJ.k_id’ = ’vvt_szerv_id’

**Kimenő adatok**

- ’VonatAzon’

- ’VftId’

- ’MegrAzon’

- ’MegrRovidNev’

- ’KesesIg’

- ’VgAdat’

- 'MunkahelyId'

- 'AbraId'

**Interfészek**

Nincsenek.

**Jelentések**

Nincsemek.

**Email küldés**

Nincsenek.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 414/526|


**Rendszerüzenetek**

Nincsenek

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|||



**Rendszerparaméterek**

Nincsenek.
##### **3.26 S_0151_25 – Munkahelyek lekérdezése (MunkahelyekQuery) ** **(usp_0151_selMunkahelyek) **

**Szolgáltatás feladatai**

Az A_0151_02 ablak munkahely listájához kapcsolódó munkahely adatok lekérdezése.

**Bemenő adatok**

  - Nincs

**Működés**

A szerviz meghívja az **usp_0151_selMunkahelyek** eljárást bemenő paraméterben átadva neki
a bejelentkezett felhasználó azonosítóját (Pass2UserId). Az eljárás a kapott Pass2UserId
területi jogosultsága alapján kikeresi a TeruletMunkahely táblából azokat a munkahelyeket,
melyek:

  - Érvényesek **ÉS**

  - A felhasználó területéhez tartoznak

**Kimenő adatok**

  - Munkahely belső azonosító (TerMunkahelyId)

  - Munkahely név (MunkahelyNev)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 415/526|


Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|TeruletMunkaHely|Munkahelyek|
|Pass2UserProfile|Felhasználói adatok|
|T_SHJ|Szolgálati hely jellemzők|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**
##### **3.27 S_0151_26 – Munkahelyhez tartozó ábrák lekérdezése ** **(AbrakByMunkahelyQuery) (usp_0151_selAbrakByMunkahelyId) [ #88952]**

**Szolgáltatás feladatai**

Az A_0151_02 ablak ábra listájához kapcsolódó ábra adatok lekérdezése.

**Bemenő adatok**

  - Munkahely belső azonosító (TerMunkahelyId)

**Működés**

Az usp_0151_selAbrakByMunkahelyId eljárás a bemenő paraméterben kapott
TerMunkahelyId alapján kiolvassa az érvényes rekordok kimenő adatoknál definiált adatait az
**MGM_Abra** táblából.

**Kimenő adatok**

  - Ábra belső azonosító (AbraId)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 416/526|



  - Ábra név (AbraNev)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Abra|Ábra adatok|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**
##### **3.28 S_0151_27 – Munkahely szintű foglalás kezelése ** **(MunkahelyFoglKezCommand) (usp_0151_setMunkahelyFogl) **

**Szolgáltatás feladatai**

A szolgáltatás feladatai:

  - Annak ellenőrzése, hogy egy adott munkahelyet foglalja-e valamely felhasználó,

  - Munkahely foglalása

  - Munkahely foglalás kényszerátvétele

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 417/526|



  - Munkahely foglalás tényének naplózása.

**Bemenő adatok**

  - Munkahely belső azonosító (TerMunkahelyId)

  - Foglalás átvétel megerősítés jelző (FoglAtvMegerositJelzo)

**Működés**

A szolgáltatás szerviz rétege a bemenő paraméterben kapott adatokat kiegészíti a
bejelentkezett felhasználó azonosítójával (Pass2UserId), majd ezzel meghívja az
**usp_0151_setMunkahelyFogl** eljárást.

  - Munkahely belső azonosító (TerMunkahelyId)

  - Bejelentkezett felhasználó azonosítója (Pass2UserId)

  - Foglalás átvétel megerősítés jelző (FoglAtvMegerositJelzo)

Az eljárás az alábbi műveleteket végzi:

  - Első lépésben ellenőrzi, hogy a bemenő paraméterben kapott munkahely foglat-e, ez

az ellenőrzés technikailag a **TeruletMunkahely** tábla alapján történik.

  - Amennyiben nem foglalt, akkor az eljárás az érintett munkahely **TeruletMunkahely**

rekordjában frissíti a Pass2UserId-t és rögzíti a foglalás kezdetét, továbbá egy új
rekordot ír a naplózás adatokat tartalmazó **MGM_MunkahelyFoglEsem** táblába.

  - Amennyiben foglalt, akkor az alábbi két eset lehetséges:

`o` Ha FoglAtvMegerositJelzo = False, akkor az eljárás kimenő adatként

visszaadja a foglalásra vonatkozó megerősítő üzenet tartalmát a következők
szerint: „A {Felhasználó neve} {foglalás kezdés időpontja} óta foglalja a
munkahelyet, biztos átveszi a foglalást?”

`o` Ha FoglAtvMegerositJelzo = True, akkor az eljárás az érintett munkahely

**TeruletMunkahely** rekordjában frissíti a Pass2UserId-t (ha az nem egyezik
meg a kapottal) és rögzíti a foglalás kezdetét, valamint az
**MGM_MunkahelyFoglEsem** táblában lezárja a korábbi foglalást és új
rekordot ír az új foglalásra vonatkozóan.

**Kimenő adatok**

  - Foglalási üzenet (FoglUzenet)

**Interfészek**

Nincs

**Jelentések**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 418/526|


**Email küldés**

Nincs



|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|Van az adott munkahelyet foglaló felhasználó|„A {Felhasználó neve} {foglalás kezdés időpontja} óta foglalja a munkahelyet, biztos átveszi a foglalást?”|Tárolt eljárás|Megerősítő|


**Érintett adattáblák/kódtáblák**









|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|TeruletMunkahely|Munkahely adatok|
|MGM_MunkahelyF oglEsem|Munkahely foglalási adatok|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


**Batch modulok egyéb adatai**
##### **3.29 S_0151_28 - Menetvonal szintű irányítói adminisztratív feladatok ** **lekérdezése (MenetvonalAdminFeladatokQuery szolgáltatás; ** **(core.usp_0151_selMenetvonalAdminFeladatok) **

**Szolgáltatás feladatai**

A szolgáltatás a bemenő adatokban kapott **menetvonalat** a felhasználó **munkahelye** által
meghatározott szolgálati helyeken érintő adminisztratív **feladatokat** keresi ki és adja vissza a
kliensnek.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 419/526|


A szolgáltatás a kapott bemenő adatokkal meghívja a
core.usp_0151_selMunkahelyAdminFeladatok eljárást és a kapott kimenő adatokat továbbítja
a hívó alkalmazásnak (A_0151_08 ablak).

**Bemenő adatok**

- **’MgmMvId’** - a kijelölt menetvonal **MGM belső** azonosítója a VPE-s menetvonal
azonosító és a vft adatainak megállapításához. A **grafikonról** hívás esetén. Lehet üres is.

- **'VftId’** - a kijelölt vonat **belső** azonosítója a VPE-s menetvonal azonosító és a vft
adatainak megállapításához. **A_0151_07 ablakról** hívás esetén. Lehet üres is.

- **’MunkahelyId’** - annak a munkahelynek a belső azonosítója, amelyet érintő feladatokat
keresni kell.

- **’KesesIg’** - Késésigazolási feladatokat kell keresni (1/0)

- **’VgAdat’** - vágányadat pótlási feladatokat kell keresni (1/0).

**Működés**

- Ha **’MgmMvId’** -t kap akkor, az ’MGM_Menetvonal’ táblából kikeresi az ’igenyles_id’
és az ’igenyles_datumot’, ami alapján a ’VftId’ = ’P_VFT.vft_id’, ahol ’vft_igenyles_id’
= ’igenyles_id’ és ’vft_ind_datum’ = ’igenyles_datum’.

- Ha **’VftId’** -t kap akkor megkeresi a ’P_VFT.vft_igenyles_id’ és ’vft_igenyles_datum’
adatot.

- Ezek alapján keresi a kimenő adatokat.

**Az eljárás működése**

- **Menetvonal** alapadatai tömb:
Kikeresi a kapott ’MgmMvId’ vagy ’VftId’ alapján az érintett menetvonal alapadatait:
`o` **’MegrAzon’**  - a menetvonal VPE azonosítója (VPE szám és dátum) =
’P_VFT.vft_igenyles_id’ alapján ’V_IGF.igenyles_id’ szerinti
’V_IGF.vpe_igeny_id’ - megjelenítésre „2024/1234567/1234” formátumban.
`o` **’MegrRovidNev’**  - a megrendelő rövid neve. = ’igenyles_id’ alapján a
’V_IGF.vvt_szerv_id’  ’T_VVUJ.vvt_szervj_rovid_nev’.
`o` **’MegrSegedKod’**  - a megrendelőhöz tartozó késési segédkód. = ’igenyles_id’
alapján ’V_IGF.igenyles_id’ szerinti ’vvt_szerv_id’  ’T_VVU.k_skod_id’.
`o` **’MtTipusId’**  - a menetvonal menetrend típus azonosítója. = ’VftId’ alapján a
’P_VFT.k_vnttip_id’.
`o` **’MtTipusKod’**  - a menetvonal menetrend típus kódja. = ’VftId’ alapján a
’P_VFT.k_vnttip_id’  ’K_VNTT.K_kod’.
`o` **’MtTipusNev’**  - a menetvonal menetrend típus leírása. =
’K_VNTT.K_megnevezes’.
`o` **’ForgNemKod’**  - a vonat forgalmi vonatnem kódja. = ’VftId’ alapján a
’P_VFT.vmf2_nev_v0’.
`o` **’ForgVnemNev’**  - a vonat forgalmi vonatnem megnevezése. = ’VftId’ alapján a
’P_VFT.vmf2_nev_v0’  ’T_VMF2.vmf2_nev_hosszu’.

- **Esemény** adatok tömb:
Azok az események kerülnek kikeresésre, amelyek:

(’P_VTS.vft_id’ = ahol a ’vft_igenyles_id’ és ’vft_igenyles_datum’ megegyezik a
fent megállapítottal.)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 420/526|


`o` A **menetvonalhoz** **tartoznak** : a ’V_VE’ tábla azon rekordjai, ahol a ’vft_id’ =
’P_VTS_vft_id’ és a ’V_VE.szh_index’ = ’P_VTS.szh_index’. és a ’ve_torolt_jelzo’
= false, ÉS a ’k_vesem_id’ = 1 (érkezés) VAGY 2 (indulás) ÉS
`o` A **munkahely által érintettek** a ’vft_id’ alapján (’V_VE.vft_szh_index’ =
’P_VTS.vft_szh_index’ ÉS ’P_VTS.szh_id’ = ’MGM_AbraUtvonal.szh_id’ rekord
’abra_id’ = ’MGM_abra.abra_id’ rekord ’ter_munkahely_id’ = ’MunkahelyId) ÉS
`o` Az **adminisztrációs** **feladat** **engedélyezett** a szolgálati helyre
’MGM_AbraUtvonal.adm_feladat’ = True.
`o` A késésigazolás hiányos, azaz GPS alapján késett a vonat és nincs késésigazolása,
vagy van, de az nem teljeskörű (hiányzik a segédkód, vagy 98-as kód van megadva).
Ha **késésigazolás** kell (’KesesIg’ = True): a ’V_VFK’ táblában van olyan rekord,
ahol ’ve_id’ = ’V_VE.ve_id’ ÉS ’V_VFK.vk_torolt_jelzo’ = False (nem törölt) ÉS a
’vk_hianyos’ = true.
`o` **Vágánypótlás** kell (’VgAdat’ = True) a ’VaganyHiany’ táblában van olyan rekord,
ahol a ’vft_id’, ’ve_id’ és ’vft_szh_id’ = P_VTS tábla adataival ÉS ahol a
’VaganyHiany.utk_jelzo’ = true.

Ezeknél az eseményeknél kell az **alábbi adatokat** kikeresni:
`o` **’VonatAzon’** - A ’vft_id’ alapján a ’P_VFT’ táblából egy függvény alapján.
`o` **’VftId’** - A vonat belső azonosítója az RDE események lekérdezéséhez
`o` **’SzhId’** - az esemény szolgálati helyének belső azonosítója. = ’szh_id’
`o` **’SzhIndex’** - az esemény szolgálati helyének a sorszáma a vft-n belül =
’vft_szh_index’
`o` **’SzhKod’** - az esemény szolgálati helyének statisztikai száma. = ’SzhId’ 
’T_SHF.szh_kod’
`o` **’SzhRovidNev’** - az esemény szolgálati helyének rövid neve. = ’SzhId’ 
’T_SHJ.szhj_rovid_nev’
`o` **’EsemId’** - Az esemény belső azonosítója a mentéshez = ’V_VE.ve_id’
`o` **’EsemKod’** - az esemény kódja. = ’esem_id’  ’K_VEF.k_kod’, ahol a
’V_VE.k_vesem_id’ = ’K_VEF.k_id’
`o` **'FoglaltVagany'** - az esemény foglalt vágányra/ról történt jelző (0/1) =
'V_VE.ve_fogl_vag_jelzo'.
`o` **'HelytelenVagany'** - az esemény helytelen vágányra/ról történt jelző (0/1)
='V_VE.ve_helyt_vag_jelzo'
`o` **’Rogzito’** - az eseményt rögzítő PASS2 azonosítója. = ’V_VE.felh_id’
`o` **’VgAzon’** - Az esemény vágányának leírása (mellékkódja) a
dbo.uf_getVaganyByID(VE.vg_id) függvény alkalmazásával.
`o` **'VgId'** - az esemény vágányának belső azonosítója. = 'V_VE.vg_id'
`o` **’MriIdo’** - az esemény menetrendszerinti ideje (éééé.hh.nn óó:pp) =
’V_VE.k_vesem_id’ = 1 (érkezés)  ’P_VTS.erk_terv_ido’ VAGY
’V_VE.k_vesem_id’ = 2 (indulás)  ’P_VTS.ind_terv_ido’
`o` **’TenyIdo’** - az esemény menetrendszerinti ideje (éééé.hh.nn óó:pp) mint fent csak
terv helyett ’teny’.
`o` **’Elteres’** - az esemény eltérésének mértéke percben = ’V_VE.vft_vk_perc’
`o` **’IgazolandoKeses’** - Az eseményhez igazolandó késési perc értéke. =
’V_VE.ve_igazolt_perc’, ha az > 0 ÉS a ’ve_id’ alapján a ’V_VFK.vk_hianyos’ =
TRUE és ’V_VFK.vk_torolt_jel’ = FALSE.
`o` **{igazolás} „lista”** a ’V_VFK’ táblából, a ’V_VE.ve_id’ alapján azok a rekordok
kerülnek kikeresésre, ahol a ’vk_torolt_jelzo’ <> True:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 421/526|


      ’IgKeses’ - igazolt késés percben ’vfvk_ido’.

      ’FoKodLeir’ - A késési főkód leírása a súgóhoz ’T_KFK.kfk_id’ = ’vk_kfk_id’,
onnan a ’megnevezes’.

      ’FoKodId’ - ’vk_kfk_id’.

      ’FoKod’ - A késéshez megadott főkód = ’T_KFK.kfk_id’ = ’vk_kfk_id’, onnan
a ’kod’.

      ’SKodId’ - A késéshez megadott segédkód = ’V_VFK.vk_skod_id’.

      ’SKodLeir’ - A segédkód leírása a súgóhoz = ’K_KSK.megnevezes’.

      ’SegedKod’ - A főkódhoz megadott segédkód = ’K_KSK.kod’.

      ’RdeAzon’ - a késéshez rögzített RDE azonosító = ’V_VFK.Rde_azon’.

      ’Indoklas’ - a főkódhoz rögzített indoklás= ’vfvk_keses_indokl’.

      ’KesesVonatOrszagID’ - nem kötelező = ’vfvk_vn_or_id’. Ha = 1, akkor NULL.

      ’KesesVonatSzam’ - nem kötelező = ’vfvk_vn_szam’

      ’KesesVonatDatum’ - nem kötelező = ’vfvk_vn_ind_datum’

      ’OkVonat’ = ’vfvk_vn_or_id’ + ’vfvk_vn_szam’ + ’vfvk_vn_ind_datum’.

      'HianyosJel’ = ’V_VFK.vk_hianyos’

      ’Nev’ = ’felh_azon’ alapján a hozzátartozó érvényes teljes név.

      ’RogzIdo’ = ’vk_rogz_ido’
`o` **’Feladat’**  - az eseményhez tartozó adminisztratív feladat kódja.

      Ha a van olyan vonatesemény, amelyhez nem adtak meg minden kötelező adatot
(a ’V_VFK’ táblában van olyan rekord, ahol ’ve_id’ = ’V_VE.ve_id’ ÉS
’V_VFK.vk_torolt_jelzo’ = False (nem törölt) ÉS ’vk_hianyos’ = true), akkor 1.

      Ha van olyan esemény, amelyhez nem rögzítettek vágányadatot és menetvonal
érvényessége hamarosan lejár (’VaganyHiany’ táblában van olyan rekord, ahol a
’vft_id’, ’ve_id’ és ’vft_szh_id’ = P_VTS tábla adataival, ahol az ’utk_jelzo’ =
true), akkor 2.

      Ha mind a két táblában talált rekordot, akkor 3.

**Kimenő adatok**

- Menetvonal **alapadatai** tömb:
`o` ’MegrAzon’
`o` ’MegrRovidNev’
`o` ’MegrSegedKod’
`o` ’MtTipusId’
`o` ’MtTipusKod’
`o` ’MtTipusNev’
`o` ’ForgNemKod’
`o` ’ForgVnemNev’

- **Esemény** adatok tömb:
Az adatok az ’EsemId’ szerint növekvő sorrendben kerülnek visszaadásra.

`o` ’VonatAzon’

`o` ’VftId’

`o` ’SzhId’

`o` ’SzhIndex’

`o` ’SzhKod’

`o` ’SzhRovidNev’

`o` ’VgAzon’

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 422/526|


`o` ’VgId’
`o` ’EsemId’

`o` ’EsemKod’

`o` 'FoglaltVagany'
`o` 'HelytelenVagany'
`o` ’Rogzito’
`o` ’MriIdo’
`o` ’TenyIdo’
`o` ’Elteres’
`o` ’IgazolandoKeses’
`o` {igazolás} „lista”

      ’IgKeses’
      - ’FoKodLeir’

      - ’FoKodId’

      - ’FoKod’

      - ’SKodId’

      - ’SKodLeir’

      ’SegedKod’
      - ’RdeAzon’

      - ’Indoklas’

      - ’OkVonat’

      'HianyosJel’
      - 'Nev’

      ’RogzIdo’
`o` ’Feladat’

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincsenek.

**Rendszerüzenetek**

Nincsenek.

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|K_KSK|Késési segédkódok|
|K_VNTT|Vonatterv típusok (menetrend típusok)|



MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|K_VEF|Vonatesemény féleségek|
|MGM_Abra|MGM-ben használt ábrák alapadatai|
|MGM_AbraUtvonal|Az ábra útvonalán található szolgálati helyek és a meghatározott szakasz adatai|
|MGM_Menetvonal|Menetvonalak MGM alapadatai|
|P_VFT|Vonatforgalmi terv (napi menetrend) alap adatai.|
|P_VTS|Vonatforgalmi terv (napi menetrend) szolgálati hely szintű adatai|
|T_KFK|Késési főkódok adatai|
|T_SHJ|Szolgálati helyek jellemző adatai|
|T_VVU|Vasútvállalatok alapadatai|
|T_VVUJ|Vasútvállalatok jellemzői|
|V_IGF|Megrendelés fej adatai|
|V_VE|Vonatesemények|
|V_VFK|Vonatesemények forgalmi késési adatai|
|VaganyHiany|Vágányhiányos események listája|


|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 423/526|


**Rendszerparaméterek**

Nincsenek.
##### **3.30 S_0151_29 – Eseményhez tartozó RDE adatok lekérdezése ** **(EsemRdeAdatokQuery), (usp_0202_selRDEAdatok) szolgáltatás **

**Szolgáltatás feladatai**

A késésigazolás pótlás adminisztratív feladathoz az esemény által érintett RDE események
adatainak lekérdezés a választólista feltöltéséhez.

A szolgáltatás a kapott bemenő adatokkal meghívja az usp_0202_selRDEAdatok eljárást és a
kapott kimenő adatokat továbbítja a hívó alkalmazásnak (A_0151_08 ablak).

**Bemenő adatok**

- ’JelentoPontID’

- ’JelentoPontIndex’

- ’VonatID’

- ’RogzEsemID’

- ’RogzEsemDatumIdo’

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 424/526|


**Működés**

Leírás az UC_02_02 leírásánál.

**Kimenő adatok**

- ’RDEAzonosito’

- ’RDEErvKezd’

- ’RDEErvVeg’

- ’ObjektumTipus’

- ’KesesFokod’

- ’KesesSegedkod

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincsenek.

**Rendszerüzenetek**

Nincsenek.

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|||
|||



**Rendszerparaméterek**

Nincsenek.
##### **3.31 S_0151_30 – Késésindoklás lekérdezése (KesesIndoklasQuery), ** **(usp_0202_selKesesIndoklas) **

A késésigazolás pótlás adminisztratív feladathoz egy késési főkódhoz tartozó lehetséges
indoklások lekérdezése a választólista feltöltéséhez.

**Bemenő adatok**

- ’KesesKod’ - a kliensen kiválasztott késési főkód kódja.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 425/526|


**Működés**

A szolgáltatás a kapott bemenő adattal meghívja az usp_0202_selKesesIndoklas eljárást.

A visszakapott adatokat továbbítja a hívó modulnak.

A tárolt eljárás kikeresi ’KesesIndokTorzs’ táblában azokat a rekordokat, ahol a ’kfk_kod’ =
’KesesKod’ és a ’sorszam’ szerinti növekvő sorrendben adja vissza az adatokat.

**Kimenő adatok**

- ’KesesKod’

- ’Indoklas’

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincsenek.

**Rendszerüzenetek**

Nincsenek.

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|KesesIndokTorzs|Előre definiált késésindoklások|



**Rendszerparaméterek**

Nincsenek.
##### **3.32 S_0151_31 – Munkahely szintű foglalás megszüntetése ** **(MunkahelyFoglMegszuntCommand) ** **(usp_0151_setMunkahelyFoglMegszunt) **

**Szolgáltatás feladatai**

A munkahely szintű foglalás megszüntetése és ennek a ténynek a naplózása.

**Bemenő adatok**

  - Munkahely belső azonosító (TerMunkahelyId)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 426/526|


**Működés**

A szolgáltatás szerviz rétege a bemenő paraméterben kapott adatokat kiegészíti a
bejelentkezett felhasználó azonosítójával (Pass2UserId), majd ezzel meghívja az
**usp_0151_setMunkahelyFoglMegszunt** eljárást:

  - Munkahely belső azonosító (TerMunkahelyId)

  - Bejelentkezett felhasználó azonosítója (Pass2UserId)

Az eljárás az alábbi műveleteket végzi:

  - Első lépésben ellenőrzi, hogy a bemenő paraméterben kapott munkahelyet a

bejelentkezett felhasználó foglalja-e. Az ellenőrzés technikailag a **TeruletMunkahely**
tábla alapján történik.

`o` Amennyiben igen, akkor az eljárás a **TeruletMunkahely** táblában törli a

foglalást, továbbá az **MGM_MunkahelyFoglEsem** táblában is rögzíti a
foglalás végét.

`o` Amennyiben nem, akkor az eljárás a következő figyelmeztető üzenetet adja:

„A {munkahely név} munkahelyet a {Felhasználó nev} foglalja jelenleg, ezért
foglalás megszüntetés nem történik.”

**Kimenő adatok**

  - Foglalási üzenet (FoglUzenet)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs






|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|Nem a bejelentkezett felhasználó foglalja az adott munkahelyet foglalás megszüntetéskor.|A {munkahely név} munkahelyet a {Felhasználó nev} foglalja jelenleg, ezért foglalás megszüntetés nem történik.|Tárolt eljárás|Figyelmeztető|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 427/526|


**Érintett adattáblák/kódtáblák**






|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|TeruletMunkahely|Munkahely adatok|
|MGM_MunkahelyF oglEsem|Munkahely foglalási adatok|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||


Batch modulok egyéb adatai
##### **3.33 [89001] S_0151 _3 2 – Szöveges megjegyzések lekérdezése ** **(SzovMegjegyzesekQuery) (usp_0151_selSzovMegjegyzesek) **

**Szolgáltatás feladatai**

Az adott ábrához t art ozó szöveges megjegyzések lekérdezése.

**Bemenő adatok**

  - Ábra belső azonosító (AbraId)

  - Időszak kezdete (IdoszakKezd)

  - Időszak vége (IdoszakVeg)

**Működés**

A szerviz a bemenő adatokban kapott adatokkal meghívja az
usp_0151_selSzovMegjegyzesek tárolt eljárást.

Az eljárás megkeresi a bemenő adatokban kapott ábrához rögzített, a kapott időszakot érintő,
szöveges megjegy zé seket. Ha egy szöveges megjegyzésnél az érvényesség kezdete üres,
akkor abban az es et ben hozza fel, ha az aktuális idő beleesik a lekérdezett időszakba.

A megtalált szöveg e s megjegyzések kimenő adatokban meghatározott adatait adja át a hívó
modulnak.

A szöveges megje g yzések adatait az MGM _ SzovegesMegj táblából olvassa ki.

**Kimenő adatok**

  - Szöveges megjegyzések lista

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 428/526|


`o` Szöveges megjegyzés belső azonosítója (SzovegMegjId)

`o` Szöveg típusa (SzovegTip) ( ’ f ’- figyelmeztetés, ’ i ’- információ)

`o` Érvényesség kezdete (ErvKezdet) (lehet NULL)

`o` Érvényesség vége (ErvVeg) (lehet NULL)

`o` Kezdő szolgálati hely (KezdSzhId)

`o` Távolság a kezdő szolgálati helytől (TavKezdSzhTol) (A kezdőpon t t ávo l s ág a

                           a kezdő szolgálati helytől km ben)

`o` Vég szolgálati hely (VegSzhId) (lehet NULL)

`o` Távolság a vég szolgálati helytől (TavVegSzhTol) (A végpont távo l ság a a v ég

                      szolgálati helytől km ben) (lehet NULL)

`o` Megjegyzés (Megj)

`o` Utolsó módosítás ideje (UtolsoMod)

`o` Létrehozó felhasználó azonosítója (LetrFelhAzon)

`o` Kezdőponttól a végpontig irány jelző (KezdopontVegpontIrany)

VK105780
`o` Utolsó módosító felhasználó neve (UtolsoModFelhNeve)

`o` Létrehozó felhasználó neve (LetrFelhNeve)

`o` Létrehozás ideje (LetrIdo) [ VK105780vége]

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs


|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|||||


**Érintett adattáblák/kódtáblák**




MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 429/526|


|azonosító|Col2|
|---|---|
|MGM_SzovegesMe gj|Szöveges megjegyzések|


**Rendszerparaméterek**

Nincs [89001vége]


##### **3.34 BS_0151_33 – Adminisztrációs feladat darabszámok karbantartása [88958]**

**Szolgáltatás feladatai**

A munkahely szintű adminisztrációs feladatok darabszámának karbantartása, mely db szám az
adminisztrációs fel ad atok elérhetőségét vezérli

**Bemenő adatok**

Nincs

**Működés**

A szolgáltatást eg y ü temezett sql job valósítja meg, mely naponta egyszer 04:00 - kor fut és az
**usp_0151_updMu** **nk** **ahelyAdminFeladatok** tárolt eljárást hívja meg. Az eljárás
újraszámolja a mu n kahely szintű vágányadat pótlási feladatokat, valamint a késésigazolási
feladatokat és ez alapján frissíti a TeruletMunkahely.keses _ ig és
TeruletMunkahely.v a gany _ adat mezők értékeit. Erre azért van szükség, hogy az elmaradt
pótlási feladatokat sz ámlázás után már ne jelezze a nyitott feladatként a rendszer.

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 430/526|


**Érintett adattáblák/kódtáblák**




|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|TeruletMunkahely|Munkahely adatok|


**Rendszerparaméterek**

Nincs
##### **3.35 [#89002] S_01 5 1_34 – Menetengedélyek lekérdezése (MenetengedelyekQuery)** **(usp_0151_selMenetengedelyek )**

**Szolgáltatás feladatai**

Az adott ábrához rö g zített menetengedélyek lekérdezése.

**Bemenő adatok**

  - Ábra belső azonosítója ( **AbraId** )

  - Lekérdezési időszak kezdete ( **Idos** **z** **ak** **K** **ez** **d** )

  - Lekérdezési időszak vége ( **Idosz** **akVeg** )

**Működés**

A szerviz a *Beme* *n* *ő adatok* ban kapott *Ábra belső azonosítója* ( **AbraId** ) paraméterrel
**meghívja** az **usp_** **0** **151_selMenetengedelyek** tárolt eljárást, ami lekérdezi az adott ábrához
rögzített menetengedélyeket és azok adtait.

A tárolt eljárás m eg keresi a *Bemenő adatok* ban kapott *Ábra belső azonosítója* ( **AbraId** )
paraméterhez rögz í tett és a kapott **lekérdezési időszaknak megfelelő** menetengedélyeket és a
kimenő adatokban **meghatározott adatokat adja át** a hívó modulnak.

A menetengedély ek adatait az **MGM_Menetengedely táblából** olvassa ki. **Azokat** a
menetengedélyeke t **adja vissza**, amelyeknek az **ideje beleesik** a kapott lekérdezési időszakba.

**Kimenő adatok**

Menetengedély ( **Menetengedely** ) **li** **st** **a**

  - Menetengedély belső azonosítój a ( **Menet** **eng** **I** **d** )

  - Menetengedély típusa ( **Meneten** **gT** **i** **p** ) ( ’ k ’-ki járati jelzőig, ’ b ’- bejárati jelzőig)

  - Menetengedély ideje ( **Meneten** **gI** **d** **o** )

  - MGM menetvonal belső azonosító ja ( **M** **gm** **MvI** **d** )

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 431/526|



  - Vonatszám ( **Vonatszam** )

  - Menetengedély kezdő szolgálati hel y bels ő az on osítója ( **MenetengKezdSzhId** )

  - Menetengedély vége szolgálati hel y bels ő az onosítója ( **MenetengVegeSzhId** )

  - Eltérés 101375 Menetengedély irány a jelző ( **I** **r** **an** **yJe** **lzo** )

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs





|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüzenet típusa|
|Nincs|||||


**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Menetengedely|MEFI/MERÁFI Menetengedélyek|



**Rendszerparaméterek**

Nincs
##### **3.36 [#89002] S_0151 _ 35 – Menetengedély mentése** **(MenetengedelyMentesComman d ) (u s p _0 1 51_MenetengedelyMentes) **

**Szolgáltatás feladatai**

A megadott mene t engedély adatainak mentése, törlése.

**Bemenő adatok**

  - Menetengedély belső azonosító ( **Menet** **engI** **d** )

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 432/526|



  - Menetengedély típusa ( **Meneten** **gT** **i** **p** ) ( ’ k ’-ki járati jelzőig, ’ b ’- bejárati jelzőig)

  - Menetengedély ideje ( **Meneten** **gI** **d** **o** )

  - Ábra belső azonosítója ( **AbraId** )

  - MGM menetvonal belső azonos ítója ( **Mgm** **MvId** )

  - Vonatszám ( **Vonatszam** )

  - Menetengedély kezdő szolgálati hel y bels ő az on osítója ( **MenetengKezdSzhId** )

  - Menetengedély vége szolgálati hel y bels ő az onosítója ( **MenetengVegeSzhId** )

  - Eltérés 101375 Menetengedély irány a jelző ( **I** **r** **an** **yJe** **lzo** )

**Működés**

A szerviz egy ú j menetengedély **létrehozásához** vagy egy meglévő menetengedély
**törléséhez** **megh** **ív** **ja** az **usp_0151_MenetengedelyMentes** tárolt eljárást, a *Felhasználói*
*adatok* ( **EpaiParamXmlDoc** ) paraméterrel kiegészített *Bemenő adatok* ban kapott adatokkal.

**Ellenőrzés**

A tárolt eljárás e l lenőrzi, hogy a menetengedély ábráját még mindig a szerkesztést végző

            felhasználó foglalja e. Ez egy közös eljárás, függvény ( **uf_checkMunkahelyFogl** ) hívásával
történik. Ha már n em a felhasználó foglalja az ábrát, akkor hibaüzenetet kap a felhasználó
( ’ Az ábrát már más felhasználó foglalja! ’ ).

**Létrehozás**

A kapott *Meneten* *g* *edély belső azonosító* ( **MenetengId** ) **= NULL** .

A tárolt eljárás a kapott menetengedély adatokat **elmenti** az *MGM Menetengedély*
**(MGM_Meneteng** **ed** **ely)** táblában, úgy hogy az *Utolsó módosítás ideje* ( **utolso_mod** )
mezőbe az aktuális i d őt írja.

**Törlés**

A kapott *Meneten* *g* *edély belső azonosító* ( **MenetengId** ) **NEM** **=** **NULL** .

A tárolt eljárás a kapott *Menetengedély belső azonosító* ( **MenetengId** ) alapján **törli a**
menetengedélyt az *M* *GM Menetengedély* ( **MGM_Menetengedely** ) táblában.

**Naplózás**

Az *MGM Menet* *en* *gedély* ( **MGM_Menetengedely** ) táblában létrehozott vagy törölt
menetengedély **ala** **p** **ján naplóbejegyzést készít** az *MGM objektum események napló*
( **MGM_EsemenyN** **a** **plo)** táblába.

  - Napló belső azonosító ( **mgm_ese** **m** **napl_i** **d** ) = au tomatikus

  - PASS2 felhasználó belső azonosító ( **pas** **s** **2us** **eri** **d** ) = Szerkesztő felhasználó

( **szerk_felh_azon** )

( **utolso_mod** )

  - Ábra belső azonosítója ( **abra_id** ) = Ábr a be l ső azonosítója ( **abra_id** )

  - Objektum típusa ( **objektum_tipus** ) = **1**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** Esemény időpontja ( **esem_idopont** )


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 433/526|



  - Objektum belső azonosító ( **obje** **k** **t** **u** **m** **_** **i** **d** ) = Menetengedély belső azonosító

( **meneteng_id** )

  - Művelet típusa ( **muvelet_tipus** ) = létrehoz ás kor **’** **U** **’** / törléskor **’** **T** **’**

  - Objektum adatai ( **objektum_adat** ) ( **JSO** **N** )

`o` Menetengedély típusa ( **meneteng_tipus** ) = Menetengedély típusa

( **meneteng_tipus** )
`o` Menetengedély ideje ( **meneteng_ido** ) = Menetengedély ideje ( **meneteng_ido** )
`o` MGM menetvonal belső azonosítója ( **mgm_mv_id** ) = MGM menetvonal belső

azonosítója ( **mgm_mv_id** )
`o` Vonatszám ( **vft_vn_szam** ) = Vonatszám ( **vft_vn_szam** )
`o` Menetengedély kezdő szolgálati hely belső azonosítója ( **meneteng_kezd_szh_id** ) =

Menetengedély kezdő szolgálati hely belső azonosítója ( **meneteng_kezd_szh_id** )
`o` Menetengedély vége szolgálati hely belső azonosítója ( **meneteng_vege_szh_id** ) =

Menetengedély vége szolgálati hely belső azonosítója ( **meneteng_vege_szh_id** )
`o` Eltérés 101375 Menetengedély iránya jelző (i **rany_jelzo** ) = Menetengedély iránya jelző
(i **rany_jelzo** )

#88986 **PBI átadás**

Az **MGM_Esemen** **y** **Naplo** táblába beírt rekordokról a PBI - nak történő átadáshoz a következő
módon regisztráci ó t végez a PbiReg táblába:

    - pbi_tipus: ” MGM_Naplo ”

    - pbi_query_param1: MGM_EsemenyNaplo. mgm_esemnapl_id

    - pbi_query_param2: NULL

    - pbi_kuldes_szamlalo: NULL

    - pbi _ create _ timestamp: Aktuális idő [#88986vége]

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 434/526|







|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüzenet típusa|
|Ha az ábrát már nem a felhasználó foglalja.|Az ábrát már más felhasználó foglalja!|UC_01_51_ERR_ABR AT_MAR_MAS_FEL H_FOGLALJA err_code = 151002|tárolt eljárás|hiba|
|Ha a törlendő menetengedély már nem létezik az MGM_Menetengedely táblában.|Az adatokat más felhasználó módosította!|UC_01_00_ERR_ADA TOKAT_MAS_FELH _MODOSITOTTA err_code = 100006|tárolt eljárás|hiba|


**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Menetengedely|MEFI/MERÁFI Menetengedélyek|
|MGM_EsemenyNaplo|MGM objektum események napló|
|#88986PbiReg|Regisztrációs tábla PBI-nak adatátadáshoz|



**Rendszerparaméterek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 435/526|

##### **3.37 S_0151_36 - Menetvonal adminisztratív feladat adatok rögzítése ** **(MenetvonalAdminFeladatokCommand) (usp_0202_setVonat hívás) **

**Szolgáltatás feladatai**

Az MGM felületen rögzített késésigazolási adatok és/vagy vágánypótlási adatok rögzítése,
valamint késésigazolás esetén IF10/IF24 üzenet küldés kezdeményezése a GVK/UTAS
rendszer részére.

**Bemenő adatok**

- Jelentő pont belső azonosítója (JelentoPontID)

- Jelentő pont sorszáma (JelentoPontIndex)

- Vonat belső azonosítója (VonatID)

- Aktuális esemény belső azonosítója (AktualisEsemenyID)

- Utolsó esemény belső azonosítója (UtolsoEsemenyID)

- RID jelző (RIDJel)

- Rk jelző (RkJel)

- Rögzített esemény belső azonosítója (RogzEsemId)

- Rögzített esemény vágánya (RogzEsemVaganyID)

- Rögzített esemény idő (RogzEsemDatumIdo)

- Rögzített esemény eltérése (RogzEsemElteres)

- Rögzített eseményhez tartozó igazolt késés (RogzEsemIgKeses)

- Foglalt vágány jelző (FoglaltVagany)

- Helytelen vágány jelző (HelytelenVagany)

- Más pályaudvar jelző (MasPalyaudvar)

- Más pályaudvarra indulás jelző (MasPalyaudvarKapcs)

- Más pálya jelző (MasPalya)

- Eltérő esemény ok belső azonosító (ElteroEsemOkID)

- Eltérő esemény indoklás (ElteroIndoklas)

- Készrejelentés törlés jelző (KeszreJelTorles)

- Készrejelentés törlés mód jelző (KeszreJelentTorlesMod)

- Vonatösszeállítás belső azonosító (OsszeallitasID)

- Felhasználó azonosító (FelhAzon)

- Hívási mód (HivasMod)

- Várható késés (VarhatoKeses)

- Elmaradt rész vége belső azonosító

- Utolsó módosítás időpontja (UtolsoModDatumIdo)

- Vontatójármű nélkül jelző (VJNelkul)

- Személyzet nélkül jelző (SzemNelkul)

- Késési adatok (KesesAdatok)
Elemei:

`o` KesesPerc - kötelező

`o` KesesFoKod - kötelező

`o` KesesFoKodID - kötelező
`o` KesesAlKod - ha nincs, akkor üres string, kötelező
`o` KesesAlKodID - nem kötelező

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 436/526|


`o` KesesIndoklas - nem kötelező
`o` KesesVonatOrszagID - nem kötelező
`o` KesesVonatSzam - nem kötelező

`o` KesesVonatDatum - nem kötelező

`o` KesesRdeAzon - nem kötelező

`o` KesesSorIndex - kötelező

- epai (epaiParamXmlDoc)

**Működés**

A szolgáltatás szerviz rétege a bemenő paraméterben kapott adatokkal meghívja az
**usp_0202_setVonat** eljárást. Az eljárás leírása az **[UC_02_02](https://ituzletag.mav-szk.hu/sites/IFP/_layouts/15/start.aspx#/PTB/Forms/AllItems.aspx?RootFolder=%2Fsites%2FIFP%2FPTB%2FR%C3%A9szletes%20tervez%C3%A9s%2FHaszn%C3%A1lati%20eset%2FUC%5F02%5F02%20Forgalmi%20napl%C3%B3z%C3%B3%2FLe%C3%ADr%C3%A1s&FolderCTID=0x01200096DEEEBB2109C546993053445DCB0E33&View=%7BB0C48BCF%2D82C5)** részlettervében található.

Az **usp_0202_setVonat eljárás alábbi kimenő adatai** vezérlik a szerviz további működését.

Első resultset-ből (AA_CMD küldéshez kapcsolódik):

  - Adattípus (Adattipus) –lehetséges értékei:

`o` ’U’ - csak IF24 küldés (UTAS)
`o` ’G’ - csak IF10 küldés (GVK)
`o` ’V’ - IF10 és IF24 küldés egyszerre (GVK és UTAS)
`o` NULL – nincs további szerviz művelet

     - Vonatesemény belső azonosítója (AktVonEsemID) – AA_CMD küldés esetén

Amennyiben az **az usp_0202_setVonat eljárás által visszaadott első resultset tartalmaz**
**’U’ vagy ’G’ vagy ’V’ Adattipus értéket**, akkor a szerviz AA_CMD üzenetet küld az
Adatcsere Architektúra (AA) megfelelő webszervizének (AAService). Az AA hívásban
szerepel, hogy az **IF24UTAS-KULDO** viszonylatot kívánja használni a hívó. Az AA_CMD
üzenet belsejében pedig átadja a vonatesemény belső azonosítóját (usp_0202_SetVonat
eljárás által visszaadott AktVonEsemID).

Az AA_CMD üzenet tartalma az alábbiak szerint alakul:

  - Adattipus = ’U’, akkor a feladat="SEND_IF24" – IF24 üzenet küldés az UTAS

számára

  - Adattipus = ’G’, akkor a feladat="SEND_IF10"– IF10 üzenet küldés a GVK számára

  - Adattipus = ’V’, akkor a feladat="SEND_IF10IF24" – IF24 üzenet küldés az UTAS

számára és IF10 üzenet küldés a GVK számára

pl. az AA_CMD üzenetre:

<?xml version="1.0" encoding="utf-8"?>
<AA_CMD idopont="2021-01-04T12:51:29+12:51" kuldo="IF98" feladat="SEND_IF10IF24"
xmlns="http://www.mav-szk.hu/schemes/aa_cmd/2021.01.24/1">
<Parameterek>

<Param nev="vonatEsemId" ertek="6884874"/>

</Parameterek>

</AA_CMD>

**Kimenő adatok**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 437/526|


**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincs.

**Rendszerüzenetek**

Nincsenek.

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|V_IGF|Igény fejadatok|
|T_SHF|Szolgálati hely fejadatok|
|T_SHE|Szolgálati hely elérhetőség adatok|
|P_VFT|Vonatforgalmi terv|
|V_VE|Vonatesemény|
|P_VTS|Vonatforgalom menetterv|
|Vonatosszeallitas|Vonatösszeállítás adatok|
|T_TAD|Nyári-Téli időátállás adatai|
|I_TenyVonatEsem|Ideiglenes tény vonatesemény adatok|
|I_TenyVonatEsemKesleltet|Ideiglenes vonatesemény ismételt leküldéshez kapcsolódó adatok|
|I_TenyVagany|Ideiglenes tény vágány adatok|



**Rendszerparaméterek**

Nincsenek.
##### **3.38 [89001 ] S_015 1 _37 – Szöveges megjegyzés adatainak a karbantartása ** **(SzovMegjegyzesKarbantartCommand ) ** **(usp_0151_SzovMegjegyzesKarb an tart)**

**Szolgáltatás feladatai**

A megadott szöveg es megjegyzés adatainak a karbantartása

**Bemenő adatok**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 438/526|



  - Szöveges megjegyzés belső azonosítója (S zov eg MegjId) (lehet NULL)

  - Működési mód (MukodesiMod) (’ M ’- Ment és, ’ T ’- Törlés)

  - Ábra belső azonosítója (AbraId)

  - Szöveg típusa (SzovegTip) ( ’ f ’-fi gy el m eztetés, ’ i ’- információ) (Törlés esetén lehet

NULL)

  - Érvényesség kezdete (ErvKezde t) ( lehe t NULL )

  - Érvényesség vége (ErvVeg) (leh et N UL L )

  - Kezdő szolgálati hely (KezdSzh I d) ( Tör lés esetén lehet NULL)

  - Távolság a kezdő szolgálati hel y től ( T a v K ez dSzhTol) (A kezdőpont távolsága a

kezdő szolgálati helytől km     - ben) (lehet N ULL )

  - Vég szolgálati hely (VegSzhId) ( lehe t N U L L )

  - Távolság a vég szolgálati hely től ( T a v VegS z hTol) (A végpont távolsága a vég

szolgálati helytől km     - ben) (lehet NU L L)

  - Megjegyzés (Megj) (Törlés esetén lehet N UL L )

  - VK105779 ~~Létrehozó~~ ~~felhasználó~~ ~~a~~ ~~zonosítója~~ ~~(~~ ~~L~~ ~~etr~~ ~~F~~ ~~elhAzon)~~ VK105779vége

  - Kezdőponttól a végpontig irány j elző (Kez dopontVegpontIrany)

  - VK105779 Felhasználó azonosítója ( F elh Azon) ( A létrehozást vagy a módosítást végző
felhasználó azonosítója)

  - Utolsó módosítás ideje (UtolsoMod) [VK105779vége]

**Működés**

A szerviz a szö veges megjegyzés adatainak a karbantartásához meghívja az
usp_0151_SzovMe g jegyzesKarbantart tárolt eljárást, a bemenő adatokban kapott
paraméterekkel.

Az eljárás a követ k ező ellenőrzéseket végzi:

  - Az S_0151_39 – Munkahely fog lalá s ellenőr zés (uf _ checkMunkahelyFogl), függvény

hívásával ellenőrzi, hogy a bemenő ada tok ban k apott ábrát még a szerkesztést végző
felhasználó foglalja     - e. A függvény t a bem enő adatokban kapott felhasználó
azonosítójával (epaiParamXmlDoc    - ból) és az ábra belső azonosítójával hívja meg.
Amennyiben a függvény false érték et ad v i s s za, vagyis már nem a felhasználó foglalja
az ábrát, akkor hibát ad.

  - VK105779 Ha a bemenő adatok ban a S zöv eges megjegyzés belső azonosítója
(SzovegMegjId) kitöltött és az adatbázi sban a szöveges megjegyzésnél az utolsó
módosítás ideje nagyobb, mint a be m enő ada tokban kapott, akkor hibát ad. [VK105779vége]

Ha az ellenőrzések során nem talált hibát az eljárás, akkor a bemenő adatokban kapott
Működési módtól f ü g gően a következő műveleteket végzi:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 439/526|



  - Ha a Működési mód ’ T ’- Tör lés, akk or az MGM_SzovegesMegj táblából törli a

szöveges megjegyzést.

  - Ha a Működési mód ’ M ’- Mentés :

`o` Amennyiben a bemenő adatokban a szöveges megjegyzés belső azo n o sí t ó j a

kitöltött, akkor a már meglevő szöveges megjegyzés adatait felülírja az
MGM_SzovegesMegj táblában.

VK105779 A felülírás során

         - a létrehozó felhasználót (letr_felh_azon) és a létrehozás idejét (letr_id)

nem módosítja

         - az utolsó módosító felhasználó (utolso_mod_felh) mezőbe a kapott

felhasználó azonosítóját írja

         - az utolsó módosítás idejébe (utolso_mod) az aktuális időt írja

VK105779vége

`o` Amennyiben a bemenő adatokban a szöveges megjegyzés belső azo n o sí t ó j a

üres, akkor a kapott adatokkal egy új rekordot hoz létre az
MGM_SzovegesMegj táblába.

VK105779 A létrehozás során

         - az utolsó módosító felhasználó (utolso _ mod _ felh) és a létrehozó

felhasználó (letr_felh_azon) mezőbe is a kapott felhasználó
azonosítóját írja

         - az utolsó módosítás ideje (utolso_mod) és a létrehozás ideje (letr_id)

mezőkbe is az aktuális időt írja [ VK105779vége]

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**








|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemoni k|Üzenetet előállító réteg|Hibaüzenet típusa|
|---|---|---|---|---|
|Ha az|Érvénytelen|UC_01_51_ ERR_ERVE|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 440/526|





|uf_checkMunkahel yFogl függvény false értéket ad vissza, vagyis már nem a szerkesztést végző felhasználó foglalja az ábrát|munkahely foglalás, az adatok mentése sikertelen!|NYTELEN_ FOGLALA S|Col4|Col5|
|---|---|---|---|---|
|VK105779 Ha a bemenő adatokban a Szöveges megjegyzés belső azonosítója (SzovegMegjId) kitöltött és az adatbázisban a szöveges megjegyzésnél az utolsó módosítás ideje nagyobb, mint a bemenő adatokban kapott|Az adatokat más felhasználó módosította!|UC_01_00_ ERR_ADA TOKAT_M AS_FELH_ MODOSIT OTTA|Tárolt eljárás|Hiba|


**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_SzovegesMe gj|Szöveges megjegyzések|

##### **3.39 [88961 ] S_01 5 1_38 - MenetvForgSzabFoglalasCommand (menetvonalak ** **forgalomszabályozásra l ef o g lal á sa ;** **core.usp_0151_setMenetvForgSzabFoglalas) **

**Szolgáltatás feladatai**

Forgalomszabályo zá si művelet által érintett menetvonalak használhatóságának ellenőrzése,
szerkesztésre lefog l alása, a lefoglalás megszűntetése.

A szolgáltatás a g rafikonon egy vagy több menetvonal szerkesztésre lefoglalásakor, a
szerkesztés befeje zés ekor (mentéssel vagy anélkül), szolgálat befejezésekor kerül meghívásra.

A szolgáltat á s a kapott bemenő adatokkal meghívja a
core.usp_0151_se t MenetvForgSzabFoglalas tárolt eljárást. Az eljárásnak kimenő adatai
nincsenek.

**Bemenő adatok**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 441/526|



- **’** **MenetvonalI** **dL** **ista** **’** - a lefoglalni kívánt menetvonalak ’ MGMMenetvId ’ adatai
összefűzve, pontosvesszővel elválasztva.

- ’ TerMunkahe l y I d ’

- ’ AbraId ’

- ’ FoglalasJelzo ’
Lehetséges értékei:
`o` „F ”  - foglalás,
`o` „E ”  - foglalás elengedése,
`o` „A ”  - foglalás átvétele.

- ’ ModositasOk ’

- ’ epaiParamXm l Doc ’

**Működés**

- Ellenőrzi, hog y a felhasználó szerkesztheti - e az ábrát, azaz még foglalja a munkahelyet.
Ehhez meghívja dbo.uf_checkMunkahelyFogl függvényt a ’ FelhAzon ’ és ’ AbraId ’
adatokkal.
Ha a függvény által visszaadott ’ foglal_jelzo ’ = ' False ’, akkor
’ UC_01_51_ERR_ERVENYTELEN_FOGLALAS ’ hibaüzenetet ad vissza.

forgalomszabályozásra **lefoglalva** : ’ MGM _ Menetvonal.ter_munkahely _ id ’ = NULL vagy

’ ’
TerMunkahelyId .

                                                    üzenetet ad vissza: UC_01_51_CONF_MENETV_FOGLALT „151004 A {0}
menetvonalat {1} munkahelyen {2} óta szerkesztik! Felülírja a menetvonal
foglalását? ”, ahol:

      - {1} = a menetvonalat szerkesztésre lefoglaló munkahely megnevezése
( ’ TeruletMunkahely.munkahely ’ MGM _ Menetvonal.ter_munkahely _ nev ’_ ).id ’ 
      - {2} = a menetvonal szerkesztésre lefoglalás ideje ( *’* *MGM* *_* *Menetvonal.szerk* *_* *ido* *’* ) .
`o` Ha a kapott menetvonallistából egynél több lefoglalt, akkor
**UC_01_51_ERR_TOBB_MENETVONAL_FOGLALT** **hibaüzenetet** ad vissza.
96733 vége

`o` Ha a feltétel **teljesül**, akkor a menetvonalhoz az
’ MGM _ Menetvonal.ter_munkahely _ id ’ adatelembe **bejegyzésre** kerül a
**’** mint a szerkesztés kezdete. **TerMunkahelyId** **’** adat **ÉS** az ’ MGM _ Menetvonal.szerk_kezd _ ido ’ = **rendszeridő**,

- Ha a **’** **Foglala** **sJ** **elzo** **’** = „ **A** ”, akkor az érintett menetvonalaknál a foglalásokat **felülírja** a
kapott bemenő adatokkal ( ’ MGM _ Menetvonal.ter_munkahely _ id ’ = **’** **TerMunkahelyId** **’**
**ÉS** az ’ MGM _ Menetvonal.szerk _ kezd_ido ’ = **rendszeridő** ).

- 88995 **Ha** **’** **Fog** **l** **a** **l** **asJelzo** **’** = **„F** **”** vagy „ **A** ” és a menetvonal **pulzáltatásban** érintett, azaz a
menetvonal azonosító ( ’ MGM_PulzaloMenetvonal ’ mgm ’ táblában _ mv _ id ’ ) az ábra azonosítójával ( **ÉS** **nincs** tudomásul véve ( ’’ abratudomasul_vetel_ido _ id ’ ) **szerepel** az ’
= NULL) **ÉS** **nem** törölt ( ’ torles_ido ’ = NULL), akkor kitölti a tudomásul vétel idejét a
rendszeridővel, ezzel megszűntetve a pulzáltatást.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** a

**törölt:** **n**

**törölt:** feltétel **nem teljesül**

**törölt:** első olyan

**törölt:** ja


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 442/526|



- Ha a **’** **Fogla** **la** **sJelzo** **’** = „ **E** ”, akkor **leellenőrzi**, hogy a menetvonal az adott
munkaállomás által van lefoglalva: ’ MGM_Menetvonal.ter_munkahely_id ’ =

’ ’
TerMunkahelyId .
`o` Ha **igen**, akkor **törli** a forgalomszabályozásra lefoglalást:
’’ MGMMGM __ Menetvonal.ter_munkahelyMenetvonal.szerk _ kezd_ido _' id = NULL. ’ = NULL **ÉS**
`o` Ha nem, akkor a forgalomszabályozásra lefoglalás törlése **nem** történik meg, erre
**üzenetet** **nem** ad.

**Kimenő adatok**

Nincsenek.

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincs.






|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|HA egy menetvonalnál az ’MGM_Menetvonal.munka hely_id’ <> NULL|UC_01_51_CONF_MENETV_FOG LALT „151004 - A {0} menetvonalat {1} munkahelyen {2} óta szerkesztik! Felülírja a menetvonal foglalását?”|tárolt eljárás|megerősítő üzenet|
|dbo.uf_checkMunkahelyFo gl függvény által visszaadott ’foglal_jelzo’ = 'False’|’UC_01_51_ERR_ERVENYTELEN _FOGLALAS’|tárolt eljárás|hibaüzenetet|
|96733 Ha a kapott menetvonallistából egynél több az ’MGM_Menetvonal.munka hely_id’ <> NULL|UC_01_51_ERR_TOBB_MENETV ONAL_FOGLALT|tárolt eljárás|hibaüzenet|


**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Menetvonal|MGM menetvonal adatok|
|||



MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 443/526|


**Rendszerparaméterek**

Nincsenek.
##### **3.40 S_0151_39 – Munkahely foglalás ellenőrzés (uf_checkMunkahelyFogl) [#90436]**

**Szolgáltatás feladatai**

A függvény feladat a, hogy a munkahely foglalását ellenőrizze.

**Bemenő adatok**

  - Bejelentkezett felhasználó azonosítója ( Pas s2Us erId)

  - Ábra belső azonosító (AbraId)

**Működés**

Az adatbázis uf_ch e ckMunkahelyFogl függvény ellenőrzi, hogy a bemenő paraméterben
kapott felhasználó f o glalja - e jelenleg is a kapott ábrához tartozó munkahelyet:

  - Amennyiben ő foglalja, akkor Tr ue k i m enő é r ték et ad

  - Amennyiben nem ő foglalja, akk or F alse k i m enő értéket ad

**Kimenő adatok**

  - Foglalás jelző (True/False)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**




|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|TeruletMunkahely|Munkahely adatok|
|MGM_Abra|Ábra adatok|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 444/526|


**Rendszerparaméterek**

Nincs
##### **3.41 [88998] S_015 1 _40 – Teljesítménycsökkenés szerkesztéséhez adatok lekérdezése** **(TeljesitmenycsokkQuery) szolgáltatás (usp_0151_selTeljesitme n y c so k k)**

**Szolgáltatás feladatai**

Teljesítménycsökk en és rögzítéséhez, módosításához adatok lekérdezése

**Bemenő adatok**

- Menetvonal Id (M enetvId)

**Működés**

A szerviz a teljesítménycsökkenés rögzítéséhez, módosításához szükséges adatok
lekérdezéséhez, m eg hívja az usp _ 0151 _ selTeljesitmenycsokk tárolt eljárást, a bemenő
adatokban kapott p ar améterekkel.
Az eljárás megker esi a bemenő adatokban kapott menetvonal aktuális (rendszeridő szerint
közlekedő, ha nincs közlekedő, akkor az első előrejelzéssel rendelkező) vonatának aktuális
vonatösszeállítását . E lőször a vonat aktuális (utolsó tény esemény, ha nincs akkor az első
MÁV szolgálati h el yén) helyén Készrejelentett [VK105970 ] vagy Befejezett [VK105970vége] állapotú
vonatösszeállítást k eres. Ha ilyen állapotút nem talál, akkor Előzetesen készrejelentett [VK105970 ]
vagy Előzetesen b ef ejezett állapotú [VK105970vége] vonatösszeállítást keres.
Ha az eljárás nem t al ál megfelelő állapotú vonatösszeállítást, akkor hibaüzenetet ad.
Ha az eljárás talál me gfelelő vonatösszeállítást, akkor a vonatösszeállításban szereplő
vontatójárműveket és a kimenő adatoknál meghatározott adatokat adja át a kliens
programnak.
Amennyiben az éri n tett vontatójárművekhez az adott menetvonalnál már rögzítettek
teljesítménycsökken é st (mgm _ korl _ fajta =’ 1 ’ ), akkor azoknak az adatait is visszaadja az
eljárás az MGM _ K o rlatozasok táblából

**Kimenő adatok**

  - Megrendelés azonosító (Igénylés éve+’ / ’+i k tató szám+ ’ / ’ +verziószám) (MegrAzon)

(V _ IGF táblából)

  - Megrendelő VV rövid neve (Me g r ende lo) ( T _ VVUJ táblából)

  - Vonatazonosító (Vonatszám+ ’ / ’+v onat indulási dátuma (éééé.hh.nn)) (VonatAzon)

(Az aktuális vonat azonosítója a P _ V F T táblából )

  - Vonatforgalmi terv id (VftId) (A z ak tuáli s v onat belső azonosítója a P _ VFT táblából)

  - Vonatösszeállítás kezdő szolgálati hel y éne k teljes neve (VoKezdSzhNev)(T_SHJ

táblából)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 445/526|



  - Vonatösszeállítás kezdő szolgálati hel yének sorszáma a vonatforgalmi tervben

(VoKezdVftSzhIndex)(Vonatosszea llitas táblából)

  - Vonatösszeállítás vég szolgál ati hel yének teljes neve (VoVegSzhNev)(T_SHJ

táblából)

  - Vonatösszeállítás vég szolgá l ati hel y éne k sorszáma a vonatforgalmi tervben

(VoVegVftSzhIndex) (Vonatosszeallitas táblából)

  - Vontatójárművek lista

`o` Járműazonosító (xx xx xxxx xxx     - x) ( Jar muAzon)(T _ VOJ táblából)
`o` Jármű belső azonosító (JarmuId ) (VonatosszeallitasJarmu táblából)

`o` Teljesítménycsökkenés bel ső azonosítója (MgmKorlId)
(MGM_Korlatozasok.mgm_korl_id) (lehet NULL is)

`o` Csökkentett teljesítmény mértéke ( M GM_Korlatozasok.mertek) (Mertek)

`o` Csökkentett teljesítmény k ez dő szolgálati helyének rövid neve
(TCsKezdSzhRovidNev) (T _ SHJ táblából)

`o` Csökkentett teljesítmény kez dő s zolgálati helyének belső azonosítója

(TCsKezdSzhId) (MGM_Korlatozasok.kezd_szh_id)

`o` Csökkentett teljesítmény kezdő szol gálati helyéhez tartozó vonatforgalmi terv

id (TCsKezdVftId) (MGM_Korlatozasok.kezd_vft_id)

`o` Csökkentett teljesítmény kezdő s zol gálat i helyének sorszáma a vonatforgalmi

tervben (TCsKezdVftSzhIndex) (MGM_Korlatozasok.kezd_vft_szh_index)

`o` Csökkentett teljesítmény v ég s z olgálati helyének rövid neve
(TCsVegSzhRovidNev) (T _ SHJ táblából)

`o` Csökkentett teljesítmény vég szol gálati helyének belső azonosítója
(TCsVegSzhId) (MGM_Korlatozasok.veg_szh_id)

`o` Csökkentett teljesítmény vég sz olg álati helyéhez tartozó vonatforgalmi terv id

(TCsVegVftId) (MGM_Korlatozasok.veg_vft_id)

`o` Csökkentett teljesítmény vég szol g ál ati helyének sorszáma a vonatforgalmi

tervben (TCsVegVftSzhIndex) (MGM_Korlatozasok.veg_vft_szh_index)

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincsenek.

**Rendszerüzenetek**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 446/526|







|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüzenet típusa|
|---|---|---|---|---|
|Ha nincs megfelelő vonatösszeállítás a menetvonalhoz|VK105970 Nincs készrejelentett vonat-összeállítás a vonathoz! Nincs megfelelő vonat- összeállítás a vonathoz! VK105970vége|UC_01_51_ERR_NINCS_VON TATOJARMU_VONATBAN|Tárolt eljárás|Hiba|


**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Menetvonal|Menetvonalak MGM alapadatai|
|MenetvVonOsszeallitas|Menetvonalak vonatösszeállításai|
|Vonatosszeallitas|Vonatöszzeállítások|
|VonatosszeallitasJarmu|Vonatösszeállítások járművei|
|V_IGF|Igénylés fejadatok|
|P_VFT|Vonatforgalmi terv (napi menetrend) alap adatai.|
|T_VOJ|Vontatójárművek|
|MGM_Korlatozasok|MGM Korlátozások|
|T_VVUJ|Vasútvállalatok jellemző adatai|
|T_SHJ|Szolgálati helyek jellemző adatai|



**Rendszerparaméterek**

Nincsenek.
##### **3.42 S_0151_41 – Egyéb sebességkorlátozások lekérdezése ** **(EgyebSebKorlQuery) szolgáltatás (usp_0151_selEgyebSebKo r l ) **

**Szolgáltatás feladatai**

Az adott menetvon al hoz rögzített egyéb sebességkorlátozások lekérdezése

**Bemenő adatok**

- Menetvonal Id (M enetvId)

**Működés**

A szerviz a menet v o n alhoz rögzített egyéb sebességkorlátozások lekérdezéséhez meghívja az
usp_0151_selEgy eb SebKorl tárolt eljárást, a bemenő adatokban kapott paraméterekkel.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 447/526|


Az eljárás a bemen ő adatokban kapott menetvonalhoz rögzített, egyéb sebességkorlátozásokat
keresi meg az MGM _ Korlatozasok táblából. A menetvonalnak és a megtalált korlátozásoknak
a kimenő adatokb an meghatározott adatait adja át.

**Kimenő adatok**

  - Megrendelés azonosító (Igénylés éve+’ / ’+i k tató szám+ ’ / ’ +verziószám) (MegrAzon)

(V _ IGF táblából)

  - Megrendelő VV rövid neve (Meg r ende lo) ( T _ VVUJ táblából)

  - Egyéb sebességkorlátozások list a ( Lehet ür e s i s)

`o` Egyéb sebességkorlátozás bel ső azonosítója (MgmKorlId)
(MGM_Korlatozasok.mgm_korl_id)

`o` Korlátozás mértéke (MGM _ Korlatozasok.mertek) (Mertek)

`o` Korlátozás kezdő szolgálati heltáblából) y éne k r öv id neve (KezdSzhRovidNev) (T _ SHJ

`o` Korlátozás kezdő szolgálati hel y ének belső azonosítója (KezdSzhId)

(MGM_Korlatozasok.kezd_szh_id)

`o` Korlátozás kezdő szolgálati hel y éhe z tartozó vonatforgalmi terv id

(KezdVftId) (MGM_Korlatozasok.kezd_vft_id)

`o` Korlátozás kezdő szolgálati hel y ének sorszáma a vonatforgalmi tervben

(KezdVftSzhIndex) (MGM_Korlatozasok.kezd_vft_szh_index)

`o` Korlátozás vég szolgálati helytáblából) ének r övid neve (VegSzhRovidNev) (T _ SHJ

`o` Korlátozás vég szolgálati hel y ének belső azonosítója (VegSzhId)
(MGM_Korlatozasok.veg_szh_id)

`o` Korlátozás vég szolgálati helyé hez tar tozó vonatforgalmi terv id (VegVftId)

(MGM_Korlatozasok.veg_vft_id)

`o` Korlátozás vég szolgálati he l y ének sorszáma a vonatforgalmi tervben

(VegVftSzhIndex) (MGM_Korlatozasok.veg_vft_szh_index)

`o` Megjegyzés (Megjegyzes) (MG M_K or la tozasok.megjegyzes)

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincsenek.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 448/526|


**Rendszerüzenetek**




|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüzenet típusa|
|---|---|---|---|---|
||||||


**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Menetvonal|Menetvonalak MGM alapadatai|
|V_IGF|Igénylés fejadatok|
|MGM_Korlatozasok|MGM Korlátozások|
|T_VVUJ|Vasútvállalatok jellemző adatai|
|T_SHJ|Szolgálati helyek jellemző adatai|



**Rendszerparaméterek**

Nincsenek.

88998vége
##### **3.43 [88961] S_0151_42 - Forgalom szabályozási műveletek mentésének előkészítése ** **egy menetvonal esetén (ForgSzabMuveletElokeszitesCommand) ** **(core.usp_0151_updForgalomSzabMuveletek) szolgáltatás **

**Szolgáltatás feladatai**

A szolgáltatás a klienstől kapott bemenő adatokkal meghívott
core.usp_0151_updForgalomSzabMuveletek eljárással végzi el az **egy menetvonalat** érintő
forgalomszabályozási műveletek végrehajtási feltételeinek ellenőrzését és a szükséges
előkészítő adatok mentését.

Az eljárás a sikeres **ellenőrzések** után meghívja az előrejelzés létrehozását, módosítását és
törlését végző usp_0202_updMenetvElorejelzes2 és a menetvonal feloldását végző
core.usp_0151_setMenetvForgSzabFoglalas **tárolteljárást** .

A szolgáltatásnak kimenő adatai nincsenek, esetlegesen üzenetek ad vissza.

**Bemenő adatok**

- **’MenetvId’** - a módosítandó előrejelzés menetvonal MGM azonosítója.

- **’AbraId’** - az érintett ábra azonosítója.

- **’MunkahelyId’** - az ábra munkahelyazonosítója.

- **’Megerositve’** - az esetleges megerősítés ténye (TRUE/FALSE).

- **[{Esemény lista}]** - Az irányító által módosított események listája. Csak a módosítandó
adatokat tartalmazza, módosítási okonként változó adatokkal, vesszővel elválasztva.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 449/526|


`o` **’SzhId’** (’szh_id’) - annak a szolgálati helynek a belső azonosítója, amelytől az
előrejelzést létre kell hozni, vagy módosítani kell. Minden esetben kötelező
`o` **’SzhIndex’**  - a módosítandó esemény szolgálati helyének érintési sorszáma. ’ModOk’ = 1 esetén nem kerül átadásra.
`o` **’ModOk’** (’mod_ok’) - a módosítás oka.
(Lehetséges értékei

      1 - Kiindulási állomási új előrejelzés létrehozás.

      2 - Közbenső állomási előrejelzés létrehozás.

      3 - előrejelzés módosítása.
      - 4 - rendkívüli áthaladás.

      5 - rendkívüli megállás.
      - 6 - tartózkodási idő módosítás.
      - #88981 11 – Irányítói feltartóztatás szolgálati helyen
      - #88981 12 – Irányítói feltartóztatás szolgálati hely előtt
      - 93048 13       - Helyes/helytelen vágányon közlekedés
`o` **’MgmEsemTipId’**  - annak a menetrendi eseménynek az MGM típus azonosítója,
amelytől az új előrejelzést létre kell hozni.
`o` **’UjEsemIdo’** (’uj_esem_ido’) - lehet NULL is, de 1 és 2 esetén kötelező.
`o` 93048 **’** **MGMHelytVaganyraInd** **’**  - a menetvonal helytelen vágányra indul.
**Lehetséges** értékei:
      - NULL       - Nem történt változás.

      - 0       - Helyes vágányra indulás.
      - 1       - Helytelen vágányra indulás.
      - 3       - Harmadik vágányra indulás.
`o` **’** **SzhIdIg** **’**  - a helyes/helytelen vágányon közlekedés vége szolgálati hely azonosítója.
Lehet NULL is.
`o` **’** **SzhIndexIg** **’**  - a helyes/helytelen vágányon közlekedés vége szolgálati hely vft  - n
belüli sorszáma. Lehet NULL is. [93048 vége]

- epaiParamXmlDoc

**munkahely** a felhasználó által van lefoglalva.
`o` **Bemenő** adatok:

      - **’Pass2UserId’**

      - **’AbraId’**
`o` Ha a függvény **’FALSE’** értéket ad vissza, akkor az eljárás a kliensnek
UC_01_51_ERR_ERVENYTELEN_FOGLALAS „151005: Érvénytelen munkahely
foglalás, az adatok mentése sikertelen!” **üzenetet** ad vissza, nem történik meg a
létrehozás.

- **Ellenőrzi**, hogy a vonatnak **van-e** az adott szolgálati helyre előrejelzett é rkezési vagy

*’esem_id’ = 1, 2 vagy 6*  *’esem_tipus’ =* *„* *B”).*
100977 Ha az adott ’ szh _ index ’ alapján az ’ erk _ jelzo ’ = „E ”, akkor az előző olyan
rekordnál ellenőrzi, ahol Ha az ’ ind _ jelzo ’ = „K ”, akkor a következő olyan rekordnál ellenőrzi, ahol ’ mgm _ mv _ id ’ és az ’ szh _ id ’ azonos ÉS ’ szh _ index ’ = ’ szh ’ mgm _ index _ mv ’_- id 1. ’
és az ’ szh _ id ’ azonos ÉS ’ szh _ index ’ = ’ szh _ index ’ + 1. [100977 vége]

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** **Az eljárás**

**törölt:** **m**

**törölt:** **e**

**törölt:** rögzítve **tény**

**törölt:** *MGM_TenyEsem*

**törölt:** *<>*


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 450/526|



- 100907 **Ellenőrzi**, hogy a kapott új esemény idő és az esetlegesen korábbi eseményhez
rögzített tényadat miatt újra számolt előrejelzett eseményidő közötti eltérés nem nagyobb,
mint a **’** **forg** **_** **szab** **_** **kuszob** **’** **rendszerparaméter** értéke:
`o` A kapott eredeti esemény idő és az aktuális előrejelzett esemény idő különbsége, ha
nem 0, akkor abszolút étékben megvizsgálja, hogy az eltérésük határozottan
nagyobb    - e, mint a rendszerparaméter értéke. Ha igen, akkor
’ UC_01_51_ERR_FSZ_KUSZOBERT ’ hibát ad.
`o` Ha nem, akkor az új esemény időhöz hozzáadja az eredeti esemény idő és az aktuális
előrejelzett esemény idő különbségét és azzal korrigálja (előjel helyesen) a kapott új
eseményidőt. [100907 vége]

- Ellenőrzések, módosítások (műveletenként)

`o` **Új előrejelzés létrehozása kiindulási állomáson** (’ModOk’ = 1)
      - **Nem** lehet már létező **tény/előrejelzés** adata.
(Nem létezik a menetvonal az ’MGM_TenyEsem’ táblában, vagy ha létezik,
akkor minden rekordjánál az ’esem_tipus’ = NULL.)
Ha a feltétel nem teljesül: UC_01_51_ERR_ELOREJELZE_LETEZIK
„151019: Előrejelzés nem hozható létre, már létezik.” **üzenetet** ad vissza.
      - 100569 Az új indulási idő **nem** lehet a **múltban** .
Ha az, akkor **hibaüzenetet** ad: UC_01_51_ERR_KORAI_ESEM_IDO „151023:
A tervezett eseményidő nem lehet a rendszeridőnél korábbi!” *(Jelenleg a kliens*
*ellenőrzi, az eljárás ilyet nem ad vissza.)*
      - 100569 Az új indulási idő **nem** lehet a 12 órával későbbi.
Ha az, akkor **hibaüzenetet** ad: UC_01_51_ERR_KESON_INDULO_VONAT
„151036: A vonat várható indulási ideje későbbi, mint a grafikonon kezelt
időszak vége!” *(Jelenleg a kliens ellenőrzi, az eljárás ilyet nem ad vissza.)*
      - Az **új** indulási idő nem lehet **korábbi**, mint a **menetrendszerinti** indulás idő
mínusz a **legkorábbi indulási idő** paraméter (’min_ind_esem_ido’).
Ha az, akkor **hibaüzenetet** ad: ERR_02_17_VONAT_HIBA_IDOBEN
„217006: A vonat indulási ideje nem megfelelő!”
      - A tervezett indulási idő nem lehet **későbbi**, mint a **menetrendszerinti** indulási
idő plusz belföldről induló menetvonal esetén az **’aut_lem** _ **belf’**, illetve
külföldről induló vonatnál az **’aut_lem_nemz’** rendszerparaméter.
Ha az, akkor **hibaüzenetet** ad: ERR_02_17_VONAT_HIBA_IDOBEN
„217006: A vonat indulási ideje nem megfelelő!”
      - Ha a menetvonal „A” vagy „B” **kategóriába** esik **ÉS** a **’Megerositve’** =
**FALSE**, akkor a tervezett indulási idő nem lehet a **menetrend szerinti** indulási
időnél korábbi.

Ha az, akkor **üzenetet** ad: UC_01_51_CONF_SZEM_VON_KORAI_IND
„151020: Személyszállító vonat, a menetrendszerinti idő előtti indulást tervez?”.

      Nincs core.usp_0151_setMenetvForgSzabFoglalas eljárás hívás, a menetvonal
nem lett lefoglalva.
      - S ikeres **ellenőrzések** után a kapott szolgálati helyhez bejegyzi az új indulási időt
a ’VonatElorejelzes’ táblában.
      - 93048 tábla Ha a ’ szh _ id ’ MGMHelytVaganyraInd ’ rekord ’ helyt_vagany_ind ’ <> NULL, akkor azt bejegyzi a ’ adatelemébe ÉS ’ P _ VTS ’

      - Ha az ’ SzhIdIg ’ = NULL, akkor a következő állomástípusú szolgálati hely
’ helyt_vagany_erk ’ adatelemébe is.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** van


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 451/526|


    - Ha az ’ SzhIdIg ’ <> NULL, akkor a kapott ’ SzhIdIg ’ és ’ SzhIndexIg ’ szolgálati
helyig, a ’ helyt_vagany_ind ’ és ’ helyt_vagany_erk ’ adatelemekbe.

`o` **Új előrejelzés létrehozása közbenső állomáson** (’ModOk’ = 2)
    - 100569 Az új indulási idő **nem** lehet a **múltban** .
Ha az, akkor **hibaüzenetet** ad: UC_01_51_ERR_KORAI_ESEM_IDO „151023:
A tervezett eseményidő nem lehet a rendszeridőnél korábbi!”
    - 100569 Az új indulási idő **nem** lehet a 12 órával későbbi.
Ha az, akkor **hibaüzenetet** ad: UC_01_51_ERR_KESON_INDULO_VONAT
„151036: A {0} vonat várható indulási ideje {1} későbbi, mint a grafikonon
kezelt időszak vége.!”
    - Az érintett szolgálati helyre **van** tény **érkezési** eseménye **ÉS** nincs tény
(elmaradt/busz és RFO is beleértve) **indulási** eseménye.
Ha a feltétel nem teljesül, akkor **üzenetet** ad:
’ERR_01_51_UJELOREJELZES_TARTOZKODASI_HIBA’ „151021: A vonat
nem a szolgálati helyen tartózkodik, új előrejelzés nem hozható létre!”
    - Ha **előrejelzett** **érkezési** eseménye van **ÉS** nincs előrejelzett **indulási** eseménye.
’ERR_01_51_UJELOREJELZES_TARTOZKODASI_HIBA’ „151021: A vonat
nem a szolgálati helyen tartózkodik, új előrejelzés nem hozható létre!” üzenetet
ad.
(Ez akkor fordulhat elő, ha időközben törölték a szolgálati helyre rögzített
érkezési eseményt.)

    Ha a menetvonal MÁV - GySEV - MÁV útvonalon közlekedik és a kijelölt
menetvonalrész a GySEV-ről lép vissza, akkor ellenőrzi, hogy a menetvonal
kilépett-e a GySEV-re. Ehhez meghívja az uf_checkVonatGysevTrazit
függvényt.
Ha a **függvény** **FALSE** értéket ad vissza, akkor ’ERR_01_51_
UJELOREJELZES_GYSEV_HIBA’ „151022: A vonat még nem lépett ki a
GySEV-re, új előrejelzés nem hozható létre!” **üzenetet** ad.

„217006: A vonat indulási ideje nem megfelelő!”
    - Ha a menetvonal „A” vagy „B” **kategóriába** esik **ÉS** a ’megerositve’ = **FALSE**,
akkor a **tervezett** indulási idő **nem** lehet a **menetrend szerinti** indulási időnél

**korábbi** .

Ha az, akkor UC_01_51_CONF_SZEM_VON_KORAI_IND „151020:
Személyszállító vonat, a menetrendszerinti idő előtti indulást tervez?”
**megerősítő** **üzenet** ad.
    - **Nincs** core.usp_0151_setMenetvForgSzabFoglalas eljárás hívás, a menetvonal
nem lett **lefoglalva** .
    - Sikeres **ellenőrzések** után a kapott szolgálati helyhez bejegyzi az új indulási időt
a ’VonatElorejelzes’ táblában.
    - 93048 Ha a ’ MGMHelytVaganyraInd ’ <> NULL, akkor azt bejegyzi a ’ P _ VTS ’
tábla ’ szh _ id ’ rekord ’ helyt_vagany_ind ’ adatelemébe ÉS

     - Ha az ’ SzhIdIg ’ = NULL, akkor a következő állomástípusú szolgálati hely
’ helyt_vagany_erk ’ adatelemébe is.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 452/526|



     - Ha az ’ SzhIdIg ’ <> NULL, akkor a kapott ’ SzhIdIg ’ és ’ SzhInd ex Ig ’
szolgálati helyig, a ’ helyt_vagany_ind ’ és ’ helyt_vagany _er k ’
adatelemekbe. [93048 vége]

    - 93719 ” ”
Nem személyszállító vonat (a menetvonal „A vagy „B **kategóriába** esik)

                                  esetén az előrejelzés csak a következő vonat összeállítás közlési ponttig készül
(a ’ VonatElorejelzes.elore_veg_jelzo ’ = 2).
(A módosítás oka *(’modosit_ok_kod’)* a törlésig megmarad az adatbázisban 1, vagy 2.
Előrejelzés módosítás rögzítésekor csak az idő fog változni. Erre azért van szükség,
hogy lehessen törölni az új előrejelzést.)

`o` **Előrejelzés módosítása** (’ModOk’ = 3)
    - **Megállapítja** az esemény „ **eltérését** ”, amivel korrigálni kell az adott és a
későbbi eseményeket *(’elteres_perc’ = ’uj_esem_ido’ - eredeti eseményidő)* .
    - Ha az **’MgmEsemTipId’** = 1 - **érkezés** akkor **módosítja** az adott szolgálati hely
és az előző szolgálati hely közötti **menetidő** *(’VonatElorejelzes.menetido_perc’)* és
az **érkezési idő** *(’VonatElorejelzes.erk_ido’)* értékét az „eltérés” *(’elteres_perc’)*
értékével.

    - Ha az **’MgmEsemTipId’** = 2 - **indulás**, akkor:

     - **Módosítja** az adott szolgálati hely **tartózkodási** idejét
*(’VonatElorejelzes.* ***tartozkodas_perc’)*** **ÉS** az **indulási** idő
*(’VonatElorejelzes.ind_ido’)* értékét az ’elteres_perc’ értékével.

     - **Beírja** a várható indulási idő *(’VonatElorejelzes.varhato_ind_ido’* *=*
*’UjEsemIdo’)* értékét.
    - Ha az **’MgmEsemTipId’** = 6 - **áthaladás**, akkor **módosítja** az adott szolgálati
hely és az előző szolgálati hely közötti **menetidő**
*(’VonatElorejelzes.menetido_perc’)* és az **indulási idő** *(’VonatElorejelzes.ind_ido’)*
adatelemek értékét az „eltérés” *(’elteres_perc’)* értékével.
    - A MGM **tényesemény** táblába bejegyzi a módosítás **okát**
*(’MGM_TenyEsem.fsz_mod_ok’ = ’ModOk’)* az adott eseményhez, ha az **nem új**
előrejelzés létrehozás volt *(’MGM_TenyEsem.fsz_mod_ok’ <> 1 VAGY 2, ezeket nem*
*írja felül)* .
    - Az érkezési és az indulási idők különbségének megfelelően a **’jeloles’** értékét 0
(nulla perc tartózkodás) törli (NULL), vagy beállítja.

    A később hívásra kerülő usp_0202_ **updMenetvElorejelzes2** eljárás az itt
rögzített adatok alapján a kapott szolgálati helytől és eseménytől kezdve
módosítja a **további** eseményidőket a **következő** olyan rekordig, ahol:

     - Az előrejelzés vége jelző be van állítva *(’elore_veg_jelzo’ <> NULL)* .

     - Az új indulási későbbi lesz, mint az irányító álta korábban megadott indulási
idő *(’MGM_TenyEsem.fsz_mod_ok’ <> NULL* ***ÉS*** *az ’ind_ido’ < (’ind_ido’ +*
*’elteres_perc’))* .

     - A forgalomszabályozási műveletet időadat módosítás értékre állítja
*(’MGM_TenyEsem.fsz_mod_ok’ = 3)* .

     - Ha az ’ SzhIdIg ’ = NULL, akkor a következő állomástípusú szolgálati hely
’ helyt_vagany_erk ’ adatelemébe is.

     - Ha az ’ SzhIdIg ’ <> NULL, akkor a kapott ’ SzhIdIg ’ és ’ SzhIndexIg ’
szolgálati helyig, a ’ helyt_vagany_ind ’ és ’ helyt_vagany _er k ’
adatelemekbe.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** <#>¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 453/526|


`o` **Rendkívüli áthaladás** rögzítése (’ModOk’ = 4)
    - **Ellenőrzi**, hogy a vonatnak van-e az adott szolgálati helyre rögzítve előrejelzett
érkezési vagy áthaladási eseménye *(’MGM_TenyEsem’*  *’mgm_mv_id’*  *’szh_id’*
 *’esem_id’ = 1, 2 vagy 6*  *’esem_tipus’* *= „* *B”).*

    - **Módosítja** a **’VonatElorejelzes** táblában az adatokat:

     - Az előző állomáshoz bejegyzi az új **menetidőt** (kapott új indulási idő –
indulási idővel korrigálva).

     - **Törli** az **érkezési** időt *(’erk_do’)*, az érkezési idő „forrását” *(’erk_jelzo’)* és a
tartózkodási időt *(’tartozkodas_perc’)* .

     - Az **indulási** időt *(’ind_ido’)* a kapott új indulási időre *(’uj_esem_ido’)*
**módosítja** .

     - **Módosítja** és a **megállás** célját *(’magall_jelzo’)*
 1 - kereskedelmi megállást  4 - „irányítói áthaladás kereskedelmi

megállás helyett”,
 0 - forgalmi megállást  3- „irányítói áthaladás forgalmi megállás

helyett” értékre.
    - **Módosítja** a **’P_VTS’** tábla adatait:

     - **Törli** az **érkezési** adatokat (’erk_tenyido’, ’erk_adat_jelzo’, ’erk_ve_id’ =
NULL).

     - **Módosítja** és a **megállás** célját *(’magall_jelzo’)*
 1 - kereskedelmi megállást  4 - „irányítói áthaladás kereskedelmi

megállás helyett”,
 0 - forgalmi megállást  3- „irányítói áthaladás forgalmi megállás

helyett” értékre.

     - **Törli** a **tervezett érkezési** idő adatot, ha a megállás jelző 2 - áthaladás volt.

     - Az **indulási** időt *(’ind_ido’)* a kapott új indulási időre *(’uj_esem_ido’)*
**módosítja** .
    - **Módosítja** az **’MGM_TenyEsem’** tábla adatait:

     - **Törli** az **érkezési** esemény *(’esem_ido’ = NULL, ’esem_tipus’ = NULL)*
adatokat és **bejegyzi** a módosítás **okát** *(’fsz_mod_ok’ = 4)* .

     - Módosítja az **indulási** esemény adatait:
 Az eseményt átírja **áthaladásra** *(’esem_id’ = 6)* .
 Az esemény idő a kapott **új eseményidő** lesz.
 Az esemény **belépő** irányító **szakasza** *(’erk_mis_kod’)* az érkezési

esemény irányító szakasza lesz.
 Az esemény **belépő vonala** *(’erk_vnl_id’)* az érkezési esemény belépő

vonala lesz.
 **Beállítja** az esemény **irányát** :

 Ha az érkezés 1 - páratlan irányú volt **ÉS** az indulás 0 - páros

irányú volt, akkor 2 - páratlan érkezés, páros indulás lesz.
 Ha az érkezés 0 - páros irányú volt **ÉS** az indulás 1 - páratlan

irányú volt, akkor 3 - páros érkezés, páratlan indulás lesz.
 A **’jeloles’** értékét 0 (nulla perc tartózkodás) törli (NULL).

`o` **Rendkívüli megállás** rögzítése (’ModOk’ = 5)
    - **Ellenőrzi**, hogy a vonatnak van-e az adott szolgálati helyre előrejelzett vagy
becsült **érkezési** eseménye, illetve van-e rögzítve tény áthaladási eseménye *.*

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** tény

**törölt:** *<>*

**törölt:** van


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 454/526|


Ha **bármelyik** is van, akkor 'UC_01_51_ERR_TENYADAT_LETEZIK'
üzenetet ad.

    - **Módosítja** a **’VonatElorejelzes’** táblában az adatokat:

     - Az előző szolgálati helynél **módosítja** a **menetidő** (’menetido_perc’)
értékét a kapott **új érkezési** idő és **régi indulási idő** különbségével.

     - **Beírja** az új **érkezési** időt *(’erk_ido’ = ’uj_esem_ido’)*, az érkezési idő
„ **forrását** ” *(’erk_jelzo’ = „B”)* és a tartózkodási időt *(’tartozkodas_perc’ = új*
*indulási idő - új érkezési idő)* .

     - Az **indulási** időt *(’ind_ido’)* a kapott új indulási időre *(’uj_esem_ido’)*
**módosítja** .

     - **Módosítja** a **megállás** célját *(’magall_jelzo’)*
 4 - „irányítói áthaladás kereskedelmi megállás helyett” értéket  1 
kereskedelmi megállás,
 3- „irányítói áthaladás forgalmi megállás helyett” értéket  0 
forgalmi megállás értékre.
 Egyébként 2 - irányító rendkívüli megállás.
    - **Módosítja** **’P_VTS’** táblában az adatokat:

     - A **tervezett** **érkezési** idő egyenlő a **tervezett indulási** idővel *(’terv_erkido’*
*= ’terv_indido’)* .

     - Az **előrejelzett érkezési** idő *(’teny_erkido’ = ’uj_esem_ido’)* a **kapott**
**érkezési** idő, az esemény „ **forrása** ” (’teny_adat_jelzo’) = ’B’ - **becsült** lesz.

     - Az **előrejelzett indulási** idő az **új indulási** idő lesz (’ind_tenyido’ =
’uj_esem_ido’).

     - **Beállítja** a **megállás** célját (’megall_jelzo’):
 4 - „irányítói áthaladás kereskedelmi megállás helyett” értéket  1 
kereskedelmi megállás,
 3- „irányítói áthaladás forgalmi megállás helyett” értéket  0 
forgalmi megállás értékre.
 Egyébként 2 - irányító rendkívüli megállás.
    - **Módosítja** az **’MGM_TenyEsem’** tábla adatait:

     - Ha nincs érkezési rekord, akkor azt létrehozza.

     - **Beállítja** az **érkezési** esemény *(’esem_ido’ = ’uj_esem_ido’, ’esem_tipus’ =*
*„B”)* adatokat és **bejegyzi** a módosítás **okát** *(’fsz_mod_ok’ = 5)* .
**Megállapítja** az érkezési esemény **belépő** vonal és menetirányítói
szakaszát.

     - **Módosítja** az **áthaladás** esemény adatait:
 Az eseményt átírja **indulásra** *(’esem_id’ = 6 helyett 2)* .
 Az esemény idő a kapott **új eseményidő** lesz.
 Az esemény **belépő** irányító **szakasza** *(’erk_mis_kod’)* és **belépő**

**vonala** *(’erk_vnl_id’)* törlésre kerül.
 **Beállítja** az esemény **irányát** .
 A **’jeloles’** = 0 (nulla perc tartózkodás) értékre állítja.

`o` **Tartózkodási idő módosítása** (’ModOk’ = 6)
    - **Megállapítja** az indulási esemény „ **eltérését** ”, amivel korrigálni kell az adott és
a későbbi eseményeket *(’elteres_perc’ = ’uj_esem_ido’ - eredeti eseményidő)* .
    - **Módosítja** az adott szolgálati hely **tartózkodási** idejét
*(’VonatElorejelzes.* ***tartozkodas_perc’)*** **ÉS** az **indulási** idő
*(’VonatElorejelzes.ind_ido’)* értékét az ’elteres_perc’ értékével.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 455/526|


    - **Beírja** a várható indulási idő *(’VonatElorejelzes.varhato_ind_ido’* *=*
*’UjEsemIdo’)* értékét.
    - A MGM **tényesemény** táblába bejegyzi a módosítás **okát**
*(’MGM_TenyEsem.fsz_mod_ok’ = ’ModOk’)* az adott eseményhez.

    Ha az új tatrtózkodási idő > 0, a **’jeloles’** értékét 0 (nulla perc tartózkodás) törli
(NULL).

    Ha az új tartózkodási idő = 0, a **’jeloles’** értékét 0 (nulla perc tartózkodás)
értékre állítja.
    - A később hívásra kerülő usp_0202_ **updMenetvElorejelzes2** eljárás az itt
rögzített adatok alapján a kapott szolgálati helytől és eseménytől kezdve
módosítja a **további** eseményidőket a **következő** olyan rekordig, ahol az
előrejelzés vége jelző be van állítva *(’elore_veg_jelzo’ <> NULL)* .

    - **Ellenőrzi**, hogy a vonatnak van     - e az adott szolgálati helyre rögzítve tény
indulási vagy áthaladási eseménye *.*

' –
Ha van, akkor UC_01_51_ERR_TENYADAT_LETEZIK Előrejelzés nem
módosítható, az adatok módosultak. ' üzenetet ad.
    - **Ellenőrzi**, hogy a vonatnak van     - e az adott szolgálati helyre előrejelzett érkezési
vagy áthaladási eseménye *.*
Ha nincs, akkor ’ ' UC_01_51_ERR_TENYADAT_LETEZIK      - „Előrejelzés nem
módosítható, az adatok módosultak. ” üzenetet ad.

    Ha az ellenőrzések során mindent rendben talál, akkor a következőket hajtja
végre:

     - Ha a vonathoz korábban már rögzítettek nyíltvonali feltartóztatást, akkor a
hozzá tartozó nyílt vonali eseményt törli az **MGM_Nyiltvonal** **Ese** **m**
táblából.

     - Ha a feltartóztatás helye a menetvonal indító állomása és nincs ott
**tartózkodási esemény** az **MGM_TenyEsem** táblában, akkor a menet v o n al
indulási idejével létrehoz egyet.

     - **Az MGM_Menetvonal** táblában a vonatszám utáni jelöléshez a
masod _ jelolo mezőbe ’ F ’ – feltartóztatást ír.

     - A vonat feltartóztatás utáni előrejelzésének törléséhez a következő
paraméterekkel meghívja az **usp_0202_updMenetvElorejelzes2** t áro l t
eljárást:

vonatnál

     - Az **MGM_Tenyesem** táblában, a feltartóztatás kezdeténél lévő eseménynél,
a forgalomszabályozási műveletet irányítói feltartóztatás a szolgálati h ely en
értékre állítja *(* *’* *MGM* *_* *TenyEsem.fsz* *_* *mod* *_* *ok* *’* *=* *11)* .

`o` **Irányítói feltartóztatás szolgálati hely előtt** ( ’ ModOk ’ = 12)
    - **Ellenőrzi**, hogy a vonatnak van     - e az adott szolgálati helyre rögzítve tény
eseménye *.*

' –
Ha van, akkor UC_01_51_ERR_TENYADAT_LETEZIK Előrejelzés nem
módosítható, az adatok módosultak. ’ üzenetet ad.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** <#>¶

**törölt:** :

**törölt:** :

**törölt:** :

**törölt:** :

**törölt:** <#>¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 456/526|


      - **Ellenőrzi**, hogy a vonatnak van       - e az adott szolgálati helyre előrejelzett érkezési
vagy áthaladási eseménye *.*

' –
Ha nincs, akkor UC_01_51_ERR_TENYADAT_LETEZIK Előrejelzés nem
módosítható, az adatok módosultak. ’ üzenetet ad.

      Ha az ellenőrzések során mindent rendben talál, akkor a következőket hajtja
végre:

      - Ha a vonathoz korábban már rögzítettek nyíltvonali feltartóztatást, akkor a
hozzá tartozó nyílt vonali eseményt törli az **MGM_Nyiltvonal** **Ese** **m**
táblából.

      Új nyílt vonali eseményt hoz létre a feltartóztatáshoz:
 Megkeresi az előző pályaszakaszt, ahová a feltartóztatás esik
 Kiszámolja, hogy a szakasz kezdetétől milyen távolságra van a

feltartóztatás. Ha a szakasz 100 m            - nél rövidebb, akkor a szakasz kezdő

                                     pontjára helyezi a feltartóztatást (0 m nek veszi a távolságot a szakasz
kezdetétől)
 A nyílt vonali esemény érkezési ideje = a szakasz végére előrejelze t t

érkezési idő
 Az előzőeket felhasználva létrehoz egy rekordot a nyílt vo n ali

eseményhez az **MGM_NyiltvonalEsem** táblába

      - **Az MGM_Menetvonal** táblában a vonatszám utáni jelöléshez a
masod _ jelolo mezőbe ’ F ’ – feltartóztatást ír.

      - A vonat feltartóztatás utáni előrejelzésének törléséhez a következő
paraméterekkel meghívja az **usp_0202_updMenetvElorejelzes2** t áro l t
eljárást:
 vft _ id: a feltartóztatott vonat belső azonosítója
 vft_szh_index: annak a szolgálati helynek a sorszáma a feltartóztato t t

vonatnál, ami előtt történik a feltartóztatás
 torles_jelzo: True
 forg_szab_muv_kod: 12
 a többi paraméter NULL, illetve jelzők esetén False

forgalomszabályozási műveletet irányítói feltartóztatás a szolgálati h ely
előtt értékre állítja *(* *’* *MGM* *_* *TenyEsem.fsz* *_* *mod* *_* *ok* *’* *=* *12)*
#88981vége

`o` 93048 Helyes/Helytelen vágány rögzítése ( ’ ModOk ’ = 13)
Ha a ’ szh _ id ’’ MGMHelytVaganyraInd rekord ’ helyt_vagany_ind ’ <> NULL, akkor azt bejegyzi a ’ adatelemébe ÉS ’ P _ VTS ’ tábla
      - Ha az ’ SzhIdIg ’ = NULL, akkor a következő állomástípusú szolgálati hely
’ helyt_vagany_erk ’ adatelemébe is.
      - Ha az ’ SzhIdIg ’ <> NULL, akkor a kapott ’ SzhIdIg ’ és ’ SzhIndexIg ’ szolgálati
helyig, a ’ helyt_vagany_ind ’ és ’ helyt_vagany_erk ’ adatelemekbe.

      A forgalomszabályozási műveletet helyes/helytelen vágányon közlekedés
értékre állítja *(* *’* *MGM* *_* *TenyEsem.fsz* *_* *mod* *_* *ok* *’* *=* *13)* .

      **usp_0202_updMenetvElorejelzes2** eljárás hívás nincs.

- Értesítés előrej el zés változásról (pulzálás) regisztrációs műveletek: [#88995]

Az eddigi lépesek után az eljárás az előrejelzés változásokra vonatkozó, az érintett
menetvonalak pulzálását vezérlő, alábbi műveleteket végzi:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** <#>¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 457/526|


`o` Az eljárás minden forgalmi műveletben érintett eseményre vonatkozóan külön
rekordot hoz létre a **MGM_ForgMuvErintettMenetvonal**, ha még nem létezik az
adott szolgálati helyre rekord. A rögzítendő adatok:

      - abra _ id: A bemenő adatokban kapott ábra belső azonosítója (AbraId)

      - mgm _ mv _ id: Az érintett menetvonal azonosítója

      - szh_id: Esemény szolgálati helye

      - mgm_teny_id: Esemény MGM tény azonosítója

      - fsz_mod_ok: Az első eseményhez kapcsódó fsz _ mod _ ok
`o` Az összes esemény regisztrációja után az eljárás ellenőrzi, hogy az érintett
menetvonal hátralévő útvonalán van     - e olyan másik ábra, ahol már volt irányítói
módosítás (létezik     - e már erre a menetvonalra rekord az
**MGM_ForgMuvErintettMenetvonal** táblában valamely hátralévő ábrára
vonatkozóan). Amennyiben igen, akkor ezeket pulzálandó menetvonalként jelöli meg
az érintett ábrára vonatkozólag (ha ez még nem lenne megjelölve), azaz új rekordot
rögzít az **MGM_PulzaloMenetvonal** táblában az alábbi adatokkal:

      - abra_id – Pulzálás kapcsán érintett ábra belső azonosítója

      - mgm_mv_id – menetvonal belső azonosítója

      - kivalto_ok = ’ 1 ’

      - kivalto_vft_id = NULL

      - letrehozas_ido = aktuális időpont

      - tudomasul_vetel_ido = NULL

      - torles_ido = NULL#88995 VÉGE

- Az eljárás a sikeres **ellenőrzések** és **adatmódosítások** után meghívja az előrejelzés
létrehozását, módosítását és törlését végző **usp_0202_updMenetvElorejelzes2** eljárást.
**Bemenő adatok:**
`o` **’vft_id’**  - A vonat belső azonosítója.
`o` **’vtf_szh_index’**  - A vonat szolgálati hely sorszáma a vft-n belül.
`o` **’ve_id’**  - A vonatesemény belső azonosítója = NULL.
`o` **’keszre_jelent_ido’**  - A készre jelentés ideje = NULL.
`o` **’vonatosszeallitas_id’**  - Vonatösszeállítás belső azonosítója = NULL.
`o` **’torles_jelzo’**  - Törlés jelző = 0.
`o` **’varhato_keses’**  - Várható késés értéke = NULL.
`o` **’szemely_jelzo’**  - Személyszállító vonat jelző = NULL.
`o` **’IF_4004_kuldes’**  - IF_4004 küldés kell jelzője = 1, kivéve az irányítói

művelet ok kóddal: eseménylistában kapott ’mod_ok’.)
`o` **’ir_ind_ido’**  - Az irányító által megadott fix indulási idő. Az eseménylistában
kapott:

      ’mod_ok’ = 2 VAGY 6 esetén = ’UjEsemIdo’

      egyébként NULL.
`o` **’ir_erk_ido’**  - Az irányító által megadott fix érkezési idő. Az eseménylistában
kapott:

      ’mod_ok’ = 1 esetén = ’UjEsemIdo’,

      egyébként NULL.
`o` **’forg_szab_muv_kod’**  - Forgalom szabályozási művelet kód. Az eseménylistában
kapott ’mod_ok’.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 0

**törölt:** (nincs).

**törölt:** <#>¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 458/526|


Az eljárás a kapott adatok alapján elvégzi az előrejelzési adatok újraszámítását, a
módosításokat átvezeti a ’ **P_VTS’, ’MGM_TenyEsem’** és a **’VonatElorejelzes’**
táblában is.

- #88986 A forg al mi szabályozási műveletek során a menetvonalon, az irányító által
módosított eseményekről, naplóbejegyzéseket készít az MGM _ EsemenyNaplo táblába a
következők szerint:

`o` Új előrejelzés létrehozása kiindulási állomáson ( ’ ModOk ’ = 1) és Új előrejelzés
létrehozása közbenső állomáson ( ’ ModOk ’ = 2) esetén az új előrejelzés első
szolgálati helyének első eseményéről készít egy naplóbejegyzést a következő
adatokkal:

      - Napló belső azonosító (mgm_esemnapl_id) = automatikus

      - =
PASS2 felhasználó belső azonosító (pass2userid) A műveletet végző
felhasználó azonosítója (Pass2UserId)
      - Rögzítés időpontja (rogz _ idopont) = Aktuális idő

      - =
Ábra belső azonosítója (abraazonosítója (AbraId) _ id) A bemenő adatokban kapott ábra belső
      - Objektum típusa (objektum _ tipus) = 3 – Menetvonal
      - Objektum belső azonosító (objektumazonosítója (MenetvId) _ id) = Az adott menetvonal belső
      - Művelet típusa (muvelet _ tipus) = U – Új
      - Tevékenység típus kódja (tevekenyseg_tipus_kod) = Módosítás oka (ModOk)

      - 1       - Ha az új előrejelzés létrehozása kiindulási állomáson történik

      - 2       - Ha az új előrejelzés létrehozása közbenső állomáson történik
      - Szolgálati hely belső azonosítója (szh_id) = Új előrejelzés első szolgálati helye
(SzhId)

      - =
Esemény típusa (esem _ id) Az új előrejelzés első esményének típusa
(MGM_TenyEsem.esem_id)

      - 2: Indulás esetén

      - 6: Áthaladás esetén

      - =
Esemény ideje (esem _ ido) Az új előrejelzés első eseményének ideje
(MGM_TenyEsem.esem_ido)
      - Objektum adatai (objektum_adat) (JSON) = NULL

`o` Előrejelzés módosítása ( ’ ModOk ’ = 3) esetén, az irányító által módosított
eseményekhez készít külön külön naplóbejegyzéseket a következő adatokkal:
      - Művelet típusa (muvelet _ tipus) = M – Módosítás
      - Tevékenység típus kódja (tevekenyseg_tipus_kod) = 3       - Esemény idő módosítása
      - Szolgálati hely belső azonosítója (szh_id) = Az esemény szolgálati helye (SzhId)
      - Esemény típusa (esem _ id) = Az adott esemény típusa
(MGM_TenyEsem.esem_id)

      - 1: Érkezés esetén

      - 2: Indulás esetén

      - 6: Áthaladás esetén

      - =
Esemény ideje (esem _ ido) Az adott esemény új ideje (A felhasználó által
rögzített idő)
      - Objektum adatai (objektum_adat) (JSON) = NULL

      A többi mezőt az új előrejelzés műveletnél leírtak szerint tölti ki az eljárás.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 459/526|


`o` Rendkívüli áthaladás rögzítése ( ’ ModOk ’ = 4) esetén, a művelet során létrehozott új
áthaladási eseményekhez készít eseményenként külön bejegyzéseket a következő
adatokkal:

    - Művelet típusa (muvelet _ tipus) = M – Módosítás
    - Tevékenység típus kódja (tevekenyseg_tipus_kod) = 4     - Rendkívüli áthaladás
    - Szolgálati hely belső azonosítója (szh_id) = Az esemény szolgálati helye (SzhId)
    - Esemény típusa (esem _ id) = 6: Áthaladás

    - =
Esemény ideje (esem _ ido) Az adott esemény ideje (A felhasználó által
rögzített idő)
    - Objektum adatai (objektum_adat) (JSON) = NULL

    A többi mezőt az új előrejelzés műveletnél leírtak szerint tölti ki az eljárás.

`o` Rendkívüli megállás rögzítése ( ’ ModOk ’ = 5) esetén, a művelet során létrehozott új
érkezési eseményekhez, valamint az indulásra módosított eseményekhez készít külön
külön bejegyzéseket a következő adatokkal:
    - Művelet típusa (muvelet _ tipus) = M – Módosítás
    - Tevékenység típus kódja (tevekenyseg_tipus_kod) = 5     - Rendkívüli megállás
    - Szolgálati hely belső azonosítója (szh_id) = Az esemény szolgálati helye (SzhId)
    - Esemény típusa (esem _ id) = Az adott esemény típusa
(MGM_TenyEsem.esem_id)

     - 1: Érkezés esetén

     - 2: Indulás esetén

    - =
Esemény ideje (esem _ ido) Az adott esemény új ideje (A felhasználó által
rögzített idő)
    - Objektum adatai (objektum_adat) (JSON) = NULL

    A többi mezőt az új előrejelzés műveletnél leírtak szerint tölti ki az eljárás.

`o` Tartózkodási idő módosítása ( ’ ModOk ’ = 6) esetén az irányító által módosított
érkezési és indulási eseményekhez készít külön külön bejegyzéseket.
    - Művelet típusa (muvelet _ tipus) = M – Módosítás

    Tevékenység típus kódja (tevekenyseg_tipus_kod)

     - 6     - Tartózkodási idő módosítása: Indulási eseménynél

     - 3     - Esemény idő módosítása: Érkezési eseménynél
    - Szolgálati hely belső azonosítója (szh_id) = Az esemény szolgálati helye (SzhId)
    - Esemény típusa (esem _ id) = Az adott esemény típusa
(MGM_TenyEsem.esem_id)

     - 1: Érkezés esetén

     - 2: Indulás esetén

    - =
Esemény ideje (esem _ ido) Az adott esemény új ideje (A felhasználó által
rögzített idő)
    - Objektum adatai (objektum_adat) (JSON) = NULL

    A többi mezőt az új előrejelzés műveletnél leírtak szerint tölti ki az eljárás.

`o` Irányítói feltartóztatás szolgálati helyen ( ’ ModOk ’ = 11) esetén a feltartóztatás
helyéről készít bejegyzést a következő adatokkal:
    - Művelet típusa (muvelet _ tipus) = M – Módosítás
    - Tevékenység típus kódja (tevekenyseg_tipus_kod) = 11 – Irányítói feltartóztatás
szolgálati helyen
    - Szolgálati hely belső azonosítója (szh_id) = A feltartóztatás helye (SzhId)
    - Esemény típusa (esem _ id) = NULL

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 460/526|


      - Esemény ideje (esem _ ido) = NULL
      - Objektum adatai (objektum_adat) (JSON) = NULL

      A többi mezőt az új előrejelzés műveletnél leírtak szerint tölti ki az eljárás.

`o` Irányítói feltartóztatás a szolgálati hely előtt ( ’ ModOk ’ = 12) esetén arról a szolgálati
helyről készít naplóbejegyzést, ami előtt a feltartóztatás történik:
      - Művelet típusa (muvelet _ tipus) = M – Módosítás
      - Tevékenység típus kódja (tevekenyseg_tipus_kod) = 12       - Irányítói feltartóztatás
szolgálati hely előtt
      - Szolgálati hely belső azonosítója (szh_id) = Az a szolgálati hely, ami előtt a
feltartóztatás történik (SzhId)
      - Esemény típusa (esem _ id) = NULL
      - Esemény ideje (esem _ ido) = NULL
      - Objektum adatai (objektum_adat) (JSON) = NULL

      A többi mezőt az új előrejelzés műveletnél leírtak szerint tölti ki az eljárás.

`o` Amennyiben valamelyik művelet során helyes/helytelen vágányon való közlekedést
( ’ ModOk ’ = 13) is rögzített az irányító, akkor erről külön naplóbejegyzéseket készít
az eljárás. (Ha egy művelet során több helyes/helytelen vágányon való közlekedést is
rögzítettek, akkor több bejegyzést készít.):
      - Művelet típusa (muvelet _ tipus) = M – Módosítás
      - Tevékenység típus kódja (tevekenyseg_tipus_kod) = 13       - Helyes/helytelen
vágányon közlekedés
      - Szolgálati hely belső azonosítója (szh_id) = Helyes/helytelen vágányon történő
közlekedés kezdő szolgálati helye (SzhId)

      - =
Esemény típusa (esem _ id) Annak az eseménynek a típusa, ami után kezdődik
a Helyes/helytelen vágányon történő közlekedés (MGM_TenyEsem.esem_id)

      - 2: Indulás esetén

      - 6: Áthaladás esetén

      - Esemény ideje (esem _ ido) = NULL

      Objektum adatai (objektum_adat) (JSON) (minden adatnál a mező nevét és
értékét tartalmazza) =

      -       Helytelen vágány jelző (mgm_helyt_vag_ind) (Értéke lehet :0 helyes

                 -                  vágány, 1 helytelen vágány, 3 harmadik (helytelen) vágány)

      - Helyes/helytelen vágányon történő közlekedés befejező szolgálati helyének
belső azonosítója (szhig_id)

      - Helyes/helytelen vágányon történő közlekedés befejező szolgálati helyének
indexe (szhig_index)

      A többi mezőt az új előrejelzés műveletnél leírtak szerint tölti ki az eljárás.

- Ahhoz hogy a z **MGM_EsemenyNaplo** táblába beírt naplóbejegyzések átadásra

              kerüljenek a PBI nak, a következő módon rekordonként regisztrációt végez a PbiReg
táblába:

`o` pbi_tipus: ” MGM_Naplo ”

`o` pbi_query_param1: MGM_EsemenyNaplo. mgm_esemnapl_id

`o` pbi_query_param2: NULL

`o` pbi_kuldes_szamlalo: NULL

`o` pbi _ create _ timestamp: Aktuális idő

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 461/526|


#88986vége

- Meghívja az usp_0151_ **setMenetvForgSzabFoglalas** eljárást, ahol a **’FoglalasJelzo’** =
’E’ - **elengedés** .

- 88995 **Ha** a menetvonal **pulzáltatásban** érintett, azaz a menetvonal azonosító
(’mgm_mv_id’) az ábra azonosítójával (’abra_id’) **szerepel** az
’MGM_PulzaloMenetvonal’ táblában **ÉS** **nincs** tudomásul véve (’tudomasul_vetel_ido’
= NULL) **ÉS** **nem** törölt (’torles_ido’ = NULL), akkor kitölti a tudomásul vétel idejét a
rendszeridővel, ezzel megszűntetve a pulzáltatást.

**Kimenő adatok**

Nincsenek.

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincsenek.






|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Típusa|[ZB6] megjegyzést írt: Ellenőrizni, hogy használja-e más is. Ha nem, akkor módosítani a szövegét, törölni a dinamikus elemeket.|
|Az adott munkahely a felhasználó által van lefoglalva. uf_checkMunkahelyFogl függvény FALSE értéket ad vissza|151005: Érvénytelen munkahely foglalás, az adatok mentése sikertelen!|UC_01_51_ERR_E RVENYTELEN_F OGLALAS|hiba||
|Új előrejelzés kiindulási állomáson esetén a menetvonalnak van már előrejelzése, vagy tényadata az MGM_TenyEsem táblában.|151019: Előrejelzés nem hozható létre, már létezik.|UC_01_51_ERR_ ELOREJELZE_L ETEZIK|hiba||
|A tervezett eseményidő korábbi, mint a rendszeridő.|151023: A tervezett eseményidő nem lehet a rendszeridőnél korábbi!|UC_01_51_ERR_ KORAI_ESEM_I DO|hiba||
|100569 A tervezett eseményidő a rendszeridőnél 12 órával későbbi|151036: A vonat várható indulási ideje későbbi, mint a grafikonon kezelt időszak vége|UC_01_51_ERR _KESON_INDU LO_VONAT|hiba||
||||||
|Új előrejelzés kiindulási állomáson esetén az új indulási idő korábbi, mint a|217006: A vonat indulási ideje nem megfelelő!|ERR_02_17_VON AT_HIBA_IDOBE N|hiba||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 462/526|






|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Típusa|törölt: Előrejelzés nem módosítható, már létezik tényesemény törölt: hiba törölt: 217006: A vonat indulási ideje nem megfelelő törölt: ERR_02_17_VONAT_HIBA_IDOBEN törölt: Közbenső állomási új előrejelzés esetén a tervezett indulási idő korábbi, mint az előző tény esemény idő.|
|---|---|---|---|---|
|menetrendszerinti indulás idő mínusz a legkorábbi indulási idő paraméter (’min_ind_esem_ido’).x|||||
|Új előrejelzés esetén a tervezett indulási idő későbbi, mint a menetrendszerinti indulási idő plusz belföldről induló menetvonal esetén az ’aut_lem_belf’, illetve külföldről induló vonatnál az ’aut_lem_nemz’ rendszerparaméter.|217006: A vonat indulási ideje nem megfelelő!|ERR_02_17_VON AT_HIBA_IDOBE N|hiba||
|Az érintett szolgálati helyre van tény (elmaradt/busz és RFO is beleértve) indulási eseménye.|151021: A vonat nem a szolgálati helyen tartózkodik, új előrejelzés nem hozható létre!|ERR_01_51_UJEL OREJELZES_TAR TOZKODASI_HIB A|hiba||
|Közbenső állomási új előrejelzés esetén a menetvonalnak előrejelzett érkezési eseménye van ÉS nincs előrejelzett indulási eseménye.|151021: A vonat nem a szolgálati helyen tartózkodik, új előrejelzés nem hozható létre!|ERR_01_51_UJEL OREJELZES_TAR TOZKODASI_HIB A|hiba||
|Ha a menetvonal MÁV - GySEV - MÁV útvonalon közlekedik és a kijelölt menetvonalrész a GySEV-ről lép vissza, az uf_checkVonatGysevTrazit függvényt FALSE értéket ad vissza.|151022: A vonat még nem lépett ki a GySEV-re, új előrejelzés nem hozható létre!|’ERR_01_51_ UJELOREJELZES _GYSEV_HIBA|hiba||
|Ha egy előrejelzés módosításkor az adott eseményhez már létezik MGM tényadat.|151026: Előrejelzés nem módosítható, az adatok módosultak.|UC_01_51_ERR_T|hiba||
|||ENYADAT_LETE ZIK|||
||||||
|A tervezett indulási idő által meghatározott tartózkodási idő (ha van) nagyobb, mint a ’menetv_ervv_utk’ (Menetvonal érvényessége útközbeni vonatoknál (órában)) rendszerparaméter.|217006: A vonat indulási ideje nem megfelelő!|ERR_02_17_VON AT_HIBA_IDOBE N|hiba||
|Új előrjelzés készítésekor, ha a menetvonal „A” vagy „B” kategóriába esik ÉS a ’megerositve’ = FALSE ÉS a tervezett indulási idő a menetrend szerinti indulási időnél korábbi.|151020: Személyszállító vonat, a menetrendszerinti idő előtti indulást tervez?|UC_01_51_CONF _SZEM_VON_KO RAI_IND|megerősítő||
||||||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 463/526|


**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|#88986MGM_EsemenyNaplo|MGM objektum események napló|
|#88986PbiReg|Regisztrációs tábla PBI-nak adatátadáshoz|
|||
|||
|||



**Rendszerparaméterek**





|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
|---|---|---|
|’min_ind_esem_ido’|Legkorábbi indulási idő (óra)|--|
|’aut_lem_belf’|belföldi indulású vonatok automatikus lemondásának ideje (óra)|--|
|’aut_lem_nemz’|belépő vonatok automatikus lemondásának ideje (óra)|--|
|’menetv_ervv_utk’|Menetvonal érvényessége útközbeni vonatoknál (órában)|--|

##### **3.44 [88998 ] S_015 1 _ 4 3 – Teljesítménycsökkenés mentése** **(TeljesitmenycsokkMentesComman d) ** **(usp_0151_TeljesitmenycsokkM e n te s )**

**Szolgáltatás feladatai**

Teljesítménycsökk en és mentése.

**Bemenő adatok**

  - Ábra belső azonosítója (AbraId)

  - Menetvonal Id (MenetvId)

  - Bejelentkezett felhasználó azonosítója ( Pas s2Us erId)

  - Teljesítménycsökkenés lista



`o` Jármű belső azonosítója (JarmuId)
`o` Teljesítménycsökkenés belső azonosítója (MgmKorlId) (lehet NULL i s)
`o` Működési mód (MukodesiMod) ( ’ M ’- Mentés, ’ T ’- Törlés, [ 88997] ’ ’-Nin cs

változás [88997vége] )
`o` Csökkentett teljesítmény mértéke (Mertek) (lehet NULL is)
`o` Csökkentett teljesítmény kezdő szolgálati helyének belső azo n o sí t ó j a

(TCsKezdSzhId) (lehet NULL is)
`o` Csökkentett teljesítmény kezdő szolgálati helyéhez tartozó vonatfo rg almi t erv

id (TCsKezdVftId) (lehet NULL is)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 464/526|


`o` Csökkentett teljesítmény kezdő szolgálati helyének sorszáma a von atf o rg alm i

tervben (TCsKezdVftSzhIndex) (lehet NULL is)
`o` Csökkentett teljesítmény vég szolgálati helyének belső azo n o sí t ó j a
(TCsVegSzhId) (lehet NULL is)
`o` Csökkentett teljesítmény vég szolgálati helyéhez tartozó vonatforgalmi t er v i d

(TCsVegVftId) (lehet NULL is)
`o` Csökkentett teljesítmény vég szolgálati helyének sorszáma a vo n atf o rg almi

tervben (TCsVegVftSzhIndex) (lehet NULL is)

**Működés**

A szerviz a teljesítménycsökkenési adatok mentéséhez meghívja az
usp_0151_Teljesi tme nycsokkMentes tárolt eljárást, a bemenő adatokban kapott
paraméterekkel.

Az eljárás a követ k ező ellenőrzéseket végzi:

  - Az S_0151_39 – Munkahely fog lalá s ellenőr zés (uf _ checkMunkahelyFogl), függvény

hívásával ellenőrzi, hogy a bemenő ada tok ban k apott ábrát még a szerkesztést végző
felhasználó foglalja     - e. A függvény t a bem enő adatokban kapott felhasználó
azonosítójával (epaiParamXmlDoc    - ból) és az ábra belső azonosítójával hívja meg.
Amennyiben a függvény false érték et ad v i s s za, vagyis már nem a felhasználó foglalja
az ábrát, akkor hibát ad.

Ha az ellenőrzése k során nem talált hibát az eljárás, akkor a teljesítménycsökkenés listában
kapott rekordoknál a Működési módtól (MukodesiMod) függően a következő műveleteket
végzi:

  - 88997 Ha a bemenő adatokban egy r ek or dnál a Működési mód ’ ’- Nincs változás, akkor
annál a rekordnál nem módosítja az M GM_K or l atozasok táblát. [88997vége]

  - Ha a bemenő adatokban egy r ek or dnál a M űködési mód ’ T ’- Törlés,, akkor a

Teljesítménycsökkenés belső azonosítónak ( M gmKorlId) megfelelő rekordot törli az
MGM_Korlatozasok táblából.

  - Ha a bemenő adatokban egy rek or dnál a Műk öd ési mód ’ M ’- Mentés:

`o` Amennyiben a bemenő adatokban a teljesítménycsökkenés belső azo n o sí t ó j a

(MgmKorlId) kitöltött, akkor az MGM _ Korlatozasok táblában a belső
azonosítónak megfelelő rekordot felülírja a kapott adatokkal, valamint az
utolso_mod_ido mezőbe az aktuális időt, a mod _ felh _ id mezőbe pedig a
bemenő adatokban kapott felhasználó azonosítóját írja (Pass2UserId).

`o` Amennyiben a bemenő adatokban a teljesítménycsökkenés belső azo n o sí t ó j a

(MgmKorlId) üres, akkor a kapott adatokkal egy új rekordot hoz létre az
MGM_Korlatozasok táblában úgy hogy az mgm_korl_fajta mezőbe „1 ”       - et
(Teljesítménycsökkenés), az utolsomod _ felh _ id mezőbe pedig a módosítást végző felhasználó azonosítóját írja _ mod _ ido mezőbe az aktuális időt, a

                      (epaiParamXmlDoc ból) és a megjegyzes mezőt üresen hagyja.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 465/526|


VK95023 Ha a bemen ő adatokban a Teljesítménycsökkenés listában van olyan sor, aminél nem
üres a Csökkente t t teljesítmény mértéke (Mertek), akkor az MGM_Menetvonal táblában a
menetvonalhoz tar t o z ó rekordnál a vszam_keret_jelzo értékét a következők szerint állítja:

  - Ha NULL vagy „L ” az értéke, ak k or „V”- t ír a mezőbe

  - Ha „V ”- t vagy „X ”- t tartalmaz, a zt ne m változtatja

  - Ha „M ”- t tartalmaz, akkor azt át ír ja „X ”-r e

Ha a bemenő adat o kban a Teljesítménycsökkenés listában minden sornál üres a Csökkentett
teljesítmény mért ék e (Mertek), akkor megnézi, hogy aktuálisan van - e vonatösszeállítás a
menetvonalhoz. Ha van, akkor az uf_getMGMKorlVossz függvénnyel ellenőrzi, hogy az
aktuális vonatös s zeállításban lévő járművekhez tartozik - e még korlátozás
(járműsebességko rl átozás, mozdony szintű menetdinamikai csoport azonosító alapján
rosszabb mozdon y, teljesítménycsökkenés). Ha tartozik korlátozás a járművekhez, akkor az
MGM_Menetvona l táblában a menetvonalhoz tartozó rekordnál a vszam _ keret _ jelzo értékét a
következők szerint ál lítja.:

  - Ha NULL vagy „L ” az értéke, akk or „V”- t ír a mezőbe

  - Ha „V ”- t vagy „X ”- t tartalmaz, a zt ne m változtat ja

  - Ha „M ”- t tartalmaz, akkor azt át ír ja „X”-r e

Amennyiben a menetvonalhoz aktuálisan nem tartozik vonatösszeállítás vagy az aktuális
vonatösszeállításb an szereplő járművekhez nincs korlátozás, akkor az MGM_Menetvonal
táblában a menetv o nalhoz tartozó rekordnál a vszam _ keret _ jelzo értékét a következők szerint
állítja:

  - Ha NULL, vagy „L ”, vagy „M ”az ér téke, a kk or azt nem változtatja

  - Ha „V ”- t tartalmaz, akkor azt át ír ja „L”- r e

  - Ha „X ”- t tartalmaz, akkor azt átír ja „ M”-r e

VK95023vége

#88986 **Naplózás**

A bemenő adatok a lapján létrehozott, módosított, törölt teljesítménycsökkenésekről, külön
külön naplóbe j egyzéseket készít az *MGM* *objektum* *események* *napló*
( **MGM_EsemenyN** **a** **plo)** táblába a következő módon:

  - Napló belső azonosító (mgm_es em napl_id) = a utomatikus

  - PASS2 felhasználó belső azonosító ( pas s2user id) = A bemenő adatokban kapott

felhasználó azonosítója (Pass2UserI d)

  - Rögzítés időpontja (rogz _ idopo nt) = Ak tuális idő

  - Ábra belső azonosítója (abra _ id) = A bem enő a datokban kapott ábra belső azonosítója

(AbraId)

  - Objektum típusa (objektum _ tipus) = 5 – K o r látoz ás

  - Objektum belső azonosító (obje ktum_ id) = Ú jonnan létrehozott, módosított vagy

törölt teljesítménycsökkenés belső az onosítója ( m gm_korl_id)

  - Művelet típusa (muvelet _ tipus) =

`o` U: Teljesítménycsökkenés létreh oz ás a esetén
`o` M: Teljesítménycsökkenés módosítása es etén

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 466/526|


`o` T: Teljesítménycsökkenés törlés e esetén

  - Tevékenység típus kódja (tevekeny s e g_tipus_k od) =

`o` 108 – Teljesítménycsökkenés

  - Szolgálati hely belső azonosítója ( szh_id) = K or l átozás kezdő szolgálati helyének

belső azonosítója (KezdSzhId)

  - Esemény típusa (esem _ id) = NU L L

  - Esemény ideje (esem _ ido) = NULL

  - Objektum adatai (objektum_ada t) (JS O N ) = ( m in den adatnál a mező nevét és értékét

tartalmazza) =

`o` Az érintett menetvonal belső azonosítója (mgm_mv_id)
`o` Korlátozás vége szolgálati helyé nek bel ső azonosítója (veg_szh_id)
`o` Vontatójármű belső azonosítója ( jar m u_id )
`o` Korlátozás mértéke (mertek)

**PBI átadás**

Az **MGM_Esemen** **y** **Naplo** táblába beírt rekordokról a PBI - nak történő átadáshoz a következő
módon regisztráció t végez a PbiReg táblába:

  - pbi_tipus: ” MGM_Naplo ”

  - pbi_query_param1: MGM_Esemeny N aplo . m gm _esemnapl_id

  - pbi_query_param2: NULL

  - pbi_kuldes_szamlalo: NULL

  - pbi_create_timestamp: Aktuális idő [#88986vége]

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs







|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüz enet típusa|
|Ha az uf_checkMunkahelyFogl|Érvénytelen munkahely foglalás, az adatok mentése sikertelen!|UC_01_51_ERR_ERVENYT ELEN_FOGLALAS|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 467/526|


**Érintett adattáblák/kódtáblák**







|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|VK95023MenetvVonOssz eallitas|Menetvonalak vonatösszeállításai|
|VK95023 Vonatosszeallitas|Vonatösszeállítások|
|VK95023Vonatosszeallita sJarmu|Vonatösszeállítások járművei|
|VK95023Jarmu|Járművek|
|VK95023JarmuAdatlap|Járművek adatai|
|VK95023T_VOJ|Vontatójárművek adatai|
|VK95023P_VTS|Vonatforgalmi terv szolgálati helyei|
|MGM_Korlatozasok|MGM Korlátozások|
|88997MGM_Menetvonal|Menetvonalak fej adatai|
|#88986MGM_EsemenyNa plo|MGM objektum események napló|
|#88986PbiReg|Regisztrációs tábla PBI-nak adatátadáshoz|

##### **3.45 S_0151_44 – Menetvonal szolgálati helyeinek lekérdezése szolgáltatás ** **(MenetvonalSzolgHelyekQuery ) (u s p _0 1 5 1_ selMvSzolghelyek) **

**1.1.1.** **Szolgáltatá** **s** **feladatai**

Egy menetvonal szolgálati helyeinek lekérdezése.

**1.1.2.** **Bemenő a** **d** **a** **t** **ok**

  - Menetvonal Id (MenetvId)

**1.1.3.** **Működés**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 468/526|


A szerviz a beme n ő adatokban kapott menetvonal szolgálati helyeinek a lekérdezéséhez a
bemenő adatokba n kapott paraméterekkel, meghívja az **usp_0151_selMvSzolghelyek** tárolt
eljárást.

Az eljárás a beme n ő adatokban kapott menetvonal szolgálati helyeit kérdezi le a menetvonal
haladási irányának megfelelő sorrendben (MGM _ tenyesem táblából). A szolgálati helyeknek
a kimenő adatokb an meghatározott adatait érvényességkezelten (az aktuális időben érvényes
értékekkel) olvassa ki a megfelelő táblákból (T _ SHJ, T _ SHF) és adja vissza a hívó modulnak.

**1.1.4.** **Kimenő a** **d** **a** **t** **ok**

  - Szolgálati helyek lista

`o` Szolgálati hely id (SzhId)
`o` Szolgálati hely statisztikai szám (StatSzam)
`o` Szolgálati hely rövid név (SzhRovidNev)
`o` Szolgálati hely teljes név (SzhHosszuNev)
`o` Vonat sorszáma a menetvonalnál (VonatSorsz)
`o` Vonatforgalmi terv id (VftId)
`o` Szolgálati hely sorszáma a vonatforgalmi tervben (VftSzhIndex)

**1.1.5.** **Rendszerü** **ze** **netek**




|Ellenőrzések leírása (HA)|Rendszerüzenet (AKKOR)|Mnemonik|Rendszerüze net típusa (és forrása)|
|---|---|---|---|
|||||


**1.1.6.** **Érintett adattáblák/kódtáblák**




|Col1|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|---|
||T_SHJ|Szolgálati hely jellemzők|
||T_SHF|Szolgálati hely fej adatok|
||MGM_Tenyesem|Menetvonalak tény eseményei|


**1.1.7.** **Rendszerp** **a** **raméterek**

Nincsenek
##### **3.46 S_0151_45 – Egyéb sebességkorlátozások mentése** **(EgyebSebKorlMentesCommand) (u s p _0151_EgyebSebKorlMentes) **

**Szolgáltatás feladatai**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 469/526|


Egyéb sebességko rl átozás mentése.

**Bemenő adatok**

  - Munkahely belső azonosítója (Munkahel y I d)

  - Ábra belső azonosítója (AbraId)

  - Menetvonal Id (MenetvId)

  - Bejelentkezett felhasználó azonosítója ( Pas s2Us erId)

  - Egyéb sebességkorlátozások lista

`o` Egyéb sebességkorlátozás belső azonosítója (MgmKorlId) (lehet NULL i s )
`o` Működési mód (MukodesiMod) ( ’ U ’- Új, ’ M ’- Módosítás, ’ T ’- Törlé s, [ VK95023 ] ’

’- Nincs változás [ VK95023vége] )
`o` Korlátozás mértéke (Mertek)
`o` Korlátozás kezdő szolgálati helyének belső azonosítója (KezdSzhId)
`o` Korlátozás kezdő szolgálati helyéhez tartozó vonatforgalm i t er v i d

(KezdVftId)
`o` Korlátozás kezdő szolgálati helyének sorszáma a vonatforgal mi t erv b en

(KezdVftSzhIndex)
`o` Korlátozás vég szolgálati helyének belső azonosítója (VegSzhId)
`o` Korlátozás vég szolgálati helyéhez tartozó vonatforgalmi terv id (V egVf t I d )
`o` Korlátozás vég szolgálati helyének sorszáma a vonatforgalmi t erv b en

(VegVftSzhIndex)
`o` Megjegyzés (Megjegyzes)

**Működés**

A szerviz az egyéb sebességkorlátozások mentéséhez meghívja az
**usp_0151_Egyeb** **Seb** **KorlMentes** tárolt eljárást, a bemenő adatokban kapott paraméterekkel.

Az eljárás a követ k ező ellenőrzéseket végzi:

  - Az S_0151_39 – Munkahely fo g lalá s ellenőr zés (uf _ checkMunkahelyFogl), függvény

hívásával ellenőrzi, hogy a bemenő ada tok ban k apott ábrát még a szerkesztést végző
felhasználó foglalja     - e. A függvény t a bem enő adatokban kapott felhasználó
azonosítójával és az ábra belső az onosítójá val hívja meg. Amennyiben a függvény
false értéket ad vissza, vagyis már nem a felh asználó foglalja az ábrát, akkor hibát ad.

  - Az eljárás ellenőrzi, hogy a menet v onal a bem enő adatokban kapott munkahely által

van lefoglalva (MGM_Menetvonal. ter _m unk ahely_id = MunkahelyId). Ha nem akkor
hibát ad.

Ha az ellenőrzések során nem talált hibát az eljárás, akkor az Egyéb sebességkorlátozások
listában kapott r ek ordoknál a Működési módtól (MukodesiMod) függően a következő
műveleteket végzi:

  - Ha a bemenő adatokban egy r ek or dnál a M űködési mód ’ T ’- Törlés, akkor a

korlátozás belső azonosítónak ( M gm K o r lId) megfelelő rekordot törli az
MGM _ Korlatozasok táblából.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 470/526|



  - Ha a bemenő adatokban egy re k or dnál a Működési mód ’ M ’- Módosítás, akkor az

MGM_Korlatozasok táblában a bel ső az onosítónak megfelelő rekordot felülírja a
kapott adatokkal, valamint az utolsomezőbe pedig a bemenő adatokban k _mapott od _ fido elham sználó azonosítóját írja (Pass2UserId). ezőbe az aktuális időt, a mod _ felh _ id

  - Ha a bemenő adatokban egy rek or dnál a Mű k ödési mód ’ U ’- Új, akkor a kapott

adatokkal egy új rekordot hoz létre a z MGM _ Korlatozasok táblában. Az új rekordnál
az mgm _ korl _ fajta mezőbe „2 ”    - t (E gy éb seb ességkorlátozás), az utolso_mod_ido
mezőbe az aktuális időt, a modfelhasználó azonosítóját írja (Pass2User _ felh I d) _ id mezőbe a bemenő adatokban kapott és a jármű azonosító mezőt üresen hagyja.

  - VK95023 Ha a bemenő adatokban egy r ek or dnál a Működési mód ’ ’- Nincs változás,
akkor azt a rekordot változatlanul h a gy ja [VK95023vége]

Ha az ellenőrzések során nem volt hiba és a bemenő adatokban az Egyéb
sebességkorlátozá so k listában van olyan sor, aminél a Működési mód ’ U ’- Új, ’ M ’- Módosítás,
vagy ’ ’- Nincs v ál tozás, akkor az MGM_Menetvonal táblában a menetvonalhoz tartozó
rekordnál a vszam _k eret _ jelzo értékét a következők szerint állítja:

  - Ha NULL vagy „L ” az értéke, akk or „ M ”- t ír a mezőbe

  - Ha „M ”- t vagy „X ”- t tartalmaz, akk or az t nem változtatja

  - Ha „V ”- t tartalmaz, akkor azt átír ja „X ”-r e

Ha nem volt hiba és a bemenő adatokban az Egyéb sebességkorlátozások listában minden
sornál a Működés i mód ’ T ’- Törlés, akkor az MGM_Menetvonal táblában a menetvonalhoz
tartozó rekordnál a v szam _ keret _ jelzo értékét a következők szerint állítja:

  - Ha „M ”- t tartalmaz, akkor ellenőr zi, hogy a menetvonalhoz tartozik  - e lejárt

vonatösszeállítás. Ha igen, akkor az uf_getMG MKorlVossz függvénnyel ellenőrzi,
hogy az adott vonatösszeállításban lév ő járművekhez tartozik    - e korlátozás
(járműsebességkorlátozás, mozdony s zi ntű m enetdinamikai csoport azonosító alapján
rosszabb mozdony, teljesítmény csökk enés) . Ha tartozik, akkor „L ”- t ír a
vszam _ keret _ jelzo mezőbe, egyébként p edig N U LL    - ra állítja.

  - Ha „X ”- t tartalmaz, akkor azt átír ja „ V”-r e

  - Egyéb érték esetén nem változtatj a a m ez ő t ar tal mát.

VK95023vége

**Előrejelzés módo** **s** **í** **t** **ása**

Ha az ellenőrzése k során nem volt hiba, akkor az eljárás a következőket végrehajtva
módosítja az előre j elzést a menetvonalnál.

  - A menetvonalnak a kapott, n em tör ölt, egy é b sebességkorlátozások által érintett

szakaszain, (szolgálati helyenként, egy szol g á lati helytől a következő szolgálati
helyig) kiszámolja a korlátozások mi att változott menetidőket (távolság/ korlátozásban
megadott sebesség) és percben eltár olja a Vona tElorejelzes tábla seb_korl_menetido
mezőjében (Egy szolgálati helyn él m indi g a következő szolgálati helyig tartó
szakaszra vonatkozó menetidőt t ár olja) . H a egy szakaszra több korlátozást is
rögzítettek, akkor a korlátozásonkén t k i s zám olt menetidők közül a nagyobb menetidőt
tárolja.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 471/526|



  - Törölt egyéb sebességkorlátozást eset én, az oknál a szakaszoknál, ahol nincs több

egyéb sebességkorlátozás a m enetvonalhoz, NULL értéket helyez a
seb _ korl _ menetido mezőbe.

  - Meghívja az usp _ 0202 _ updMenetv E lor ejelzes2 tárolt eljárást a következő bemenő

paraméterekkel, hogy az előkészített ada tok alapján módosítsa a menetvonal
előrejelzését:

`o` vft_id: A bemenő adatokban ka pott k or látozások által érintett első vonat belső

azonosítója

`o` vft_szh_index: A bemenő adatok ban kapott korlátozások által érintett első

szolgálati hely indexe

`o` mod_ok_kod: 3

`o` IF_4004_kuldes = ’ True ’ [#105188]

`o` A többi mezőt üresen hagyja.

**Értesítés előrejel** **zé** **s változásról (pulzálás)** **[#100455]**

Amennyiben az e g yéb sebesség korlátozás rögzítése előrejelzés változással járt, akkor az
eljárás

  - A sebesség korlátozás rögzítésben é r intett ábrára egy rekordot rögzít az

**MGM_ForgMuvErintettMenetvona** **l** tábláb a az alábbi adatokkal:

`o` abra _ id: A bemenő adatokban kapott Ábra belső azonosítója (AbraId)

`o` mgm_mv_id: A bemenő adatokban kapott Menetvonal id (MenetvId)

`o` szh_id: Korlátozás kezdő szolgálati helyének belső azonosítója (KezdSzhId) –

több eltérő szolgálati helytől kezdődő korlátozás esetén elegendő egy r ek o r d
rögzítése vonatkozásában. a legkorábbi szh _ id             - vel adott abra _ id és mgm _m v _ i d

`o` mgm_teny_id: Az adott szolgálati helyhez tartozó előrejelzett indulási

                  esemény mgm es belső azonosítója (EsemId)

`o` fsz _ mod _ ok: ’ 107 ’

  - Sebesség korlátozás törlés esetén az eljár ás elle nőrzi, hogy az érintett menetvonalra

marad    - e még rögzített korláto zá s. A me nnyiben nem, akkor törli az
**MGM_ForgMuvErintettMenetvona** **l** táblából az érintett rekordo(ka)t.

  - Ezután az eljárás ellenőrzi, hogy a k or látozásban érintett menetvonal hátralévő részén

van    - e forgalom szabályozási művelet k apcs án érintett más ábra. Amennyiben igen,
akkor érintett ábránként egy új rekor dot r ög zít a z **MGM_PulzaloMenetvonal** táblába
(amennyiben ez még nem létezik) a z alábbi adat okkal:

`o` abra_id – Hátralévő szakasz érintett ábra belső azonosítója

`o` mgm_mv_id     - A bemenő adatokban kapott Menetvonal id (MenetvId)

`o` kivalto_ok – „1 ” azaz „Irányítói beavatkozás ”

`o` kivalto_vft_id     - Nincs
`o` letrehozas_ido – Aktuális időpont **[#100455]**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 472/526|


A bemenő adatok al apján létrehozott, módosított, törölt egyéb sebességkorlátozásokról és az
érintett menetvon al ról a következő módon naplóbejegyzéseket készít az *MGM objektum*
*események napló* ( **MGM_EsemenyNaplo)** táblába **.**

  - A bemenő adatok alapján létreh ozott, m ódosított, törölt sebességkorlátozásokról külön

külön rekordokat ír a következő adato kk al:

`o` Napló belső azonosító (mgm_esem napl_i d) = automatikus

`o` PASS2 felhasználó belső azon osító ( pass2userid) = A bemenő adatokban

kapott felhasználó azonosítója (Pass2UserId)

`o` Rögzítés időpontja (rogz _ idopo nt) = Ak tu ális idő

`o` Ábra belső azonosítója (abraazonosítója (AbraId) _ i d) = A bemenő adatokban kapott ábra belső

`o` Objektum típusa (objektum _ tipu s) = 5 – Korlátozás

`o` Objektum belső azonosító (objek tum_ id) = Újonnan létrehozott, módosított

vagy törölt egyéb sebességkorlátozás belső azonosítója (mgm_korl_id)

`o` Művelet típusa (muvelet _ tipus) =

        - U: Egyéb sebeségkorlátozás létrehozása esetén

        - M: Egyéb sebeségkorlátozás módosítása esetén

        - T: Egyéb sebeségkorlátozás törlése esetén
`o` Tevékenység típus kódja (tevek eny s e g_tipus_kod) =

`o` 107 – Egyéb sebeségkorlátozás

`o` Szolgálati hely belső azonosí tója ( szh_id) = Korlátozás kezdő szolgálati

helyének belső azonosítója (KezdSzhId)

`o` Esemény típusa (esem _ id) = NULL

`o` Esemény ideje (esem _ ido) = NU L L

`o` Objektum adatai (objektum_adat) ( JS O N ) = (minden adatnál a mező nevét és

értékét tartalmazza) =

        - Az érintett menetvonal belső azonosítója (mgm_mv_id)

        - Korlátozás vége szolgálati helyének belső azonosítója (veg_szh_id)

        - Korlátozás mértéke (mertek)

  - Arról a menetvonalról, amihez az egy éb sebességkorlátozásokat rögzítették a

következő módon készít egy bejegyzést:

`o` Napló belső azonosító (mgm_esem napl_i d) = automatikus

`o` PASS2 felhasználó belső azon osító ( pass2userid) = A bemenő adatokban

kapott felhasználó azonosítója (Pass2UserId)

`o` Rögzítés időpontja (rogz _ idopo nt) = Ak tu ális idő

`o` Ábra belső azonosítója (abraazonosítója (AbraId) _ i d) = A bemenő adatokban kapott ábra belső

`o` Objektum típusa (objektum _ tipu s) = 3 – Menetvonal

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 473/526|


`o` Objektum belső azonosító (objek tum_ id) = Az adott menetvonal belső

azonosítója (MenetvId)

`o` Művelet típusa (muvelet _ tipus) = M - Módosítás

`o` Tevékenység típus kódja (tevek eny s e g_tipus_kod) =

        - 107 – Egyéb sebeségkorlátozás
`o` Szolgálati hely belső azonosítója ( szh_i d) = Annak a szolgálati helynek az

azonosítója, ahonnan módosult amenetvonal (SzhId) (Ez nem egyezik meg a
korlátozások kezdő szolgálati helyével)

`o` Esemény típusa (esem _ id) = 2: I ndulás

`o` Esemény ideje (esem _ ido) = Indulási idő arról a szolgálati helyről, ahonnan

módosult a menetvonal (esem_ido)

`o` Objektum adatai (objektum_adat) ( JS O N) (minden adatnál a mező nevét és

értékét tartalmazza) =

        - Menetvonalhoz rögzített egyéb sebességkorlátozások felsorolása

            - Korlátozás belső azonosítója (mgm_korl_id)

**PBI átadás**

Az **MGM_Esemen** **y** **Naplo** táblába beírt rekordokról a PBI - nak történő átadáshoz a következő
módon regisztráció t végez a PbiReg táblába:

  - pbi_tipus: ” MGM_Naplo ”

  - pbi_query_param1: MGM_Esemeny N aplo . m gm _esemnapl_id

  - pbi_query_param2: NULL

  - pbi_kuldes_szamlalo: NULL

  - pbi_create_timestamp: Aktuális idő [#88986vége]

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 474/526|












|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüz enet típusa|
|---|---|---|---|---|
|Ha az uf_checkMunkahelyFogl függvény false értéket ad vissza, vagyis már nem a szerkesztést végző felhasználó foglalja az ábrát|Érvénytelen munkahely foglalás, az adatok mentése sikertelen!|UC_01_51_ERR_ERVENYT ELEN_FOGLALAS|Tárolt eljárás|Hiba|
|Ha a menetvonal nem a bemenő adatokban kapott munkahely által van lefoglalva|A menetvonalat más felhasználó szerkeszti, módosítás nem lehetséges!|UC_01_51_ERR_MENETV_ FOGLALT|Tárolt eljárás|Hiba|


**Érintett adattáblák/kódtáblák**







88998vége

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|VK95023MenetvVonOssz eallitas|Menetvonalak vonatösszeállításai|
|VK95023Vonatosszeallita s|Vonatösszeállítások|
|VK95023Vonatosszeallita sJarmu|Vonatösszeállítások járművei|
|VK95023Jarmu|Járművek|
|VK95023JarmuAdatlap|Járművek adatai|
|VK95023T_VOJ|Vontatójárművek adatai|
|VK95023P_VTS|Vonatforgalmi terv szolgálati helyei|
|MGM_Korlatozasok|MGM Korlátozások|
|MGM_Menetvonal|Menetvonalak MGM alapadatai|
|VonatElorejelzes|Vonat előrejelzés|
|#88986MGM_EsemenyNa plo|MGM objektum események napló|
|#88986PbiReg|Regisztrációs tábla PBI-nak adatátadáshoz|



MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 475/526|

##### **3.47 [#89003] S_015 1 _46 – Kulcsfüggés feloldás lekérdezése (KulcsfuggesQuery) ** **(usp_0151_selKulcsfugges) **

**Szolgáltatás feladatai**

Az adott szolgálat i h elyhez rögzített kulcsfüggés feloldások lekérdezése.

**Bemenő adatok**

  - Ábra belső azonosítója ( **AbraId** )

  - Lekérdezési időszak kezdete ( **Idos** **z** **ak** **K** **ez** **d** )

  - Lekérdezési időszak vége ( **Idosz** **akVeg** )

**Működés**

A szerviz a *Bemen* *ő* *adatok* ban kapott azonosító és időszak paraméterekkel **meghívja** az
**usp_0151_selKulcsfugges** tárolt eljárást, ami lekérdezi az adott ábrához rögzített kulcsfüggés
feloldásokat és az o k adtait a kapott időszaknak megfelelően.

A tárolt eljárás m eg keresi a *Bemenő adatok* ban kapott *Ábra belső azonosítója* ( **AbraId** )
paraméterhez rögzített és a kapott **lekérdezési időszaknak megfelelő** kulcsfüggés
feloldásokat és a k im enő adatokban **meghatározott adatokat adja át** a hívó modulnak.

A kulcsfüggés fel o ldások adatait az **MGM_Kulcsfugges táblából** olvassa ki. **Azokat** a
kulcsfüggés feloldásokat **adja vissza**, amelyeknek van olyan időpontja, ami **beleesik** a kapott
**lekérdezési idősza** **k** **ba** . (A nyitottak esetében a lekérdezés idejét lezárási időnek tekintjük.)

**Kimenő adatok**

Kulcsfüggés feloldás ( **Kulcsfugges** ) **li** **st** **a**

  - Kulcsfüggés feloldás belső azonosítója ( **K** **u** **lcsf** **uggesId** )

  - Kulcsfüggés feloldás szolgálati hel y bel ső az onosítója ( **KulcsfuggesSzhId** )

  - Kulcsfüggés feloldás felirat ( **Kulcs** **fu** **gges** **F** **eli** **ra** **t** )

  - Kulcsfüggés feloldás kezdési id ő ( **K** **u** **l** **csf** **uggesKezd** )

  - Kulcsfüggés feloldás lezárási idő ( **K** **u** **lcs** **fu** **ggesLezar** )

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 476/526|





|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüzenet típusa|
|Nincs|||||


**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Kulcsfugges|Kulcsfüggés feloldások|



**Rendszerparaméterek**

Nincs
##### **3.48 [#89003] S_0151 _ 47 – Kulcsfüggés feloldás mentése ** **(KulcsfuggesMentesCommand ) (u s p _ 015 1_KulcsfuggesMentes) **

**Szolgáltatás feladatai**

A megadott kulcsfü g gés feloldás adatainak mentése, törlése.

**Bemenő adatok**

  - Kulcsfüggés feloldás belső azonosító ( **K** **u** **lcsf** **ug** **gesId** )

  - Működési mód ( **MukodesiMod** ) (’ **U** ’- Ú j, ’ **M** ’- Módosítás, ’ **T** ’- Törlés)

  - Ábra belső azonosítója ( **AbraId** )

  - Kulcsfüggés feloldás szolgálati hel y bel ső az ono sítója ( **KulcsfuggesSzhId** )

  - Kulcsfüggés feloldás felirat ( **Kulcs** **fu** **gges** **F** **eli** **ra** **t** )

  - Kulcsfüggés feloldás kezdési idő ( **K** **u** **l** **csf** **uggesKezd** )

  - Kulcsfüggés feloldás lezárási id ő ( **K** **u** **lcs** **fu** **ggesLezar** )

**Működés**

A szerviz egy ú j k ulcsfüggés feloldás **létrehozásához**, **lezárásához**, vagy egy meglévő
kulcsfüggés felold ás **törléséhez** **meghívja** az **usp_0151_KulcsfuggesMentes** tárolt eljárást, a
*Felhasználói adat* *o* *k* ( **EpaiParamXmlDoc** ) paraméterrel kiegészített *Bemenő adatok* ban
kapott adatokkal.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 477/526|


**Ellenőrzés**

A tárolt eljárás ell en őrzi, hogy a kulcsfüggés feloldás ábráját még mindig a szerkesztést végző
felhasználó foglal ja- e. Ez egy közös eljárás, függvény ( **uf_checkMunkahelyFogl** ) hívásával
történik. Ha már n em a felhasználó foglalja az ábrát, akkor hibaüzenetet kap a felhasználó
( ’ Az ábrát már más felhasználó foglalja! ’ ).

**Létrehozás**

A kapott *Működés* *i* *mód* ( **MukodesiMod** ) **=** ’ **U** ’ .

Ha a kapott ábrán, a kapott szolgálati helyen **már van nyitott** kulcsfüggés feloldás, akkor
**hibaüzenetet** kell ad ni: ’ Nem lehet új kulcsfüggés feloldást rögzíteni, mert már létezik nyitott

’
kulcsfüggés felold ás a szolgálati helyen! .
(151042: UC_01_ 5 1 _ ERR_HAS_OPENED_KEY_DEPENDENCY)

A tárolt eljárás a kapott kulcsfüggés feloldás adatokat **elmenti az MGM_Kulcsfugges**
**táblába**, úgy hogy az *Utolsó módosítás ideje* ( **UtolsoMod** ) mezőbe az aktuális időt írja.

**Lezárás**

A kapott *Működés* *i* *mód* ( **MukodesiMod** ) **=** ’ **M** ’ .

A tárolt eljárás a k apott *Kulcsfüggés feloldás belső azonosítója* ( **KulcsfuggesId** ) alapján a
*Kulcsfüggés felo* *ld* *ás lezárási idő* ( **KulcsfuggesLezar** ) mező értékével módosítja a
kulcsfüggés felol d ás *Kulcsfüggés feloldás lezárási idő* ( **kulcsfugges_lezar** ) mezőt az
**MGM_Kulcsfugges táblában** .

**Törlés**

A kapott *Működés* *i* *mód* ( **MukodesiMod** ) **=** ’ **T** ’ .

A tárolt eljárás a kapott *Kulcsfüggés feloldás belső azonosítója* ( **KulcsfuggesId** ) alapján **törli**
**a** kulcsfüggés felold á st az *MGM Kulcsfüggés* ( **MGM_Kulcsfugges** ) táblában.

**Naplózás**

Az *MGM Kulcsfü* *g* *gés* ( **MGM_Kulcsfugges** ) táblában létrehozott, lezárt (módosított) vagy
törölt kulcsfüggés f e loldások **alapján** **naplóbejegyzést készít** az *MGM objektum események*
*napló* ( **MGM_EsemenyNaplo)** táblába **.**

  - Napló belső azonosító ( **mgm_ese** **m** **napl_i** **d** ) = au tomatikus

  - PASS2 felhasználó belső azonosító ( **pas** **s** **2us** **eri** **d** ) = Szerkesztő felhasználó

( **szerk_felh_azon** )

( **utolso_mod** )

  - Ábra belső azonosítója ( **abra_id** ) = Ábr a be l ső azonosítója ( **abra_id** )

  - Objektum típusa ( **objektum_tipus** ) = **2**

  - Objektum belső azonosító ( **obje** **k** **t** **u** **m** **_** **i** **d** ) = K ulc sfüggés feloldás belső azonosító

( **kulcsfugges_id** )

  - Művelet típusa ( **muvelet_tipus** ) = Mű k ödési m ód ( **MukodesiMod** )

  - Objektum adatai ( **objektum_adat** ) ( **JSO** **N** )

`o` Kulcsfüggés feloldás szolgálati hely belső azonosítója ( **kulcsfugges_szh_id** ) =

Kulcsfüggés feloldás szolgálati hely belső azonosítója ( **kulcsfugges_szh_id** )

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** Esemény időpontja ( **esem_idopont** )


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 478/526|


`o` Kulcsfüggés feloldás felirat ( **kulcsfugges_felirat** ) = Kulcsfüggés feloldás felirat

( **kulcsfugges_felirat** )
`o` Kulcsfüggés feloldás kezdési idő ( **kulcsfugges_kezd** ) ( **kezdo_ido** ) = Kulcsfüggés

feloldás kezdési idő ( **kulcsfugges_kezd** )
`o` Kulcsfüggés feloldás lezárási idő ( **kulcsfugges_lezar** )
`o` = Kulcsfüggés feloldás lezárási idő ( **kulcsfugges_lezar** )

#88986 **PBI átadás**

Az **MGM_Esemen** **y** **Naplo** táblába beírt rekordokról a PBI - nak történő átadáshoz a következő
módon regisztráció t végez a PbiReg táblába:

    - pbi_tipus: ” MGM_Naplo ”

    - pbi_query_param1: MGM_EsemenyNaplo. mgm_esemnapl_id

    - pbi_query_param2: NULL

    - pbi_kuldes_szamlalo: NULL

    - pbi _ create _ timestamp: Aktuális idő [#88986vége]

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs







|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüzenet típusa|
|Ha az ábrát már nem a felhasználó foglalja.|Az ábrát már más felhasználó foglalja!|UC_01_51_ERR_ABR AT_MAR_MAS_FEL H_FOGLALJA err_code = 151002|tárolt eljárás|hiba|
|Ha a törlendő kulcsfüggés feloldás már nem létezik az MGM_Kulcsfugges táblában.|Az adatokat más felhasználó módosította!|UC_01_00_ERR_ADA TOKAT_MAS_FELH _MODOSITOTTA err_code = 100006|tárolt eljárás|hiba|
|Ha már van nyitott kulcsfüggés feloldás a szolgálati helyen.|Nem lehet új kulcsfüggés feloldást rögzíteni, mert már létezik nyitott kulcsfüggés feloldás a|UC_01_51_ERR_HAS _OPENED_KEY_DEP ENDENCY|tárolt eljárás|hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 479/526|


szolgálati helyen! err_code = 151042

**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Kulcsfugges|Kulcsfüggés feloldások|
|MGM_EsemenyNaplo|MGM objektum események napló|
|#88986PbiReg|Regisztrációs tábla PBI-nak adatátadáshoz|



**Rendszerparaméterek**

Nincs
##### **3.49 [88961 ] S_0151_48 - UjEloreJelzesEllenorzesQuery (új előrejelzés készítés ** **ellenőrzése, core.usp_0151_checkUjEloreJelzes) **

**Szolgáltatás feladatai**

95878 Ellenőrzi, hogy az új előrejelzés készítéséhez kijelölt menetvonalhoz új előrejelzés
készíthető-e az adott ábrán .

A szolgáltatás a kapott adatokkal meghívja a core.usp_0151_checkUjEloreJelzes eljárást.

96243 Az eljárás ’ Mo d Ok ’ kimenő adatát visszaadja a hívó kliensnek .

**Bemenő adatok**

- **’MenetvonalId’** - a menetvonal ’MGMMenetvId’ adata.

- 95878 **’SzhId’** - annak szolgálati helynek a belső azonosítója, ahonnan az előrejelzést létre
kell hozni.

- ’TerMunkahelyId’

- ’AbraId’

- ’epaiParamXmlDoc’

**Működés** [96243]

96243 Ellenőrzi, hog y a kapott **'** **SzhId** **'** az ' MGM_TervEsem ' táblában az **első MÁV** szolgálati
hely.

- Ha **igen**, akko r **’** **ModOk** **’** = 1 adatot ad vissza.

- Ha **nem**, akko r a ( ' SzhId ' által meghatározott) szolgálati helyet (az ' MGM_TervEsem '
táblában) **megelőző MÁV** szolgálati helyek egyike **sincs érvényes ábrához** rendelve (nem
szerepelnek az MGM _ AbraUtvonal táblában érvényes ábrán).
`o` Ha egyik **sincs** érvényes ábrához rendelve, akkor **’** **ModOk** **’** = 1 adatot ad vissza.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 480/526|


`o` Ha bármelyik is **érvényes ábrához** **van** rendelve, akkor ellenőrzi, hogy a
**menetvonal** első szolgálati helye és a szolgálati hely között van    - e **GySEV** szolgálati
hely:

      Ha nincs, akkor UC_01_51_ERR_UJ_ELOREJELZES_HIBA üzenetet ad
vissza.

      - Ha **van**, akkor **ellenőrzi**, hogy a szolgálati hely és az azt megelőző első **GySEV**
szolgálati hely *(* *’* *T* *_* *SHJ.vvt* *_* *szerv* *_* *id* *_* *uzem* *’* *=* *3)* **között** van        - e érvényes **ábrához**
rendelt **MÁV** szolgálati hely:

      - Ha van, akkor UC_01_51_ERR_UJ_ELOREJELZES_HIBA üzenetet ad
vissza.

      - Ha **nincs**, akkor meghívja az uf_ **checkVonatGysevTrazit** függvényt.

      
 Ha a függvény **FALSE** értéket ad vissza, ak k o r
**UC_01_51_ERR_UJELOREJELZES_GYSEV_HIBA** **üzenetet** ad
vissza.
 Ha a függvény **TRUE** értéket ad vissza, akkor **’** **ModOk** **’** = 2 adatot ad

vissza. [96243 vége]

**Kimenő adatok**

96243 ’ ModOk ’ - a módosítás oka .

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincs.




|Rendszerüzenetek|Col2|Col3|
|---|---|---|
|Ellenőrzések leírása (HA)|Üzenet (AKKOR)|típusa|
|Az első MÁV esemény szolgálati helye nincs az ábrán|UC_01_51_ERR_UJ_ELOREJELZES_HIBA Err_code: 151014|Hiba|


**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_TervEsem|MGM menetrendi adatok|
|’MGM_AbraUtvonal’|Az ábra útvonal leírása, mely szolgálati helyeket tartalmazza|



MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 481/526|


**Rendszerparaméterek**

Nincsenek.
##### **3.50 [88962] S_0151_49 - ForgSzabMuveletEllenorzesQuery (Forgalomszabályozási ** **művelet ellenőrzése; core.usp_0151_checkForgSzabMuvelet) **

**Szolgáltatás feladatai**

A szolgáltatás a kapott bemenő adatokkal meghívja a core.usp_0151_checkForgSzabMuvelet
eljárást, amely ellenőrzi, hogy az adott szolgálati helyen az adott forgalomszabályozási
művelet elvégezhető-e.

Az eljárásnak kimenő adata i a módosítás okától függően „M ” esetén vannak, „A ” esetén
nincsenek, az ellenőrzés eredményeként üzeneteket adhat vissza.

**Bemenő adatok**

- **’MgmMvId’** - a kijelölt menetvonal MGM belső azonosítója a VPE-s menetvonal
azonosító ( *’MGM_Menetvonal.mgm_mv_id’ alapján ’Igenyles_id’ és ’igenyles_datum’* )
és a ’vft’ ( *’Igenyles_id’ és ’igenyles_datum’ alapján ’P_VFT.vft_id* ’) adatainak
megállapításához.

- **’SzhId’** - a kijelölt szolgálati hely belső azonosítója.

- **’SzhIndex’** - a szolgálati hely vft-n belüli sorszáma.

- **’ModOk’** - a módosítás oka.
Lehetséges **értékei** :
`o` „A” - rendkívüli áthaladás.
`o` 88976 „M ”  - másik pályán közlekedés.

- **’Megerositve’** - annak a jelzése, hogy bizonyos ellenőrzéseket nem kell elvégezni, az
már megtörtént és a felhasználó jóváhagyta, megerősítette.

**Működés**

**3.50.3.1** **Rendkívüli áthaladás ellenőrzése**

Ha a hívás oka ’ModOk’ = „A” - rendkívüli áthaladás:

- Megállapítja a menetvonal vonat **kategóriáját**, azaz azt, hogy személyszállító („A” vagy
„B”), vagy nem:
`o` **Személyszállító** vonat: P_VFT.vnem_kod  T_VMU.vkat_id 
T_VKAT.vkat_kod= „A” VAGY „B” (érvényesség kezelten).
`o` **Nem** személyszállító, egyébként.

- A kategóriától és a megállás céljától **függetlenül**, ha:
`o` A szolgálati helyen **kocsisorrend** **fordulás** van *(’szh_id’*  *’P_VTS.kocsi_sorr_ford’ =*
*TRUE)*, akkor **hibaüzenetet** kell adni és nincs további ellenőrzés.
**UC_01_51_ERR_ATHALADAS_IRANYVALTAS** („151015: Irányváltás miatt a
rendkívüli áthaladás nem lehetséges!”)
`o` Az adott **eseményhez** **nem** **előzetesen** készre jelentett vonat-összeállítás közlés van
*(a ’Vonatosszeallitas’ táblában a ’vft_id’ szerepel,* ***ÉS*** *az ’szh_index’ alapján a*
*’vonat_osszeallitas_allapot_id’ = 4, 5, 7)*, akkor **hibaüzenetet** kell adni és nincs további
ellenőrzés.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 482/526|


**UC_01_51_ERR_ATHALAD_ELTERO_OSSZEALLITAS** („151018: Eltérő
vonatösszeállítás miatt a rendkívüli áthaladás nem lehetséges!”)

- Megállapítja a **megállás** célját az ’szh_id’ alapján:
`o` Ha a ’P_VTS.vft_szh_megall_jelzo’ = 0, akkor **forgalmi** célú, akkor **nincs további**
ellenőrzés, az **sikeres**, nincs üzenet adás.
`o` Ha a ’P_VTS.vft_szh_megall_jelzo’ = 1 **kereskedelmi** célú, akkor a lentiek szerinti
ellenőrzések következnek.
`o` Ha a ’P_VTS.vft_szh_megall_jelzo’ = NULL, nincs megállás, de ilyet nem ad a
kliens.

- Ha a ’Megerositve’ = **TRUE**, akkor nincs további ellenőrzés, az sikeres, nincs üzenet
adás.

- Ha a ’Megerositve’ = **FALSE**, akkor:
`o` **Személyszállító** vonat esetén (a vonatkategória „A” vagy „B” és a megállás
**kereskedelmi** célú):
      - Ha a **vonatnak** még **nincs vonat-összeállítás** közlése (a ’Vonatosszeallitas’
táblában nem szerepel a ’vft_id’):

      - Ha az adott **eseményhez** **nem kötelező** a vonat-összeállítás közlés a
szolgálati helyen *(’vft_id’* *és* *’szh_index’* 
*’MenetvVonOsszeallitas.vossz_erv_jelzo’ <> true)*, akkor üzenet kell adni és
nincs további ellenőrzés.
**UC_01_51_CONF_SZEM_VON_ATHALAD** („151016: Személyszállító
vonat! Tényleg rendkívüli módon áthalad?”)

      - Ha az adott **eseményhez** **kötelező** a vonat-összeállítás közlés *(’vft_id’ és*
*’szh_index’*  *’MenetvVonOsszeallitas.vossz_erv_jelzo’ = true)*, akkor
üzenet kell adni és nincs további ellenőrzés:

**UC_01_51_CONF_ATHALADAS_OSSZEALLITAS_KELL** („151017:
A szolgálati helyen vonat-összeállítás közlés kötelező. Valóban rendkívüli
áthaladást tervez?”) *(* *[95621]* *Erre csak akkor lesz ellenőrzés, ha az előrejelzés*
*készítés nem az aktuális összeállítás végéig történik)*
      - Ha az adott **eseményhez** **előzetesen készre jelentett** vonat-összeállítás közlés
van (a ’Vonatosszeallitas’ táblában a ’vft_id’ szerepel, és az ’szh_index’ alapján
’Vonatosszeallitas.vonat_osszeallitas_allapot_id’ = 6), akkor üzenet kell adni és
nincs további ellenőrzés:
**UC_01_51_CONF_SZEM_VON_ATHALAD** („151016: Személyszállító
vonat! Tényleg rendkívüli módon áthalad?”)
`o` **Nem személyszállító** vonat esetén (a vonatkategória nem „A” vagy „B” és a
megállás **kereskedelmi** célú):

      - Ha a **vonatnak** még **nincs vonat-összeállítás** közlése *(a ’Vonatosszeallitas’*
*táblában nem szerepel a ’vft_id’)* **ÉS** az adott **eseményhez** **kötelező** a vonatösszeállítás közlés *(’vft_id’* *és* *’szh_index’* *alapján*
*’MenetvVonOsszeallitas.vossz_erv_jelzo’ = true)*, akkor üzenet kell adni és
nincs további ellenőrzés:

**UC_01_51_CONF_ATHALADAS_OSSZEALLITA_KELL** („151017: A
szolgálati helyen vonat-összeállítás közlés kötelező. Valóban rendkívüli
áthaladást tervez?”)

      - Ha az adott **eseményhez** **előzetesen készre jelentett** vonat-összeállítás közlés
van *(a ’Vonatosszeallitas’ táblában a ’vft_id’ szerepel,* ***ÉS*** *az ’szh_index’ alapján*

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 483/526|


*’Vonatosszeallitas.vonat_osszeallitas_allapot_id’* *=* *6)*, akkor nincs további
ellenőrzés, az sikeres, nincs üzenet adás.

**3.50.3.2** **[88976]** **Másik pályán közlekedés ellenőrzése**

Ha a hívás oka **’ModOk’** = „ **M** ” – másik pályán közlekedés:

- Ha a vonat MRN vonat (’MGM_Menetvonal.igenyles_id’ = NULL), akkor
UC_01_51_ERR_MAS_PALYA_UTVONAL üzenetet ad vissza.
(Egyelőre ilyet nem ad, a kliensen nem kezelhető a másik pálya funkció.)

- A kapott ’SzhId’ és ’SzhIndex’ alapján megállapítja, hogy:

`o` A kapott szolgálati helytől a vonat haladási irányában (a ’P_VTS.szh_index és a
’P_VTS.ind_all_vegpont’ alapján) a másik pályán közlekedés lehetséges-e a T_PPJ,
MasPalyaFej és a T_MPP táblák alapján.
Ha a másik pályán közlekedés lehetséges a kapott szolgálati helytől, akkor ellenőrzi,
hogy a másik pálya visszatérő szolgálati helye szerepel-e a vonat útvonalán, az adott
szh_indextől.

      Ha nem, akkor UC_01_51_ERR_MAS_PALYA_UTVONAL üzenetet ad
vissza, ahol az ERRTEXT {0} = a kezdő szolgálati hely (kapott ’SzhId’) **hosszú**

neve.

      Ha igen, akkor az ’MppId’ = ’T_MMP.mpp_id’.

`o` Ha a másik pályás közlekedés lehetséges a fentiek szerint, akkor ellenőrzi, hogy az
eredeti útvonalon a két szolgálati hely van-e kötelező vonat-összeállítás közlési pont
(MenetVonOsszeallitas tábla).
Ha van, akkor UC_01_51_ERR_MAS_PALYA_OSSZEALLITAS üzenetet ad.

`o` 106120 Sikeres ellenőrzések után:

      Ellenőrzi, hogy a kapott menetvonalhoz az aktuális (befejezett vagy készre
jelentett) összeállításában van        - e olyan jármű, amelyhez 63, 64 vagy 69        - es kódú
Rk adat van rögzítve.
Ha a ’ P _ VFT.vft _ id ’ rekordnál a ’ vft _ rk _ jelzo ’ = 1 (true), akkor az
’ aktualis _ vonatosszeallitas _ id ’ alapján kileresi, hogy a ’ VonatosszeallitasJarmu ’
táblában van ’ lesz.RkEngedely.k       - e olyan jármű, ahol az Rk kód _ rktip _ id ’  ’ K _ RKK.k _ kod ’= ). Ha van, akkor az 63, 64 vagy 69 ( ’ rk ’_ RkRideng _ id ’ ’=  1

      Ellenőrzi, hogy a kapott menetvonalhoz az aktuális (befejezett vagy készre

                          jelentett) összeállításában van e olyan jármű, amelyhez RID adat van rögzítve.
Ha a ’ P _ VFT.vft _ id ’ rekordnál a ’ P _ VFT.vft _ rd _ jelzo ’ = 1, akkor az ’ RkRid ’ =
2 lesz.

      -       Ha mind a kettő eset fent áll, azaz adott Rk s adat és Rd adat is van, akkor az
’ RkRid ’ = 3 lesz. [106120 vége]

**Kimenő adatok** **[88976]**

- ’MppId’ - a másik pálya belső azonosítója.

- ’KezdoSzhRnev’ - a másik pályán közlekedés kezdő szolgálati helyének **hosszú** neve.

- ’VegSzhRnev’ - a másik pályán közlekedés visszatérő szolgálati helyének **hosszú** neve.

- 106120 ’ RkRid ’ - a menetvonal Rk és/vagy RID adatot tartalmaz. 106120 vége

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 484/526|


**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincs.




|Rendszerüzenetek|Col2|Col3|
|---|---|---|
|Ellenőrzések leírása (HA)|Üzenet (AKKOR)|típusa|
|A rendkívüli áthaladás helyén irányváltás van.|UC_01_51_ERR_ATHALADAS_IRANYVALTAS („151015: Irányváltás miatt a rendkívüli áthaladás nem lehetséges!”|hiba|
|Személyszállító vonatnál, ha a rendkívüli áthaladás helyére kereskedelmi megállás van előírva és nem kötelező a vonat- összeállítás közlés.|UC_01_51_CONF_SZEM_VON_ATHALAD („151016: Személyszállító vonat! Tényleg rendkívüli módon áthalad?”)|megerősítő|
|Személyszállító vonatnál, ha az adott eseményhez kötelező a vonat- összeállítás közlés|UC_01_51_CONF_ATHALADAS_OSSZEALLITAS_ KELL („151017: A szolgálati helyen vonat-összeállítás közlés kötelező. Valóban rendkívüli áthaladást tervez?”) 95621 ez az üzenet csak akkor jöhet, ha az előrejelzés készítés nem az aktuális összeállítás végéig történik|megerősítő|
|Személyszállító vonatnál, ha a rendkívüli áthaladás helyére van előzetesen készre jelentett vonat- összeállítás közlés|UC_01_51_CONF_SZEM_VON_ATHALAD („151016: Személyszállító vonat! Tényleg rendkívüli módon áthalad?”)|megerősítő|
|Nem személyszállító vonatnál, ha Kereskedelmi célú megállás esetén a vonat haladási iránya a szolgálati helyen megváltozik|UC_01_51_ERR_ATHALADAS_IRANYVALTAS („151015: Irányváltás miatt a rendkívüli áthaladás nem lehetséges!”)|hiba|
|Nem személyszállító vonatnál, ha nincs vonat- összeállítás közlése a vonatnak ÉS az adott eseményhez kötelező a vonat-összeállítás közlés|UC_01_51_CONF_ATHALADAS_OSSZEALLITA_K ELL („151017: A szolgálati helyen vonat-összeállítás közlés kötelező. Valóban rendkívüli áthaladást tervez?”)|megerősítő|
|Nem személyszállító vonatnál, kereskedelmi célú megállás esetén, ha a szolgálati helyen nem előzetesen készre jelentett|UC_01_51_ERR_ATHALAD_ELTERO_OSSZEALLI TAS („151018: Eltérő vonatösszeállítás miatt a rendkívüli áthaladás nem lehetséges!”)|hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 485/526|





|vonat-összeállítás közlése van a vonatnak.|Col2|Col3|
|---|---|---|
|88976 Ha a másik pályás közlekedés az adott szolgálati helytől nem lehetséges|UC_01_51_ERR_MAS_PALYA_UTVONAL|hiba|
|88976 Ha a másik pálya visszatérő szolgálati helye nem szerepel a vonat útvonalán|UC_01_51_ERR_MAS_PALYA_UTVONAL|hiba|
|88976 Ha a másik pályás közlekedésben érintett eredeti szakaszon kötelező vonat-összeállítás közlés van|UC_01_51_ERR_MAS_PALYA_OSSZEALLITA S|hiba|


**Érintett adattáblák/kódtáblák**

Nincsenek.

**Rendszerparaméterek**

Nincsenek.
##### **3.51 [#88980 ] S_015 1 _50 – Csatlakozás adatainak lekérdezése ** **(CsatlakozasAdatokQuery) (usp _0151 _s e l C satlakozasAdatok) **

**Szolgáltatás feladatai**

A bemenő paramét e rben kapott csatlakozás adatainak a lekérdezésére szolgál

**Bemenő adatok**

  - Csatlakozás belső azonosító (Csatlak ozasI d)

**Működés**

A szerviz a bemenő paraméterben kapott adatokkal meghívja az
**usp_0151_selCsa** **tl** **akozasAdatok** eljárást, mely lekérdezi az adott csatlakozás adatait az
adatbázisból.

Az eljárás a bem en ő adatokban kapott csatlakozásnak a kimenő adatokban meghatározott
adatait adja át a hív ó modulnak.

A csatlakozás adat a it az MGM _ Csatlakozas, a csatlakozásban érintett menetvonalakat az
MGM_CsatlVonat t áblából olvassa ki. Az MGM_CsatlVonat tábla tartalmazza a bevárandó
(varakozas _ tipus =”B” ) és a várakozó (varakozas _ tipus =” V ” ) menetvonalakat/vonatokat is.

Ha az MGM_Csat lV onat.mgm_teny_id nem üres, akkor kiolvassa az esemény adatokat az
MGM _ Tenyesem t áblából.

Amennyiben az M G M _ Tenyesem tábla vg _ id mezője nem tartalmaz vágány adatot, akkor az
I_TenyVagany t áb lában keres vágány adatot az eseményhez (indulási esemény

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 486/526|


/MGM_TenyEsem .e sem_id = 2/ esetén az ind_vagany_id, érkezési esemény
/MGM_TenyEsem .e sem_id = 1/ esetén az erk_vagany_id mezőben). Ha ott sincs vágány adat
az eseményhez, a k kor az uf_getTervVagany függvény használatával a V_VSVG táblában
keres tervezett vágányt.

**Kimenő adatok**

   - Csatlakozás belső azonosító (CsatlakozasId) (MGM _ Csatlakozas.m g m _cs a t l _ i d)

   - Csatlakozás utolsó módosításának ideje ( Uto lso Mo d Id o )
(MGM_Csatlkozas.utolso_mod_ido)

   - Csatlakozó menetvonalak lista

`o` Csatlakozó vonat bels ő azonosító (CsatlVonId)
(MGM_CsatlVonat.mgm_csatl_von _i d)

`o` Menetvonal id (MenetvId) (MG M_C satlVonat.mgm_mv_id)

`o` Előrejelzett vonatesemény m gm- es belső azonosítója (EsemId)
(MGM_CsatlVonat.mgm_teny_id) ( Lehet NULL, ha a vonat előrejelzését
törölték)

`o` Vonatazonosító (VonatAzon) (S zá mozási rendszer kódja (55      - t nem kell

kiírni)+ ’ ’ +Vonatszám irányszámmal + ’ / ’ +vonat indulási dátuma
(éééé.hh.nn)) (MGM_CsatlVonat, M GM_Menetvonal, P_VFT, T_OR
táblák alapján)

`o` Várakozás típusa (VarakozasT ipus) ( ’ B ’ – Bevárandó vonat, ’ V ’ –

Várakozó vonat) (MGM _ CsatlVonat. v arakozas _ tipus)

`o` Előrejelzett/tény esemény ideje ( E semIdo) (Lehet NULL, ha a vonat

előrejelzését törölték) (MGM_CsatlVonat.mgm_teny_id           -           MGM_TenyEsem.esem_ido)

`o` Szín (Szin)

          - ’ T ’- Tény, ha a visszaadott esemény már tény esemény. Ha van

esemény és az MGM_TenyEsem `.` esem_tipus nem ' B ' .

          - ’ ’- A többi esetben.

`o` Az esemény terv/tény vágányának mellék kódja (Vagany)
(T_SHF.szh_mellekkod)

`o` Csatlakozás típusa (CsatlTipus) ( M G M _CsatlVonat.csatl_tipus)

`o` Csatlakozás ideje (CsatlIdo) (M GM_C satlVonat.csatl_ido)

**Interfészek**

Nincs

**Jelentések**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 487/526|


**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Csatlakozas|MGM csatlakozások|
|MGM_CsatlVonat|Csatlakozó vonatok|
|MGM_TenyEsem|Menetvonalak tény eseményei|
|T_SHJ|Szolgálati hely jellemzők|
|T_SHF|Szolgálati hely fej adatok|
|P_VFT|Vonatforgalmi terv fej|
|T_OR|Országkódok|
|I_TenyVagany|Más rendszertől kapott tény vágány|
|V_VNSZ|Vonat menetrendi adatai|
|V_VSVG|Menetrendi vonat szolgálati helyéhez rendelt vágányok (naponként)|


Nincs

Nincs


**Rendszerparaméterek**

**Batch modulok egyéb adatai**

##### **3.52 S_0151_51 – Csatlakozó vonatok keresése (CsatlakozoVonatokQuery) ** **(usp_0151_selCsatlakozoVonatok) **

**Szolgáltatás feladatai**

Az adott szolgálati h elyen, csatlakozáshoz vonatok keresése

**Bemenő adatok**

  - Csatlakozó állomás belső azono sítója ( C s at lS zh I d)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 488/526|


**Működés**

A szerviz a bemenő paraméterben kapott adatokkal meghívja az
**usp_0151_selCsa** **tl** **akozoVonatok** eljárást, ami az adott szolgálati helyen, csatlakozáshoz
vonatokat keres.

Az eljárás olyan vo n atokat keres, amelyek megfelelnek a következő feltételeknek:

  - A vonat kategóriája A vagy B v agy C (T _ VKAT.vkat _ kod =’ A ’, vagy ’ B ’, vagy ’ C ’ )

(MGM_Menetvonal.vforg_kat    -    - T _VMU.vforgkat_id, T_VMU.vkat_id    -    T_VKAT.vkat_id)

  - A vonat állapota „vft   - be bevezetve ” ( P_VF T . k _vnall_id = 3)

  - A vonatnak van előrejelzett ( M GM_ TenyEsem `.` esem_tipus = ' B ' ) érkezési

(MGM_TenyEsem.esem_id = 1) vagy előrejelzett indulási
(MGM_TenyEsem.esem_id = 2) esem ény e az MGM _ Tenyesem táblában az aktuális
idő utáni 12 órában, a bemenő adato k ban kapott szolgálati helyen.

A feltételeknek megfelelő vonatok, kimenő adatokban meghatározott, adatait adja át a hívó
modulnak az eljár ás .

**Kimenő adatok**

   - Csatlakozó vonatok lista

`o` Menetvonal id (MenetvId) (MG M_T enyesem.mgm_mv_id)

`o` Vonatazonosító (VonatAzon) (S zá mozási rendszer kódja (55      - t nem kell

kiírni)+ ’ ’ +Vonatszám irányszámmal + ’ / ’ +vonat indulási dátuma
(éééé.hh.nn)) (MGM _ Tenyesem, P _ VFT, T _ OR táblák alapján)

`o` Előrejelzett érkezési ese m ény mgm      - es belső azonosítója
(ErkEsemId)(MGM_TenyEsem.mg m _teny_id) (Azoknál a vonatoknál
kitöltött, amelyeknek van a feltét ele knek megfelelő előrejelzett érkezési
eseménye)

`o` Előrejelzett indulási esem ény mgm      - es belső azonosítója
(IndEsemId)(MGMkitöltött, amelyeknek van a feltételeknek megfelelő, előrejelzett indulási _ TenyEsem.mg m_ teny _ id) (Azoknál a vonatoknál
eseménye)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 489/526|


Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_TenyEsem|Menetvonalak tény eseményei|
|MGM_Menetvonal|Menetvonalak fej adatai|
|P_VFT|Vonatforgalmi terv fej|
|T_OR|Országkódok|
|T_VKAT|Vonat kategóriák|
|T_VMU|Üzleti vonatnemek|


Nincs

Nincs


**Rendszerparaméterek**

**Batch modulok egyéb adatai**

##### **3.53 S_0151_52 – Csatlakozó vonat esemény adatainak lekérdezése** **(CsatlakozoVonatEsemenyQuer y) (u sp _01 5 1_selCsatlakozoVonatEsemeny) **

**Szolgáltatás feladatai**

A kapott vonatesemény ellenőrzésére és adatainak a lekérdezésére szolgál

**Bemenő adatok**

  - Előrejelzett vonatesemény mgm   - es bels ő az onosítója (EsemId)

  - Vonatazonosító (VonatAzon)

**Működés**

A szerviz a bemenő paraméterben kapott adatokkal meghívja az
**usp_0151_selCsa** **tl** **akozoVonatEsemeny** eljárást, amely ellenőrzi és lekérdezi az adott
esemény adatait az adatbázisból.

Az eljárás a követ k ező ellenőrzéseket végzi:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 490/526|



  - Ha a bemenő adatokban kapott es em ény m ár nem létezik az MGM_TenyEsem

táblában, vagy létezik,de az esemény ideje ür es, akkor hibát ad. A hibaüzenetben {0}
= VonatAzon.

  - Ha a bemenő adatokba n k apott e semény már nem előrejelzés
(MGM_TenyEsem `.` esem_tipus nem 'B' ), akk or az esemény típusának megfelelelő
hibát ad. A hibaüzenetben {0} = Vonat A zon.

  - Ha a bemenő adatokban kapott esem ény m ár szerepel 1 – Folyamatban vagy 2  
Teljesült állapotú csatlakozásban, a kk or hibát ad . A hibaüzenetben {0} = VonatAzon.

Ha az ellenőrzések során nem talált hibát az eljárás, akkor a kimenő adatokban meghatározott
paramétereket adj a á t a hívó modulnak.

Az esemény adatok a t az MGM _ Tenyesem táblából olvassa ki.

Amennyiben az M G M _ Tenyesem tábla vg _ id mezője nem tartalmaz vágány adatot, akkor az
I_TenyVagany t áb lában keres vágány adatot az eseményhez (indulási esemény
/MGM_TenyEsem .e sem_id = 2/ esetén az ind_vagany_id, érkezési esemény
/MGM_TenyEsem .e sem_id = 1/ esetén az erk_vagany_id mezőben). Ha ott sincs vágány adat
az eseményhez, a k kor az uf_getTervVagany függvény használatával a V_VSVG táblában
keres tervezett vág án yt.

**Kimenő adatok**

   - Várakozás típusa (VarakozasTipus) ( ’ B ’ – Bevárandó vonat, érk ezési es em én y

/MGM_TenyEsem.esem_id = 1/ esetén, ’ V ’ – Várakozó vonat indulási esemény
/MGM_TenyEsem.esem_id = 2/ esetén)

   - Előrejelzett esemény ideje (EsemIdo) (MGM _ TenyEsem.esem _ ido )

   - Az esemény vágányának mellék kódja (Vagany) (T_SHF.szh_mellek k o d )

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs







|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüz enet típusa|
|Ha a bemenő adatokban kapott esemény már nem|A {0} vonat előrejelzése megszűnt a szolgálati helyen.|UC_01_51_ERR_VONAT_E LOREJEZES_MEGSZUNT|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 491/526|






|létezik az MGM_TenyEsem táblában, vagy létezik,de az esemény ideje üres.|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ha az adott esemény érkezés (MGM_TenyEsem.esem_id= 1) és már nem előrejelzés (MGM_TenyEsem.esem_tip us nem 'B').|A {0} vonat már megérkezett a csatlakozás helyére.|UC_01_51_ERR_VONAT_M EGERKEZETT|Tárolt eljárás|Hiba|
|Ha az adott esemény indulás (MGM_TenyEsem.esem_id= 2) és már nem előrejelzés (MGM_TenyEsem.esem_tip us nem 'B').|A {0} vonat már elindult a csatlakozás helyéről.|UC_01_51_ERR_VONAT_E LINDULT|Tárolt eljárás|Hiba|
|Ha a bemenő adatokban kapott esemény már szerepel 1 – Folyamatban vagy 2- Teljesült állapotú csatlakozásban.|A {0} vonathoz már tartozik csatlakozás a szolgálati helyen.|UC_01_51_ERR_VONAT_M AR_CSATLAKOZASBAN|Tárolt eljárás|Hiba|


**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Csatlakozas|MGM csatlakozások|
|MGM_CsatlVonat|Csatlakozó vonatok|
|MGM_TenyEsem|Menetvonalak tény eseményei|
|T_SHF|Szolgálati hely fej adatok|
|P_VFT|Vonatforgalmi terv fej|
|T_OR|Országkódok|
|I_TenyVagany|Más rendszertől kapott tény vágány|
|V_VNSZ|Vonat menetrendi adatai|
|V_VSVG|Menetrendi vonat szolgálati helyéhez rendelt vágányok (naponként)|


Nincs


**Rendszerparaméterek**

**Batch modulok egyéb adatai**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 492/526|


Nincs
##### **3.54 S_0151_53 – Csatlakozás mentése (CsatlakozasMentesCommand) ** **(usp_0151_CsatlakozasMentes)**

**Szolgáltatás feladatai**

Csatlakozás mentése.

**Bemenő adatok**

  - Ábra belső azonosítója (AbraId)

  - Felhasználó azonosítója (Pass2User I d) ( M GM_Csatlakozas.mgm_mod_felh_id)

  - Csatlakozás belső azonosító ja ( C s at lak oza sId) (Új csatlakozásnál NULL)
(MGM_Csatlakozas.mgm_csatl_id)

  - Csatlakozás utolsó módosításán ak ideje ( U tols o ModIdo) (Új csatlakozásnál NULL)

(MGM_Csatlkozas.utolso_mod_ido)

  - Csatlakozó állomás belső azono sítója ( C s at lS zh I d) (MGM_Csatlkozas.csatl_szh_id)

  - Csatlakozó menetvonalak lista

`o` Működési mód (MukodesiMod) ( ’ U ’- Új, ’ M ’- Módosítás, ’ T ’- Törlés, ’ ’-Ni n cs

változás )

`o` Csatlakozó vonat belső azonosító (CsatlVonId) (Újonnan felvett v o natn ál

NULL) (MGM_CsatlVonat.mgm_csatl_von_id)

`o` Menetvonal id (MenetvId) (MGM_CsatlVonat.mgm_mv_id)

`o` Előrejelzett vonatesemény mgm     - es belső azonosítója ( E sem I d )
(MGM_CsatlVonat.mgm_teny_id)

`o` Vonatazonosító (VonatAzon): Az ablak nyitásakor S _ 0151 _ 50

`o` Várakozás típusa (VarakozasTipus): ’ B ’ – Bevárandó vonatn ál, ’ V ’ –

Várakozó vonatnál (MGM _ CsatlVonat.varakozas _ tipus)

`o` Csatlakozás típusa (CsatlTipus) (MGM_CsatlVonat.csatl_tipus)

`o` Csatlakozás ideje (CsatlIdo) (MGM _ CsatlVonat.csatl _ ido)

**Működés**

A szerviz a csatla k o z ás mentéséhez meghívja az usp_0151_CsatlakozasMentes tárolt eljárást,
a bemenő adatokban kapott paraméterekkel.

Az eljárás a követ k ező ellenőrzéseket végzi:

  - Az S_0151_39 – Munkahely fog lalá s ellenőr zés (uf _ checkMunkahelyFogl), függvény

hívásával ellenőrzi, hogy a bemenő ada tok ban k apott ábrát még a szerkesztést végző
felhasználó foglalja     - e. A függvény t a bem enő adatokban kapott felhasználó

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 493/526|


azonosítójával és az ábra belső az onosítójáva l hívja meg. Amennyiben a függvény
false értéket ad vissza, vagyis már nem a felh asználó foglalja az ábrát, akkor hibát ad.

  - Már létező csatlakozásnál (ha a bem enő ada tokban a Csatlakozás belső azonosítója

(CsatlakozasId) nem üres) és az MGM _ Cs at lk o zas.utolso _ mod _ ido nagyobb, mint a
bemenő adatokban kapott Csatlakozás utolsó módosításának ideje (UtolsoModIdo),
akkor hibát ad.

  - A csatlakozó menetvonalak list ában k apott esem ények közül, azoknál, amelyeknél a

Működési mód (MukodesiMod) ’ U ’-Ú j vagy ’ M ’- Módosítás és az Előrejelzett
vonatesemény mgm    - es belső azonosítójána k (EsemId) megfelelő esemény nem
létezik az MGM _ TenyEsem tábláb an, v agy létezik,de az esemény ideje üres, akkor
hibát ad. A hibaüzenetben {0} = Vonat A zon

  - A csatlakozó menetvonalak list ában k apott esem ények közül, azoknál, amelyeknél a

Működési mód (MukodesiMod) ’U’- Ú j vagy ’ M ’- Módosítás és az eseményhez
tartozó vonat állapota ne m „vft     - be bevezetve ”
(EsemId = MGM_TenyEsem.mgm_teny _id, M G M_TenyEsem. vft_id = P_VFT.vft_id,
_P_VFT.k_vnall_id <> 3), akkor hibát ad. A hibaüzenetben {0} = VonatAzon

  - A csatlakozó menetvonalak list ában k apott esem ények közül, azoknál, amelyeknél a

Működési mód (MukodesiMod) ’U’-Ú j vag y ’ M ’- Módosítás vagy ’ T ’- Törlés,
ellenőrzi, hogy előrejelzett esemén y ek     - e ( M GM_TenyEsem `.` esem_tipus = ' B ' ). Ha
nem, akkor az esemény típusának m egf elelelő hibát ad (Lásd Rendszerüzeneteknél).
(A hibaüzenetbe behelyezi a bem enő adato kban kapott vonatazonosítót. {0} =
VonatAzon)

  - A csatlakozó menetvonalak list ában k apott esem ények közül, azoknál, amelyeknél a

Működési mód (MukodesiMod) ’ U ’- Ú j és az Előrejelzett vonatesemény mgm    - es
belső azonosítójának (EsemId) megfelelő es e m ény már szerepel 1 – Folyamatban
vagy 2    - Teljesült állapotú csatlako zásban, akk o r hibát ad. A hibaüzenetben {0} =
VonatAzon

  - Ha valamelyik a Bevárandó vonatnál ( Var akozasTipus =’ B ’ ) az esemény ideje

(MGM_TenyEsem. esem_ido) nagyobb, m int az aktuális idő + 12óra, akkor hibát ad.
A hibaüzenetben:

`o` {0} = VonatAzon

`o` {1} = MGM_TenyEsem.esem_ido

  - Ha valamelyik a Várakozó v onatnál ( Var akozasTipus =’ V ’ ) az esemény ideje

(MGM_TenyEsem. esem_ido) nagyobb, m int az aktuális idő + 12óra, akkor hibát ad.
A hibaüzenetben:

`o` {0} = VonatAzon

`o` {1} = MGM_TenyEsem.esem_ido

Ha az ellenőrzések során nem talált hibát az eljárás, akkor a következőket végzi:

  - Ha a bemenő adatokban a C satlak ozás bel s ő azonosítója (CsatlakozasId) nincs

kitöltve, akkor az MGM_Csatlakozas táblába l ét rehoz egy új rekordot:

`o` mgm _ csatl _ id: Generált belső azonosító

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 494/526|


`o` csatl _ szh _ id: A kapott Csatlakozó állomás belső azonosítója (CsatlS zhI d )

`o` utolso _ mod _ ido: Aktuális idő

`o` mod _ felh _ id: A kapott Felhasználó azonosítója (Pass2UserId)

`o` utolso_erk_ido: A (nem törölt /Működési mód =’ M ’- Módosítás vag y ’ U ’- Új

vagy ’ ’- Nincs változás/) bevárandó vonatok közül a legkésőbb érkező vonat
érkezési ideje (MGM_TenyEsem. esem_ido)

`o` csatl _ allapot: ’ 1 ’    - Folyamatban

 - Ha a bemenő adatokban a Csatlak ozás bels ő azonosítója (CsatlakozasId) kitöltött,

akkor a csatlakozás adataiban, az elő ző pontban leírtak szerint felülírja az
utolso _ mod _ ido, mod _ felh _ id és az utolso _ er k_ ido mezőket.

 - Csatlakozó menetvonalak listába Működési módtól (MukodesiMod) a n k f apott ügg ően r ek or a következő műveleteket végzi: doknál az MGM _ CsatlVonat táblában

`o` Ha a bemenő adatokban egy rekordnál a Működési mód ’ T ’- Törlé s, ak k o r a

Csatlakozó vonat belső azonosítójának (CsatlVonId)
(MGM _ CsatlVonat.mgm _ csatl _ von _ id) megfelelő rekordot törli az
MGM _ CsatlVonat táblából.

`o` Ha a bemenő adatokban egy rekordnál a Működési mód ’ M ’- Mó d o sí t ás,

akkor a Csatlakozó vonat belső azonosítójának (CsatlVonId)
(MGM_CsatlVonat.mgm_csatl_von_id) megfelelő rekordot felülírja a kapott
adatokkal az MGM _ CsatlVonat táblában.

`o` Ha a bemenő adatokban egy rekordnál a Működési mód ’ U ’- Ú j, ak k o r a

kapott adatokkal egy új rekordot hoz létre az MGM _ CsatlVonat táblában.

`o` Ha a bemenő adatokban egy rekordnál a Működési mód ’ ’- Nincs v ált ozás,

akkor azt a rekordot változatlanul hagyja.

 - A csatlakozásba újonnan felvett (Működési mód ’ U ’- Új) várakozó vonatok

(VarakozasTipus =’ V ’ ) eseményénél, m ódosítja a forgalmi szabályozási művelet ok
kódot (MGM_TenyEsem.fsz_mod_ok) ’10’- re, ezzel jelezve, hogy ez egy
csatlakozásban érintett, várakozó v onatho z tartozó, esemény. (Egy várakozó vonat
törlésekor a forgalmi szabá l y ozási művelet átírása a
usp _ 0151 _ updCsatlakVaroVonatEl or ejelzes eljá ráson belül történik.)

 - A csatlakozásban lévő vára k ozó v onato k előrejelzésének módosításához, a

csatlakozás belső az onosító jával meghívja az
**usp_0151_updCsatlakVaroVonatE** **l** **o** **rej** **elzes** eljárást a következő esetekben:

`o` Egy újonnan rögzített csatlakozásnál

`o` Egy már létező csatlakozásnál (Ha a bemenő adatokban a Csatlak o zás bels ő

azonosítója (CsatlakozasId) kitöltött.) akkor, ha a bevárandó vonatok miatt
változott az utolsó érkezési idő (MGM_Csatlakozas.utolso_erk_ido) vagy a
csatlakozásban van új, vagy módosított, vagy törölt várakozó vonat (Működési
mód =’ M ’- Módosítás vagy ’ U ’- Új vagy ’ T ’- Törlés).

 - A csatlakozásból törölt (Működési m ód ’ T ’- Törlés) várakozó vonatok
előrejelzésének frissítéséhez vonaton k ént a k övetkező paraméterekkel hívja meg az
usp_0202_updMenetvElorejelzes2 t ár olt eljár ást:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 495/526|


`o` vft _ id: várakozó vonat belső azonosítója (MGM_TenyEsem táblából

mgm _ teny _ id alapján)
`o` vft _ szh _ index: csatlakozás helyének sorszáma a várakozó vonatnál

(MGM _ TenyEsem táblából)
`o` varhato_keses (percben): NULL
`o` forg_szab_muv_kod: 10 (ez jelzi, hogy várakozó vonat)

`o` a többi paraméter NULL, illetve jelzők esetén False ’

 - #88995 Az értesítések kezeléséhez ( pulzá láshoz ) a következő előkészítést végzi:

`o` Minden [100633-al törölv] [e] ~~bevárandó~~ vonathoz, a törölteket (Működési mó d ’T’
Törlés) kivéve egy rekordot rögzít az **MGM_ForgMuvErintettMenetvonal**
táblába, ha még ugyanezekkel az adatokkal nem létezik rekord:

        - abra _ id: A bemenő adatokban kapott Ábra belső azonosítója (AbraId)

        - mgm_mv_id: Az adott [100633-al törölve] ~~bevárandó~~ vonathoz tartozó

Menetvonal id (MenetvId)

        - szh_id: Csatlakozó állomás belső azonosítója (CsatlSzhId)

        - mgm_teny_id: Az adott [100633-al törölv] [e] ~~bevárandó~~ vonathoz tartozó

                                Előrejelzett vonatesemény mgm es belső azonosítója (EsemId)

        - fsz _ mod _ ok: ’ 10 ’

`o` A törölt [100633-al törölve] ~~bevárandó~~ vonatokhoz tartozó rekordokat, ak árm i l y en

abra_id       - val lettek rögzítve (de egy adott rekordnál a többi adatnak meg kell
felelnie az érintett törli az **MGM_ForgMuvErintettMenetvonal** [100633-al törölve] ~~bevárandó~~ vonatnak és az fsz táblából [#88995vége] _ mod _ ok =’ 10 ’ ),

 - #88986 A csatlakozásról és a csatl ak ozásba f el v ett menetvonalakról a következő módon
naplóbejegyzéseket készít az *MGM* *objektum* *események* *napló*
( **MGM_EsemenyNaplo)** táblába **.**

`o` A létrehozott vagy módosított csatlakozáshoz létrehoz egy r ek o r d ot a

következő adatokkal:

       - Napló belső azonosító (mgm_esemnapl_id) = automatikus

       - PASS2 felhasználó belső azonosító (pass2userid) = A bemenő

adatokban kapott felhasználó azonosítója (Pass2UserId)

       - Rögzítés időpontja (rogz_idopont) = Aktuális idő

       - Ábra belső azonosítója (abrabelső azonosítója (AbraId) _ id) = A bemenő adatokban kapott ábra

       - Objektum típusa (objektum _ tipus) = 4 – Csatlakozásra várás

       - Objektum belső azonosító (objektum _ id) = A létrehozott vagy

módosított csatlakozás belső azonosítója (mgm_csatl_id)

       - Művelet típusa (muvelet _ tipus) =

           - U: Csatlakozás létrehozása esetén

           - M: Csatlakozás módosítása esetén

       - Tevékenység típus kódja (tevekenyseg_tipus_kod) = 10 –

Csatlakozásra várás kezelése

       - Szolgálati hely belső azonosítója (szh_id) = Csatlakozó állomás belső

azonosítója (CsatlSzhId)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** [¶]


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 496/526|



       - Esemény típusa (esem _ id) = NULL

       - Esemény ideje (esem _ ido) = NULL

       - Objektum adatai (objektum_adat) (JSON) = NULL
`o` A csatlakozásba újonnan felvett, módosított vagy törölt bevárandó é s v ár ak o zó

vonatokról, (vagyis amelyeknél a Működési mód (MukodesiMod) ’ U ’- Új,
’ M ’- Módosítás ’ vagy ’ T ’- Törlés ’, valamint azokról a várakozó vonatokról is,
amelyeknél változott az előrejelzett indulási idő a csatlakozás helyéről) külön
külön rekordokat ír a következők szerint:

       - Napló belső azonosító (mgm_esemnapl_id) = automatikus

       - PASS2 felhasználó belső azonosító (pass2userid) = A bemenő

adatokban kapott felhasználó azonosítója (Pass2UserId)

       - Rögzítés időpontja (rogz _ idopont) = Aktuális idő

       - Ábra belső azonosítója (abrabelső azonosítója (AbraId) _ id) = A bemenő adatokban kapott ábra

       - Objektum típusa (objektum _ tipus) = 3 – Menetvonal

       - Objektum belső azonosító (objektumazonosítója Menetvonal id (MenetvId) _ id) = Az adott menetvonal belső

       - Művelet típusa (muvelet _ tipus) = M        - Módosítás

       - Tevékenység típus kódja (tevekenyseg_tipus_kod) =

           - 101: Csatlakozásba újonnan felvett bevárandó vonatnál

           - 102: Módosított bevárandó vonatnál (Ilyen jelenleg nem fordul

elő)

           - 103. Csatlakozásból törölt bevárandó vonatnál

           - 104: Csatlakozásba újonnan felvett várakozó vonatnál

           - 105: Módosított várakozó vonatnál

           - 106: Csatlakozásból törölt várakozó vonatnál

       - Szolgálati hely belső azonosítója (szh_id) = Csatlakozó állomás belső

azonosítója (CsatlSzhId)

       - Esemény típusa (esem _ id) =

           - 2: Olyan várakozó vonatnál, amelynél a művelet hatására

változott az indulási idő a csatlakozás helyéről

           - NULL: a többi esetben

       - Esemény ideje (esem _ ido) =

           - Indulási idő a csatlakozás helyéről: Olyan várakozó vonatnál,

amelynél a művelet hatására változott az indulási idő a
csatlakozás helyéről

           - NULL: a többi esetben

       - Objektum adatai (objektum_adat) (JSON) (minden adatnál a mező

nevét és értékét tartalmazza) =

           - Csatlakozás belső azonosítója (mgm_csatl_id)

           - Várakozó vonatoknál a csatlakozás ideje (csatl_ido)

 - Az **MGM_EsemenyNaplo** táblába beír t r ek or d okról a PBI - nak történő átadáshoz a

következő módon regisztrációt végez a PbiR eg táblába:

`o` pbi_tipus: ” MGM_Naplo ”
`o` pbi_query_param1: MGM_Esemeny N aplo. mgm_esemnapl_id
`o` pbi_query_param2: NULL
`o` pbi_kuldes_szamlalo: NULL

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 497/526|


`o` pbi _ create _ timestamp: Aktuális idő

#88986vége

**Az usp_0151_upd** **C** **satlakVaroVonatElorejelzes eljárás működése**

Megkeresi a beme n ő adatokban kapott csatlakozáshoz tartozó várakozó vonatokat.
Ha a csatlakozás állapota ’ 1 ’ - Folyamatban vagy ’ 2 ’– Teljesült, akkor a várakozó
vonatokkal a köve t k e ző műveleteket végzi:

  - Kiszámolja a vonatnál a csatlak ozá s hel y én a csatlakozás miatti legkorábbi indulási

időt = az utolsó bevárandó vonat ér k ez ési ideje + a várakozó vonatnál megadott
csatlakozási idő

  - A Vonatelorejelzés táblában a csatlak ozá s hel y é nél:

`o` Ha a módosítás ok kódja irányítói bevezetés (1 vagy 2), akkor azt tö r l i .
`o` Ha a várható indulási idő nem egyezik meg a csatlakozás miatti l eg ko ráb b i

indulási idővel, akkor ezzel felülírja várható indulási időt és a módosítás ok
kódját törli.

  - Ha a vonat még nem indult el a cs atlak ozás helyéről és az előrejelzett indulás idő

kisebb, mint a csatlakozás miat ti legkor ábbi indulási idő, akkor a következő
paraméterekkel hívja meg az usp _ 02 02_updMen etvElorejelzes2 tárolt eljárást:

`o` vft _ id: várakozó vonat belső azonosítója
`o` vft _ szh _ index: csatlakozás helyének sorszáma a várakozó vonatnál
`o` varhato_keses (percben): a csatlakozás miatti legkorábbi indulási i d ő – az

előrejelzett indulási idő (a csatlakozás helyétől az előrejelzés végéig, ezzel az
értékkel módosítja az indulás és érkezés időadatokat)
`o` forg _ szab _ muv _ kod: 10 (ez jelzi, hogy várakozó vonat)

`o` a többi paraméter NULL, illetve jelzők esetén False ’

  - Ha a vonat még nem indult el a cs atlak ozás helyéről és az előrejelzett indulás idő

megegyezik a régi várható indulá si idővel, de nagyobb, mint a csatlakozás miatti
legkorábbi indulási idő (az új v ár ható indul ási idő), akkor megvizsgálja, hogy
csökkenthető    - e az indulási idő. Ezt úgy teszi, hogy a következő idők közül veszi a
legnagyobbat, és ha az eltér a régi indulási időtől, akkor a különbséggel frissíti az
előrejelzést:

`o` Ha van érkezési idő a csatlakozás helyére, akkor az érkezési idő + t ar t ó zk od ási

idő
`o` Személyszállító vonat (A, B kategóriájú) esetén a menetrend szeri n t i i n d u l ási

idő
`o` Új várható indulási idő (csatlakozás miatti legkorábbi indulási idő
Az előrejelzés frissítéséhez a következő paraméterekkel hívja meg az
usp _ 0202 _ updMenetvElorejelzes2 tárolt eljárást:

`o` vft _ id: várakozó vonat belső azonosítója
`o` vft _ szh _ index: csatlakozás helyének sorszáma a várakozó vonatnál
`o` varhato_keses (percben): a kiszámolt különbség
`o` szemely_jelzo : Személyvonat esetén True egyébként False
`o` forg _ szab _ muv _ kod: 10 (ez jelzi, hogy várakozó vonat)
`o` IF_4004_kuldes = 1 [#105188]
`o` a többi paraméter NULL, illetve jelzők esetén False ’

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 

-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 498/526|



  - #88995 Ezen kívül az eljárás ellenőr zi, hogy a csatlakozásra várás miatt módosult
előrejelzés kapcsán kell     - e pulzáltat ni az ér intett menetvonalat egy későbbi ábrán. Az
eljárás az **MGM_ForgMuvErintet** **t** **Menet** **von** **al** tábla alapján állapítja meg az
érintettséget, mely esetén ábr ánk ént új rekordot vesz fel az
**MGM_PulzaloMenetvonal** tábláb a, ha az adott ábrára vonatkozóan azok még nem
léteznek aktív (nem tudomásul vett és nem töröl t) állapotban. Ilyen esetben „Irányítói
beavatkozás ” ok miatt (kivalto _ ok =1) tör téni k p ulzáltatás. [ #88995 VÉGE]

Ha a csatlakozás ál lapota nem ’ 1 ’ - Folyamatban és nem ’ 2 ’– Teljesült, akkor várakozó
vonatonként a köv e tkező paraméterekkel hívja meg az usp_0202_updMenetvElorejelzes2
tárolt eljárást az el ő rejelzés frissítéséhez:

`o` vft _ id: várakozó vonat belső azonosítója
`o` vft _ szh _ index: csatlakozás helyének sorszáma a várakozó vonatnál
`o` varhato_keses (percben): NULL
`o` forg_szab_muv_kod: 10 (ez jelzi, hogy várakozó vonat)
`o` IF_4004_kuldes = 1 [#105188]
`o` a többi paraméter NULL, illetve jelzők esetén False ’

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs












|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüz enet típusa|
|Ha az uf_checkMunkahelyFogl függvény false értéket ad vissza, vagyis már nem a szerkesztést végző felhasználó foglalja az ábrát|Érvénytelen munkahely foglalás, az adatok mentése sikertelen!|UC_01_51_ERR_ERVENYT ELEN_FOGLALAS|Tárolt eljárás|Hiba|
|Már létező csatlakozásnál, ha az MGM_Csatlkozas.utolso_mo|Az adatokat más felhasználó módosította!|UC_01_00_ERR_ADATOKA T_MAS_FELH_MODOSITO TTA|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 499/526|






|d_ido nagyobb, mint a bemenő adatokban a Csatlakozás utolsó módosításának ideje (UtolsoModIdo)|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|A csatlakozó menetvonalak listában kapott események közül, azoknál, amelyeknél a Működési mód (MukodesiMod) ’U’-Új vagy ’M’-Módosítás és az Előrejelzett vonatesemény mgm-es belső azonosítójának (EsemId) megfelelő esemény nem létezik az MGM_TenyEsem táblában, vagy létezik,de az esemény ideje üres|A {0} vonat előrejelzése megszűnt a szolgálati helyen.|UC_01_51_ERR_VONAT_E LOREJEZES_MEGSZUNT|Tárolt eljárás|Hiba|
|A csatlakozó menetvonalak listában kapott események közül, azoknál, amelyeknél a Működési mód (MukodesiMod) ’U’-Új vagy ’M’-Módosítás és az eseményhez tartozó vonat állapota nem „vft-be bevezetve” (P_VFT.k_vnall_id <> 3)|A {0} vonat már nem közlekedik.|UC_01_51_ERR_VONAT_N EM_KOZLEKEDIK|Tárolt eljárás|Hiba|
|Ha az adott esemény érkezés (MGM_TenyEsem.esem_id= 1), a Működési mód az eseménynél (MukodesiMod) ’U’-Új vagy ’M’-Módosítás vagy ’T’-Törlés és az esemény már nem előrejelzés (MGM_TenyEsem.esem_tip us nem 'B').|A {0} vonat már megérkezett a csatlakozás helyére.|UC_01_51_ERR_VONAT_M EGERKEZETT|Tárolt eljárás|Hiba|
|Ha az adott esemény indulás (MGM_TenyEsem.esem_id= 2), a Működési mód az eseménynél (MukodesiMod) ’U’-Új vagy ’M’-Módosítás vagy ’T’-Törlés és az esemény már nem előrejelzés (MGM_TenyEsem.esem_tip us nem 'B').|A {0} vonat már elindult a csatlakozás helyéről.|UC_01_51_ERR_VONAT_E LINDULT|Tárolt eljárás|Hiba|
|A csatlakozó menetvonalak listában kapott események|A {0} vonathoz már tartozik csatlakozás a szolgálati helyen.|UC_01_51_ERR_VONAT_M AR_CSATLAKOZASBAN|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 500/526|






|közül, azoknál, amelyeknél a Működési mód (MukodesiMod) ’U’-Új és a kapott esemény már szerepel 1 – Folyamatban vagy 2- Teljesült állapotú csatlakozásban.|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ha valamelyik Bevárandó vonatnál (VarakozasTipus=’B’) az előrejelzett esemény ideje (MGM_TenyEsem. esem_ido) nagyobb, mint az aktuális idő + 12óra|A {0} vonat várható érkezési ideje {1} későbbi, mint a grafikonon kezelt időszak vége.|UC_01_51_ERR_KESON_E RKEZO_VONAT|Tárolt eljárás|Hiba|
|Ha valamelyik Várakozó vonatnál (VarakozasTipus=’V’) az előrejelzett esemény ideje (MGM_TenyEsem. esem_ido) nagyobb, mint az aktuális idő + 12óra|A {0} vonat várható indulási ideje {1} későbbi, mint a grafikonon kezelt időszak vége.|UC_01_51_ERR_KESON_IN DULO_VONAT|Tárolt eljárás|Hiba|
||||||


**Érintett adattáblák/kódtáblák**







|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Csatlakozas|Csatlakozások|
|MGM_CsatlVonat|Csatlakozó vonatok|
|MGM_Menetvonal|Menetvonalak MGM alapadatai|
|MGM_Tenyesem|Menetvonalak tény eseményei|
|P_VFT|Vonatforgalmi terv fej|
|VonatElorejelzes|Vonat előrejelzés|
|T_VMU|Üzleti vonatnemek|
|T_VKAT|Vonat kategóriák|
|P_VTS|Vonatforgalmi terv szolgálati helyei|
|#88995MGM_ForgMuvE rintettMenetvonal|Forgalmi szabályozási műveletben érintett menetvonalak|
|#88986MGM_EsemenyN|MGM objektum események|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 501/526|


|aplo|napló|
|---|---|
|#88986PbiReg|Regisztrációs tábla PBI-nak adatátadáshoz|


#88980vége
##### **3.55 [96901] S_015 1 _54 – Új előrejelzés készítéshez menetrend letöltése** **(UjEloreJelzesMenetrendQuery ) ** **(core.usp_0151_selUjEloreJelze sMe n e tr e nd) **

**Szolgáltatás feladatai**

A szolgáltatás a kapott adatokkal és a ’ FelhasznVvId ’= 11 adattal meghívja a
core.usp_0151_selU j EloreJelzesMenetrend eljárást.

Az eljárás egy ad o t t menetvonalhoz az adott ábrát érintő menetrendi adatokat adja vissza a
hívó kliensnek.

**Bemenő adatok**

- **’** **MgmMvId** **’** - a keresett menetrend belső MGM menetvonal azonosítója
*(* *’* *MgmTervEsem.mgm* *_* *mv* *_* *id* *’* *adata)* .

- **’** **AbraId** **’** - az érintett ábra belső azonosítója az érintett szolgálati helyek
meghatározásához

- **’** **FelhasznVvId** **’=** **11** (a szolgáltatás kiegészíti az eljárás hívásához).

Az eljárás a kapott ’ MgmMvId ’ alapján kikeresi az MGM _ TervEsem táblából a legkorábbi és

’ ’

Meghívja az usp _ 0 1 51 _ selMenetrendiAdatok eljárást, ahol a bemenő adatok:

- ' MisKod '= NUL L, FIX

- ' VonalId '=- 1, FIX

- ' AbraId '= a **kap** **o** **tt** ’ AbraId ’

- ' IdoszakKezd '= a **megállapított** legkorábbi idő

- ' IdoszakVeg '= a **megállapított** legkésőbbi idő

- ' SzhidArray '= NULL, FIX

- ' VForgkatIdA rr ay '= NULL, FIX

- ' VForgNemKo d Array '= NULL, FIX

- ' MenetvTulId Ar ray '= NULL, FIX

- ' VonatszamAr ra y = N ' [{ " Vonatszamtol " : **a kapott** **’** **Vonatszam** **’**, " Vonatszamig " :null}] ',

- ' ElteresTol '= NULL, FIX

- ' ElteresIg '= NU L L, FIX

- ' FoKodArray '= NULL, FIX

- ' SKodArray '=N ULL, FIX

- ' Idohenger '= 1, F IX

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** **’SzhidArray’**  - az ábra által érintett szolgálati helyek belső
azonosítója *(’MgmTervEsem.szh_id’ adatai)* pontosvesszővel
elválasztva.

**törölt:** <#> **’epaiParamXmlDoc’**  
**törölt:**, illetve megállapítja a kapott ’SzhId’-nak megfelelő
menetrendi adatokat az ’MgmTervEsem’ táblából


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 502/526|



- ' FelhasznVvId '= 11, FIX.

- ’ VForgNemKo d’

- ’ MenetvAzon ’

- ’ VNTTId ’

- ’ MenetvTulId ’

- ’ UzemeltVvId ’

- ’ Kozlekedo ’

- ’ Viszonylat ’

- ’ MenetvId ’

- ’ Feloszlatott ’

- ’ VonatszamKer e t ’

- ’ Esemenyek ’ l i st a, [{ }] jelek között, vesszővel elválasztva:
`o` ‘ VonatszamIrszam ’

`o` ‘ SzhId ’

`o` ‘ SzhIndex ’

`o` ‘ EsemIdo ’

`o` ‘ ElozoEsemIdokoz ’

`o` ‘ KovEsemIdokoz ’

`o` ‘ EsemSorszam ’

`o` ‘ EsemTipId ’
`o` ‘ SzakaszBeKiJel ’

`o` ‘ BeKiKapcsEsemJel ’
`o` ‘ MenetvIndCelJel ’

`o` ‘ TervVaganyId ’
`o` ‘ HelytVaganyraInd ’
`o` ‘ FoglVagany ’
`o` ‘ Korjelolo ’
`o` ‘ EsemAllVegpont ’
`o` ‘ MisrolKod ’

`o` ‘ VonalrolId ’

`o` ‘ AbrarolId ’

`o` ‘ MisraKod ’

`o` ‘ VonalraId ’

`o` ‘ AbraraID ’

`o` ‘ Irany ’

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** Az egyes adatelemek megállapításának részleteit az
usp_0151_selMenetrendiAdatok leírása tartalmazza.¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 503/526|


Nincsenek.

**Rendszerüzenetek**

Nincsenek.

**Érintett adattáblák/kódtáblák**

Nincsenek.
##### **3.56 [#88980 ] S_015 1 _55 – Csatlakozás törlése (CsatlakozasTorlesCommand) ** **(usp_0151_CsatlakozasTorles) **

**Szolgáltatás feladatai**

Csatlakozás törlése.

**Bemenő adatok**

  - Ábra belső azonosítója (AbraId)

  - Felhasználó azonosítója (Pass2User I d) ( M GM_Csatlakozas.mgm_mod_felh_id)

  - Csatlakozás belső azonosító ja ( C s at lak oza sId) (Új csatlakozásnál NULL)
(MGM_Csatlakozas.mgm_csatl_id)

**Működés**

A szerviz a csatla k o z ás törléséhez meghívja az usp_0151_CsatlakozasTorles tárolt eljárást, a
bemenő adatokban kapott paraméterekkel.

Az eljárás a követ k ező ellenőrzéseket végzi:

  - Az S_0151_39 – Munkahely fog lalá s ellenőr zés (uf _ checkMunkahelyFogl), függvény

hívásával ellenőrzi, hogy a bemenő ada tok ban kapott ábrát még a szerkesztést végző
felhasználó foglalja     - e. A függvény t a bem enő adatokban kapott felhasználó
azonosítójával és az ábra belső az onosítójáva l hívja meg. Amennyiben a függvény
false értéket ad vissza, vagyis már nem a fel használó foglalja az ábrát, akkor hibát ad.

  - Ha a csatlakozás állapota nem 1   - F ol y am atb an, akkor hibát ad.

  - Ha a csatlakozás állapota 1 -F ol y am atb an és a csatlakozásban lévő bevárandó

vonatoknál valamelyik már megé r k eze tt a csatlakozás helyére vagy a várakozó
vonatok közül valamelyik m ár elindult a csatlakozás helyéről
(MGM_TenyEsem `.` esem_tipus <> 'B' ), akk or hibát ad

Ha az ellenőrzések során nem talált hibát az eljárás, akkor a következőket végzi:

  - Az MGM_Csatlakozas táblában a cs at lak ozá s állapotát 3   - Felhasználó által törölt

értékre állítja és felülírja az utolso _ mod _ ido, m o d _ felh _ id mezőket.

  - A csatlakozásban lévő, a csatla k ozás hel y ér ől még el nem indult, várakozó vonatok

előrejelzésének frissítéséhez, a csatlak ozás belső azonosítójával meghívja az
usp _ 0151 _ updCsatlakVaroVonatEl or ejelzes eljá rást

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 504/526|



 - #88995 Az értesítések kezelése miatt, m inden 100633-al törölve ~~bevárandó~~ vonathoz tartozó
rekordot, akármilyen abra _ id   - val let t r ög zít v e (de a rekord többi adata megfelel az
adott 100633-al törölv e ~~bevárandó~~ v onatnak és az fsz_mod_ok =’ 10 ’ ), töröl az
**MGM_ForgMuvErintettMenetvona** **l** táblából [#88995vége]

 - #88986 A csatlakozásról és változott m enetvonalakról a következő módon
naplóbejegyzéseket készít az *MGM* *objektum* *események* *napló*
( **MGM_EsemenyNaplo)** táblába **.**

`o` A törölt csatlakozáshoz létrehoz egy rekordot a következő adatokka l:

       - Napló belső azonosító (mgm_esemnapl_id) = automatikus

       - PASS2 felhasználó belső azonosító (pass2userid) = A bemenő

adatokban kapott felhasználó azonosítója (Pass2UserId)

       - Rögzítés időpontja (rogz _ idopont) = Aktuális idő

       - Ábra belső azonosítója (abrabelső azonosítója (AbraId) _ id) = A bemenő adatokban kapott ábra

       - Objektum típusa (objektum _ tipus) = 4 – Csatlakozásra várás

       - Objektum belső azonosító (objektum _ id) = A létrehozott vagy

módosított csatlakozás belső azonosítója (mgm _ csatl _ id)

       - Művelet típusa (muvelet _ tipus) = T        - Törlés

       - Tevékenység típus kódja (tevekenyseg_tipus_kod) = 10 –

Csatlakozásra várás kezelése

       - Szolgálati hely belső azonosítója (szh_id) = Csatlakozó állomás belső

azonosítója (CsatlSzhId)

       - Esemény típusa (esem _ id) = NULL

       - Esemény ideje (esem _ ido) = NULL

       - Objektum adatai (objektum_adat) (JSON) = NULL
`o` Azokról a várakozó vonatokról, amelyeknél a csatlakozás törlésév el v ált o zo tt

az előrejelzett indulási idő a csatlakozás helyéről, külön külön rekordokat ír a
következők szerint:

       - Napló belső azonosító (mgm_esemnapl_id) = automatikus

       - PASS2 felhasználó belső azonosító (pass2userid) = A bemenő

adatokban kapott felhasználó azonosítója (Pass2UserId)

       - Rögzítés időpontja (rogz _ idopont) = Aktuális idő

       - Ábra belső azonosítója (abrabelső azonosítója (AbraId) _ id) = A bemenő adatokban kapott ábra

       - Objektum típusa (objektum _ tipus) = 3 – Menetvonal

       - Objektum belső azonosító (objektumazonosítója Menetvonal id (MenetvId) _ id) = Az adott menetvonal belső

       - Művelet típusa (muvelet _ tipus) = M        - Módosítás

       - Tevékenység típus kódja (tevekenyseg_tipus_kod) =

           - 105: Módosított várakozó vonat

       - Szolgálati hely belső azonosítója (szh_id) = Csatlakozó állomás belső

azonosítója (CsatlSzhId)

       - Esemény típusa (esem _ id) =

           - 2:           - Indulás

       - Esemény ideje (esem _ ido) =

           - Előrejelzett indulási idő a csatlakozás helyéről

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 505/526|



        - Objektum adatai (objektum_adat) (JSON) (minden adatnál a mező

nevét és értékét tartalmazza) =

            - Csatlakozás belső azonosítója (mgm_csatl_id)

            - Várakozó vonatoknál a csatlakozás ideje (csatl_ido)

  - Az **MGM_EsemenyNaplo** táblába beír t r ek or d okról a PBI   - nak történő átadáshoz a

következő módon regisztrációt végez a PbiR eg táblába:

`o` pbi_tipus: ” MGM_Naplo ”
`o` pbi_query_param1: MGM_Esemeny N aplo. mgm_esemnapl_id
`o` pbi_query_param2: NULL
`o` pbi_kuldes_szamlalo: NULL
`o` pbi _ create _ timestamp: Aktuális idő [ #88986vége]

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs












|Rendszerüzenetek|Col2|Col3|Col4|Col5|
|---|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Mnemonik|Üzenetet előállító réteg|Hibaüz enet típusa|
|Ha az uf_checkMunkahelyFogl függvény false értéket ad vissza, vagyis már nem a szerkesztést végző felhasználó foglalja az ábrát|Érvénytelen munkahely foglalás, az adatok mentése sikertelen!|UC_01_51_ERR_ERVENYT ELEN_FOGLALAS|Tárolt eljárás|Hiba|
|Ha a csatlakozás állapota nem 1 - Folyamatban|A csatlakozás már nem törölhető.|UC_01_51_ERR_CSATL_NE M_TOROLHETO|Tárolt eljárás|Hiba|
|Ha a csatlakozás állapota 1- Folyamatban és a csatlakozásban lévő bevárandó vonatoknál valamelyik már megérkezett a csatlakozás helyére vagy a|A csatlakozás már nem törölhető.|UC_01_51_ERR_CSATL_NE M_TOROLHETO|Tárolt eljárás|Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 506/526|


**Érintett adattáblák/kódtáblák**







|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_Csatlakozas|Csatlakozások|
|MGM_CsatlVonat|Csatlakozó vonatok|
|MGM_Menetvonal|Menetvonalak MGM alapadatai|
|MGM_Tenyesem|Menetvonalak tény eseményei|
|#88995MGM_ForgMu vErintettMenetvona l|Forgalmi szabályozási műveletben érintett menetvonalak|
|#88986MGM_Esemen yNaplo|MGM objektum események napló|
|#88986PbiReg|Regisztrációs tábla PBI-nak adatátadáshoz|

##### **3.57 [88977] S_015 1 _56 - Vonat előztetés és találkozás tervezése szolgáltatás ** **(VonatEloztetesTalalkozasCommand, ** **core.usp_0151_updVonatEloztetesTalalkozas)**

**Szolgáltatás feladatai**

A szolgáltatá s a klienstől kapott bemenő adatokkal meghívott
core.usp_0151_ **updVonatEloztetesTalalkozas** eljárással végzi el a **két menetvonalat** érintő
forgalomszabályo zás i műveletek (vonat előztetés és találkozás) végrehajtási feltételeinek
**ellenőrzését** és a szükséges előkészítő adatok **mentését** .

Az eljárás a siker es **ellenőrzések** után meghívja az előrejelzés létrehozását, módosítását és
törlését végző usp_0202_ **updMenetvElorejelzes2** és a menetvonal feloldását végző
core.usp_0151_ **setMenetvForgSzabFoglalas** **tárolteljárást** .

- **’** **MunkahelyId** **’** - Az érintett munkahely belső azonosítója.

- **’** **AbraId** **’** - A z é rintett ábra belső azonosítója.

- **’** **SzhId** **’** - Az ér i ntett szolgálati hely belső azonosítója.

- **’** **MenetvLista** **’** - Az érintett menetvonalak és adatainak listája *(egyelőre fix 2 menetvonal*
*egy elsődleges és egy másodlagos)* .

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** 


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 507/526|


**Adatai** :
`o` „ **MenetvId** "  - az érintett menetvonal MGM menetvonal azonosítója
`o` " **ModOk** "  - a módosítás oka, jelezve az érintett menetvonal „szerepét ” is.
Lehetséges **értékei** :
      - **21**       - vonat előztetés, elsődleges (előre küldendő) vonat.
      - **22**       - vonat előztetés, másodlagos (előzendő) vonat.
      - **31**       - vonattalálkozás (keresztezés), elsődleges (bevárandó) vonat.
      - **32**       - vonattalálkozás (keresztezés), másodlagos (várakozó) vonat.
`o` " **UjErkIdo** "  - A módosított érkezési idő. Lehet NULL is.
`o` „ **EredetiErkIdo** ”  - Az eredeti érkezési idő.
`o` " **UjIndIdo** "  - A módosított indulási/áthaladási idő. Lehet NULL is.
`o` „ **EredetiIndIdo** ”  - Az eredeti indulási/áthaladási idő.
`o` " **SzhIndex** "  - A szolgálati hely és esemény Vft  - n belüli sorszáma.

- ’ EpaiParamX m lDoc ’

**Működés**

- **Meghívja** az **uf_checkMunkahelyFogl** függvényt, amely ellenőrzi, hogy az adott
**munkahely** **más** felhasználó által van  - e **lefoglalva** .
`o` **Bemenő** adatok:

      - **’** **Pass2UserId** **’**

      - **’** **AbraId** **’**
`o` Ha a függvény **’** **FALSE** **’** értéket ad vissza, akkor az eljárás a kliensnek
UC_01_51_ERR_ERVENYTELEN_FOGLALAS „151005: Érvénytelen munkahely
foglalás, az adatok mentése sikertelen! ” **üzenetet** ad vissza, nem történik meg a
menetvonalak foglalása.

- **Ellenőrzi**, hog y **bármelyik** **menetvonal** más által **foglalt** **-** **e** ( ’ MenetvId ’ alapján a
Ha igen, akkor ’ MunkahelyId ’ <> ' UC ’_ MGM01 _ 51 __ MenetvonalERR _ MENETV ’ tábla _ FOGLALT ’ ter _ munkahely ' hibát ad. _ id ’ adatával).

`o` **Ellenőrzi**, hogy a menetvonalnak van  - e **előrejelzett eseménye** az adott szolgálati
helyre *(* *’* *VonatElorejelzes.erk* *_* *jelzo* *’* *VAGY* *’* *ind* *_* *jelzo* *’* *=* *„B* *”* *)* .
100977 Ha az adott ’ szh _ index ’ alapján az ’ erk _ jelzo ’ = „E ”, akkor az előző olyan
rekordnál ellenőrzi, ahol ’ Ha az szh _ index ’ ind ’ _- 1. jelzo ’ = „K ”’ mgm, akkor a következő olyan rekordnál ellenőrzi, ahol _ mv _ id ’ és az ’ szh _ id ’ azonos ÉS ’ szh _ index ’ =
’ Ha van, akkor mgm _ mv _ id ’ és az ' UC_01_51_ERR_TENYADAT_LETEZIK ’ szh _ id ’ azonos ÉS ’ szh _ index ’ = ’ szh ' üzenetet ad. _ index ’ + 1. [100977 vége]
`o` **Ellenőrzi**, hogy a vonat **szerepel**  - e az adott szolgálati helyen **más** előztetésben,
keresztezésben vagy csatlakozásban *(MGM* *_* *TenyEsem.fsz* *_* *mod* *_* *ok* *’* *=* *4, 5, vagy 10)* .
      - Ha az fszüzenetet ad. _ mod _ ok ’ = 21, akkor UC_01_51_ERR_TOBB_ELOZTETES
      - Ha az fszüzenetet ad. _ mod _ ok ’ = 31, akkor UC_01_51_ERR_TOBB_KERESZTEZES
      - Ha UC_01_51_ERR_VONAT_MAR_CSATLAKOZASBAN üzenetet ad, ahol aaz fsz _ mod _ ok ’ = 10, akkor
{0} az érintett vonat száma.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 508/526|


`o` 100544 **Ellenőrzi**, hogy az előztetés **helye** **nem** lehet a menetvonal **kiindulási**
szolgálati helye ( ’ SzhId ’  ’ MGM_TenyEsem.szh_index = 1 **ÉS**
’ MGM_TenyEsem.vonat_sszam ’ = 1).
Ha az, akkor UC_05_51_ERR_HELYBOL_INDULO_VONAT hibaüzenetet ad
vissza.
`o` **Módosítja** a **’** **VonatElorejelzes** **’** táblában a menetvonal adatait, ha van új indulási
idő ( ’ **UjIndIdo** **’** **<> NULL** ):
    - 100907
Ha az új érkezési idő nem NULL:

     - Ha P _ VTS táblában levő esemény idő és az újeseményidő közötti eltérés a
küszöbérték rendszerparaméternél (nagyobb, akkor ’ UC _ 01 _ 51 _ ERR _ FSZ ’ forg _ KUSZOBERT _ szab _ kuszob ’’ hibaüzenetet a) abszolút érté d.k ben

     - Ha nem nagyobb, akkor az eltéréssel módosítja a kapott új érkezési idő
( ’ UjErkIdo ’ ) értékét (egyelőre a változóban).

    Ha az eredeti indulási idő és az új indulási idő sem NULL:

     - Ha P _ VTS táblában levő esemény idő és az újeseményidő közötti eltérés a
küszöbérték rendszerparaméternél (nagyobb, akkor ’ UC _ 01 _ 51 _ ERR _ FSZ ’ forg _ KUSZOBERT _ szab _ kuszob ’’ hibaüzenetet a) abszolút érté dk . ben

     - Ha nem nagyobb, akkor az eltéréssel módosítja a kapott új indulási idő
( ’ UjIndIdo ’ ) értékét (egyelőre a változóban). [ 100907 vége]
    - **’** **menetido** **_** **perc** **’** ( ’ vft _ id ’     - 1 rekordnál)
Ha **változott** az **érkezési** idő *(* *’* *erk* *_* *ido <>* *’* *UjErkIdo* *’* *)* VAGY az **áthaladási** idő
*(* *’* *ind* *_* *ido <>* *’* *UjIndIdo* *’* *)*, akkor az előző szolgálati helynél ( ’ vft _ id ’        - 1) módosítja
a **menetidő** értékét az eredeti és az új idő különbségével.
    - **’** **erk** **_** **ido** **’** = ’ UjErkIdo ’
    - **’** **erk** **_** **jelzo** **’** = „B ”
    - **’** **ind** **_** **ido** **’** **=** ’ UjIndIdo ’
    - **’** **kapcs** **_** **mv** **_** **ido** **’** = ’ UjIndIdo ’ . *(Ehhez van igazítva a másodlagos menetvonal*
*indulási ideje. Ha ez változik, annak is frissíteni kell az előrejelzését. Ezt az*
*updMenetvElorejelzes2 írja.)*
    - **’** **tartozkodas** **_** **perc** **’** = ha az ’ UjErkIdo ’ <> NULL, akkor ’ UjIndIdo ’     
’ ’
UjErkIdo .
    - **’** **megall** **_** **jelzo** **’**     - ha az ’ UjErkIdo ’ <> NULL.

     - Ha **NULL** volt, akkor 2     - „ **irányítói** rendkívüli megállás ” lesz.

     - Ha 0     - „ **forgalmi** megállás ” volt, akkor 3     - „ **irányítói** áthaladás **forgalmi**
megállás **helyett** ” lesz.

     - Ha 1     - „ **kereskedelmi** megállás ” volt, akkor 4     - „ **irányítói** áthaladás
**kereskedelmi** megállás **helyett** ” lesz.
    - **’** **mod** **_** **ok** **’** = ’ ModOk ’ .

`o` **Rendkívüli áthaladás** kezelése *(* *’* *VonatElorejelzes.erk* *_* *ido* *’* *<> NULL* ***ÉS*** *a kapott*
*’* *UjErkIdo* *’* *=* *NULL)* :

    - **Módosítja** a **’** **P** **_** **VTS** **’** tábla adatait:

     - **Törli** az előrejelzett **érkezési** **időt** *(* *’* *erk* *_* *tenyido* *’* *=* *NULL)* **ÉS** az érkezési
esemény „ **típusát** ” *(* *’* *erk* *_* *adat* *_* *jelzo* *’* *=* *NULL)* .

     - **Módosítja** az előrejelzett **indulási** idő értékét a kapott új időre *(* *’* *ind* *_* *tenyido* *’*
*=* *’* *UjIndIdo* *’* *)* .

     - **Módosítja** a megállás **célja** értékét *(vft_szh_megall_jelzo)* :
 Ha 0     - „ **forgalmi** **megállás** ” volt, akkor 3     - „ **irányítói** **átha** **l** **a** **dá** **s**

forgalmi megállás helyett ” lesz.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 509/526|


 Ha 1     - „ **kereskedelmi** megállás ” volt, akkor 4     - „ **irányítói** **átha** **l** **a** **dá** **s**

kereskedelmi megállás helyett ” lesz.

    - **Módosítja** az **’** **MGM** **_** **TenyEsem** **’** tábla adatait *(az* *’* *mgm* *_* *teny* *_* *id* *’* *alapján)* :

     - **Törli** az előrejelzett **érkezési** **időt** *(* *’* *esem* *_* *id* *’* *=* *1*  *’* *esem* *_* *ido* *’* *=* *NULL)* **ÉS**
az érkezési esemény „ **típusát** ” *(* *’* *esem_tipus* *’* *=* *NULL)* .

     - **Módosítja** az előrejelzett **indulási** esemény adatait:
 Az esemény **típusát** **áthaladásra** állítja *(* *’* *esem* *_* *id* *’* *=* *6)* .
 **Beállítja** az esemény **érkező** menetirányítói **szakasz**, érkező **von** **a** **l** és

esemény **irányát** .

`o` **Rendkívüli megállás** kezelése *(* *’* *VonatElorejelzes.erk* *_* *ido* *’* *=* *NULL* ***ÉS*** *a kapott*
*’* *UjErkIdo* *’* ***<>*** *NULL)* :

    - **Módosítja** a **’** **P** **_** **VTS** **’** tábla adatait:

     - A rekordnál **beállítja** az előrejelzett **érkezési** időt *(* *’* *erk* *_* *tenyido* *’* *=* *’* *UjErkIdo)*
**ÉS** az érkezési esemény „ **típusát** ” *(* *’* *erk* *_* *adat* *_* *jelzo* *’* *=* *„B* *”* *)* .

     - **Módosítja** a megállás **célja** értékét *(* *’* *vft_szh_megall_jelzo* *’* *)* :
 Ha 3     - „irányítói **áthaladás** forgalmi megállás **helyett** ” volt, akko r 0     
„forgalmi **megállás** ” lesz.
 Ha 4     - „irányítói **áthaladás** kereskedelmi megállás **helyett** ” volt, ak k o r

1           - „kereskedelmi **megállás** ” lesz.
 Egyébként 2     - „ **irányítói** rendkívüli **megállás** ” lesz.

    - **Módosítja** az **’** **MGM** **_** **TenyEsem** **’** tábla adatait *(az* *’* *mgm* *_* *teny* *_* *id* *’* *alapján)* :

     - Ha **nem volt** érkezési eseménye, akkor **létrehozza** az érkezési esemény
**rekordot** .
*(* *’* *esem* *_* *ido* *’* *=* *’* *UjErkIdo* *’* *,* *’* *esem* *_* *tipus* *’* *=* *'* *B* *'* *,* *’* *fsz* *_* *mod* *_* *ok* *’* *=* *’* *ModOk* *’* *.)*

     - **Megállapítja** az esemény **irányát**, az állomási **végpontot** és az érkező
irányú **vonal** *(* *’* *erk* *_* *vnl* *_* *id* *’* *)* és **menetirányítói** szakaszt *(* *’* *erk* *_* *mis* *_* *kod* *’* *)* .

     - Az **áthaladási** *(* *’* *esem* *_* *id* *’* *=* *6)* eseményt **indulásra** módosítja *(* *’* *esem* *_* *id* *’* *=* *2)* .

`o` **Érkezési** esemény **módosítása** :
Ha az **érkezési** **ÉS** az **új** érkezési idő **nem üres** *(* *’* *erk* *_* *ido* *’* ***ÉS*** *’* *UjErkIdo* *’* *nem NULL)*
**ÉS** az új érkezési idő **nem azonos** az eredeti érkezési idővel *(* *’* *erk* *_* *ido* *’* *<>*
*’* *UjErkIdo* *’* *)*, akkor:
    - A ’ **P_VTS** **’** táblába az új érkezési idő elmentésre kerül a *(* *’* *P* *_* *VTS.erk* *_* *tenyido* *’* *=*

*’* *’*
*UjErkIdo* *)* .
`o` Az **’** **MGM_TenyEsem** **’** táblában annál a rekordnál, ahol a szolgálati hely adatok
megfelelőek és az esemény érkezés az **új érkezési eseményidő** *(* *’* *esem* *_* *ido* *’* *=*
*’* *UjErkIdo)* és a **módosítás** oka *(* *’* *fsz* *_* *mod* *_* *ok* *’* *=* *’* *ModOk)* **mentésre** kerül.

`o` **Indulási** idő módosítása **ÉS** **új előrejelzés** készítés:
Ha az **eredeti** és az **új** indulási idő **nem azonos** *(* *’* *ind* *_* *ido* *’* *<>* *’* *UjIndIdo* *’* *)*, akkor
megállapítja az **’** **elteres** **’** mértékét ( *UjIndIdo* *’* *-* *’* *ind* *_* *ido* *’* *előhelyesen* ) **meghívásra**
kerül az usp_0202_ **updMenetvElorejelzes2** eljárás, amely elvégzi az új előrejelzés
készítését.

**Bemenő** adatok:

    - **’** **vft** **_** **id** **’**
    - **’** **vft_szh_index** **’**
-- **’’** **vekeszre** **_** **id** **’** **_** = **jelent** NULL **_** **ido** **’** = NULL

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 510/526|


      - **’** **vonatosszeallitas** **_** **id** **’** = NULL
      - **’** **torles** **_** **jelzo** **’** **=** ' False '
      - **’** **varhato** **_** **keses** **’** = ’ elteres ’
      - **’** **szemely** **_** **jelzo** **’** = NULL

      - **’** **mod** **_** **ok** **_** **kod** **’** = NULL
      - **’** **ir** **_** **ind** **_** **ido** **’** **=** NULL
      - **’** **ir** **_** **erk** **_** **ido** **’** **=** NULL

`o` Az ’ MGM _ TenyEsem. **mod_ok** ’ adatelembe bejegyzésre kerül a **’** **ModOk** **’** értéke.

`o` 100544 **Ellenőrzi**, hogy az előztetés **helye** **nem** lehet a menetvonal **kiindulási**
szolgálati helye ( ’ SzhId ’  ’ MGM_TenyEsem.szh_index = 1 **ÉS**
’ MGM_TenyEsem.vonat_sszam ’ = 1).
Ha az, akkor UC_05_51_ERR_HELYBOL_INDULO_VONAT hibaüzenetet ad
vissza.

`o` **Ellenőrzi**, hogy a menetvonalnak van  - e **előrejelzett eseménye** az adott szolgálati
helyre *(* *’* *VonatElorejelzes.erk* *_* *jelzo* *’* *VAGY* *’* *ind* *_* *jelzo* *’* *= „B* *”* *)* .
100977 Ha az adott ’ szh _ index ’ alapján az ’ erk _ jelzo ’ = „E ”, akkor az előző olyan
rekordnál ellenőrzi, ahol ’ Ha az szh _ index ’ ind ’ _- 1. jelzo ’ = „K ”’ mgm, akkor a következő olyan rekordnál ellenőrzi, ahol _ mv _ id ’ és az ’ szh _ id ’ azonos ÉS ’ szh _ index ’ =
’ Ha van, akkor mgm _ mv _ id ’ és az ' UC_01_51_ERR_TENYADAT_LETEZIK ’ szh _ id ’ azonos ÉS ’ szh _ index ’ = ’ szh '_ üzenetet ad.index ’ + 1. [100977 vége]
`o` **Ellenőrzi**, hogy a vonat **szerepel**  - e az adott szolgálati helyen **más** előztetésben,
keresztezésben vagy csatlakozásban *(MGM* *_* *TenyEsem.fsz* *_* *mod* *_* *ok* *’* *=* *4, 5, vagy 10)* .
      - Ha az fszüzenetet ad. _ mod _ ok ’ = 21, akkor UC_01_51_ERR_TOBB_ELOZTETES
      - Ha az fszüzenetet ad. _ mod _ ok ’ = 31, akkor UC_01_51_ERR_TOBB_KERESZTEZES
      - Ha UC_01_51_ERR_VONAT_MAR_CSATLAKOZASBAN üzenetet ad, ahol aaz fsz _ mod _ ok ’ = 10, akkor
{0} az érintett vonat száma.
`o` **Módosítja** a **’** **VonatElorejelzes** **’** táblában a menetvonal adatait:
      - 100907
Ha az új érkezési idő sem NULL:

      - Ha P _ VTS táblában levő esemény idő és az újeseményidő közötti eltérés a
küszöbérték rendszerparaméternél (nagyobb, akkor ’ UC _ 01 _ 51 _ ERR _ FSZ ’ forg _ KUSZOBERT _ szab _ kuszob ’’ hibaüzenetet a) abszolút érté dk . ben

      - Ha nem nagyobb, akkor az eltéréssel módosítja a kapott új érkezési idő
( ’ UjErkIdo ’ ) értékét (egyelőre a változóban).

      Ha az eredeti indulási idő és az új indulási idő sem NULL:

      - Ha P _ VTS táblában levő esemény idő és az újeseményidő közötti eltérés a
küszöbérték rendszerparaméternél (nagyobb, akkor ’ UC _ 01 _ 51 _ ERR _ FSZ ’ forg _ KUSZOBERT _ szab _ kuszob ’’ hibaüzenetet a) abszolút érté dk . ben

      - Ha nem nagyobb, akkor az eltéréssel módosítja a kapott új indulási idő
( ’ UjIndIdo ’ ) értékét (egyelőre a változóban). [ 100907 vége]
      - **’** **menetido** **_** **perc** **’** ( ’ vft _ id ’       - 1 rekordnál)

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** False




-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 511/526|


Ha **változott** az **érkezési** idő *(* *’* *erk* *_* *ido <>* *’* *UjErkIdo* *’* *)* VAGY az **áthaladási** idő
*(* *’* *ind* *_* *ido <>* *’* *UjIndIdo* *’* *)*, akkor az előző szolgálati helynél ( ’ vft _ id ’        - 1) módosítja
a **menetidő** értékét az eredeti és az új idő különbségével.
    - **’** **erk** **_** **ido** **’** = ’ UjErkIdo ’
    - **’** **erk** **_** **jelzo** **’** = „B ”
    - **’** **kapcs** **_** **mv** **_** **ido** **’** = nem kerül kitöltésre.
    - **’** **tartozkodas** **_** **perc** **’** = ha az ’ UjErkIdo ’ <> NULL, akkor az eredeti tartózkodási
idő.
    - **’** „ **megallirányítói** **_** **jelzo** rendkívüli megállás **’**     - ha az ’ UjErkIdo ” lesz. ’ <> NULL ÉS az ’ erk _ ido ’ = NULL, akkor 2         - **’** **mod** **_** **ok** **’** = ’ ModOk ’ .

`o` **Rendkívüli megállás** kezelése *(* *’* *VonatElorejelzes.erk* *_* *ido* *’* *=* *NULL* ***ÉS*** *a kapott*
*’* *UjErkIdo* *’* ***<>*** *NULL)* :

    - **Módosítja** a **’** **P** **_** **VTS** **’** tábla adatait:

     - A rekordnál **beállítja** az előrejelzett **érkezési** időt *(* *’* *erk* *_* *tenyido* *’* *=* *’* *UjErkIdo)*
**ÉS** az érkezési esemény „ **típusát** ” *(* *’* *erk* *_* *adat* *_* *jelzo* *’* *=* *„B* *”* *)* .

     - **Módosítja** a megállás **célja** értékét *(* *’* *vft_szh_megall_jelzo* *’* *)* :
 Ha 3     - „irányítói **áthaladás** forgalmi megállás **helyett** ” volt, akko r 0     
„forgalmi **megállás** ” lesz.
 Ha 4     - „irányítói **áthaladás** kereskedelmi megállás **helyett** ” volt, ak k o r

1           - „kereskedelmi **megállás** ” lesz.
 Egyébként 2     - „ **irányítói** rendkívüli **megállás** ” lesz.

    - **Módosítja** az **’** **MGM** **_** **TenyEsem** **’** tábla adatait *(az* *’* *mgm* *_* *teny* *_* *id* *’* *alapján)* :

     - Ha **nem volt** érkezési eseménye, akkor **létrehozza** az érkezési esemény
**rekordot** .
*(* *’* *esem* *_* *ido* *’* *=* *’* *UjErkIdo* *’* *,* *’* *esem* *_* *tipus* *’* *=* *'* *B* *'* *,* *’* *fsz* *_* *mod* *_* *ok* *’* *=* *’* *ModOk* *’* *.)*

     - **Megállapítja** az esemény **irányát**, az állomási **végpontot** és az érkező
irányú **vonal** *(* *’* *erk* *_* *vnl* *_* *id* *’* *)* és **menetirányítói** szakaszt *(* *’* *erk* *_* *mis* *_* *kod* *’* *)* .

     - Az **áthaladási** *(* *’* *esem* *_* *id* *’* *=* *6)* eseményt **indulásra** módosítja *(* *’* *esem* *_* *id* *’* *=* *2)* .

`o` **Érkezési** esemény **módosítása** :
Ha az **érkezési** **ÉS** az **új** érkezési idő **nem üres** *(* *’* *erk* *_* *ido* *’* ***ÉS*** *’* *UjErkIdo* *’* *nem NULL)*
**ÉS** az új érkezési idő **nem azonos** az eredeti érkezési idővel *(* *’* *erk* *_* *ido* *’* *<>*
*’* *UjErkIdo* *’* *)*, akkor:
    - A ’ **P_VTS** **’** táblába az új érkezési idő elmentésre kerül a *(* *’* *P* *_* *VTS.erk* *_* *tenyido* *’* *=*

*’* *’*
*UjErkIdo* *)* .
`o` Az **’** **MGM_TenyEsem** **’** táblában annál a rekordnál, ahol a szolgálati hely adatok
megfelelőek és az esemény érkezés az **új érkezési eseményidő** *(* *’* *esem* *_* *ido* *’* *=*
*’* *UjErkIdo)* és a **módosítás** oka *(* *’* *fsz* *_* *mod* *_* *ok* *’* *=* *’* *ModOk)* **mentésre** kerül.

`o` **Indulási** idő módosítása **ÉS** **új előrejelzés** készítés:
Ha az **eredeti** és az **új** indulási idő **nem azonos** *(* *’* *ind* *_* *ido* *’* *<>* *’* *UjIndIdo* *’* *)*, akkor
megállapítja az **’** **elteres** **’** mértékét ( *UjIndIdo* *’* *-* *’* *ind* *_* *ido* *’* *előhelyesen* ) **meghívásra**
kerül az usp_0202_ **updMenetvElorejelzes2** eljárás, amely elvégzi az új előrejelzés
készítését.

**Bemenő** adatok:

    - **’** **vft** **_** **id** **’**
    - **’** **vft_szh_index** **’**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 512/526|


      - **’** **ve** **_** **id** **’** = NULL
      - **’** **keszre** **_** **jelent** **_** **ido** **’** = NULL
      - **’** **vonatosszeallitas** **_** **id** **’** = NULL
      - **’** **torles** **_** **jelzo** **’** **=** ' False '
      - **’** **varhato** **_** **keses** **’** = ’ elteres ’
      - **’** **szemely** **_** **jelzo** **’** = NULL

      - **’** **mod** **_** **ok** **_** **kod** **’** = NULL
      - **’** **ir** **_** **ind** **_** **ido** **’** **=** NULL
      - **’** **ir** **_** **erk** **_** **ido** **’** **=** NULL

`o` Az ’ MGM _ TenyEsem. **mod_ok** ’ adatelembe bejegyzésre kerül a **’** **ModOk** **’** értéke.

- **Elmenti** az ad at okat az **MGM_ElozKeresztez** táblába:
`o` **’** **kapcs** **_** **mv** **_** **id** **’**  - A kapcsolat belső azonosítója. Automatikusan a következő
sorszám.
`o` **’** **szh** **_** **id** **’**  - az előztetés/keresztezés szolgálati helye. = ’ SzhId ’ .
`o` **’** **elso** **_** **mv** **_** **id** **’**  - az elsődleges menetvonal azonosítója. Az a ’ MenetvId ’, ahol a
’ ModOk ’ = 21 vagy 31.
`o` **’** **elso** **_** **teny** **_** **id** **’**  - az elsődleges menetvonal érkezési/áthaladási MGM tény esemény
azonosítója.
`o` **’** **masod** **_** **mv** **_** **id** **’**  - a másodlagos menetvonal azonosítója. Az a ’ MenetvId ’, ahol a
’ ModOk ’ = 22 vagy 32.
`o` **’** **masod** **_** **teny** **_** **id** **’**  - a másodlagos menetvonal érkezési MGM tény esemény
azonosítója.
`o` **’** **masod** **_** **ind** **_** **ido** **’**  - egyelőre nem használt.
`o` **’** **kapcs** **_** **tipus** **’**  - Kapcsolat típus (21  - előztetés, függetlenül a menetvonal szerepétől
VAGY 31    - keresztezés, függetlenül a menetvonal szerepétől).
`o` **’** **kovetesi** **_** **ido** **’**  - Az elsődleges és a másodlagos menetvonal érkezési/indulási ideje
közötti különbség.
      - Ha a **’** **forg** **_** **szab** **_** **muv** **_** **kod** = 20, akkor a két vonat indulási ideje közötti
különbség,
      - ha **’** **forg** **_** **szab** **_** **muv** **_** **kod** = 30, akkor az elsődleges vonat érkezési/áthaladási és
a másodlagos vonat indulási ideje közötti időkülönbség.
*(Ennek kell megmaradni az elsődleges és a másodlagos vonat indulási/áthaladási ideje*
*között, ha az elsődleges vonat előrejelzett indulási/áthaladási ideje a közlekedése miatt*
*későbbi idő lesz, akkor ezzel kell eltolni a másodlagos vonat előrejelzett indulási idejét.)*
`o` **’** **hiba** **_** **jelzo** **’**  - Az elsődleges és a másodlagos menetvonalat pulzáltatni kell jelző.
Ha a **tényadatok** miatti előrejelzések módosítása során az elsődleges vonat
érkezési/áthaladási ideje korábbi lesz, mint a második vonat érkezési ideje, akkor
TRUE lesz. Ez alapján lesz pulzáltatva a két menetvonal.

- 88995 Az eljárás az előrejelzés **változásokra** vonatkozóan, az **érintett menetvonalak**
**pulzálásának** vezérléséhez, alábbi műveleteket végzi:

`o` Minden forgalom szabályozási műveletben érintett eseményre vonatkozóan külön
rekordot hoz létre a **MGM_ForgMuvErintettMenetvonal**, ha még nem létezik az
adott szolgálati helyre rekord.
**A rögzítendő adatok:**
      - ’ id ’       - belső azonosító, a következő sorszám.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** False



-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 513/526|


      - ’ abra _ id ’       - A bemenő adatokban kapott ábra belső azonosítója ( ’ AbraId ’ )
      - ’ mgm _ mv _ id ’       - Az érintett menetvonal azonosítója
      - ’ szh _ id ’       - Az esemény szolgálati helye.
      - ’ mgm _ teny _ id ’       - Esemény MGM tény azonosítója.
      - ’ fsz _ mod _ ok ’       - Az első eseményhez kapcsolódó ’ fsz _ mod _ ok ’

`o` Az összes esemény **regisztrációja** után az eljárás **ellenőrzi**, hogy az érintett
menetvonal hátralévő útvonalán van     - e olyan másik ábra, ahol már volt irányítói
módosítás *(létezik* *-* *e* *már* *erre* *a* *menetvonalra* *rekord* *az*
*MGM* *_* *ForgMuvErintettMenetvonal táblában valamely hátralévő ábrára vonatkozóan)* .
Amennyiben igen, akkor ezeket pulzálandó menetvonalként jelöli meg az érintett
ábrára vonatkozólag (ha ez még nem lenne megjelölve), azaz új rekordot rögzít az
**MGM_PulzaloMenetvonal** táblában az alábbi adatokkal:
      - ’ abra _ id ’       - Pulzálás kapcsán érintett ábra belső azonosítója.
      - ’ mgm _ mv _ id ’       - az érintett menetvonal belső azonosítója.
      - ’ kivalto _ ok ’ = 1       - „Irányítói beavatkozás ” .

- #88986 ---- A két m ’’’’ kivaltoletrehozastudomasultorles e_ netvonalat érintő forgalmi szabályozási műveleteknél (vonat előztetés, ido _ vft ’___ ido = vetelid NULL. ’’==_ NULL. aktuális időpont.ido ’ [88995 vége] = NULL.
találkozás), mindkét érintett menetvonalról az irányító által módosított eseményekkel,
naplóbejegyzéseket készít az MGM _ EsemenyNaplo táblába a következők szerint:

`o` Az elsődleges menetvonalról (előztetés esetén ’ ModOk ’ = 21 az előre küldendő,
keresztezés ’ ModOk ’ = 31 esetén a bevárandó vonatról) az előztetés, illetve a
keresztezés helyével és az irányító által módosított eseményekkel készít
naplóbejegyzéseket. Eseményenként külön naplóbejegyzéseket készít. Amennyiben
esemény nem módosult, akkor esemény nélkül készít bejegyzés a menetvonalról:
      - Napló belső azonosító (mgm_esemnapl_id) = automatikus

      - =
PASS2 felhasználó belső azonosító (pass2userid) A műveletet végző
felhasználó azonosítója (Pass2UserId)
      - Rögzítés időpontja (rogz _ idopont) = Aktuális idő

      - =
Ábra belső azonosítója (abraazonosítója (AbraId) _ id) A bemenő adatokban kapott ábra belső
      - Objektum típusa (objektum _ tipus) = 3 – Menetvonal
      - Objektum belső azonosító (objektumazonosítója (MenetvId) _ id) = Az adott menetvonal belső
      - Művelet típusa (muvelet _ tipus) = M – Módosítás

      - =
Tevékenység típus kódja (tevekenyseg_tipus_kod) Módosítás oka (ModOk)

      - 21 – Előztetés       - elsődleges menetvonalnál

      - 31 – Keresztezés       - elsődleges menetvonalnál
      - Szolgálati hely belső azonosítója (szh_id) = Az előztetés illetve a keresztezés
szolgálati helye (SzhId)
      - Esemény típusa (esem _ id) = Az adott esemény típusa
(MGM_TenyEsem.esem_id)

      - NULL: Ha nem módosult esemény

      - 1: Érkezés esetén

      - 2: Indulás esetén

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 514/526|



      - 6: Áthaladás esetén

      - =
Esemény ideje (esem _ ido)

      - NULL: Ha nem módosult esemény

      - Az adott esemény új ideje (A felhasználó által rögzített idő)
      - Objektum adatai (objektum_adat) (JSON) = (a mező nevét és értékét
tartalmazza) =

      - Kapcsolódó másodlagos menetvonal belső azonosítója (kapcs_mgm_mv_id

`o` A másodlagos menetvonalról (előztetés esetén ’ ModOk ’ = 22 az előzendő,
keresztezés ’ ModOk ’ = 32 esetén a várakozó vonatról) az előztetés, illetve a
keresztezés helyével és az irányító által módosított eseményekkel készít
naplóbejegyzéseket eseményenként külön külön:

      - =
Tevékenység típus kódja (tevekenyseg_tipus_kod) Módosítás oka (ModOk)

      - 22 – Előztetés       - másodlagos menetvonalnál

      - 32 – Keresztezés       - másodlagos menetvonalnál
      - Szolgálati hely belső azonosítója (szh_id) = Az előztetés, illetve a keresztezés
szolgálati helye (SzhId)
      - Esemény típusa (esem _ id) = Az adott esemény típusa
(MGM_TenyEsem.esem_id)

      - 1: Érkezés esetén

      - 2: Indulás esetén

      - =
Esemény ideje (esem _ ido) Az adott esemény új ideje (A felhasználó által
rögzített idő)
      - Objektum adatai (objektum_adat) (JSON) = (a mező nevét és értékét
tartalmazza) =

      - Kapcsolódó elsődleges menetvonal belső azonosítója (kapcs_mgm_mv_id

      A többi mezőt az elsődleges menetvonalnál leírtak szerint tölti ki az eljárás.

- Ahhoz, hogy az **MGM_EsemenyNaplo** táblába beírt naplóbejegyzések átadásra

              kerüljenek a PBI nak, a következő módon rekordonként regisztrációt végez a PbiReg
táblába:

`o` pbi_tipus: ” MGM_Naplo ”

`o` pbi_query_param1: MGM_EsemenyNaplo. mgm_esemnapl_id

`o` pbi_query_param2: NULL

`o` pbi_kuldes_szamlalo: NULL

`o` pbi_create _ timestamp: Aktuális idő
#88986vége

- A men et vonalak foglalásának feloldásához meghívja az
usp _ 0151 _ setMenetvForgSzabFoglalas eljárást menetvonalanként.
**Bemenő** adatok:
`oo` ’’ MenetvonalIdListaTerMunkahelyId ’ =’=’ a kapott MunkahelyId ’ mgm ’ . _ mv _ id ’ adatok vesszővel elválasztva.
`o` ’ AbraId ’ = ’ AbraId ’ .
`o` ’ FoglalasJelzo ’ = ' E '  - foglalás elengedése.
`o` ’ ModositasOk ’ = NULL.
`o` ’ epaiParamXmlDoc ’ = EpaiParamXmlDoc.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 515/526|


**Kimenő adatok**

Nincsenek.

**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincs.

**Rendszerüzenetek**







|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|típusa|
|---|---|---|---|
|Az adott munkahely a felhasználó által van lefoglalva.|UC_01_51_ERR_ERVENYT ELEN_FOGLALAS „151005: Érvénytelen munkahely foglalás, az adatok mentése sikertelen!”|uf_checkMunkahelyFogl függvény|Hiba|
|Ha a menetvonal más által foglalt (’MenetvId’  ’MunkahelyId’ <> ’MGM_Menetvonal.t er_munkahely_id’)|'UC_01_51_ERR_MENETV_ FOGLALT'|TE|Hiba|
|A menetvonalhoz már tartozik tényadat az adott szolgálati helyre.|'UC_01_51_ERR_TENYADA T_LETEZIK'|TE|Hiba|
|Előztetés/keresztezés esetén, ha valamelyik menetvonal már szerepel előztetésben az adott szolgálati helyen|UC_01_51_ERR_TOBB_ELO ZTETES 151037; "A vonat a szolgálati helyen már szerepel előztetésben!"|TE|Hiba|
|Előztetés/keresztezés esetén, ha valamelyik menetvonal már szerepel keresztezésben az adott szolgálati helyen|UC_01_51_ERR_TOBB_KER ESZTEZES; 151038; "A vonat a szolgálati helyen már szerepel vonattalálkozásban!"|TE|Hiba|
|Előztetés/keresztezés esetén, ha valamelyik menetvonal már szerepel|UC_01_51_ERR_VONAT_M AR_CSATLAKOZASBAN; 151030; "A {0} vonathoz már tartozik csatlakozás a||Hiba|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 516/526|



|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|típusa|
|---|---|---|---|
|csatlakozásban az adott szolgálati helyen|szolgálati helyen." üzenetet ad, ahol a {0} az érintett vonat száma.|||


**Érintett adattáblák/kódtáblák**

|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|#88986MGM_EsemenyNaplo|MGM objektum események napló|
|#88986PbiReg|Regisztrációs tábla PBI-nak adatátadáshoz|


|Rendszerparaméterek|Col2|Col3|
|---|---|---|
|Paraméter azonosítója|Paraméter megnevezése|Kezdeti beállítás|
||||

##### **3.58 S_0151_57 – Értesítésben érintett (pulzáló) menetvonalak lekérdezése** **(PulzaloMenetvonalakQuery) ( u s p _0 151 _selPulzaloMenetvonalak) [#88995]**

**Szolgáltatás feladatai**

Adott ábrán talál h ató, értesítésben érintett, pulzáló módon megjelenítendő menetvonalak
lekérdezése.

**Bemenő adatok**

  - Ábra belső azonosítója (AbraId)

**Működés**

A szerviz a kapott A braId - val meghívja az **usp_0151_selPulzaloMenetvonalak** eljárást, ami
az adott ábrán t a lálható azon menetvonalakat keresi, melyeket az irányítók felé
megkülönböztetett m ódon kell megjeleníteni. Az eljárás az **MGM_PulzaloMenetvonal**
táblából gyűjti össze azokat a menetvonalakat, melyek a bemenő paraméterben kapott ábrára
vonatkoznak és még nincsenek tudomásul véve (tudomasul_vetel_ido = NULL) és nem
töröltek (torles_ido = NULL).

**Kimenő adatok**

{Lista}:

  - Menetvonal id (MenetvId)

**Interfészek**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 517/526|


**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**


|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_PulzaloMenetvon al|Pulzáló menetvonalak|
|||
|||


**Rendszerparaméterek**



Nincs

Nincs


**Batch modulok egyéb adatai**

##### **3.59 S_0151_58 – Előrejelzés változásról szóló értesítések lekérdezése** **(EloreJelzesValtAdatokQuery)** **(usp_0151_selElorejelzesValtoz a sA d ato k) [#88996]**

**Szolgáltatás feladatai**

Adott ábrán találhat ó, előrejelzés változás miatt keletkező értesítések adatainak lekérdezése.

**Bemenő adatok**

  - Ábra belső azonosítója (AbraId)

**Működés**

A szerviz a kapott AbraId - val meghívja az **usp_0151_selElorejelzesValtozasAdatok** eljárást,
mely az adott ábrá r a vonatkozó, előrejelzés változásról szóló értesítések adatait kérdezi le. Az
eljárás az **MGM_** **P** **ulzaloMenetvonal** táblából keresi ki azokat a rekordokat, melyek:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 518/526|



  - A bemenő paraméterben kapott ábr ár a v onat k oz nak

  - Nincsenek tudomásul véve ( tudom asul_vetel_ido = NULL) és nem töröltek

(torles_ido = NULL)

Az eljárás ezután k i o lvassa a kimenő adatoknál meghatározott adatokat.

**Kimenő adatok**

{Lista}:

  - Menetvonal id (MenetvId)

  - Menetvonal azonosító (MenetvAzon)

  - Vonatazonosítók (VonatAzon) – T öbb ér in tett vonatazonosító is lehet, ezek

pontosvesszővel elválasztva kerülnek át adá sr a

  - Kiváltó ok (KivaltoOk): Lehetsé g es ér tékek

`o` 1 – „Irányítói beavatkozás ”

`o` 2 – „Megszűnt előrejelzés ”

`o` 3 – „Előztetés nem teljesül ”

`o` 4 – „Keresztezés nem teljesül ” [#88979]

  - Kiváltó vonatazonosító (KivaltoVonat Azon)

  - Létrehozás ideje (LetrehozIdo)

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**



|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_PulzaloMenetvon al|Pulzáló menetvonalak|


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 519/526|


|P_VFT|Vonatforgalmi terv adatok|
|---|---|
|V_IGF|Igény fejadatok|


**Rendszerparaméterek**

Nincs

**Batch modulok egyéb adatai**

Nincs
##### **3.60 S_0151_59 – Előrejelzés változás tudomásul vétel** **(EloreJelzesValtTudomasulvete l C o mman d ) ** **(usp_0151_setElorejelzesValtoz a sA d ato k) [#88996]**

**Szolgáltatás feladatai**

Adott ábrára vonat k ozó, menetvonal szintű előrejelzés változások tudomásul vételére szolgál.

**Bemenő adatok**

  - Ábra belső azonosítója (AbraId)

  - Menetvonal belső azonosító li st a (M ene t v I dL ista) – pontos vesszővel elválasztott

MenetvonalId    - k

**Működés**

A szerviz a klienst ő l kapott adatokkal meghívja az **usp_0151_setElorejelzesValtozasAdatok**
eljárást, mely a k apott AbraId és MenetvId - k alapján tudomásul vettre állítja az érintett
rekordokat az **MG** **M** **_PulzaloMenetvonal** táblában, azaz az aktuális időpontot rögzíti a
tudomasul_vetel_id o mezőben.

**Kimenő adatok**

Nincs

**Interfészek**

Nincs

**Jelentések**

Nincs

**Email küldés**

Nincs

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 520/526|


**Rendszerüzenetek**

Nincs

**Érintett adattáblák/kódtáblák**


|Tábla / kódtábla azonosító|Tábla / kódtábla megnevezés|
|---|---|
|MGM_PulzaloMenetvon al|Pulzáló menetvonalak|
|||


**Rendszerparaméterek**



Nincs

Nincs


**Batch modulok egyéb adatai**

##### **3.61 [88976] S_0151_60 - Másik pályán közlekedé s r ö gzí té s e** **(MGM_MasPalyaMgmCommand) (core.usp_0151_setMasPal y a Mg m)**

**Szolgáltatás feladatai**

Egy menetvonal m ás ik pályán történő tervezett közlekedési adatainak mentése. A szolgáltatás
az adatok mentését a klienstől kapott adatokkal meghívott core.usp_0151_setMasPalyaMgm
eljáráson keresztü l v égzi.

**Bemenő adatok**

- ' MunkahelyId ' - a munkahely belső azonosítója.

- ' AbraId ' - az áb r a belső azonosítója.

- ’ MemetvId ’ - a menetvonal MGM azonosítója.

- ’ SzhId ’ - a másik pályára közlekedés kezdő szolgálati helyének belső azonosítója.

- ’ SzhIndex ’ - a másik pályára közlekedés kezdő szolgálati helyének menetvonalon belüli
sorszáma.

- ' MppId ' - a m ási k pálya belső azosítója.

- epaiParamXm l Doc.

**Az eljárás működése**

- **Meghívja** az **uf_checkMunkahelyFogl** függvényt, amely ellenőrzi, hogy az adott
**munkahely** a felhasználó által van lefoglalva.
`o` **Bemenő** adatok:

      - **’** **Pass2UserId** **’**

      - **’** **AbraId** **’**

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 521/526|


Ha a függvény **’** **FALSE** **’** értéket ad vissza, akkor az eljárás a kliensnek
UC_01_51_ERR_ERVENYTELEN_FOGLALAS **üzenetet** ad vissza, nem történik meg
a módosítás.

- Ellenőrzi, hog y a másik pályán közlekedés kezdő szolgálati helyére **van** **-** **e tény**
indulási/áthaladási esemény rögzítve (az indulási/áthaladási esemény tíusa ’ N ’ ).
Ha van, akkor ' UC_01_51_ERR_TENYADAT_LETEZIK ' üzenetet ad vissza, nem
történik meg a módosítás.

- Ellenőrzi, ho g y a másik pályán közlekedés kezdő szolgálati helyére van - e lemondott,
törölt tervezett indulási/áthaladási tény esemény rögzítve (az indulási/áthaladási esemény
tíusa ’ L ’ vagy ’ T ’ ).
Ha van, akkor ' UC_01_51_ERR_VONAT_ELOREJEZES_MEGSZUNT ' üzenetet ad
vissza, nem történik meg a módosítás.

- Ellenőrzi, hog y a kapott új esemény idő és az esetlegesen korábbi eseményhez rögzített
tényadat miatt újra számolt előrejelzett eseményidő közötti eltérés nem nagyobb, mint a
**’** **forg** **_** **szab** **_** **kuszob** **’** **rendszerparaméter** értéke:
`o` A kapott eredeti esemény idő és az aktuális előrejelzett esemény idő különbsége, ha
nem 0, akkor abszolút étékben megvizsgálja, hogy az eltérésük határozottan
nagyobb    - e, mint a rendszerparaméter értéke. Ha igen, akkor
’ UC_01_51_ERR_FSZ_KUSZOBERT ’ hibát ad.
`o` Ha nem, akkor az új esemény időhöz hozzáadja az eredeti esemény idő és az aktuális
előrejelzett esemény idő különbségét és azzal korrigálja (előjel helyesen) a kapott új
eseményidőt.

- Ha az adott sz o lgálati helynél a P _ VTS.vts _ mpp _ jelzo ’ = False, akkor az adott szolgálati
helytől (szh _ id és szh _ index) a visszatérés helyéig módosítja a VonatElorejelzes, a
P _ VTS és az MGM _ TenyEsem táblák adatait a következők szerint:
`o` Törli a kezdő és a visszatérés helye szolgálati helyek közötti szolgálati helyek
adatait.
`o` A kezdő szolgálati helyhez beállítja a P _ VTS.vts _ mpp _ jelzo ’ = „i ” értéket.
`o` A visszatérő szolgálati helyhez beállítja a P _ VTS.vts _ mpp _ jelzo ’ = „e ” értéket.
`o` A lehetséges másik pálya szolgálati helyeivel új rekordokat vesz fel, ahol minden új
szolgálati helyhez:

      áthaladás esemény kerül rögzítésre,
      - egyik szolgálati hely sem lesz kötelezően naplózó (a ’ P _ VTS.szh _ for _ jelzo ’ =
false lesz),

      a terv és tényidők (előrejelzés idők) a kezdő és a visszatérő szolgálati helyek
közötti menettartam és a szolgálati helyek távolsága alapján kerülnek elosztásra.

      Beállítja a menetirányító szakasz (misesemények szolgálati hely végpontját. _ kod) kódokat, a vonal kódokat és az

      A bejárat iránya minden új szolgálati helynél biztosított szolgálati hely lesz.

      Ha a kieső szakaszon volt más forgalomszabályozási művelet vagy egyéb
sebesség korlátozás, akkor azok „törlésre ” kerülnek és a másik pályáról kilépő
szolgálati hely eredeti P _ VTS érkezési/áthaladási idejével számolva „osztja le ” a

menettartamot.

      Ha a másik pályáról kilépő szolgálati helyen módosul az előrejelzett
indulási/áthaladási idő, akkor újraszámolja a további előrejelzést, ehhez
meghívja az ’ usp _ updMenetvElorejelzes2 ’ eljárást.
Bemenő adatok:

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 522/526|



      - ’ vft_id ’ = ’ vft_id ’

      - ’ vft_szh_index ’ = ’ uj_veg_szh_index ’

      - ’ ve_id ’ = NULL

      - ’ keszre_jelent_ido ’ = NULL,

      - ’ vonatosszeallitas_id ’ = NULL,

      - ’ torles_jelzo ’ = ' False ',

      - ’ varhato_keses ’ = ’ varhato_keses ’,

      - ’ szemely_jelzo ’ = NULL,

      - ’ mod_ok_kod ’ = NULL,

      - ’ ir_ind_ido ’ = NULL,

      - ’ ir_erk_ido ’ = NULL,

      - ’ forg_szab_muv_kod ’ = 14.

MGM _ EsemenyNaplo táblába a következők szerint:
      - Napló belső azonosító (mgm_esemnapl_id) = automatikus

      - =
PASS2 felhasználó belső azonosító (pass2userid) A műveletet végző
felhasználó azonosítója (Pass2UserId)
      - Rögzítés időpontja (rogz _ idopont) = Aktuális idő

      - =
Ábra belső azonosítója (abraazonosítója (AbraId) _ id) A bemenő adatokban kapott ábra belső
      - Objektum típusa (objektum _ tipus) = 3 – Menetvonal
      - Objektum belső azonosító (objektum _ id) = Az adott menetvonal belső
azonosítója (MenetvId)
      - Művelet típusa (muvelet _ tipus) = M – Módosítás
      - Tevékenység típus kódja (tevekenyseg_tipus_kod) = 14       - Más pályán közlekedés
      - Szolgálati hely belső azonosítója (szh_id) = Más pályán közlekedés kezdő
szolgálati helye (SzhId)
      - Esemény típusa (esem _ id) = NULL
      - Esemény ideje (esem _ ido) = NULL
      - Objektum adatai (objektum_adat) (JSON) = (minden adatnál a mező nevét és
értékét tartalmazza) =

      - Más pályán történő közlekedés kezdő szolgálati helyének indexe
(szhtol_index)

      - Másik pályához tartozó vonal a belső azonosítója (vonalra_id)

`o` Ahhoz, hogy az **MGM_EsemenyNaplo** táblába beírt naplóbejegyzések átadásra

                kerüljenek a PBI nak, a következő módon rekordonként regisztrációt végez a PbiReg
táblába:

      - pbi_tipus: ” MGM_Naplo ”

      pbi_query_param1: MGM_EsemenyNaplo. mgm_esemnapl_id

      pbi_query_param2: NULL

      pbi_kuldes_szamlalo: NULL
      - pbi_create _ timestamp: Aktuális idő [#88986vége]

- Ha az adott szo l gálati helynél a P _ VTS.vts _ mpp _ jelzo ’ = True, akkor az adott szolgálati
helytől a visszatérés helyéig visszaállítja az eredeti adatokat a menetrendi adatok alapján.

- Újra generálja az elemi szakaszokat (Pés az új indexek miatt), K _ VVE (szh _ indexek miatt), nyíltvonali esemény táblát is. _ VESZ), a menetvonal összeállítás táblát (az szh - k

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


**törölt:** NULL,

**törölt:** <#>¶


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 523/526|


**Kimenő adatok**

  
**Interfészek**

Nincsenek.

**Jelentések**

Nincsenek.

**Email küldés**

Nincs.






|Rendszerüzenetek|Col2|Col3|Col4|
|---|---|---|---|
|Ellenőrzések leírása (HA)|Hibaüzenet (AKKOR)|Üzenetet előállító réteg|Hibaüzenet típusa|
|Ha a vonatnak van az adott szolgálati helyre rögzítve tény indulási vagy áthaladási eseménye|'UC_01_51_ERR_TENYADAT_LE TEZIK'|tárolt eljárás|hiba|
|Nem létezik (törölték a készre jelentését, le lett lemondva) az előrejelzés|'UC_01_51_ERR_VONAT_ELORE JEZES_MEGSZUNT'|tárolt eljárás|hiba|


|Érintett adattáblák|Col2|
|---|---|
|Tábla azonosító|Tábla / kódtábla megnevezés|
|MGM_TenyEsem|MGM tényesemények|
|P_VTS|állomási vonatforgalmi terv adatok|
|VonatElorejelzes|Vonat előrejelzés adatok|


**Rendszerparaméterek**

Nincsenek.

MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 524/526|

#### **4 Jogosultságkezelés **





|Műveletek|Col2|
|---|---|
|Művelet azonosítója|Leírás/Tevékenység megnevezése|
|OP_0151_MGMMegjelenit|Menetvonalak grafikus megjelenítési lehetősége|
|OP_0151_StilusVonalOsszeren del|Előre definiált stílus és vonalkészlet összerendelése|
|OP_0151_StilusVonalOsszeren del|Választható vonalak választólista megjelenése|
|OP_0151_MGMIranyito|Irányítói (szerkesztő) üzemmód lehetősége|
|OP_0151_MGMIranyitoiSzove gMegtekint|Irányítók által rögzített szövegek megtekintése|
|OP_0151_MGMMefiMerafiRo gzit|MEFI/MERÁFI – Menetengedély adatok rögzítése|


**Vezérlőelemek – Műveletek**



|Ablakazonosító|Szabályozott vezérlőelem|Művelet azonosítója|
|---|---|---|
|A_0151_04|<Stílust ment> nyomógomb|OP_0151_StilusVonalOsszere ndel|
|A_0151_04|„Választható vonalak” választólista megjelenése|OP_0151_StilusVonalOsszere ndel|
||||
||||
||||
||||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 525/526|

#### **5 Technikai tervezési adatok **
##### **5.1 Komponens diagram **


|Komponens leltár|Col2|Col3|
|---|---|---|
|Név|Típus (batch, web szerviz, windows szerviz, tárolt eljárás, ablak)|Leírás|
||||
||||
||||

##### **5.3 Szerviz - tárolt eljárás – szolgáltatás összerendelés **




|A szerviz metódusainak megnevezése|Hívott tárolt eljárás|Megvalósított szolgáltatás|
|---|---|---|
||||
||||
||||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

|MGM – UC_01_51 Menetvonalak grafikus megjelenítése|Col2|Azonosító: UC_01_51|
|---|---|---|
|Készítette/módosította:|Változat: 1.0|Oldal: 526/526|

#### **6 Kapcsolódó modulok dokumentumhivatkozásai **

|Modul azonosító|Dokumentumra mutató hivatkozás|
|---|---|
|K_043|Közös rendszerszolgáltatások - All Documents (mav-szk.hu)|
|||


MÁV Szolgáltató Központ Zrt. Székhely: 1087 Budapest, Könyves Kálmán körút 54-60.

Tel.: 36 1 457 9300 Fax: 36 1 457 9500 www.mav-szk.hu


-----

